webpackJsonp([1],{"+2f+":function(e,t,i){"use strict";i("aGth");t.a={name:"Login",data:function(){return{logining:!1,ruleForm:{account:"",checkPass:""},rules:{account:[{required:!0,message:"请输入账号",trigger:"blur"}],checkPass:[{required:!0,message:"请输入密码",trigger:"blur"}]},checked:!0}},mounted:function(){this.autoLogin()},methods:{rememberMe:function(e){1==$(".el-checkbox input[type='checkbox']").is(":checked")?(console.log(e),console.log(this.ruleForm.account),console.log(this.ruleForm.checkPass),localStorage.setItem("user",this.ruleForm.account),localStorage.setItem("pwd",this.ruleForm.checkPass)):localStorage.clear()},autoLogin:function(){var e=localStorage.getItem("user"),t=localStorage.getItem("pwd");this.ruleForm.account=e,this.ruleForm.checkPass=t},loginSys:function(){1==$(".el-checkbox input[type='checkbox']").is(":checked")&&(localStorage.setItem("user",this.ruleForm.account),localStorage.setItem("pwd",this.ruleForm.checkPass)),this.$router.push("/menu"),console.log("login")}}}},"+BTi":function(e,t){},"+Rdb":function(e,t){},"/bpg":function(e,t){},"1Fey":function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"parent scroll_style"},[i("div",{staticClass:"change"}),e._v(" "),i("div",{staticClass:"stable"},[i("el-form",{ref:"ruleForm",staticClass:"login-container",attrs:{model:e.ruleForm,rules:e.rules,"status-icon":!0}},[i("h1",{staticClass:"title"},[e._v("用户登录")]),e._v(" "),i("el-form-item",{attrs:{prop:"account"}},[i("el-input",{attrs:{type:"text","auto-complete":"off",placeholder:"账号"},model:{value:e.ruleForm.account,callback:function(t){e.$set(e.ruleForm,"account",t)},expression:"ruleForm.account"}})],1),e._v(" "),i("el-form-item",{attrs:{prop:"checkPass"}},[i("el-input",{attrs:{type:"password","auto-complete":"off",placeholder:"密码"},model:{value:e.ruleForm.checkPass,callback:function(t){e.$set(e.ruleForm,"checkPass",t)},expression:"ruleForm.checkPass"}})],1),e._v(" "),i("el-checkbox",{staticStyle:{"margin-bottom":"30px","margin-left":"270px"},on:{change:function(t){e.rememberMe("123")}},model:{value:e.checked,callback:function(t){e.checked=t},expression:"checked"}},[e._v("记住我")]),e._v(" "),i("el-form-item",{staticStyle:{width:"100%"}},[i("el-button",{staticStyle:{width:"100%",height:"40px",color:"#ffffff"},attrs:{type:"primary",loading:e.logining},on:{click:function(t){e.loginSys()}}},[e._v("登录")])],1)],1)],1),e._v(" "),i("div",{staticClass:"change"})])},o=[],r={render:n,staticRenderFns:o};t.a=r},"1MB3":function(e,t){},"2jWa":function(e,t,i){"use strict";var n=i("VHFQ"),o=i("xyVL"),r=i("WSFg"),a=i("h3by");t.a={name:"menuList",data:function(){return{}},components:{headerCom:n.a,singleModule:o.a,singleblock:r.a,singleTask:a.a},methods:{}}},"31YF":function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("header-com"),e._v(" "),i("div",{staticClass:"scrollBox wrapper"},[i("div",[i("div",{staticClass:"itemTitle"},[e._v("\n          任务管理\n      ")]),e._v(" "),i("div",{staticClass:"everySpc"},[i("single-Module",{attrs:{option:"recode"}}),e._v(" "),i("single-Module",{attrs:{taskTitle:"任务重转",option:"retask"}}),e._v(" "),i("single-Module",{attrs:{taskTitle:"云端同步"}}),e._v(" "),i("single-Module",{attrs:{taskTitle:"任务重转"}}),e._v(" "),i("single-Module",{attrs:{taskTitle:"数据恢复"}}),e._v(" "),i("single-Module",{attrs:{taskTitle:"废弃任务"}}),e._v(" "),i("single-Module",{attrs:{taskTitle:"任务加锁"}})],1)]),e._v(" "),i("div",{staticStyle:{"margin-top":"20px"}},[i("div",{staticClass:"itemTitle"},[e._v("\n        统计信息\n      ")]),e._v(" "),i("div",{staticClass:"everySpc"},[i("singleblock"),e._v(" "),i("singleblock",{attrs:{blockname:"代码重载"}}),e._v(" "),i("singleblock",{attrs:{blockname:"任务恢复"}}),e._v(" "),i("singleblock",{attrs:{blockname:"本地上传"}}),e._v(" "),i("singleblock",{attrs:{blockname:"任务加锁"}})],1)]),e._v(" "),i("div",{staticStyle:{"margin-top":"20px"}},[i("div",{staticClass:"itemTitle"},[e._v("\n        系统管理\n      ")]),e._v(" "),i("div",{staticClass:"everySpc"},[i("single-task",{attrs:{taskTitle:"任务重转",colorVal:"rgb(85, 195, 252)"}}),e._v(" "),i("single-task",{attrs:{taskTitle:"数据恢复",colorVal:"rgb(255, 87, 130)"}}),e._v(" "),i("single-task",{attrs:{taskTitle:"废弃任务",colorVal:"rgb(111, 239, 152)"}}),e._v(" "),i("single-task",{attrs:{taskTitle:"任务加锁",colorVal:"rgb(85, 195, 252)"}}),e._v(" "),i("single-task",{attrs:{taskTitle:"任务加锁",colorVal:"rgb(111, 239, 152)"}}),e._v(" "),i("single-task",{attrs:{taskTitle:"数据恢复",colorVal:"rgb(255, 87, 130)"}})],1)])])],1)},o=[],r={render:n,staticRenderFns:o};t.a=r},"40Hq":function(e,t){},"5HFJ":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAAA4CAMAAAB6xg5AAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAACxUExURQAAAP///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////7eYcpwAAAA6dFJOUwAps/7FAfXuEQ7w+/PQIyQhFCisq/Glrm5NyHZzfXqD+XHkhpKNxIqVAmHCmVpQRekV6EuyzAlOrw8iPjuFAAAA20lEQVRIx+3XxxKCMBSF4QsoHXvvvffuff8Hc4KjLuQmATcucrbwf8OGmQTga/2Bxd1B3wJ3PRTN2ECC2c/tj2fEAH7ZJUAv+ommm6KPN08awBUxsi+4KDFXgzsBVFFqNwAC8OUAnwRQcgpQgAIUoAAFKEAB/wBUcvZr6xDYxQTy73ecJQPMRUzg008QVwBzSAg4KcRZmjzCCgHWj+heCLB+zOlFAOun3FM4H2D9EJIDrO9CcoD1bdFFokz1Xth3hDeRIvkF9QZiU3yVyVicP6glcxnKlijCqJHRA7hfza4lh4v3AAAAAElFTkSuQmCC"},"6zZ1":function(e,t){},"8KGq":function(e,t){},"8mNY":function(e,t){},"BvG+":function(e,t,i){"use strict";var n=i("VHFQ"),o=i("xyVL");t.a={name:"menuList",data:function(){return{}},components:{headerCom:n.a,singleModule:o.a},methods:{}}},Dte2:function(e,t){},E335:function(e,t,i){"use strict";i.d(t,"a",function(){return l});var n=i("mtWM"),o=i.n(n),r=i("QmSG"),a=r.a.developUrl,s=function(e,t){return t||(t={}),o.a.post(""+(a+e),t).then(function(e){return e.data}).catch(function(e){return{errcode:null,message:"处理失败"}})},l=function(e){return s("monitor/query/getconfig",e)}},FHSc:function(e,t,i){"use strict";function n(e){i("U5CQ")}var o=i("2jWa"),r=i("31YF"),a=i("VU/8"),s=n,l=a(o.a,r.a,!1,s,"data-v-63f6bdae",null);t.a=l.exports},FUup:function(e,t){},GXEp:function(e,t){},H5L0:function(e,t,i){"use strict";var n=i("1e2d"),o=i.n(n),r=i("pM75"),a=(i.n(r),i("RUJa"),i("i626")),s=i("FUup"),l=(i.n(s),i("E335"));t.a={data:function(){return{options1:[{value:"选项1",label:"日出品"},{value:"选项2",label:"月出品",disabled:!0},{value:"选项2",label:"季出品",disabled:!0}],value1:"",options2:[{value:"选项1",label:"poi"},{value:"选项2",label:"poi_road",disabled:!0}],value2:"",tableData:[{taskId:"2016",province:"四川省",proApart:"四川1",program:"idb_conv",stage:"day",state:"成功",repeatTimes:"0",startTime:"2017-12-12 16:20:09",endTime:"2017-12-12 16:20:09",spendtime:"12.9",logfile:"11111"},{taskId:"2016",province:"四川省",proApart:"四川1",program:"idb_conv",stage:"day",state:"成功",repeatTimes:"0",startTime:"2017-12-12 16:20:09",endTime:"2017-12-12 16:20:09",spendtime:"12.9",logfile:"11111"},{taskId:"2016",province:"四川省",proApart:"四川1",program:"idb_conv",stage:"day",state:"成功",repeatTimes:"0",startTime:"2017-12-12 16:20:09",endTime:"2017-12-12 16:20:09",spendtime:"12.9",logfile:"11111"},{taskId:"2016",province:"四川省",proApart:"四川1",program:"idb_conv",stage:"day",state:"成功",repeatTimes:"0",startTime:"2017-12-12 16:20:09",endTime:"2017-12-12 16:20:09",spendtime:"12.9",logfile:"11111"}],show:!1}},mounted:function(){this.createMap(),this.initConfig()},methods:{createMap:function(){o.a.mapboxToken="pk.eyJ1IjoiZmFuZ2xhbmsiLCJhIjoiY2lpcjc1YzQxMDA5NHZra3NpaDAyODB4eSJ9.z6uZHccXvtyVqA5zmalfGg",this.map=new o.a.Map({container:"map",style:a.a.simple,zoom:3.8,maxZoom:4.5,minZoom:3,center:[107.02932,37.68486],repaint:!0,pitch:0});var e=this;this.map.on("load",function(){e.map.addLayer({id:"plate",type:"fill",source:{type:"geojson",data:{type:"Feature",properties:{},geometry:{type:"Polygon",coordinates:[[[109.2041015625,32.3057060139],[110.4345703125,34.2345123624],[110.2807617188,35.4248679193],[109.7973632813,37.3526928037],[108.7646484375,36.7564903295],[108.5009765625,35.7465122599],[109.2041015625,32.3057060139]]]}}},layout:{visibility:"visible"},paint:{"fill-color":"rgba(255, 116, 116, .3)","fill-outline-color":"#ff7474"}}),e.map.on("click","plate",function(){e.show=!0}),this.popup=new o.a.Popup({closeButton:!1,closeOnClick:!1}),e.map.on("mouseenter","plate",function(){e.map.getCanvas().style.cursor="pointer",this.popup.setLngLat([109.55331540892581,36.00854528903716]).setHTML("正在转换的步骤：XXXX<br/>失败项：无").addTo(e.map)}),e.map.on("mouseleave","plate",function(){e.map.getCanvas().style.cursor="",this.popup.remove()})})},toLogin:function(){this.$router.push("/login")},handleOpen:function(e,t){console.log(e,t)},handleClose:function(e,t){console.log(e,t)},initConfig:function(){Object(l.a)().then(function(e){console.log(e)})}}}},HgWG:function(e,t){},I4nB:function(e,t){},IzUT:function(e,t,i){"use strict";var n=i("7+uW");t.a={props:{taskTitle:{type:[String],default:"代码重载"},colorVal:{type:[String],default:"rgb(111, 239, 152)"},option:{type:[String]}},methods:{enterOperate:function(e){console.log(e),this.$router.push(e)}}},n.default.directive("bgcolor",function(e,t){e.style.background=t.value})},Jd8T:function(e,t,i){"use strict";var n=i("7+uW");t.a={props:{taskTitle:{type:[String],default:"代码重载"},colorVal:{type:[String]},option:{type:[String]}},methods:{enterOperate:function(e){console.log(e),this.$router.push(e)}}},n.default.directive("bgcolor",function(e,t){e.style.background=t.value})},M2GV:function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"flexItem",on:{click:function(t){e.enterOperate(e.option)}}},[n("span",{directives:[{name:"bgcolor",rawName:"v-bgcolor",value:e.colorVal,expression:"colorVal"}],staticClass:"picPos"},[n("img",{attrs:{src:i("5HFJ"),alt:""}}),e._v(" "),n("span",{staticStyle:{display:"inline-block","vertical-align":"middle",height:"100%",width:"0px"}})]),e._v(" "),n("span",{staticClass:"bar"},[e._v(e._s(e.taskTitle))])])},o=[],r={render:n,staticRenderFns:o};t.a=r},M93x:function(e,t,i){"use strict";function n(e){i("QLd1")}var o=i("xJD8"),r=i("mXrg"),a=i("VU/8"),s=n,l=a(o.a,r.a,!1,s,null,null);t.a=l.exports},MctG:function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("header-com"),e._v(" "),i("div",{staticClass:"content wrapper"},[e._m(0),e._v(" "),i("div",{staticClass:"Main"},[i("div",{staticClass:"selectOption"},[i("span",{staticClass:"demonstration"},[e._v("年份")]),e._v(" "),i("el-date-picker",{attrs:{align:"left",type:"year",placeholder:"选择年",size:"small"},model:{value:e.value5,callback:function(t){e.value5=t},expression:"value5"}}),e._v(" "),i("span",{staticClass:"demonstration"},[e._v("作业季")]),e._v(" "),i("el-select",{attrs:{placeholder:"请选择",size:"small"},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},e._l(e.options,function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),e._v(" "),i("span",{staticClass:"demonstration"},[e._v("任务类型")]),e._v(" "),i("el-select",{attrs:{placeholder:"请选择",size:"small"},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},e._l(e.options,function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),e._v(" "),i("span",{staticClass:"demonstration"},[e._v("细分类型")]),e._v(" "),i("el-select",{attrs:{placeholder:"请选择",size:"small"},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},e._l(e.options,function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),e._v(" "),i("el-button",{staticStyle:{"margin-left":"20px"},attrs:{type:"primary",size:"small"}},[e._v("上传"),i("i",{staticClass:"el-icon-upload el-icon--right"})])],1),e._v(" "),i("div",{staticStyle:{"margin-top":"20px"}},[i("el-table",{ref:"multipleTable",staticStyle:{width:"100%","background-color":"#F5F5F5"},attrs:{data:e.tableData3,"tooltip-effect":"dark"},on:{"selection-change":e.handleSelectionChange}},[i("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),i("el-table-column",{attrs:{label:"日期",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.date))]}}])}),e._v(" "),i("el-table-column",{attrs:{prop:"name",label:"姓名",width:"120"}}),e._v(" "),i("el-table-column",{attrs:{prop:"address",label:"地址","show-overflow-tooltip":""}})],1)],1)])])],1)},o=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("ul",{staticClass:"indexNav"},[i("li",[i("a",{attrs:{href:""}},[e._v("功能模块")])]),e._v(" "),i("li",[i("a",{staticStyle:{color:"#777"},attrs:{href:"javascript:void(0);"}},[e._v("任务重转")])])])}],r={render:n,staticRenderFns:o};t.a=r},Mf0D:function(e,t){},Mjzp:function(e,t){},NHnr:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i("ylrw"),o=(i.n(n),i("6oiW")),r=i.n(o),a=i("isgN"),s=(i.n(a),i("tLa+")),l=i.n(s),u=i("dmRH"),c=(i.n(u),i("EKTV")),p=i.n(c),f=i("XPMo"),d=(i.n(f),i("uEG6")),h=i.n(d),m=i("8mNY"),y=(i.n(m),i("YnkO")),v=i.n(y),g=i("d7TW"),_=(i.n(g),i("ajQY")),b=i.n(_),x=i("Mf0D"),w=(i.n(x),i("exT9")),z=i.n(w),A=i("/bpg"),T=(i.n(A),i("ACGT")),k=i.n(T),S=i("bwiK"),E=(i.n(S),i("SExR")),C=i.n(E),M=i("Dte2"),I=(i.n(M),i("q4le")),L=i.n(I),R=i("isE6"),P=(i.n(R),i("LR6y")),D=i.n(P),B=i("X+ky"),F=(i.n(B),i("HJMx")),j=i.n(F),O=i("qunJ"),N=(i.n(O),i("vqwl")),V=i.n(N),q=i("+Rdb"),U=(i.n(q),i("Mezo")),Z=i.n(U),W=i("I4nB"),G=(i.n(W),i("STLj")),H=i.n(G),X=i("cDSy"),K=(i.n(X),i("e0Bm")),J=i.n(K),Y=i("GXEp"),Q=(i.n(Y),i("+BTi")),$=(i.n(Q),i("mtrD")),ee=i.n($),te=i("7+uW"),ie=i("YaEn"),ne=i("M93x");te.default.use(ee.a),te.default.use(J.a),te.default.use(H.a),te.default.use(Z.a),te.default.use(V.a),te.default.use(j.a),te.default.use(D.a),te.default.use(L.a),te.default.use(C.a),te.default.use(k.a),te.default.use(z.a),te.default.use(b.a),te.default.use(v.a),te.default.use(h.a),te.default.use(p.a),te.default.use(l.a),te.default.use(r.a),new te.default({el:"#app",router:ie.a,template:"<App/>",components:{App:ne.a}})},QLd1:function(e,t){},QfIk:function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"container"},[i("div",{staticClass:"content"},[i("div",{staticClass:"leftMenu"},[i("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{"default-active":"2","background-color":"#545c64","text-color":"#fff","active-text-color":"#ffd04b"},on:{open:e.handleOpen,close:e.handleClose}},[i("el-submenu",{attrs:{index:"1"}},[i("template",{attrs:{slot:"title"},slot:"title"},[i("i",{staticClass:"el-icon-location"}),e._v(" "),i("span",[e._v("任务类型")])]),e._v(" "),i("el-menu-item",{attrs:{index:"1-1"}},[e._v("日出品")]),e._v(" "),i("el-menu-item",{attrs:{index:"1-2"}},[e._v("月出品")]),e._v(" "),i("el-menu-item",{attrs:{index:"1-3"}},[e._v("季出品")])],2),e._v(" "),i("el-submenu",{attrs:{index:"2"}},[i("template",{attrs:{slot:"title"},slot:"title"},[i("i",{staticClass:"el-icon-menu"}),e._v(" "),i("span",[e._v("细分类型")])]),e._v(" "),i("el-menu-item",{attrs:{index:"2-1"}},[e._v("poi")]),e._v(" "),i("el-menu-item",{attrs:{index:"2-2"}},[e._v("poi_road")])],2),e._v(" "),i("el-menu-item",{attrs:{index:"3"}},[i("i",{staticClass:"el-icon-document"}),e._v(" "),i("span",{attrs:{slot:"title"},slot:"title"},[e._v("出品任务概述")])]),e._v(" "),i("div",{staticClass:"taskDes"},[i("span",[e._v("所属日期：")]),e._v(" "),i("span",[e._v(" 20171215")]),i("br"),e._v(" "),i("span",[e._v("总任务号：")]),e._v(" "),i("span",[e._v(" 32")]),i("br"),e._v(" "),i("span",[e._v("数据发布：")]),e._v(" "),i("span",[e._v(" 未发布")]),i("br"),e._v(" "),i("span",{staticStyle:{"margin-left":"13px"}},[e._v("作业季：")]),e._v(" "),i("span",[e._v(" 17WIN")]),i("br"),e._v(" "),i("span",{staticStyle:{"margin-left":"13px"}},[e._v("总状态：")]),e._v(" "),i("span",[e._v(" 转换中")]),i("br"),e._v(" "),i("span",[e._v("开始时间：")]),e._v(" "),i("span",[e._v(" 2017-12-15 15:23:45")]),i("br"),e._v(" "),i("span",[e._v("结束时间：")]),e._v(" "),i("span",[e._v(" 2017-12-15 15:23:45")]),i("br"),e._v(" "),i("span",{staticStyle:{"margin-left":"27px"}},[e._v("耗时：")]),e._v(" "),i("span",[e._v(" 5小时10分")]),i("br")]),e._v(" "),i("el-menu-item",{attrs:{index:"4"}},[i("i",{staticClass:"el-icon-news"}),e._v(" "),i("span",{attrs:{slot:"title"},slot:"title"},[e._v("出品省份信息")])]),e._v(" "),i("div",{staticClass:"taskDes"},[i("div",[e._v("成功省份：")]),e._v(" "),i("span",[e._v("上海市,黑龙江省,湖南省,甘肃省,浙江省,山东省,福建省,吉林省,贵州省,四川省,云南省,天津市,陕西省,河南省,内蒙古自治区,广东省,江西省,湖北省,重庆市,安徽省,辽宁省,新疆维吾尔自治区,山西省,广西壮族自治区,海南省,河北省,江苏省\n")]),i("br"),e._v(" "),i("div",{staticStyle:{"margin-top":"10px"}},[e._v("失败省份：")]),e._v(" "),i("span",[e._v(" 湖北，福建，陕西")]),i("br"),e._v(" "),i("div",{staticStyle:{"margin-top":"10px"}},[e._v("转换中省份：")]),e._v(" "),i("span",[e._v(" 四川省,云南省,天津市,陕西省,河南省,内蒙古自治区")])])],1)],1),e._v(" "),e._m(0)]),e._v(" "),i("transition",{attrs:{name:"custom-classes-transition","enter-to-class":"animated zoomIn"}},[e.show?i("div",{staticClass:"provinceDel"},[i("div",{staticClass:"centerBlock"},[i("div",{staticClass:"singleProtitle"},[e._v("\n            日出品单省转换信息\n          ")]),e._v(" "),i("div",{staticClass:"closeBtn",on:{click:function(t){e.show=!e.show}}},[e._v("\n            x\n          ")]),e._v(" "),i("ul",[i("li",[i("span",[e._v("省份：")]),e._v(" "),i("span",[e._v("陕西省")])]),e._v(" "),i("li",[i("span",[e._v("总状态：")]),e._v(" "),i("span",[e._v("转换中")])]),e._v(" "),i("li",[i("span",[e._v("所属日期：")]),e._v(" "),i("span",[e._v("2017-12-12")])]),e._v(" "),i("li",[i("span",[e._v("开始时间：")]),e._v(" "),i("span",[e._v("2012-12-11 12:23:24")])]),e._v(" "),i("li",[i("span",[e._v("结束时间：")]),e._v(" "),i("span",[e._v("2012-12-11 12:23:24")])])]),e._v(" "),i("el-table",{staticStyle:{width:"100%",padding:"30px 30px 0px"},attrs:{data:e.tableData}},[i("el-table-column",{attrs:{prop:"taskId",label:"子任务号",width:"80"}}),e._v(" "),i("el-table-column",{attrs:{prop:"province",label:"省份",width:"100"}}),e._v(" "),i("el-table-column",{attrs:{prop:"proApart",label:"省份（份）"}}),e._v(" "),i("el-table-column",{attrs:{prop:"program",label:"程序"}}),e._v(" "),i("el-table-column",{attrs:{prop:"stage",label:"阶段"}}),e._v(" "),i("el-table-column",{attrs:{prop:"state",label:"状态"}}),e._v(" "),i("el-table-column",{attrs:{prop:"repeatTimes",label:"重转次数"}}),e._v(" "),i("el-table-column",{attrs:{prop:"startTime",width:"160",label:"开始时间"}}),e._v(" "),i("el-table-column",{attrs:{prop:"endTime",width:"160",label:"结束时间"}}),e._v(" "),i("el-table-column",{attrs:{prop:"spendtime",width:"120",label:"耗时（小时）"}}),e._v(" "),i("el-table-column",{attrs:{prop:"logfile",label:"log文件"}})],1)],1)]):e._e()]),e._v(" "),i("div",{staticClass:"loginBtn",on:{click:function(t){e.toLogin()}}},[e._v("\n      登陆\n    ")])],1)},o=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"mapInfo"},[i("div",{staticClass:"maptitle"},[e._v("\n          全国出品监测\n        ")]),e._v(" "),i("div",{attrs:{id:"map"}})])}],r={render:n,staticRenderFns:o};t.a=r},QmSG:function(e,t,i){"use strict";i.d(t,"a",function(){return n});var n={appName:"autoConvert",serviceUrl:"http://localhost:8080",developUrl:"http://192.168.15.41:9999/smapapi/"}},RUJa:function(e,t,i){"use strict";(function(e,t){var n,n,o=i("hiCB"),r=i.n(o),a=i("yI0F"),s=i.n(a),l=i("j9JH"),u=i.n(l),c=i("kBtn"),p=i.n(c),f=i("u2KI"),d=i.n(f),h=i("8YIr"),m=i.n(h),y=i("HSQo"),v=i.n(y),g=i("C4MV"),_=i.n(g),b=i("K6ED"),x=i.n(b),w=i("g4jZ"),z=i.n(w),A=i("2frX"),T=i.n(A),k=i("YP2j"),S=i.n(k),E=i("aFK5"),C=i.n(E),M=i("Zx67"),I=i.n(M),L=i("fZjL"),R=i.n(L),P=i("mvHQ"),D=i.n(P),B=i("OvRC"),F=i.n(B),j=i("pFYg"),O=i.n(j);!function(n){if("object"===("undefined"==typeof exports?"undefined":O()(exports))&&void 0!==t)t.exports=n();else if("function"==typeof define&&i("nErl"))define([],n);else{var o;o="undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:this,o.mapboxgl=n()}}(function(){var t;return function e(t,i,o){function r(s,l){if(!i[s]){if(!t[s]){var u="function"==typeof n&&n;if(!l&&u)return n(s,!0);if(a)return a(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var p=i[s]={exports:{}};t[s][0].call(p.exports,function(e){var i=t[s][1][e];return r(i||e)},p,p.exports,e,t,i,o)}return i[s].exports}for(var a="function"==typeof n&&n,s=0;s<o.length;s++)r(o[s]);return r}({1:[function(e,i,n){!function(e,o){"object"==(void 0===n?"undefined":O()(n))&&void 0!==i?i.exports=o():"function"==typeof t&&t.amd?t(o):e.glMatrix=o()}(this,function(){function e(e,t,i){var n=t[0],o=t[1],r=t[2];return e[0]=n*i[0]+o*i[3]+r*i[6],e[1]=n*i[1]+o*i[4]+r*i[7],e[2]=n*i[2]+o*i[5]+r*i[8],e}function t(e,t,i){var n=t[0],o=t[1],r=t[2],a=t[3];return e[0]=i[0]*n+i[4]*o+i[8]*r+i[12]*a,e[1]=i[1]*n+i[5]*o+i[9]*r+i[13]*a,e[2]=i[2]*n+i[6]*o+i[10]*r+i[14]*a,e[3]=i[3]*n+i[7]*o+i[11]*r+i[15]*a,e}function i(){var e=new Float32Array(4);return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e}function n(e,t,i){var n=t[0],o=t[1],r=t[2],a=t[3],s=Math.sin(i),l=Math.cos(i);return e[0]=n*l+r*s,e[1]=o*l+a*s,e[2]=n*-s+r*l,e[3]=o*-s+a*l,e}function o(e,t,i){var n=t[0],o=t[1],r=t[2],a=t[3],s=i[0],l=i[1];return e[0]=n*s,e[1]=o*s,e[2]=r*l,e[3]=a*l,e}function r(){var e=new Float32Array(9);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function a(e,t){var i=Math.sin(t),n=Math.cos(t);return e[0]=n,e[1]=i,e[2]=0,e[3]=-i,e[4]=n,e[5]=0,e[6]=0,e[7]=0,e[8]=1,e}function s(){var e=new Float32Array(16);return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function l(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=1,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=1,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,e}function u(e,t){var i=t[0],n=t[1],o=t[2],r=t[3],a=t[4],s=t[5],l=t[6],u=t[7],c=t[8],p=t[9],f=t[10],d=t[11],h=t[12],m=t[13],y=t[14],v=t[15],g=i*s-n*a,_=i*l-o*a,b=i*u-r*a,x=n*l-o*s,w=n*u-r*s,z=o*u-r*l,A=c*m-p*h,T=c*y-f*h,k=c*v-d*h,S=p*y-f*m,E=p*v-d*m,C=f*v-d*y,M=g*C-_*E+b*S+x*k-w*T+z*A;return M?(M=1/M,e[0]=(s*C-l*E+u*S)*M,e[1]=(o*E-n*C-r*S)*M,e[2]=(m*z-y*w+v*x)*M,e[3]=(f*w-p*z-d*x)*M,e[4]=(l*k-a*C-u*T)*M,e[5]=(i*C-o*k+r*T)*M,e[6]=(y*b-h*z-v*_)*M,e[7]=(c*z-f*b+d*_)*M,e[8]=(a*E-s*k+u*A)*M,e[9]=(n*k-i*E-r*A)*M,e[10]=(h*w-m*b+v*g)*M,e[11]=(p*b-c*w-d*g)*M,e[12]=(s*T-a*S-l*A)*M,e[13]=(i*S-n*T+o*A)*M,e[14]=(m*_-h*x-y*g)*M,e[15]=(c*x-p*_+f*g)*M,e):null}function c(e,t,i){var n=t[0],o=t[1],r=t[2],a=t[3],s=t[4],l=t[5],u=t[6],c=t[7],p=t[8],f=t[9],d=t[10],h=t[11],m=t[12],y=t[13],v=t[14],g=t[15],_=i[0],b=i[1],x=i[2],w=i[3];return e[0]=_*n+b*s+x*p+w*m,e[1]=_*o+b*l+x*f+w*y,e[2]=_*r+b*u+x*d+w*v,e[3]=_*a+b*c+x*h+w*g,_=i[4],b=i[5],x=i[6],w=i[7],e[4]=_*n+b*s+x*p+w*m,e[5]=_*o+b*l+x*f+w*y,e[6]=_*r+b*u+x*d+w*v,e[7]=_*a+b*c+x*h+w*g,_=i[8],b=i[9],x=i[10],w=i[11],e[8]=_*n+b*s+x*p+w*m,e[9]=_*o+b*l+x*f+w*y,e[10]=_*r+b*u+x*d+w*v,e[11]=_*a+b*c+x*h+w*g,_=i[12],b=i[13],x=i[14],w=i[15],e[12]=_*n+b*s+x*p+w*m,e[13]=_*o+b*l+x*f+w*y,e[14]=_*r+b*u+x*d+w*v,e[15]=_*a+b*c+x*h+w*g,e}function p(e,t,i){var n,o,r,a,s,l,u,c,p,f,d,h,m=i[0],y=i[1],v=i[2];return t===e?(e[12]=t[0]*m+t[4]*y+t[8]*v+t[12],e[13]=t[1]*m+t[5]*y+t[9]*v+t[13],e[14]=t[2]*m+t[6]*y+t[10]*v+t[14],e[15]=t[3]*m+t[7]*y+t[11]*v+t[15]):(n=t[0],o=t[1],r=t[2],a=t[3],s=t[4],l=t[5],u=t[6],c=t[7],p=t[8],f=t[9],d=t[10],h=t[11],e[0]=n,e[1]=o,e[2]=r,e[3]=a,e[4]=s,e[5]=l,e[6]=u,e[7]=c,e[8]=p,e[9]=f,e[10]=d,e[11]=h,e[12]=n*m+s*y+p*v+t[12],e[13]=o*m+l*y+f*v+t[13],e[14]=r*m+u*y+d*v+t[14],e[15]=a*m+c*y+h*v+t[15]),e}function f(e,t,i){var n=i[0],o=i[1],r=i[2];return e[0]=t[0]*n,e[1]=t[1]*n,e[2]=t[2]*n,e[3]=t[3]*n,e[4]=t[4]*o,e[5]=t[5]*o,e[6]=t[6]*o,e[7]=t[7]*o,e[8]=t[8]*r,e[9]=t[9]*r,e[10]=t[10]*r,e[11]=t[11]*r,e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e}function d(e,t,i){var n=Math.sin(i),o=Math.cos(i),r=t[4],a=t[5],s=t[6],l=t[7],u=t[8],c=t[9],p=t[10],f=t[11];return t!==e&&(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[4]=r*o+u*n,e[5]=a*o+c*n,e[6]=s*o+p*n,e[7]=l*o+f*n,e[8]=u*o-r*n,e[9]=c*o-a*n,e[10]=p*o-s*n,e[11]=f*o-l*n,e}function h(e,t,i){var n=Math.sin(i),o=Math.cos(i),r=t[0],a=t[1],s=t[2],l=t[3],u=t[4],c=t[5],p=t[6],f=t[7];return t!==e&&(e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]),e[0]=r*o+u*n,e[1]=a*o+c*n,e[2]=s*o+p*n,e[3]=l*o+f*n,e[4]=u*o-r*n,e[5]=c*o-a*n,e[6]=p*o-s*n,e[7]=f*o-l*n,e}function m(e,t,i,n,o){var r=1/Math.tan(t/2),a=1/(n-o);return e[0]=r/i,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=r,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=(o+n)*a,e[11]=-1,e[12]=0,e[13]=0,e[14]=2*o*n*a,e[15]=0,e}function y(e,t,i,n,o,r,a){var s=1/(t-i),l=1/(n-o),u=1/(r-a);return e[0]=-2*s,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=-2*l,e[6]=0,e[7]=0,e[8]=0,e[9]=0,e[10]=2*u,e[11]=0,e[12]=(t+i)*s,e[13]=(o+n)*l,e[14]=(a+r)*u,e[15]=1,e}return function(){var e=new Float32Array(3);e[0]=0,e[1]=0,e[2]=0}(),function(){var e=new Float32Array(4);e[0]=0,e[1]=0,e[2]=0,e[3]=0}(),{vec3:{transformMat3:e},vec4:{transformMat4:t},mat2:{create:i,rotate:n,scale:o},mat3:{create:r,fromRotation:a},mat4:{create:s,identity:l,translate:p,scale:f,multiply:c,perspective:m,rotateX:d,rotateZ:h,invert:u,ortho:y}}})},{}],2:[function(e,t,i){function n(e,t){this.x=e,this.y=t}t.exports=n,n.prototype={clone:function(){return new n(this.x,this.y)},add:function(e){return this.clone()._add(e)},sub:function(e){return this.clone()._sub(e)},multByPoint:function(e){return this.clone()._multByPoint(e)},divByPoint:function(e){return this.clone()._divByPoint(e)},mult:function(e){return this.clone()._mult(e)},div:function(e){return this.clone()._div(e)},rotate:function(e){return this.clone()._rotate(e)},rotateAround:function(e,t){return this.clone()._rotateAround(e,t)},matMult:function(e){return this.clone()._matMult(e)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(e){return this.x===e.x&&this.y===e.y},dist:function(e){return Math.sqrt(this.distSqr(e))},distSqr:function(e){var t=e.x-this.x,i=e.y-this.y;return t*t+i*i},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(e){return Math.atan2(this.y-e.y,this.x-e.x)},angleWith:function(e){return this.angleWithSep(e.x,e.y)},angleWithSep:function(e,t){return Math.atan2(this.x*t-this.y*e,this.x*e+this.y*t)},_matMult:function(e){var t=e[0]*this.x+e[1]*this.y,i=e[2]*this.x+e[3]*this.y;return this.x=t,this.y=i,this},_add:function(e){return this.x+=e.x,this.y+=e.y,this},_sub:function(e){return this.x-=e.x,this.y-=e.y,this},_mult:function(e){return this.x*=e,this.y*=e,this},_div:function(e){return this.x/=e,this.y/=e,this},_multByPoint:function(e){return this.x*=e.x,this.y*=e.y,this},_divByPoint:function(e){return this.x/=e.x,this.y/=e.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var e=this.y;return this.y=this.x,this.x=-e,this},_rotate:function(e){var t=Math.cos(e),i=Math.sin(e),n=t*this.x-i*this.y,o=i*this.x+t*this.y;return this.x=n,this.y=o,this},_rotateAround:function(e,t){var i=Math.cos(e),n=Math.sin(e),o=t.x+i*(this.x-t.x)-n*(this.y-t.y),r=t.y+n*(this.x-t.x)+i*(this.y-t.y);return this.x=o,this.y=r,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},n.convert=function(e){return e instanceof n?e:Array.isArray(e)?new n(e[0],e[1]):e}},{}],3:[function(e,i,n){!function(e,o){"object"==(void 0===n?"undefined":O()(n))&&void 0!==i?i.exports=o():"function"==typeof t&&t.amd?t(o):e.ShelfPack=o()}(this,function(){function e(e,t,i){i=i||{},this.w=e||64,this.h=t||64,this.autoResize=!!i.autoResize,this.shelves=[],this.freebins=[],this.stats={},this.bins={},this.maxId=0}function t(e,t,i){this.x=0,this.y=e,this.w=this.free=t,this.h=i}function i(e,t,i,n,o,r,a){this.id=e,this.x=t,this.y=i,this.w=n,this.h=o,this.maxw=r||n,this.maxh=a||o,this.refcount=0}return e.prototype.pack=function(e,t){e=[].concat(e),t=t||{};for(var i,n,o,r,a=[],s=0;s<e.length;s++)if(i=e[s].w||e[s].width,n=e[s].h||e[s].height,o=e[s].id,i&&n){if(!(r=this.packOne(i,n,o)))continue;t.inPlace&&(e[s].x=r.x,e[s].y=r.y,e[s].id=r.id),a.push(r)}return this.shrink(),a},e.prototype.packOne=function(e,i,n){var o,r,a,s,l={freebin:-1,shelf:-1,waste:1/0},u=0;if("string"==typeof n||"number"==typeof n){if(o=this.getBin(n))return this.ref(o),o;"number"==typeof n&&(this.maxId=Math.max(n,this.maxId))}else n=++this.maxId;for(s=0;s<this.freebins.length;s++){if(o=this.freebins[s],i===o.maxh&&e===o.maxw)return this.allocFreebin(s,e,i,n);i>o.maxh||e>o.maxw||i<=o.maxh&&e<=o.maxw&&(a=o.maxw*o.maxh-e*i)<l.waste&&(l.waste=a,l.freebin=s)}for(s=0;s<this.shelves.length;s++)if(r=this.shelves[s],u+=r.h,!(e>r.free)){if(i===r.h)return this.allocShelf(s,e,i,n);i>r.h||i<r.h&&(a=(r.h-i)*e)<l.waste&&(l.freebin=-1,l.waste=a,l.shelf=s)}if(-1!==l.freebin)return this.allocFreebin(l.freebin,e,i,n);if(-1!==l.shelf)return this.allocShelf(l.shelf,e,i,n);if(i<=this.h-u&&e<=this.w)return r=new t(u,this.w,i),this.allocShelf(this.shelves.push(r)-1,e,i,n);if(this.autoResize){var c,p,f,d;return c=p=this.h,f=d=this.w,(f<=c||e>f)&&(d=2*Math.max(e,f)),(c<f||i>c)&&(p=2*Math.max(i,c)),this.resize(d,p),this.packOne(e,i,n)}return null},e.prototype.allocFreebin=function(e,t,i,n){var o=this.freebins.splice(e,1)[0];return o.id=n,o.w=t,o.h=i,o.refcount=0,this.bins[n]=o,this.ref(o),o},e.prototype.allocShelf=function(e,t,i,n){var o=this.shelves[e],r=o.alloc(t,i,n);return this.bins[n]=r,this.ref(r),r},e.prototype.shrink=function(){if(this.shelves.length>0){for(var e=0,t=0,i=0;i<this.shelves.length;i++){var n=this.shelves[i];t+=n.h,e=Math.max(n.w-n.free,e)}this.resize(e,t)}},e.prototype.getBin=function(e){return this.bins[e]},e.prototype.ref=function(e){if(1==++e.refcount){var t=e.h;this.stats[t]=1+(0|this.stats[t])}return e.refcount},e.prototype.unref=function(e){return 0===e.refcount?0:(0==--e.refcount&&(this.stats[e.h]--,delete this.bins[e.id],this.freebins.push(e)),e.refcount)},e.prototype.clear=function(){this.shelves=[],this.freebins=[],this.stats={},this.bins={},this.maxId=0},e.prototype.resize=function(e,t){this.w=e,this.h=t;for(var i=0;i<this.shelves.length;i++)this.shelves[i].resize(e);return!0},t.prototype.alloc=function(e,t,n){if(e>this.free||t>this.h)return null;var o=this.x;return this.x+=e,this.free-=e,new i(n,o,this.y,e,t,e,this.h)},t.prototype.resize=function(e){return this.free+=e-this.w,this.w=e,!0},e})},{}],4:[function(e,t,i){function n(e,t,i,n,o,r){this.fontSize=e||24,this.buffer=void 0===t?3:t,this.cutoff=n||.25,this.fontFamily=o||"sans-serif",this.fontWeight=r||"normal",this.radius=i||8;var a=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=a,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(a*a),this.gridInner=new Float64Array(a*a),this.f=new Float64Array(a),this.d=new Float64Array(a),this.z=new Float64Array(a+1),this.v=new Int16Array(a),this.middle=Math.round(a/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function o(e,t,i,n,o,a,s){for(var l=0;l<t;l++){for(var u=0;u<i;u++)n[u]=e[u*t+l];for(r(n,o,a,s,i),u=0;u<i;u++)e[u*t+l]=o[u]}for(u=0;u<i;u++){for(l=0;l<t;l++)n[l]=e[u*t+l];for(r(n,o,a,s,t),l=0;l<t;l++)e[u*t+l]=Math.sqrt(o[l])}}function r(e,t,i,n,o){i[0]=0,n[0]=-a,n[1]=+a;for(var r=1,s=0;r<o;r++){for(var l=(e[r]+r*r-(e[i[s]]+i[s]*i[s]))/(2*r-2*i[s]);l<=n[s];)s--,l=(e[r]+r*r-(e[i[s]]+i[s]*i[s]))/(2*r-2*i[s]);s++,i[s]=r,n[s]=l,n[s+1]=+a}for(r=0,s=0;r<o;r++){for(;n[s+1]<r;)s++;t[r]=(r-i[s])*(r-i[s])+e[i[s]]}}t.exports=n;var a=1e20;n.prototype.draw=function(e){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(e,this.buffer,this.middle);for(var t=this.ctx.getImageData(0,0,this.size,this.size),i=new Uint8ClampedArray(this.size*this.size),n=0;n<this.size*this.size;n++){var r=t.data[4*n+3]/255;this.gridOuter[n]=1===r?0:0===r?a:Math.pow(Math.max(0,.5-r),2),this.gridInner[n]=1===r?a:0===r?0:Math.pow(Math.max(0,r-.5),2)}for(o(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),o(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),n=0;n<this.size*this.size;n++){var s=this.gridOuter[n]-this.gridInner[n];i[n]=Math.max(0,Math.min(255,Math.round(255-255*(s/this.radius+this.cutoff))))}return i}},{}],5:[function(e,t,i){function n(e,t,i,n){this.cx=3*e,this.bx=3*(i-e)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*t,this.by=3*(n-t)-this.cy,this.ay=1-this.cy-this.by,this.p1x=e,this.p1y=n,this.p2x=i,this.p2y=n}t.exports=n,n.prototype.sampleCurveX=function(e){return((this.ax*e+this.bx)*e+this.cx)*e},n.prototype.sampleCurveY=function(e){return((this.ay*e+this.by)*e+this.cy)*e},n.prototype.sampleCurveDerivativeX=function(e){return(3*this.ax*e+2*this.bx)*e+this.cx},n.prototype.solveCurveX=function(e,t){void 0===t&&(t=1e-6);var i,n,o,r,a;for(o=e,a=0;a<8;a++){if(r=this.sampleCurveX(o)-e,Math.abs(r)<t)return o;var s=this.sampleCurveDerivativeX(o);if(Math.abs(s)<1e-6)break;o-=r/s}if(i=0,n=1,(o=e)<i)return i;if(o>n)return n;for(;i<n;){if(r=this.sampleCurveX(o),Math.abs(r-e)<t)return o;e>r?i=o:n=o,o=.5*(n-i)+i}return o},n.prototype.solve=function(e,t){return this.sampleCurveY(this.solveCurveX(e,t))}},{}],6:[function(e,t,i){t.exports.VectorTile=e("./lib/vectortile.js"),t.exports.VectorTileFeature=e("./lib/vectortilefeature.js"),t.exports.VectorTileLayer=e("./lib/vectortilelayer.js")},{"./lib/vectortile.js":7,"./lib/vectortilefeature.js":8,"./lib/vectortilelayer.js":9}],7:[function(e,t,i){function n(e,t){this.layers=e.readFields(o,{},t)}function o(e,t,i){if(3===e){var n=new r(i,i.readVarint()+i.pos);n.length&&(t[n.name]=n)}}var r=e("./vectortilelayer");t.exports=n},{"./vectortilelayer":9}],8:[function(e,t,i){function n(e,t,i,n,r){this.properties={},this.extent=i,this.type=0,this._pbf=e,this._geometry=-1,this._keys=n,this._values=r,e.readFields(o,this,t)}function o(e,t,i){1==e?t.id=i.readVarint():2==e?r(i,t):3==e?t.type=i.readVarint():4==e&&(t._geometry=i.pos)}function r(e,t){for(var i=e.readVarint()+e.pos;e.pos<i;){var n=t._keys[e.readVarint()],o=t._values[e.readVarint()];t.properties[n]=o}}function a(e){var t=e.length;if(t<=1)return[e];for(var i,n,o=[],r=0;r<t;r++){var a=s(e[r]);0!==a&&(void 0===n&&(n=a<0),n===a<0?(i&&o.push(i),i=[e[r]]):i.push(e[r]))}return i&&o.push(i),o}function s(e){for(var t,i,n=0,o=0,r=e.length,a=r-1;o<r;a=o++)t=e[o],i=e[a],n+=(i.x-t.x)*(t.y+i.y);return n}var l=e("@mapbox/point-geometry");t.exports=n,n.types=["Unknown","Point","LineString","Polygon"],n.prototype.loadGeometry=function(){var e=this._pbf;e.pos=this._geometry;for(var t,i=e.readVarint()+e.pos,n=1,o=0,r=0,a=0,s=[];e.pos<i;){if(!o){var u=e.readVarint();n=7&u,o=u>>3}if(o--,1===n||2===n)r+=e.readSVarint(),a+=e.readSVarint(),1===n&&(t&&s.push(t),t=[]),t.push(new l(r,a));else{if(7!==n)throw new Error("unknown command "+n);t&&t.push(t[0].clone())}}return t&&s.push(t),s},n.prototype.bbox=function(){var e=this._pbf;e.pos=this._geometry;for(var t=e.readVarint()+e.pos,i=1,n=0,o=0,r=0,a=1/0,s=-1/0,l=1/0,u=-1/0;e.pos<t;){if(!n){var c=e.readVarint();i=7&c,n=c>>3}if(n--,1===i||2===i)o+=e.readSVarint(),r+=e.readSVarint(),o<a&&(a=o),o>s&&(s=o),r<l&&(l=r),r>u&&(u=r);else if(7!==i)throw new Error("unknown command "+i)}return[a,l,s,u]},n.prototype.toGeoJSON=function(e,t,i){function o(e){for(var t=0;t<e.length;t++){var i=e[t],n=180-360*(i.y+c)/l;e[t]=[360*(i.x+u)/l-180,360/Math.PI*Math.atan(Math.exp(n*Math.PI/180))-90]}}var r,s,l=this.extent*Math.pow(2,i),u=this.extent*e,c=this.extent*t,p=this.loadGeometry(),f=n.types[this.type];switch(this.type){case 1:var d=[];for(r=0;r<p.length;r++)d[r]=p[r][0];p=d,o(p);break;case 2:for(r=0;r<p.length;r++)o(p[r]);break;case 3:for(p=a(p),r=0;r<p.length;r++)for(s=0;s<p[r].length;s++)o(p[r][s])}1===p.length?p=p[0]:f="Multi"+f;var h={type:"Feature",geometry:{type:f,coordinates:p},properties:this.properties};return"id"in this&&(h.id=this.id),h}},{"@mapbox/point-geometry":2}],9:[function(e,t,i){function n(e,t){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=e,this._keys=[],this._values=[],this._features=[],e.readFields(o,this,t),this.length=this._features.length}function o(e,t,i){15===e?t.version=i.readVarint():1===e?t.name=i.readString():5===e?t.extent=i.readVarint():2===e?t._features.push(i.pos):3===e?t._keys.push(i.readString()):4===e&&t._values.push(r(i))}function r(e){for(var t=null,i=e.readVarint()+e.pos;e.pos<i;){var n=e.readVarint()>>3;t=1===n?e.readString():2===n?e.readFloat():3===n?e.readDouble():4===n?e.readVarint64():5===n?e.readVarint():6===n?e.readSVarint():7===n?e.readBoolean():null}return t}var a=e("./vectortilefeature.js");t.exports=n,n.prototype.feature=function(e){if(e<0||e>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[e];var t=this._pbf.readVarint()+this._pbf.pos;return new a(this._pbf,t,this.extent,this._keys,this._values)}},{"./vectortilefeature.js":8}],10:[function(e,i,n){!function(e,o){"object"==(void 0===n?"undefined":O()(n))&&void 0!==i?o(n):"function"==typeof t&&t.amd?t(["exports"],o):o(e.WhooTS=e.WhooTS||{})}(this,function(e){function t(e,t,n,o,r,a){return a=a||{},e+"?"+["bbox="+i(n,o,r),"format="+(a.format||"image/png"),"service="+(a.service||"WMS"),"version="+(a.version||"1.1.1"),"request="+(a.request||"GetMap"),"srs="+(a.srs||"EPSG:3857"),"width="+(a.width||256),"height="+(a.height||256),"layers="+t].join("&")}function i(e,t,i){t=Math.pow(2,i)-t-1;var o=n(256*e,256*t,i),r=n(256*(e+1),256*(t+1),i);return o[0]+","+o[1]+","+r[0]+","+r[1]}function n(e,t,i){var n=2*Math.PI*6378137/256/Math.pow(2,i);return[e*n-2*Math.PI*6378137/2,t*n-2*Math.PI*6378137/2]}e.getURL=t,e.getTileBBox=i,e.getMercCoords=n,Object.defineProperty(e,"__esModule",{value:!0})})},{}],11:[function(e,t,i){function n(e){return e=Math.round(e),e<0?0:e>255?255:e}function o(e){return e<0?0:e>1?1:e}function r(e){return n("%"===e[e.length-1]?parseFloat(e)/100*255:parseInt(e))}function a(e){return o("%"===e[e.length-1]?parseFloat(e)/100:parseFloat(e))}function s(e,t,i){return i<0?i+=1:i>1&&(i-=1),6*i<1?e+(t-e)*i*6:2*i<1?t:3*i<2?e+(t-e)*(2/3-i)*6:e}function l(e){var t=e.replace(/ /g,"").toLowerCase();if(t in u)return u[t].slice();if("#"===t[0]){if(4===t.length){var i=parseInt(t.substr(1),16);return i>=0&&i<=4095?[(3840&i)>>4|(3840&i)>>8,240&i|(240&i)>>4,15&i|(15&i)<<4,1]:null}if(7===t.length){var i=parseInt(t.substr(1),16);return i>=0&&i<=16777215?[(16711680&i)>>16,(65280&i)>>8,255&i,1]:null}return null}var o=t.indexOf("("),l=t.indexOf(")");if(-1!==o&&l+1===t.length){var c=t.substr(0,o),p=t.substr(o+1,l-(o+1)).split(","),f=1;switch(c){case"rgba":if(4!==p.length)return null;f=a(p.pop());case"rgb":return 3!==p.length?null:[r(p[0]),r(p[1]),r(p[2]),f];case"hsla":if(4!==p.length)return null;f=a(p.pop());case"hsl":if(3!==p.length)return null;var d=(parseFloat(p[0])%360+360)%360/360,h=a(p[1]),m=a(p[2]),y=m<=.5?m*(h+1):m+h-m*h,v=2*m-y;return[n(255*s(v,y,d+1/3)),n(255*s(v,y,d)),n(255*s(v,y,d-1/3)),f];default:return null}}return null}var u={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};try{i.parseCSSColor=l}catch(e){}},{}],12:[function(e,t,i){function n(e,t,i){i=i||2;var n=t&&t.length,r=n?t[0]*i:e.length,s=o(e,0,r,i,!0),l=[];if(!s)return l;var u,c,f,d,h,m,y;if(n&&(s=p(e,t,s,i)),e.length>80*i){u=f=e[0],c=d=e[1];for(var v=i;v<r;v+=i)h=e[v],m=e[v+1],h<u&&(u=h),m<c&&(c=m),h>f&&(f=h),m>d&&(d=m);y=Math.max(f-u,d-c)}return a(s,l,i,u,c,y),l}function o(e,t,i,n,o){var r,a;if(o===I(e,t,i,n)>0)for(r=t;r<i;r+=n)a=E(r,e[r],e[r+1],a);else for(r=i-n;r>=t;r-=n)a=E(r,e[r],e[r+1],a);return a&&w(a,a.next)&&(C(a),a=a.next),a}function r(e,t){if(!e)return e;t||(t=e);var i,n=e;do{if(i=!1,n.steiner||!w(n,n.next)&&0!==x(n.prev,n,n.next))n=n.next;else{if(C(n),(n=t=n.prev)===n.next)return null;i=!0}}while(i||n!==t);return t}function a(e,t,i,n,o,p,f){if(e){!f&&p&&m(e,n,o,p);for(var d,h,y=e;e.prev!==e.next;)if(d=e.prev,h=e.next,p?l(e,n,o,p):s(e))t.push(d.i/i),t.push(e.i/i),t.push(h.i/i),C(e),e=h.next,y=h.next;else if((e=h)===y){f?1===f?(e=u(e,t,i),a(e,t,i,n,o,p,2)):2===f&&c(e,t,i,n,o,p):a(r(e),t,i,n,o,p,1);break}}}function s(e){var t=e.prev,i=e,n=e.next;if(x(t,i,n)>=0)return!1;for(var o=e.next.next;o!==e.prev;){if(_(t.x,t.y,i.x,i.y,n.x,n.y,o.x,o.y)&&x(o.prev,o,o.next)>=0)return!1;o=o.next}return!0}function l(e,t,i,n){var o=e.prev,r=e,a=e.next;if(x(o,r,a)>=0)return!1;for(var s=o.x<r.x?o.x<a.x?o.x:a.x:r.x<a.x?r.x:a.x,l=o.y<r.y?o.y<a.y?o.y:a.y:r.y<a.y?r.y:a.y,u=o.x>r.x?o.x>a.x?o.x:a.x:r.x>a.x?r.x:a.x,c=o.y>r.y?o.y>a.y?o.y:a.y:r.y>a.y?r.y:a.y,p=v(s,l,t,i,n),f=v(u,c,t,i,n),d=e.nextZ;d&&d.z<=f;){if(d!==e.prev&&d!==e.next&&_(o.x,o.y,r.x,r.y,a.x,a.y,d.x,d.y)&&x(d.prev,d,d.next)>=0)return!1;d=d.nextZ}for(d=e.prevZ;d&&d.z>=p;){if(d!==e.prev&&d!==e.next&&_(o.x,o.y,r.x,r.y,a.x,a.y,d.x,d.y)&&x(d.prev,d,d.next)>=0)return!1;d=d.prevZ}return!0}function u(e,t,i){var n=e;do{var o=n.prev,r=n.next.next;!w(o,r)&&z(o,n,n.next,r)&&T(o,r)&&T(r,o)&&(t.push(o.i/i),t.push(n.i/i),t.push(r.i/i),C(n),C(n.next),n=e=r),n=n.next}while(n!==e);return n}function c(e,t,i,n,o,s){var l=e;do{for(var u=l.next.next;u!==l.prev;){if(l.i!==u.i&&b(l,u)){var c=S(l,u);return l=r(l,l.next),c=r(c,c.next),a(l,t,i,n,o,s),void a(c,t,i,n,o,s)}u=u.next}l=l.next}while(l!==e)}function p(e,t,i,n){var a,s,l,u,c,p=[];for(a=0,s=t.length;a<s;a++)l=t[a]*n,u=a<s-1?t[a+1]*n:e.length,c=o(e,l,u,n,!1),c===c.next&&(c.steiner=!0),p.push(g(c));for(p.sort(f),a=0;a<p.length;a++)d(p[a],i),i=r(i,i.next);return i}function f(e,t){return e.x-t.x}function d(e,t){if(t=h(e,t)){var i=S(t,e);r(i,i.next)}}function h(e,t){var i,n=t,o=e.x,r=e.y,a=-1/0;do{if(r<=n.y&&r>=n.next.y){var s=n.x+(r-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(s<=o&&s>a){if(a=s,s===o){if(r===n.y)return n;if(r===n.next.y)return n.next}i=n.x<n.next.x?n:n.next}}n=n.next}while(n!==t);if(!i)return null;if(o===a)return i.prev;var l,u=i,c=i.x,p=i.y,f=1/0;for(n=i.next;n!==u;)o>=n.x&&n.x>=c&&_(r<p?o:a,r,c,p,r<p?a:o,r,n.x,n.y)&&((l=Math.abs(r-n.y)/(o-n.x))<f||l===f&&n.x>i.x)&&T(n,e)&&(i=n,f=l),n=n.next;return i}function m(e,t,i,n){var o=e;do{null===o.z&&(o.z=v(o.x,o.y,t,i,n)),o.prevZ=o.prev,o.nextZ=o.next,o=o.next}while(o!==e);o.prevZ.nextZ=null,o.prevZ=null,y(o)}function y(e){var t,i,n,o,r,a,s,l,u=1;do{for(i=e,e=null,r=null,a=0;i;){for(a++,n=i,s=0,t=0;t<u&&(s++,n=n.nextZ);t++);for(l=u;s>0||l>0&&n;)0===s?(o=n,n=n.nextZ,l--):0!==l&&n?i.z<=n.z?(o=i,i=i.nextZ,s--):(o=n,n=n.nextZ,l--):(o=i,i=i.nextZ,s--),r?r.nextZ=o:e=o,o.prevZ=r,r=o;i=n}r.nextZ=null,u*=2}while(a>1);return e}function v(e,t,i,n,o){return e=32767*(e-i)/o,t=32767*(t-n)/o,e=16711935&(e|e<<8),e=252645135&(e|e<<4),e=858993459&(e|e<<2),e=1431655765&(e|e<<1),t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),t=1431655765&(t|t<<1),e|t<<1}function g(e){var t=e,i=e;do{t.x<i.x&&(i=t),t=t.next}while(t!==e);return i}function _(e,t,i,n,o,r,a,s){return(o-a)*(t-s)-(e-a)*(r-s)>=0&&(e-a)*(n-s)-(i-a)*(t-s)>=0&&(i-a)*(r-s)-(o-a)*(n-s)>=0}function b(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!A(e,t)&&T(e,t)&&T(t,e)&&k(e,t)}function x(e,t,i){return(t.y-e.y)*(i.x-t.x)-(t.x-e.x)*(i.y-t.y)}function w(e,t){return e.x===t.x&&e.y===t.y}function z(e,t,i,n){return!!(w(e,t)&&w(i,n)||w(e,n)&&w(i,t))||x(e,t,i)>0!=x(e,t,n)>0&&x(i,n,e)>0!=x(i,n,t)>0}function A(e,t){var i=e;do{if(i.i!==e.i&&i.next.i!==e.i&&i.i!==t.i&&i.next.i!==t.i&&z(i,i.next,e,t))return!0;i=i.next}while(i!==e);return!1}function T(e,t){return x(e.prev,e,e.next)<0?x(e,t,e.next)>=0&&x(e,e.prev,t)>=0:x(e,t,e.prev)<0||x(e,e.next,t)<0}function k(e,t){var i=e,n=!1,o=(e.x+t.x)/2,r=(e.y+t.y)/2;do{i.y>r!=i.next.y>r&&o<(i.next.x-i.x)*(r-i.y)/(i.next.y-i.y)+i.x&&(n=!n),i=i.next}while(i!==e);return n}function S(e,t){var i=new M(e.i,e.x,e.y),n=new M(t.i,t.x,t.y),o=e.next,r=t.prev;return e.next=t,t.prev=e,i.next=o,o.prev=i,n.next=i,i.prev=n,r.next=n,n.prev=r,n}function E(e,t,i,n){var o=new M(e,t,i);return n?(o.next=n.next,o.prev=n,n.next.prev=o,n.next=o):(o.prev=o,o.next=o),o}function C(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function M(e,t,i){this.i=e,this.x=t,this.y=i,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function I(e,t,i,n){for(var o=0,r=t,a=i-n;r<i;r+=n)o+=(e[a]-e[r])*(e[r+1]+e[a+1]),a=r;return o}t.exports=n,n.deviation=function(e,t,i,n){var o=t&&t.length,r=o?t[0]*i:e.length,a=Math.abs(I(e,0,r,i));if(o)for(var s=0,l=t.length;s<l;s++){var u=t[s]*i,c=s<l-1?t[s+1]*i:e.length;a-=Math.abs(I(e,u,c,i))}var p=0;for(s=0;s<n.length;s+=3){var f=n[s]*i,d=n[s+1]*i,h=n[s+2]*i;p+=Math.abs((e[f]-e[h])*(e[d+1]-e[f+1])-(e[f]-e[d])*(e[h+1]-e[f+1]))}return 0===a&&0===p?0:Math.abs((p-a)/a)},n.flatten=function(e){for(var t=e[0][0].length,i={vertices:[],holes:[],dimensions:t},n=0,o=0;o<e.length;o++){for(var r=0;r<e[o].length;r++)for(var a=0;a<t;a++)i.vertices.push(e[o][r][a]);o>0&&(n+=e[o-1].length,i.holes.push(n))}return i}},{}],13:[function(e,t,i){function n(e){if("Polygon"===e.type)return o(e.coordinates);if("MultiPolygon"===e.type){for(var t=0,i=0;i<e.coordinates.length;i++)t+=o(e.coordinates[i]);return t}return null}function o(e){var t=0;if(e&&e.length>0){t+=Math.abs(r(e[0]));for(var i=1;i<e.length;i++)t-=Math.abs(r(e[i]))}return t}function r(e){var t=0;if(e.length>2){for(var i,n,o=0;o<e.length-1;o++)i=e[o],n=e[o+1],t+=a(n[0]-i[0])*(2+Math.sin(a(i[1]))+Math.sin(a(n[1])));t=t*s.RADIUS*s.RADIUS/2}return t}function a(e){return e*Math.PI/180}var s=e("wgs84");t.exports.geometry=n,t.exports.ring=r},{wgs84:49}],14:[function(e,t,i){function n(e,t){switch(e&&e.type||null){case"FeatureCollection":return e.features=e.features.map(o(n,t)),e;case"Feature":return e.geometry=n(e.geometry,t),e;case"Polygon":case"MultiPolygon":return r(e,t);default:return e}}function o(e,t){return function(i){return e(i,t)}}function r(e,t){return"Polygon"===e.type?e.coordinates=a(e.coordinates,t):"MultiPolygon"===e.type&&(e.coordinates=e.coordinates.map(o(a,t))),e}function a(e,t){t=!!t,e[0]=s(e[0],t);for(var i=1;i<e.length;i++)e[i]=s(e[i],!t);return e}function s(e,t){return l(e)===t?e:e.reverse()}function l(e){return u.ring(e)>=0}var u=e("geojson-area");t.exports=n},{"geojson-area":13}],15:[function(e,t,i){function n(e,t,i,n,a,l,u,c){if(i/=t,n/=t,u>=i&&c<=n)return e;if(u>n||c<i)return null;for(var p=[],f=0;f<e.length;f++){var d,h,m=e[f],y=m.geometry,v=m.type;if(d=m.min[a],h=m.max[a],d>=i&&h<=n)p.push(m);else if(!(d>n||h<i)){var g=1===v?o(y,i,n,a):r(y,i,n,a,l,3===v);g.length&&p.push(s(m.tags,v,g,m.id))}}return p.length?p:null}function o(e,t,i,n){for(var o=[],r=0;r<e.length;r++){var a=e[r],s=a[n];s>=t&&s<=i&&o.push(a)}return o}function r(e,t,i,n,o,r){for(var s=[],l=0;l<e.length;l++){var u,c,p,f=0,d=0,h=null,m=e[l],y=m.area,v=m.dist,g=m.outer,_=m.length,b=[];for(c=0;c<_-1;c++)u=h||m[c],h=m[c+1],f=d||u[n],d=h[n],f<t?d>i?(b.push(o(u,h,t),o(u,h,i)),r||(b=a(s,b,y,v,g))):d>=t&&b.push(o(u,h,t)):f>i?d<t?(b.push(o(u,h,i),o(u,h,t)),r||(b=a(s,b,y,v,g))):d<=i&&b.push(o(u,h,i)):(b.push(u),d<t?(b.push(o(u,h,t)),r||(b=a(s,b,y,v,g))):d>i&&(b.push(o(u,h,i)),r||(b=a(s,b,y,v,g))));u=m[_-1],f=u[n],f>=t&&f<=i&&b.push(u),p=b[b.length-1],r&&p&&(b[0][0]!==p[0]||b[0][1]!==p[1])&&b.push(b[0]),a(s,b,y,v,g)}return s}function a(e,t,i,n,o){return t.length&&(t.area=i,t.dist=n,void 0!==o&&(t.outer=o),e.push(t)),[]}t.exports=n;var s=e("./feature")},{"./feature":17}],16:[function(e,t,i){function n(e,t){var i=[];if("FeatureCollection"===e.type)for(var n=0;n<e.features.length;n++)o(i,e.features[n],t);else"Feature"===e.type?o(i,e,t):o(i,{geometry:e},t);return i}function o(e,t,i){if(null!==t.geometry){var n,s,l,c,p=t.geometry,f=p.type,d=p.coordinates,h=t.properties,m=t.id;if("Point"===f)e.push(u(h,1,[a(d)],m));else if("MultiPoint"===f)e.push(u(h,1,r(d),m));else if("LineString"===f)e.push(u(h,2,[r(d,i)],m));else if("MultiLineString"===f||"Polygon"===f){for(l=[],n=0;n<d.length;n++)c=r(d[n],i),"Polygon"===f&&(c.outer=0===n),l.push(c);e.push(u(h,"Polygon"===f?3:2,l,m))}else if("MultiPolygon"===f){for(l=[],n=0;n<d.length;n++)for(s=0;s<d[n].length;s++)c=r(d[n][s],i),c.outer=0===s,l.push(c);e.push(u(h,3,l,m))}else{if("GeometryCollection"!==f)throw new Error("Input data is not a valid GeoJSON object.");for(n=0;n<p.geometries.length;n++)o(e,{geometry:p.geometries[n],properties:h},i)}}}function r(e,t){for(var i=[],n=0;n<e.length;n++)i.push(a(e[n]));return t&&(l(i,t),s(i)),i}function a(e){var t=Math.sin(e[1]*Math.PI/180),i=e[0]/360+.5,n=.5-.25*Math.log((1+t)/(1-t))/Math.PI;return n=n<0?0:n>1?1:n,[i,n,0]}function s(e){for(var t,i,n=0,o=0,r=0;r<e.length-1;r++)t=i||e[r],i=e[r+1],n+=t[0]*i[1]-i[0]*t[1],o+=Math.abs(i[0]-t[0])+Math.abs(i[1]-t[1]);e.area=Math.abs(n/2),e.dist=o}t.exports=n;var l=e("./simplify"),u=e("./feature")},{"./feature":17,"./simplify":19}],17:[function(e,t,i){function n(e,t,i,n){var r={id:n||null,type:t,geometry:i,tags:e||null,min:[1/0,1/0],max:[-1/0,-1/0]};return o(r),r}function o(e){var t=e.geometry,i=e.min,n=e.max;if(1===e.type)r(i,n,t);else for(var o=0;o<t.length;o++)r(i,n,t[o]);return e}function r(e,t,i){for(var n,o=0;o<i.length;o++)n=i[o],e[0]=Math.min(n[0],e[0]),t[0]=Math.max(n[0],t[0]),e[1]=Math.min(n[1],e[1]),t[1]=Math.max(n[1],t[1])}t.exports=n},{}],18:[function(e,t,i){function n(e,t){return new o(e,t)}function o(e,t){t=this.options=l(F()(this.options),t);var i=t.debug;i&&console.time("preprocess data");var n=1<<t.maxZoom,o=c(e,t.tolerance/(n*t.extent));this.tiles={},this.tileCoords=[],i&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",t.indexMaxZoom,t.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),o=d(o,t.buffer/t.extent,a),o.length&&this.splitTile(o,0,0,0),i&&(o.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,D()(this.stats)))}function r(e,t,i){return 32*((1<<e)*i+t)+e}function a(e,t,i){return[i,(i-e[0])*(t[1]-e[1])/(t[0]-e[0])+e[1],1]}function s(e,t,i){return[(i-e[1])*(t[0]-e[0])/(t[1]-e[1])+e[0],i,1]}function l(e,t){for(var i in t)e[i]=t[i];return e}function u(e,t,i){var n=e.source;if(1!==n.length)return!1;var o=n[0];if(3!==o.type||o.geometry.length>1)return!1;var r=o.geometry[0].length;if(5!==r)return!1;for(var a=0;a<r;a++){var s=p.point(o.geometry[0][a],t,e.z2,e.x,e.y);if(s[0]!==-i&&s[0]!==t+i||s[1]!==-i&&s[1]!==t+i)return!1}return!0}t.exports=n;var c=e("./convert"),p=e("./transform"),f=e("./clip"),d=e("./wrap"),h=e("./tile");o.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,solidChildren:!1,tolerance:3,extent:4096,buffer:64,debug:0},o.prototype.splitTile=function(e,t,i,n,o,l,c){for(var p=[e,t,i,n],d=this.options,m=d.debug,y=null;p.length;){n=p.pop(),i=p.pop(),t=p.pop(),e=p.pop();var v=1<<t,g=r(t,i,n),_=this.tiles[g],b=t===d.maxZoom?0:d.tolerance/(v*d.extent);if(!_&&(m>1&&console.time("creation"),_=this.tiles[g]=h(e,v,i,n,b,t===d.maxZoom),this.tileCoords.push({z:t,x:i,y:n}),m)){m>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",t,i,n,_.numFeatures,_.numPoints,_.numSimplified),console.timeEnd("creation"));var x="z"+t;this.stats[x]=(this.stats[x]||0)+1,this.total++}if(_.source=e,o){if(t===d.maxZoom||t===o)continue;var w=1<<o-t;if(i!==Math.floor(l/w)||n!==Math.floor(c/w))continue}else if(t===d.indexMaxZoom||_.numPoints<=d.indexMaxPoints)continue;if(d.solidChildren||!u(_,d.extent,d.buffer)){_.source=null,m>1&&console.time("clipping");var z,A,T,k,S,E,C=.5*d.buffer/d.extent,M=.5-C,I=.5+C,L=1+C;z=A=T=k=null,S=f(e,v,i-C,i+I,0,a,_.min[0],_.max[0]),E=f(e,v,i+M,i+L,0,a,_.min[0],_.max[0]),S&&(z=f(S,v,n-C,n+I,1,s,_.min[1],_.max[1]),A=f(S,v,n+M,n+L,1,s,_.min[1],_.max[1])),E&&(T=f(E,v,n-C,n+I,1,s,_.min[1],_.max[1]),k=f(E,v,n+M,n+L,1,s,_.min[1],_.max[1])),m>1&&console.timeEnd("clipping"),e.length&&(p.push(z||[],t+1,2*i,2*n),p.push(A||[],t+1,2*i,2*n+1),p.push(T||[],t+1,2*i+1,2*n),p.push(k||[],t+1,2*i+1,2*n+1))}else o&&(y=t)}return y},o.prototype.getTile=function(e,t,i){var n=this.options,o=n.extent,a=n.debug,s=1<<e;t=(t%s+s)%s;var l=r(e,t,i);if(this.tiles[l])return p.tile(this.tiles[l],o);a>1&&console.log("drilling down to z%d-%d-%d",e,t,i);for(var c,f=e,d=t,h=i;!c&&f>0;)f--,d=Math.floor(d/2),h=Math.floor(h/2),c=this.tiles[r(f,d,h)];if(!c||!c.source)return null;if(a>1&&console.log("found parent tile z%d-%d-%d",f,d,h),u(c,o,n.buffer))return p.tile(c,o);a>1&&console.time("drilling down");var m=this.splitTile(c.source,f,d,h,e,t,i);if(a>1&&console.timeEnd("drilling down"),null!==m){var y=1<<e-m;l=r(m,Math.floor(t/y),Math.floor(i/y))}return this.tiles[l]?p.tile(this.tiles[l],o):null}},{"./clip":15,"./convert":16,"./tile":20,"./transform":21,"./wrap":22}],19:[function(e,t,i){function n(e,t){var i,n,r,a,s=t*t,l=e.length,u=0,c=l-1,p=[];for(e[u][2]=1,e[c][2]=1;c;){for(n=0,i=u+1;i<c;i++)(r=o(e[i],e[u],e[c]))>n&&(a=i,n=r);n>s?(e[a][2]=n,p.push(u),p.push(a),u=a):(c=p.pop(),u=p.pop())}}function o(e,t,i){var n=t[0],o=t[1],r=i[0],a=i[1],s=e[0],l=e[1],u=r-n,c=a-o;if(0!==u||0!==c){var p=((s-n)*u+(l-o)*c)/(u*u+c*c);p>1?(n=r,o=a):p>0&&(n+=u*p,o+=c*p)}return u=s-n,c=l-o,u*u+c*c}t.exports=n},{}],20:[function(e,t,i){function n(e,t,i,n,r,a){for(var s={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:i,y:n,z2:t,transformed:!1,min:[2,1],max:[-1,0]},l=0;l<e.length;l++){s.numFeatures++,o(s,e[l],r,a);var u=e[l].min,c=e[l].max;u[0]<s.min[0]&&(s.min[0]=u[0]),u[1]<s.min[1]&&(s.min[1]=u[1]),c[0]>s.max[0]&&(s.max[0]=c[0]),c[1]>s.max[1]&&(s.max[1]=c[1])}return s}function o(e,t,i,n){var o,a,s,l,u=t.geometry,c=t.type,p=[],f=i*i;if(1===c)for(o=0;o<u.length;o++)p.push(u[o]),e.numPoints++,e.numSimplified++;else for(o=0;o<u.length;o++)if(s=u[o],n||!(2===c&&s.dist<i||3===c&&s.area<f)){var d=[];for(a=0;a<s.length;a++)l=s[a],(n||l[2]>f)&&(d.push(l),e.numSimplified++),e.numPoints++;3===c&&r(d,s.outer),p.push(d)}else e.numPoints+=s.length;if(p.length){var h={geometry:p,type:c,tags:t.tags||null};null!==t.id&&(h.id=t.id),e.features.push(h)}}function r(e,t){a(e)<0===t&&e.reverse()}function a(e){for(var t,i,n=0,o=0,r=e.length,a=r-1;o<r;a=o++)t=e[o],i=e[a],n+=(i[0]-t[0])*(t[1]+i[1]);return n}t.exports=n},{}],21:[function(e,t,i){function n(e,t){if(e.transformed)return e;var i,n,r,a=e.z2,s=e.x,l=e.y;for(i=0;i<e.features.length;i++){var u=e.features[i],c=u.geometry;if(1===u.type)for(n=0;n<c.length;n++)c[n]=o(c[n],t,a,s,l);else for(n=0;n<c.length;n++){var p=c[n];for(r=0;r<p.length;r++)p[r]=o(p[r],t,a,s,l)}}return e.transformed=!0,e}function o(e,t,i,n,o){return[Math.round(t*(e[0]*i-n)),Math.round(t*(e[1]*i-o))]}i.tile=n,i.point=o},{}],22:[function(e,t,i){function n(e,t,i){var n=e,r=a(e,1,-1-t,t,0,i,-1,2),s=a(e,1,1-t,2+t,0,i,-1,2);return(r||s)&&(n=a(e,1,-t,1+t,0,i,-1,2)||[],r&&(n=o(r,1).concat(n)),s&&(n=n.concat(o(s,-1)))),n}function o(e,t){for(var i=[],n=0;n<e.length;n++){var o,a=e[n],l=a.type;if(1===l)o=r(a.geometry,t);else{o=[];for(var u=0;u<a.geometry.length;u++)o.push(r(a.geometry[u],t))}i.push(s(a.tags,l,o,a.id))}return i}function r(e,t){var i=[];i.area=e.area,i.dist=e.dist;for(var n=0;n<e.length;n++)i.push([e[n][0]+t,e[n][1],e[n][2]]);return i}var a=e("./clip"),s=e("./feature");t.exports=n},{"./clip":15,"./feature":17}],23:[function(e,t,i){function n(e,t,i){var n=this.cells=[];if(e instanceof ArrayBuffer){this.arrayBuffer=e;var r=new Int32Array(this.arrayBuffer);e=r[0],t=r[1],i=r[2],this.d=t+2*i;for(var a=0;a<this.d*this.d;a++){var s=r[o+a],l=r[o+a+1];n.push(s===l?null:r.subarray(s,l))}var u=r[o+n.length],c=r[o+n.length+1];this.keys=r.subarray(u,c),this.bboxes=r.subarray(c),this.insert=this._insertReadonly}else{this.d=t+2*i;for(var p=0;p<this.d*this.d;p++)n.push([]);this.keys=[],this.bboxes=[]}this.n=t,this.extent=e,this.padding=i,this.scale=t/e,this.uid=0;var f=i/t*e;this.min=-f,this.max=e+f}t.exports=n;var o=3;n.prototype.insert=function(e,t,i,n,o){this._forEachCell(t,i,n,o,this._insertCell,this.uid++),this.keys.push(e),this.bboxes.push(t),this.bboxes.push(i),this.bboxes.push(n),this.bboxes.push(o)},n.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},n.prototype._insertCell=function(e,t,i,n,o,r){this.cells[o].push(r)},n.prototype.query=function(e,t,i,n){var o=this.min,r=this.max;if(e<=o&&t<=o&&r<=i&&r<=n)return Array.prototype.slice.call(this.keys);var a=[],s={};return this._forEachCell(e,t,i,n,this._queryCell,a,s),a},n.prototype._queryCell=function(e,t,i,n,o,r,a){var s=this.cells[o];if(null!==s)for(var l=this.keys,u=this.bboxes,c=0;c<s.length;c++){var p=s[c];if(void 0===a[p]){var f=4*p;e<=u[f+2]&&t<=u[f+3]&&i>=u[f+0]&&n>=u[f+1]?(a[p]=!0,r.push(l[p])):a[p]=!1}}},n.prototype._forEachCell=function(e,t,i,n,o,r,a){for(var s=this._convertToCellCoord(e),l=this._convertToCellCoord(t),u=this._convertToCellCoord(i),c=this._convertToCellCoord(n),p=s;p<=u;p++)for(var f=l;f<=c;f++){var d=this.d*f+p;if(o.call(this,e,t,i,n,d,r,a))return}},n.prototype._convertToCellCoord=function(e){return Math.max(0,Math.min(this.d-1,Math.floor(e*this.scale)+this.padding))},n.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var e=this.cells,t=o+this.cells.length+1+1,i=0,n=0;n<this.cells.length;n++)i+=this.cells[n].length;var r=new Int32Array(t+i+this.keys.length+this.bboxes.length);r[0]=this.extent,r[1]=this.n,r[2]=this.padding;for(var a=t,s=0;s<e.length;s++){var l=e[s];r[o+s]=a,r.set(l,a),a+=l.length}return r[o+e.length]=a,r.set(this.keys,a),a+=this.keys.length,r[o+e.length+1]=a,r.set(this.bboxes,a),a+=this.bboxes.length,r.buffer}},{}],24:[function(e,t,i){i.read=function(e,t,i,n,o){var r,a,s=8*o-n-1,l=(1<<s)-1,u=l>>1,c=-7,p=i?o-1:0,f=i?-1:1,d=e[t+p];for(p+=f,r=d&(1<<-c)-1,d>>=-c,c+=s;c>0;r=256*r+e[t+p],p+=f,c-=8);for(a=r&(1<<-c)-1,r>>=-c,c+=n;c>0;a=256*a+e[t+p],p+=f,c-=8);if(0===r)r=1-u;else{if(r===l)return a?NaN:1/0*(d?-1:1);a+=Math.pow(2,n),r-=u}return(d?-1:1)*a*Math.pow(2,r-n)},i.write=function(e,t,i,n,o,r){var a,s,l,u=8*r-o-1,c=(1<<u)-1,p=c>>1,f=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,d=n?0:r-1,h=n?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=c):(a=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-a))<1&&(a--,l*=2),t+=a+p>=1?f/l:f*Math.pow(2,1-p),t*l>=2&&(a++,l/=2),a+p>=c?(s=0,a=c):a+p>=1?(s=(t*l-1)*Math.pow(2,o),a+=p):(s=t*Math.pow(2,p-1)*Math.pow(2,o),a=0));o>=8;e[i+d]=255&s,d+=h,s/=256,o-=8);for(a=a<<o|s,u+=o;u>0;e[i+d]=255&a,d+=h,a/=256,u-=8);e[i+d-h]|=128*m}},{}],25:[function(e,t,i){function n(e,t,i,n,r){return new o(e,t,i,n,r)}function o(e,t,i,n,o){t=t||r,i=i||a,o=o||Array,this.nodeSize=n||64,this.points=e,this.ids=new o(e.length),this.coords=new o(2*e.length);for(var l=0;l<e.length;l++)this.ids[l]=l,this.coords[2*l]=t(e[l]),this.coords[2*l+1]=i(e[l]);s(this.ids,this.coords,this.nodeSize,0,this.ids.length-1,0)}function r(e){return e[0]}function a(e){return e[1]}var s=e("./sort"),l=e("./range"),u=e("./within");t.exports=n,o.prototype={range:function(e,t,i,n){return l(this.ids,this.coords,e,t,i,n,this.nodeSize)},within:function(e,t,i){return u(this.ids,this.coords,e,t,i,this.nodeSize)}}},{"./range":26,"./sort":27,"./within":28}],26:[function(e,t,i){function n(e,t,i,n,o,r,a){for(var s,l,u=[0,e.length-1,0],c=[];u.length;){var p=u.pop(),f=u.pop(),d=u.pop();if(f-d<=a)for(var h=d;h<=f;h++)s=t[2*h],l=t[2*h+1],s>=i&&s<=o&&l>=n&&l<=r&&c.push(e[h]);else{var m=Math.floor((d+f)/2);s=t[2*m],l=t[2*m+1],s>=i&&s<=o&&l>=n&&l<=r&&c.push(e[m]);var y=(p+1)%2;(0===p?i<=s:n<=l)&&(u.push(d),u.push(m-1),u.push(y)),(0===p?o>=s:r>=l)&&(u.push(m+1),u.push(f),u.push(y))}}return c}t.exports=n},{}],27:[function(e,t,i){function n(e,t,i,r,a,s){if(!(a-r<=i)){var l=Math.floor((r+a)/2);o(e,t,l,r,a,s%2),n(e,t,i,r,l-1,s+1),n(e,t,i,l+1,a,s+1)}}function o(e,t,i,n,a,s){for(;a>n;){if(a-n>600){var l=a-n+1,u=i-n+1,c=Math.log(l),p=.5*Math.exp(2*c/3),f=.5*Math.sqrt(c*p*(l-p)/l)*(u-l/2<0?-1:1);o(e,t,i,Math.max(n,Math.floor(i-u*p/l+f)),Math.min(a,Math.floor(i+(l-u)*p/l+f)),s)}var d=t[2*i+s],h=n,m=a;for(r(e,t,n,i),t[2*a+s]>d&&r(e,t,n,a);h<m;){for(r(e,t,h,m),h++,m--;t[2*h+s]<d;)h++;for(;t[2*m+s]>d;)m--}t[2*n+s]===d?r(e,t,n,m):(m++,r(e,t,m,a)),m<=i&&(n=m+1),i<=m&&(a=m-1)}}function r(e,t,i,n){a(e,i,n),a(t,2*i,2*n),a(t,2*i+1,2*n+1)}function a(e,t,i){var n=e[t];e[t]=e[i],e[i]=n}t.exports=n},{}],28:[function(e,t,i){function n(e,t,i,n,r,a){for(var s=[0,e.length-1,0],l=[],u=r*r;s.length;){var c=s.pop(),p=s.pop(),f=s.pop();if(p-f<=a)for(var d=f;d<=p;d++)o(t[2*d],t[2*d+1],i,n)<=u&&l.push(e[d]);else{var h=Math.floor((f+p)/2),m=t[2*h],y=t[2*h+1];o(m,y,i,n)<=u&&l.push(e[h]);var v=(c+1)%2;(0===c?i-r<=m:n-r<=y)&&(s.push(f),s.push(h-1),s.push(v)),(0===c?i+r>=m:n+r>=y)&&(s.push(h+1),s.push(p),s.push(v))}}return l}function o(e,t,i,n){var o=e-i,r=t-n;return o*o+r*r}t.exports=n},{}],29:[function(e,t,i){function n(e){return!!e&&"object"==(void 0===e?"undefined":O()(e))}function o(e,t){for(var i=-1,n=e.length;++i<n;)if(t(e[i],i,e))return!0;return!1}function r(e,t,i,o,s,l){return e===t||(null==e||null==t||!c(e)&&!n(t)?e!==e&&t!==t:a(e,t,r,i,o,s,l))}function a(e,t,i,n,o,r,a){var c=p(e),d=p(t),y=m,v=m;c||(y=T.call(e),y==h?y=b:y!=b&&(c=f(e))),d||(v=T.call(t),v==h?v=b:v!=b&&(d=f(t)));var g=y==b,_=v==b,x=y==v;if(x&&!c&&!g)return l(e,t,y);if(!o){var w=g&&A.call(e,"__wrapped__"),z=_&&A.call(t,"__wrapped__");if(w||z)return i(w?e.value():e,z?t.value():t,n,o,r,a)}if(!x)return!1;r||(r=[]),a||(a=[]);for(var k=r.length;k--;)if(r[k]==e)return a[k]==t;r.push(e),a.push(t);var S=(c?s:u)(e,t,i,n,o,r,a);return r.pop(),a.pop(),S}function s(e,t,i,n,r,a,s){var l=-1,u=e.length,c=t.length;if(u!=c&&!(r&&c>u))return!1;for(;++l<u;){var p=e[l],f=t[l],d=n?n(r?f:p,r?p:f,l):void 0;if(void 0!==d){if(d)continue;return!1}if(r){if(!o(t,function(e){return p===e||i(p,e,n,r,a,s)}))return!1}else if(p!==f&&!i(p,f,n,r,a,s))return!1}return!0}function l(e,t,i){switch(i){case y:case v:return+e==+t;case g:return e.name==t.name&&e.message==t.message;case _:return e!=+e?t!=+t:e==+t;case x:case w:return e==t+""}return!1}function u(e,t,i,n,o,r,a){var s=d(e),l=s.length;if(l!=d(t).length&&!o)return!1;for(var u=l;u--;){var c=s[u];if(!(o?c in t:A.call(t,c)))return!1}for(var p=o;++u<l;){c=s[u];var f=e[c],h=t[c],m=n?n(o?h:f,o?f:h,c):void 0;if(!(void 0===m?i(f,h,n,o,r,a):m))return!1;p||(p="constructor"==c)}if(!p){var y=e.constructor,v=t.constructor;if(y!=v&&"constructor"in e&&"constructor"in t&&!("function"==typeof y&&y instanceof y&&"function"==typeof v&&v instanceof v))return!1}return!0}function c(e){var t=void 0===e?"undefined":O()(e);return!!e&&("object"==t||"function"==t)}var p=e("lodash.isarray"),f=e("lodash.istypedarray"),d=e("lodash.keys"),h="[object Arguments]",m="[object Array]",y="[object Boolean]",v="[object Date]",g="[object Error]",_="[object Number]",b="[object Object]",x="[object RegExp]",w="[object String]",z=Object.prototype,A=z.hasOwnProperty,T=z.toString;t.exports=r},{"lodash.isarray":33,"lodash.istypedarray":35,"lodash.keys":36}],30:[function(e,t,i){function n(e,t,i){if("function"!=typeof e)return o;if(void 0===t)return e;switch(i){case 1:return function(i){return e.call(t,i)};case 3:return function(i,n,o){return e.call(t,i,n,o)};case 4:return function(i,n,o,r){return e.call(t,i,n,o,r)};case 5:return function(i,n,o,r,a){return e.call(t,i,n,o,r,a)}}return function(){return e.apply(t,arguments)}}function o(e){return e}t.exports=n},{}],31:[function(e,t,i){function n(e){return!!e&&"object"==(void 0===e?"undefined":O()(e))}function o(e,t){var i=null==e?void 0:e[t];return s(i)?i:void 0}function r(e){return a(e)&&d.call(e)==l}function a(e){var t=void 0===e?"undefined":O()(e);return!!e&&("object"==t||"function"==t)}function s(e){return null!=e&&(r(e)?h.test(p.call(e)):n(e)&&u.test(e))}var l="[object Function]",u=/^\[object .+?Constructor\]$/,c=Object.prototype,p=Function.prototype.toString,f=c.hasOwnProperty,d=c.toString,h=RegExp("^"+p.call(f).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");t.exports=o},{}],32:[function(e,t,i){function n(e){return r(e)&&m.call(e,"callee")&&(!v.call(e,"callee")||y.call(e)==p)}function o(e){return null!=e&&s(e.length)&&!a(e)}function r(e){return u(e)&&o(e)}function a(e){var t=l(e)?y.call(e):"";return t==f||t==d}function s(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=c}function l(e){var t=void 0===e?"undefined":O()(e);return!!e&&("object"==t||"function"==t)}function u(e){return!!e&&"object"==(void 0===e?"undefined":O()(e))}var c=9007199254740991,p="[object Arguments]",f="[object Function]",d="[object GeneratorFunction]",h=Object.prototype,m=h.hasOwnProperty,y=h.toString,v=h.propertyIsEnumerable;t.exports=n},{}],33:[function(e,t,i){function n(e){return!!e&&"object"==(void 0===e?"undefined":O()(e))}function o(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=y}function r(e){return a(e)&&d.call(e)==l}function a(e){var t=void 0===e?"undefined":O()(e);return!!e&&("object"==t||"function"==t)}function s(e){return null!=e&&(r(e)?h.test(p.call(e)):n(e)&&u.test(e))}var l="[object Function]",u=/^\[object .+?Constructor\]$/,c=Object.prototype,p=Function.prototype.toString,f=c.hasOwnProperty,d=c.toString,h=RegExp("^"+p.call(f).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),m=function(e,t){var i=null==e?void 0:e[t];return s(i)?i:void 0}(Array,"isArray"),y=9007199254740991,v=m||function(e){return n(e)&&o(e.length)&&"[object Array]"==d.call(e)};t.exports=v},{}],34:[function(e,t,i){function n(e,t,i,n){i="function"==typeof i?r(i,n,3):void 0;var a=i?i(e,t):void 0;return void 0===a?o(e,t,i):!!a}var o=e("lodash._baseisequal"),r=e("lodash._bindcallback");t.exports=n},{"lodash._baseisequal":29,"lodash._bindcallback":30}],35:[function(e,t,i){function n(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=a}function o(e){return!!e&&"object"==(void 0===e?"undefined":O()(e))}function r(e){return o(e)&&n(e.length)&&!!s[u.call(e)]}var a=9007199254740991,s={};s["[object Float32Array]"]=s["[object Float64Array]"]=s["[object Int8Array]"]=s["[object Int16Array]"]=s["[object Int32Array]"]=s["[object Uint8Array]"]=s["[object Uint8ClampedArray]"]=s["[object Uint16Array]"]=s["[object Uint32Array]"]=!0,s["[object Arguments]"]=s["[object Array]"]=s["[object ArrayBuffer]"]=s["[object Boolean]"]=s["[object DataView]"]=s["[object Date]"]=s["[object Error]"]=s["[object Function]"]=s["[object Map]"]=s["[object Number]"]=s["[object Object]"]=s["[object RegExp]"]=s["[object Set]"]=s["[object String]"]=s["[object WeakMap]"]=!1;var l=Object.prototype,u=l.toString;t.exports=r},{}],36:[function(e,t,i){function n(e){return null!=e&&r(v(e))}function o(e,t){return e="number"==typeof e||f.test(e)?+e:-1,t=null==t?y:t,e>-1&&e%1==0&&e<t}function r(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=y}function a(e){for(var t=l(e),i=t.length,n=i&&e.length,a=!!n&&r(n)&&(p(e)||c(e)),s=-1,u=[];++s<i;){var f=t[s];(a&&o(f,n)||h.call(e,f))&&u.push(f)}return u}function s(e){var t=void 0===e?"undefined":O()(e);return!!e&&("object"==t||"function"==t)}function l(e){if(null==e)return[];s(e)||(e=Object(e));var t=e.length;t=t&&r(t)&&(p(e)||c(e))&&t||0;for(var i=e.constructor,n=-1,a="function"==typeof i&&i.prototype===e,l=Array(t),u=t>0;++n<t;)l[n]=n+"";for(var f in e)u&&o(f,t)||"constructor"==f&&(a||!h.call(e,f))||l.push(f);return l}var u=e("lodash._getnative"),c=e("lodash.isarguments"),p=e("lodash.isarray"),f=/^\d+$/,d=Object.prototype,h=d.hasOwnProperty,m=u(Object,"keys"),y=9007199254740991,v=function(e){return function(t){return null==t?void 0:t[e]}}("length"),g=m?function(e){var t=null==e?void 0:e.constructor;return"function"==typeof t&&t.prototype===e||"function"!=typeof e&&n(e)?a(e):s(e)?m(e):[]}:a;t.exports=g},{"lodash._getnative":31,"lodash.isarguments":32,"lodash.isarray":33}],37:[function(e,t,i){function n(e){return!!(o()&&r()&&a()&&s()&&l()&&u()&&c()&&f(e&&e.failIfMajorPerformanceCaveat))}function o(){return"undefined"!=typeof window&&"undefined"!=typeof document}function r(){return Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray}function a(){return Function.prototype&&Function.prototype.bind}function s(){return R.a&&F.a&&I.a&&C.a&&S.a&&T.a&&z.a&&x.a&&_.a&&v.a&&m.a&&d.a&&p.a}function l(){return"JSON"in window&&"parse"in JSON&&"stringify"in JSON}function u(){return"Worker"in window}function c(){return"Uint8ClampedArray"in window}function f(e){return void 0===y[e]&&(y[e]=h(e)),y[e]}function h(e){var t=document.createElement("canvas"),i=F()(n.webGLContextAttributes);return i.failIfMajorPerformanceCaveat=e,t.probablySupportsContext?t.probablySupportsContext("webgl",i)||t.probablySupportsContext("experimental-webgl",i):t.supportsContext?t.supportsContext("webgl",i)||t.supportsContext("experimental-webgl",i):t.getContext("webgl",i)||t.getContext("experimental-webgl",i)}void 0!==t&&t.exports?t.exports=n:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=n);var y={};n.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}},{}],38:[function(e,t,i){function n(e){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(e)?e:new Uint8Array(e||0),this.pos=0,this.type=0,this.length=this.buf.length}function o(e,t,i){var n,o,r=i.buf;if(o=r[i.pos++],n=(112&o)>>4,o<128)return a(e,n,t);if(o=r[i.pos++],n|=(127&o)<<3,o<128)return a(e,n,t);if(o=r[i.pos++],n|=(127&o)<<10,o<128)return a(e,n,t);if(o=r[i.pos++],n|=(127&o)<<17,o<128)return a(e,n,t);if(o=r[i.pos++],n|=(127&o)<<24,o<128)return a(e,n,t);if(o=r[i.pos++],n|=(1&o)<<31,o<128)return a(e,n,t);throw new Error("Expected varint not more than 10 bytes")}function r(e){return e.type===n.Bytes?e.readVarint()+e.pos:e.pos+1}function a(e,t,i){return i?4294967296*t+(e>>>0):4294967296*(t>>>0)+(e>>>0)}function s(e,t){var i,n;if(e>=0?(i=e%4294967296|0,n=e/4294967296|0):(i=~(-e%4294967296),n=~(-e/4294967296),4294967295^i?i=i+1|0:(i=0,n=n+1|0)),e>=0x10000000000000000||e<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");t.realloc(10),l(i,n,t),u(n,t)}function l(e,t,i){i.buf[i.pos++]=127&e|128,e>>>=7,i.buf[i.pos++]=127&e|128,e>>>=7,i.buf[i.pos++]=127&e|128,e>>>=7,i.buf[i.pos++]=127&e|128,e>>>=7,i.buf[i.pos]=127&e}function u(e,t){var i=(7&e)<<4;t.buf[t.pos++]|=i|((e>>>=3)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),e&&(t.buf[t.pos++]=127&e)))))}function c(e,t,i){var n=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.ceil(Math.log(t)/(7*Math.LN2));i.realloc(n);for(var o=i.pos-1;o>=e;o--)i.buf[o+n]=i.buf[o]}function p(e,t){for(var i=0;i<e.length;i++)t.writeVarint(e[i])}function f(e,t){for(var i=0;i<e.length;i++)t.writeSVarint(e[i])}function d(e,t){for(var i=0;i<e.length;i++)t.writeFloat(e[i])}function h(e,t){for(var i=0;i<e.length;i++)t.writeDouble(e[i])}function m(e,t){for(var i=0;i<e.length;i++)t.writeBoolean(e[i])}function y(e,t){for(var i=0;i<e.length;i++)t.writeFixed32(e[i])}function v(e,t){for(var i=0;i<e.length;i++)t.writeSFixed32(e[i])}function g(e,t){for(var i=0;i<e.length;i++)t.writeFixed64(e[i])}function _(e,t){for(var i=0;i<e.length;i++)t.writeSFixed64(e[i])}function b(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+16777216*e[t+3]}function x(e,t,i){e[i]=t,e[i+1]=t>>>8,e[i+2]=t>>>16,e[i+3]=t>>>24}function w(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+(e[t+3]<<24)}function z(e,t,i){for(var n="",o=t;o<i;){var r=e[o],a=null,s=r>239?4:r>223?3:r>191?2:1;if(o+s>i)break;var l,u,c;1===s?r<128&&(a=r):2===s?128==(192&(l=e[o+1]))&&(a=(31&r)<<6|63&l)<=127&&(a=null):3===s?(l=e[o+1],u=e[o+2],128==(192&l)&&128==(192&u)&&((a=(15&r)<<12|(63&l)<<6|63&u)<=2047||a>=55296&&a<=57343)&&(a=null)):4===s&&(l=e[o+1],u=e[o+2],c=e[o+3],128==(192&l)&&128==(192&u)&&128==(192&c)&&((a=(15&r)<<18|(63&l)<<12|(63&u)<<6|63&c)<=65535||a>=1114112)&&(a=null)),null===a?(a=65533,s=1):a>65535&&(a-=65536,n+=String.fromCharCode(a>>>10&1023|55296),a=56320|1023&a),n+=String.fromCharCode(a),o+=s}return n}function A(e,t,i){for(var n,o,r=0;r<t.length;r++){if((n=t.charCodeAt(r))>55295&&n<57344){if(!o){n>56319||r+1===t.length?(e[i++]=239,e[i++]=191,e[i++]=189):o=n;continue}if(n<56320){e[i++]=239,e[i++]=191,e[i++]=189,o=n;continue}n=o-55296<<10|n-56320|65536,o=null}else o&&(e[i++]=239,e[i++]=191,e[i++]=189,o=null);n<128?e[i++]=n:(n<2048?e[i++]=n>>6|192:(n<65536?e[i++]=n>>12|224:(e[i++]=n>>18|240,e[i++]=n>>12&63|128),e[i++]=n>>6&63|128),e[i++]=63&n|128)}return i}t.exports=n;var T=e("ieee754");n.Varint=0,n.Fixed64=1,n.Bytes=2,n.Fixed32=5;n.prototype={destroy:function(){this.buf=null},readFields:function(e,t,i){for(i=i||this.length;this.pos<i;){var n=this.readVarint(),o=n>>3,r=this.pos;this.type=7&n,e(o,t,this),this.pos===r&&this.skip(n)}return t},readMessage:function(e,t){return this.readFields(e,t,this.readVarint()+this.pos)},readFixed32:function(){var e=b(this.buf,this.pos);return this.pos+=4,e},readSFixed32:function(){var e=w(this.buf,this.pos);return this.pos+=4,e},readFixed64:function(){var e=b(this.buf,this.pos)+4294967296*b(this.buf,this.pos+4);return this.pos+=8,e},readSFixed64:function(){var e=b(this.buf,this.pos)+4294967296*w(this.buf,this.pos+4);return this.pos+=8,e},readFloat:function(){var e=T.read(this.buf,this.pos,!0,23,4);return this.pos+=4,e},readDouble:function(){var e=T.read(this.buf,this.pos,!0,52,8);return this.pos+=8,e},readVarint:function(e){var t,i,n=this.buf;return i=n[this.pos++],t=127&i,i<128?t:(i=n[this.pos++],t|=(127&i)<<7,i<128?t:(i=n[this.pos++],t|=(127&i)<<14,i<128?t:(i=n[this.pos++],t|=(127&i)<<21,i<128?t:(i=n[this.pos],t|=(15&i)<<28,o(t,e,this)))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var e=this.readVarint();return e%2==1?(e+1)/-2:e/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var e=this.readVarint()+this.pos,t=z(this.buf,this.pos,e);return this.pos=e,t},readBytes:function(){var e=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,e);return this.pos=e,t},readPackedVarint:function(e,t){var i=r(this);for(e=e||[];this.pos<i;)e.push(this.readVarint(t));return e},readPackedSVarint:function(e){var t=r(this);for(e=e||[];this.pos<t;)e.push(this.readSVarint());return e},readPackedBoolean:function(e){var t=r(this);for(e=e||[];this.pos<t;)e.push(this.readBoolean());return e},readPackedFloat:function(e){var t=r(this);for(e=e||[];this.pos<t;)e.push(this.readFloat());return e},readPackedDouble:function(e){var t=r(this);for(e=e||[];this.pos<t;)e.push(this.readDouble());return e},readPackedFixed32:function(e){var t=r(this);for(e=e||[];this.pos<t;)e.push(this.readFixed32());return e},readPackedSFixed32:function(e){var t=r(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed32());return e},readPackedFixed64:function(e){var t=r(this);for(e=e||[];this.pos<t;)e.push(this.readFixed64());return e},readPackedSFixed64:function(e){var t=r(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed64());return e},skip:function(e){var t=7&e;if(t===n.Varint)for(;this.buf[this.pos++]>127;);else if(t===n.Bytes)this.pos=this.readVarint()+this.pos;else if(t===n.Fixed32)this.pos+=4;else{if(t!==n.Fixed64)throw new Error("Unimplemented type: "+t);this.pos+=8}},writeTag:function(e,t){this.writeVarint(e<<3|t)},realloc:function(e){for(var t=this.length||16;t<this.pos+e;)t*=2;if(t!==this.length){var i=new Uint8Array(t);i.set(this.buf),this.buf=i,this.length=t}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(e){this.realloc(4),x(this.buf,e,this.pos),this.pos+=4},writeSFixed32:function(e){this.realloc(4),x(this.buf,e,this.pos),this.pos+=4},writeFixed64:function(e){this.realloc(8),x(this.buf,-1&e,this.pos),x(this.buf,Math.floor(e*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(e){this.realloc(8),x(this.buf,-1&e,this.pos),x(this.buf,Math.floor(e*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(e){if((e=+e||0)>268435455||e<0)return void s(e,this);this.realloc(4),this.buf[this.pos++]=127&e|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=e>>>7&127)))},writeSVarint:function(e){this.writeVarint(e<0?2*-e-1:2*e)},writeBoolean:function(e){this.writeVarint(Boolean(e))},writeString:function(e){e=String(e),this.realloc(4*e.length),this.pos++;var t=this.pos;this.pos=A(this.buf,e,this.pos);var i=this.pos-t;i>=128&&c(t,i,this),this.pos=t-1,this.writeVarint(i),this.pos+=i},writeFloat:function(e){this.realloc(4),T.write(this.buf,e,this.pos,!0,23,4),this.pos+=4},writeDouble:function(e){this.realloc(8),T.write(this.buf,e,this.pos,!0,52,8),this.pos+=8},writeBytes:function(e){var t=e.length;this.writeVarint(t),this.realloc(t);for(var i=0;i<t;i++)this.buf[this.pos++]=e[i]},writeRawMessage:function(e,t){this.pos++;var i=this.pos;e(t,this);var n=this.pos-i;n>=128&&c(i,n,this),this.pos=i-1,this.writeVarint(n),this.pos+=n},writeMessage:function(e,t,i){this.writeTag(e,n.Bytes),this.writeRawMessage(t,i)},writePackedVarint:function(e,t){this.writeMessage(e,p,t)},writePackedSVarint:function(e,t){this.writeMessage(e,f,t)},writePackedBoolean:function(e,t){this.writeMessage(e,m,t)},writePackedFloat:function(e,t){this.writeMessage(e,d,t)},writePackedDouble:function(e,t){this.writeMessage(e,h,t)},writePackedFixed32:function(e,t){this.writeMessage(e,y,t)},writePackedSFixed32:function(e,t){this.writeMessage(e,v,t)},writePackedFixed64:function(e,t){this.writeMessage(e,g,t)},writePackedSFixed64:function(e,t){this.writeMessage(e,_,t)},writeBytesField:function(e,t){this.writeTag(e,n.Bytes),this.writeBytes(t)},writeFixed32Field:function(e,t){this.writeTag(e,n.Fixed32),this.writeFixed32(t)},writeSFixed32Field:function(e,t){this.writeTag(e,n.Fixed32),this.writeSFixed32(t)},writeFixed64Field:function(e,t){this.writeTag(e,n.Fixed64),this.writeFixed64(t)},writeSFixed64Field:function(e,t){this.writeTag(e,n.Fixed64),this.writeSFixed64(t)},writeVarintField:function(e,t){this.writeTag(e,n.Varint),this.writeVarint(t)},writeSVarintField:function(e,t){this.writeTag(e,n.Varint),this.writeSVarint(t)},writeStringField:function(e,t){this.writeTag(e,n.Bytes),this.writeString(t)},writeFloatField:function(e,t){this.writeTag(e,n.Fixed32),this.writeFloat(t)},writeDoubleField:function(e,t){this.writeTag(e,n.Fixed64),this.writeDouble(t)},writeBooleanField:function(e,t){this.writeVarintField(e,Boolean(t))}}},{ieee754:24}],39:[function(e,t,i){function n(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function r(e){if(p===setTimeout)return setTimeout(e,0);if((p===n||!p)&&setTimeout)return p=setTimeout,setTimeout(e,0);try{return p(e,0)}catch(t){try{return p.call(null,e,0)}catch(t){return p.call(this,e,0)}}}function a(e){if(f===clearTimeout)return clearTimeout(e);if((f===o||!f)&&clearTimeout)return f=clearTimeout,clearTimeout(e);try{return f(e)}catch(t){try{return f.call(null,e)}catch(t){return f.call(this,e)}}}function s(){y&&h&&(y=!1,h.length?m=h.concat(m):v=-1,m.length&&l())}function l(){if(!y){var e=r(s);y=!0;for(var t=m.length;t;){for(h=m,m=[];++v<t;)h&&h[v].run();v=-1,t=m.length}h=null,y=!1,a(e)}}function u(e,t){this.fun=e,this.array=t}function c(){}var p,f,d=t.exports={};!function(){try{p="function"==typeof setTimeout?setTimeout:n}catch(e){p=n}try{f="function"==typeof clearTimeout?clearTimeout:o}catch(e){f=o}}();var h,m=[],y=!1,v=-1;d.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)t[i-1]=arguments[i];m.push(new u(e,t)),1!==m.length||y||r(l)},u.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={},d.on=c,d.addListener=c,d.once=c,d.off=c,d.removeListener=c,d.removeAllListeners=c,d.emit=c,d.prependListener=c,d.prependOnceListener=c,d.listeners=function(e){return[]},d.binding=function(e){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(e){throw new Error("process.chdir is not supported")},d.umask=function(){return 0}},{}],40:[function(e,t,i){function n(e,t,i,a,s){for(i=i||0,a=a||e.length-1,s=s||r;a>i;){if(a-i>600){var l=a-i+1,u=t-i+1,c=Math.log(l),p=.5*Math.exp(2*c/3),f=.5*Math.sqrt(c*p*(l-p)/l)*(u-l/2<0?-1:1);n(e,t,Math.max(i,Math.floor(t-u*p/l+f)),Math.min(a,Math.floor(t+(l-u)*p/l+f)),s)}var d=e[t],h=i,m=a;for(o(e,i,t),s(e[a],d)>0&&o(e,i,a);h<m;){for(o(e,h,m),h++,m--;s(e[h],d)<0;)h++;for(;s(e[m],d)>0;)m--}0===s(e[i],d)?o(e,i,m):(m++,o(e,m,a)),m<=t&&(i=m+1),t<=m&&(a=m-1)}}function o(e,t,i){var n=e[t];e[t]=e[i],e[i]=n}function r(e,t){return e<t?-1:e>t?1:0}t.exports=n},{}],41:[function(e,t,i){function n(e){return new o(e)}function o(e){this.options=d(F()(this.options),e),this.trees=new Array(this.options.maxZoom+1)}function r(e,t,i,n,o){return{x:e,y:t,zoom:1/0,id:n,properties:o,parentId:-1,numPoints:i}}function a(e,t){var i=e.geometry.coordinates;return{x:u(i[0]),y:c(i[1]),zoom:1/0,id:t,parentId:-1}}function s(e){return{type:"Feature",properties:l(e),geometry:{type:"Point",coordinates:[p(e.x),f(e.y)]}}}function l(e){var t=e.numPoints,i=t>=1e4?Math.round(t/1e3)+"k":t>=1e3?Math.round(t/100)/10+"k":t;return d(d({},e.properties),{cluster:!0,cluster_id:e.id,point_count:t,point_count_abbreviated:i})}function u(e){return e/360+.5}function c(e){var t=Math.sin(e*Math.PI/180),i=.5-.25*Math.log((1+t)/(1-t))/Math.PI;return i<0?0:i>1?1:i}function p(e){return 360*(e-.5)}function f(e){var t=(180-360*e)*Math.PI/180;return 360*Math.atan(Math.exp(t))/Math.PI-90}function d(e,t){for(var i in t)e[i]=t[i];return e}function h(e){return e.x}function m(e){return e.y}var y=e("kdbush");t.exports=n,o.prototype={options:{minZoom:0,maxZoom:16,radius:40,extent:512,nodeSize:64,log:!1,reduce:null,initial:function(){return{}},map:function(e){return e}},load:function(e){var t=this.options.log;t&&console.time("total time");var i="prepare "+e.length+" points";t&&console.time(i),this.points=e;var n=e.map(a);t&&console.timeEnd(i);for(var o=this.options.maxZoom;o>=this.options.minZoom;o--){var r=+Date.now();this.trees[o+1]=y(n,h,m,this.options.nodeSize,Float32Array),n=this._cluster(n,o),t&&console.log("z%d: %d clusters in %dms",o,n.length,+Date.now()-r)}return this.trees[this.options.minZoom]=y(n,h,m,this.options.nodeSize,Float32Array),t&&console.timeEnd("total time"),this},getClusters:function(e,t){for(var i=this.trees[this._limitZoom(t)],n=i.range(u(e[0]),c(e[3]),u(e[2]),c(e[1])),o=[],r=0;r<n.length;r++){var a=i.points[n[r]];o.push(a.numPoints?s(a):this.points[a.id])}return o},getChildren:function(e,t){for(var i=this.trees[t+1].points[e],n=this.options.radius/(this.options.extent*Math.pow(2,t)),o=this.trees[t+1].within(i.x,i.y,n),r=[],a=0;a<o.length;a++){var l=this.trees[t+1].points[o[a]];l.parentId===e&&r.push(l.numPoints?s(l):this.points[l.id])}return r},getLeaves:function(e,t,i,n){i=i||10,n=n||0;var o=[];return this._appendLeaves(o,e,t,i,n,0),o},getTile:function(e,t,i){var n=this.trees[this._limitZoom(e)],o=Math.pow(2,e),r=this.options.extent,a=this.options.radius,s=a/r,l=(i-s)/o,u=(i+1+s)/o,c={features:[]};return this._addTileFeatures(n.range((t-s)/o,l,(t+1+s)/o,u),n.points,t,i,o,c),0===t&&this._addTileFeatures(n.range(1-s/o,l,1,u),n.points,o,i,o,c),t===o-1&&this._addTileFeatures(n.range(0,l,s/o,u),n.points,-1,i,o,c),c.features.length?c:null},getClusterExpansionZoom:function(e,t){for(;t<this.options.maxZoom;){var i=this.getChildren(e,t);if(t++,1!==i.length)break;e=i[0].properties.cluster_id}return t},_appendLeaves:function(e,t,i,n,o,r){for(var a=this.getChildren(t,i),s=0;s<a.length;s++){var l=a[s].properties;if(l.cluster?r+l.point_count<=o?r+=l.point_count:r=this._appendLeaves(e,l.cluster_id,i+1,n,o,r):r<o?r++:e.push(a[s]),e.length===n)break}return r},_addTileFeatures:function(e,t,i,n,o,r){for(var a=0;a<e.length;a++){var s=t[e[a]];r.features.push({type:1,geometry:[[Math.round(this.options.extent*(s.x*o-i)),Math.round(this.options.extent*(s.y*o-n))]],tags:s.numPoints?l(s):this.points[s.id].properties})}},_limitZoom:function(e){return Math.max(this.options.minZoom,Math.min(e,this.options.maxZoom+1))},_cluster:function(e,t){for(var i=[],n=this.options.radius/(this.options.extent*Math.pow(2,t)),o=0;o<e.length;o++){var a=e[o];if(!(a.zoom<=t)){a.zoom=t;var s=this.trees[t+1],l=s.within(a.x,a.y,n),u=a.numPoints||1,c=a.x*u,p=a.y*u,f=null;this.options.reduce&&(f=this.options.initial(),this._accumulate(f,a));for(var d=0;d<l.length;d++){var h=s.points[l[d]];if(t<h.zoom){var m=h.numPoints||1;h.zoom=t,c+=h.x*m,p+=h.y*m,u+=m,h.parentId=o,this.options.reduce&&this._accumulate(f,h)}}1===u?i.push(a):(a.parentId=o,i.push(r(c/u,p/u,u,o,f)))}}return i},_accumulate:function(e,t){var i=t.numPoints?t.properties:this.options.map(this.points[t.id].properties);this.options.reduce(e,i)}}},{kdbush:25}],42:[function(e,t,i){function n(e,t){if(!(this instanceof n))return new n(e,t);if(this.data=e||[],this.length=this.data.length,this.compare=t||o,this.length>0)for(var i=this.length>>1;i>=0;i--)this._down(i)}function o(e,t){return e<t?-1:e>t?1:0}t.exports=n,n.prototype={push:function(e){this.data.push(e),this.length++,this._up(this.length-1)},pop:function(){if(0!==this.length){var e=this.data[0];return this.length--,this.length>0&&(this.data[0]=this.data[this.length],this._down(0)),this.data.pop(),e}},peek:function(){return this.data[0]},_up:function(e){for(var t=this.data,i=this.compare,n=t[e];e>0;){var o=e-1>>1,r=t[o];if(i(n,r)>=0)break;t[e]=r,e=o}t[e]=n},_down:function(e){for(var t=this.data,i=this.compare,n=this.length,o=n>>1,r=t[e];e<o;){var a=1+(e<<1),s=a+1,l=t[a];if(s<n&&i(t[s],l)<0&&(a=s,l=t[s]),i(l,r)>=0)break;t[e]=l,e=a}t[e]=r}}},{}],43:[function(e,t,i){"function"==typeof F.a?t.exports=function(e,t){e.super_=t,e.prototype=F()(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:t.exports=function(e,t){e.super_=t;var i=function(){};i.prototype=t.prototype,e.prototype=new i,e.prototype.constructor=e}},{}],44:[function(e,t,i){t.exports=function(e){return e&&"object"==(void 0===e?"undefined":O()(e))&&"function"==typeof e.copy&&"function"==typeof e.fill&&"function"==typeof e.readUInt8}},{}],45:[function(t,i,n){(function(e,i){function o(e,t){var i={seen:[],stylize:a};return arguments.length>=3&&(i.depth=arguments[2]),arguments.length>=4&&(i.colors=arguments[3]),m(t)?i.showHidden=t:t&&n._extend(i,t),w(i.showHidden)&&(i.showHidden=!1),w(i.depth)&&(i.depth=2),w(i.colors)&&(i.colors=!1),w(i.customInspect)&&(i.customInspect=!0),i.colors&&(i.stylize=r),l(i,e,i.depth)}function r(e,t){var i=o.styles[t];return i?"["+o.colors[i][0]+"m"+e+"["+o.colors[i][1]+"m":e}function a(e,t){return e}function s(e){var t={};return e.forEach(function(e,i){t[e]=!0}),t}function l(e,t,i){if(e.customInspect&&t&&S(t.inspect)&&t.inspect!==n.inspect&&(!t.constructor||t.constructor.prototype!==t)){var o=t.inspect(i,e);return _(o)||(o=l(e,o,i)),o}var r=u(e,t);if(r)return r;var a=R()(t),m=s(a);if(e.showHidden&&(a=C()(t)),k(t)&&(a.indexOf("message")>=0||a.indexOf("description")>=0))return c(t);if(0===a.length){if(S(t)){var y=t.name?": "+t.name:"";return e.stylize("[Function"+y+"]","special")}if(z(t))return e.stylize(RegExp.prototype.toString.call(t),"regexp");if(T(t))return e.stylize(Date.prototype.toString.call(t),"date");if(k(t))return c(t)}var v="",g=!1,b=["{","}"];if(h(t)&&(g=!0,b=["[","]"]),S(t)&&(v=" [Function"+(t.name?": "+t.name:"")+"]"),z(t)&&(v=" "+RegExp.prototype.toString.call(t)),T(t)&&(v=" "+Date.prototype.toUTCString.call(t)),k(t)&&(v=" "+c(t)),0===a.length&&(!g||0==t.length))return b[0]+v+b[1];if(i<0)return z(t)?e.stylize(RegExp.prototype.toString.call(t),"regexp"):e.stylize("[Object]","special");e.seen.push(t);var x;return x=g?p(e,t,i,m,a):a.map(function(n){return f(e,t,i,m,n,g)}),e.seen.pop(),d(x,v,b)}function u(e,t){if(w(t))return e.stylize("undefined","undefined");if(_(t)){var i="'"+D()(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(i,"string")}return g(t)?e.stylize(""+t,"number"):m(t)?e.stylize(""+t,"boolean"):y(t)?e.stylize("null","null"):void 0}function c(e){return"["+Error.prototype.toString.call(e)+"]"}function p(e,t,i,n,o){for(var r=[],a=0,s=t.length;a<s;++a)P(t,String(a))?r.push(f(e,t,i,n,String(a),!0)):r.push("");return o.forEach(function(o){o.match(/^\d+$/)||r.push(f(e,t,i,n,o,!0))}),r}function f(e,t,i,n,o,r){var a,s,u;if(u=x()(t,o)||{value:t[o]},u.get?s=u.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):u.set&&(s=e.stylize("[Setter]","special")),P(n,o)||(a="["+o+"]"),s||(e.seen.indexOf(u.value)<0?(s=y(i)?l(e,u.value,null):l(e,u.value,i-1),s.indexOf("\n")>-1&&(s=r?s.split("\n").map(function(e){return"  "+e}).join("\n").substr(2):"\n"+s.split("\n").map(function(e){return"   "+e}).join("\n"))):s=e.stylize("[Circular]","special")),w(a)){if(r&&o.match(/^\d+$/))return s;a=D()(""+o),a.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(a=a.substr(1,a.length-2),a=e.stylize(a,"name")):(a=a.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),a=e.stylize(a,"string"))}return a+": "+s}function d(e,t,i){var n=0;return e.reduce(function(e,t){return n++,t.indexOf("\n")>=0&&n++,e+t.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?i[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+i[1]:i[0]+t+" "+e.join(", ")+" "+i[1]}function h(e){return Array.isArray(e)}function m(e){return"boolean"==typeof e}function y(e){return null===e}function v(e){return null==e}function g(e){return"number"==typeof e}function _(e){return"string"==typeof e}function b(e){return"symbol"==(void 0===e?"undefined":O()(e))}function w(e){return void 0===e}function z(e){return A(e)&&"[object RegExp]"===M(e)}function A(e){return"object"==(void 0===e?"undefined":O()(e))&&null!==e}function T(e){return A(e)&&"[object Date]"===M(e)}function k(e){return A(e)&&("[object Error]"===M(e)||e instanceof Error)}function S(e){return"function"==typeof e}function E(e){return null===e||"boolean"==typeof e||"number"==typeof e||"string"==typeof e||"symbol"==(void 0===e?"undefined":O()(e))||void 0===e}function M(e){return Object.prototype.toString.call(e)}function I(e){return e<10?"0"+e.toString(10):e.toString(10)}function L(){var e=new Date,t=[I(e.getHours()),I(e.getMinutes()),I(e.getSeconds())].join(":");return[e.getDate(),N[e.getMonth()],t].join(" ")}function P(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var B=/%[sdj%]/g;n.format=function(e){if(!_(e)){for(var t=[],i=0;i<arguments.length;i++)t.push(o(arguments[i]));return t.join(" ")}for(var i=1,n=arguments,r=n.length,a=String(e).replace(B,function(e){if("%%"===e)return"%";if(i>=r)return e;switch(e){case"%s":return String(n[i++]);case"%d":return Number(n[i++]);case"%j":try{return D()(n[i++])}catch(e){return"[Circular]"}default:return e}}),s=n[i];i<r;s=n[++i])y(s)||!A(s)?a+=" "+s:a+=" "+o(s);return a},n.deprecate=function(t,o){function r(){if(!a){if(e.throwDeprecation)throw new Error(o);e.traceDeprecation?console.trace(o):console.error(o),a=!0}return t.apply(this,arguments)}if(w(i.process))return function(){return n.deprecate(t,o).apply(this,arguments)};if(!0===e.noDeprecation)return t;var a=!1;return r};var F,j={};n.debuglog=function(t){if(w(F)&&(F=e.env.NODE_DEBUG||""),t=t.toUpperCase(),!j[t])if(new RegExp("\\b"+t+"\\b","i").test(F)){var i=e.pid;j[t]=function(){var e=n.format.apply(n,arguments);console.error("%s %d: %s",t,i,e)}}else j[t]=function(){};return j[t]},n.inspect=o,o.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},o.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},n.isArray=h,n.isBoolean=m,n.isNull=y,n.isNullOrUndefined=v,n.isNumber=g,n.isString=_,n.isSymbol=b,n.isUndefined=w,n.isRegExp=z,n.isObject=A,n.isDate=T,n.isError=k,n.isFunction=S,n.isPrimitive=E,n.isBuffer=t("./support/isBuffer");var N=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];n.log=function(){console.log("%s - %s",L(),n.format.apply(n,arguments))},n.inherits=t("inherits"),n._extend=function(e,t){if(!t||!A(t))return e;for(var i=R()(t),n=i.length;n--;)e[i[n]]=t[i[n]];return e}}).call(this,t("_process"),void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./support/isBuffer":44,_process:39,inherits:43}],46:[function(e,t,i){function n(e){var t=new d;return r(e,t),t.finish()}function o(e){var t={};for(var i in e)t[i]=new h(e[i].features),t[i].name=i;return n({layers:t})}function r(e,t){for(var i in e.layers)t.writeMessage(3,a,e.layers[i])}function a(e,t){t.writeVarintField(15,e.version||1),t.writeStringField(1,e.name||""),t.writeVarintField(5,e.extent||4096);var i,n={keys:[],values:[],keycache:{},valuecache:{}};for(i=0;i<e.length;i++)n.feature=e.feature(i),t.writeMessage(2,s,n);var o=n.keys;for(i=0;i<o.length;i++)t.writeStringField(3,o[i]);var r=n.values;for(i=0;i<r.length;i++)t.writeMessage(4,f,r[i])}function s(e,t){var i=e.feature;void 0!==i.id&&t.writeVarintField(1,i.id),t.writeMessage(2,l,e),t.writeVarintField(3,i.type),t.writeMessage(4,p,i)}function l(e,t){var i=e.feature,n=e.keys,o=e.values,r=e.keycache,a=e.valuecache;for(var s in i.properties){var l=r[s];void 0===l&&(n.push(s),l=n.length-1,r[s]=l),t.writeVarint(l);var u=i.properties[s],c=void 0===u?"undefined":O()(u);"string"!==c&&"boolean"!==c&&"number"!==c&&(u=D()(u));var p=c+":"+u,f=a[p];void 0===f&&(o.push(u),f=o.length-1,a[p]=f),t.writeVarint(f)}}function u(e,t){return(t<<3)+(7&e)}function c(e){return e<<1^e>>31}function p(e,t){for(var i=e.loadGeometry(),n=e.type,o=0,r=0,a=i.length,s=0;s<a;s++){var l=i[s],p=1;1===n&&(p=l.length),t.writeVarint(u(1,p));for(var f=0;f<l.length;f++){1===f&&1!==n&&t.writeVarint(u(2,l.length-1));var d=l[f].x-o,h=l[f].y-r;t.writeVarint(c(d)),t.writeVarint(c(h)),o+=d,r+=h}}}function f(e,t){var i=void 0===e?"undefined":O()(e);"string"===i?t.writeStringField(1,e):"boolean"===i?t.writeBooleanField(7,e):"number"===i&&(e%1!=0?t.writeDoubleField(3,e):e<0?t.writeSVarintField(6,e):t.writeVarintField(5,e))}var d=e("pbf"),h=e("./lib/geojson_wrapper");t.exports=n,t.exports.fromVectorTileJs=n,t.exports.fromGeojsonVt=o,t.exports.GeoJSONWrapper=h},{"./lib/geojson_wrapper":47,pbf:38}],47:[function(e,t,i){function n(e){this.features=e,this.length=e.length}function o(e){this.id="number"==typeof e.id?e.id:void 0,this.type=e.type,this.rawGeometry=1===e.type?[e.geometry]:e.geometry,this.properties=e.tags,this.extent=4096}var r=e("@mapbox/point-geometry"),a=e("@mapbox/vector-tile").VectorTileFeature;t.exports=n,n.prototype.feature=function(e){return new o(this.features[e])},o.prototype.loadGeometry=function(){var e=this.rawGeometry;this.geometry=[];for(var t=0;t<e.length;t++){for(var i=e[t],n=[],o=0;o<i.length;o++)n.push(new r(i[o][0],i[o][1]));this.geometry.push(n)}return this.geometry},o.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var e=this.geometry,t=1/0,i=-1/0,n=1/0,o=-1/0,r=0;r<e.length;r++)for(var a=e[r],s=0;s<a.length;s++){var l=a[s];t=Math.min(t,l.x),i=Math.max(i,l.x),n=Math.min(n,l.y),o=Math.max(o,l.y)}return[t,n,i,o]},o.prototype.toGeoJSON=a.prototype.toGeoJSON},{"@mapbox/point-geometry":2,"@mapbox/vector-tile":6}],48:[function(e,t,i){var n=arguments[3],o=arguments[4],r=arguments[5],a=D.a;t.exports=function(e,t){function i(e){y[e]=!0;for(var t in o[e][1]){var n=o[e][1][t];y[n]||i(n)}}for(var s,l=R()(r),u=0,c=l.length;u<c;u++){var p=l[u],f=r[p].exports;if(f===e||f&&f.default===e){s=p;break}}if(!s){s=Math.floor(Math.pow(16,8)*Math.random()).toString(16);for(var d={},u=0,c=l.length;u<c;u++){var p=l[u];d[p]=p}o[s]=[Function(["require","module","exports"],"("+e+")(self)"),d]}var h=Math.floor(Math.pow(16,8)*Math.random()).toString(16),m={};m[s]=s,o[h]=[Function(["require"],"var f = require("+a(s)+");(f.default ? f.default : f)(self);"),m];var y={};i(h);var v="("+n+")({"+R()(y).map(function(e){return a(e)+":["+o[e][0]+","+a(o[e][1])+"]"}).join(",")+"},{},["+a(h)+"])",g=window.URL||window.webkitURL||window.mozURL||window.msURL,_=new Blob([v],{type:"text/javascript"});if(t&&t.bare)return _;var b=g.createObjectURL(_),x=new Worker(b);return x.objectURL=b,x}},{}],49:[function(e,t,i){t.exports.RADIUS=6378137,t.exports.FLATTENING=1/298.257223563,t.exports.POLAR_RADIUS=6356752.3142},{}],50:[function(e,t,i){t.exports={version:"0.42.2"}},{}],51:[function(e,t,i){var n=e("../util/util");t.exports={deserialize:function(e,t){var i={};if(!t)return i;for(var o=0,r=e;o<r.length;o+=1){var a=r[o],s=a.layerIds.map(function(e){return t.getLayer(e)}).filter(Boolean);if(0!==s.length)for(var l=s[0].createBucket(n.extend({layers:s},a)),u=0,c=s;u<c.length;u+=1){var p=c[u];i[p.id]=l}}return i}}},{"../util/util":266}],52:[function(e,t,i){function n(e,t,i,n,o){e.emplaceBack(2*t+(n+1)/2,2*i+(o+1)/2)}var o=e("../segment"),r=o.SegmentVector,a=e("../../gl/vertex_buffer"),s=e("../../gl/index_buffer"),l=e("../program_configuration"),u=l.ProgramConfigurationSet,c=e("../vertex_array_type"),p=e("../index_array_type"),f=p.TriangleIndexArray,d=e("../load_geometry"),h=e("../extent"),m={layoutAttributes:[{name:"a_pos",components:2,type:"Int16"}],indexArrayType:f,paintAttributes:[{property:"circle-color"},{property:"circle-radius"},{property:"circle-blur"},{property:"circle-opacity"},{property:"circle-stroke-color"},{property:"circle-stroke-width"},{property:"circle-stroke-opacity"}]},y=c(m.layoutAttributes),v=function(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.index=e.index,this.layoutVertexArray=new y(e.layoutVertexArray),this.indexArray=new f(e.indexArray),this.segments=new r(e.segments),this.programConfigurations=new u(this.constructor.programInterface,e.layers,e.zoom,e.programConfigurations)};v.prototype.populate=function(e,t){for(var i=this,n=0,o=e;n<o.length;n+=1){var r=o[n],a=r.feature,s=r.index,l=r.sourceLayerIndex;if(i.layers[0]._featureFilter({zoom:i.zoom},a)){var u=d(a);i.addFeature(a,u),t.featureIndex.insert(a,u,s,l,i.index)}}},v.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},v.prototype.serialize=function(e){return{zoom:this.zoom,layerIds:this.layers.map(function(e){return e.id}),layoutVertexArray:this.layoutVertexArray.serialize(e),indexArray:this.indexArray.serialize(e),programConfigurations:this.programConfigurations.serialize(e),segments:this.segments.get()}},v.prototype.upload=function(e){this.layoutVertexBuffer=new a(e,this.layoutVertexArray),this.indexBuffer=new s(e,this.indexArray),this.programConfigurations.upload(e)},v.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},v.prototype.addFeature=function(e,t){for(var i=this,o=0,r=t;o<r.length;o+=1)for(var a=r[o],s=0,l=a;s<l.length;s+=1){var u=l[s],c=u.x,p=u.y;if(!(c<0||c>=h||p<0||p>=h)){var f=i.segments.prepareSegment(4,i.layoutVertexArray,i.indexArray),d=f.vertexLength;n(i.layoutVertexArray,c,p,-1,-1),n(i.layoutVertexArray,c,p,1,-1),n(i.layoutVertexArray,c,p,1,1),n(i.layoutVertexArray,c,p,-1,1),i.indexArray.emplaceBack(d,d+1,d+2),i.indexArray.emplaceBack(d,d+3,d+2),f.vertexLength+=4,f.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e)},v.programInterface=m,t.exports=v},{"../../gl/index_buffer":71,"../../gl/vertex_buffer":72,"../extent":58,"../index_array_type":60,"../load_geometry":61,"../program_configuration":63,"../segment":65,"../vertex_array_type":66}],53:[function(e,t,i){var n=e("../segment"),o=n.SegmentVector,r=e("../../gl/vertex_buffer"),a=e("../../gl/index_buffer"),s=e("../program_configuration"),l=s.ProgramConfigurationSet,u=e("../vertex_array_type"),c=e("../index_array_type"),p=c.LineIndexArray,f=c.TriangleIndexArray,d=e("../load_geometry"),h=e("earcut"),m=e("../../util/classify_rings"),y={layoutAttributes:[{name:"a_pos",components:2,type:"Int16"}],indexArrayType:f,indexArrayType2:p,paintAttributes:[{property:"fill-color"},{property:"fill-outline-color"},{property:"fill-opacity"}]},v=u(y.layoutAttributes),g=function(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.index=e.index,this.layoutVertexArray=new v(e.layoutVertexArray),this.indexArray=new f(e.indexArray),this.indexArray2=new p(e.indexArray2),this.programConfigurations=new l(y,e.layers,e.zoom,e.programConfigurations),this.segments=new o(e.segments),this.segments2=new o(e.segments2)};g.prototype.populate=function(e,t){for(var i=this,n=0,o=e;n<o.length;n+=1){var r=o[n],a=r.feature,s=r.index,l=r.sourceLayerIndex;if(i.layers[0]._featureFilter({zoom:i.zoom},a)){var u=d(a);i.addFeature(a,u),t.featureIndex.insert(a,u,s,l,i.index)}}},g.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},g.prototype.serialize=function(e){return{zoom:this.zoom,layerIds:this.layers.map(function(e){return e.id}),layoutVertexArray:this.layoutVertexArray.serialize(e),indexArray:this.indexArray.serialize(e),indexArray2:this.indexArray2.serialize(e),programConfigurations:this.programConfigurations.serialize(e),segments:this.segments.get(),segments2:this.segments2.get()}},g.prototype.upload=function(e){this.layoutVertexBuffer=new r(e,this.layoutVertexArray),this.indexBuffer=new a(e,this.indexArray),this.indexBuffer2=new a(e,this.indexArray2),this.programConfigurations.upload(e)},g.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},g.prototype.addFeature=function(e,t){for(var i=this,n=0,o=m(t,500);n<o.length;n+=1){for(var r=o[n],a=0,s=0,l=r;s<l.length;s+=1)a+=l[s].length;for(var u=i.segments.prepareSegment(a,i.layoutVertexArray,i.indexArray),c=u.vertexLength,p=[],f=[],d=0,y=r;d<y.length;d+=1){var v=y[d];if(0!==v.length){v!==r[0]&&f.push(p.length/2);var g=i.segments2.prepareSegment(v.length,i.layoutVertexArray,i.indexArray2),_=g.vertexLength;i.layoutVertexArray.emplaceBack(v[0].x,v[0].y),i.indexArray2.emplaceBack(_+v.length-1,_),p.push(v[0].x),p.push(v[0].y);for(var b=1;b<v.length;b++)i.layoutVertexArray.emplaceBack(v[b].x,v[b].y),i.indexArray2.emplaceBack(_+b-1,_+b),p.push(v[b].x),p.push(v[b].y);g.vertexLength+=v.length,g.primitiveLength+=v.length}}for(var x=h(p,f),w=0;w<x.length;w+=3)i.indexArray.emplaceBack(c+x[w],c+x[w+1],c+x[w+2]);u.vertexLength+=a,u.primitiveLength+=x.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e)},g.programInterface=y,t.exports=g},{"../../gl/index_buffer":71,"../../gl/vertex_buffer":72,"../../util/classify_rings":248,"../index_array_type":60,"../load_geometry":61,"../program_configuration":63,"../segment":65,"../vertex_array_type":66,earcut:12}],54:[function(e,t,i){function n(e,t,i,n,o,r,a,s){e.emplaceBack(t,i,2*Math.floor(n*b)+a,o*b*2,r*b*2,Math.round(s))}function o(e,t){return e.x===t.x&&(e.x<0||e.x>y)||e.y===t.y&&(e.y<0||e.y>y)}var r=e("../segment"),a=r.SegmentVector,s=r.MAX_VERTEX_ARRAY_LENGTH,l=e("../../gl/vertex_buffer"),u=e("../../gl/index_buffer"),c=e("../program_configuration"),p=c.ProgramConfigurationSet,f=e("../vertex_array_type"),d=e("../index_array_type"),h=d.TriangleIndexArray,m=e("../load_geometry"),y=e("../extent"),v=e("earcut"),g=e("../../util/classify_rings"),_={layoutAttributes:[{name:"a_pos",components:2,type:"Int16"},{name:"a_normal",components:3,type:"Int16"},{name:"a_edgedistance",components:1,type:"Int16"}],indexArrayType:h,paintAttributes:[{property:"fill-extrusion-base"},{property:"fill-extrusion-height"},{property:"fill-extrusion-color"}]},b=Math.pow(2,13),x=f(_.layoutAttributes),w=function(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.index=e.index,this.layoutVertexArray=new x(e.layoutVertexArray),this.indexArray=new h(e.indexArray),this.programConfigurations=new p(_,e.layers,e.zoom,e.programConfigurations),this.segments=new a(e.segments)};w.prototype.populate=function(e,t){for(var i=this,n=0,o=e;n<o.length;n+=1){var r=o[n],a=r.feature,s=r.index,l=r.sourceLayerIndex;if(i.layers[0]._featureFilter({zoom:i.zoom},a)){var u=m(a);i.addFeature(a,u),t.featureIndex.insert(a,u,s,l,i.index)}}},w.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},w.prototype.serialize=function(e){return{zoom:this.zoom,layerIds:this.layers.map(function(e){return e.id}),layoutVertexArray:this.layoutVertexArray.serialize(e),indexArray:this.indexArray.serialize(e),programConfigurations:this.programConfigurations.serialize(e),segments:this.segments.get()}},w.prototype.upload=function(e){this.layoutVertexBuffer=new l(e,this.layoutVertexArray),this.indexBuffer=new u(e,this.indexArray),this.programConfigurations.upload(e)},w.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},w.prototype.addFeature=function(e,t){for(var i=this,r=0,a=g(t,500);r<a.length;r+=1){for(var l=a[r],u=0,c=0,p=l;c<p.length;c+=1)u+=p[c].length;for(var f=i.segments.prepareSegment(4,i.layoutVertexArray,i.indexArray),d=0,h=l;d<h.length;d+=1){var m=h[d];if(0!==m.length)for(var y=0,_=0;_<m.length;_++){var b=m[_];if(_>=1){var x=m[_-1];if(!o(b,x)){f.vertexLength+4>s&&(f=i.segments.prepareSegment(4,i.layoutVertexArray,i.indexArray));var w=b.sub(x)._perp()._unit();n(i.layoutVertexArray,b.x,b.y,w.x,w.y,0,0,y),n(i.layoutVertexArray,b.x,b.y,w.x,w.y,0,1,y),y+=x.dist(b),n(i.layoutVertexArray,x.x,x.y,w.x,w.y,0,0,y),n(i.layoutVertexArray,x.x,x.y,w.x,w.y,0,1,y);var z=f.vertexLength;i.indexArray.emplaceBack(z,z+1,z+2),i.indexArray.emplaceBack(z+1,z+2,z+3),f.vertexLength+=4,f.primitiveLength+=2}}}}f.vertexLength+u>s&&(f=i.segments.prepareSegment(u,i.layoutVertexArray,i.indexArray));for(var A=[],T=[],k=f.vertexLength,S=0,E=l;S<E.length;S+=1){var C=E[S];if(0!==C.length){C!==l[0]&&T.push(A.length/2);for(var M=0;M<C.length;M++){var I=C[M];n(i.layoutVertexArray,I.x,I.y,0,0,1,1,0),A.push(I.x),A.push(I.y)}}}for(var L=v(A,T),R=0;R<L.length;R+=3)i.indexArray.emplaceBack(k+L[R],k+L[R+1],k+L[R+2]);f.primitiveLength+=L.length/3,f.vertexLength+=u}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,e)},w.programInterface=_,t.exports=w},{"../../gl/index_buffer":71,"../../gl/vertex_buffer":72,"../../util/classify_rings":248,"../extent":58,"../index_array_type":60,"../load_geometry":61,"../program_configuration":63,"../segment":65,"../vertex_array_type":66,earcut:12}],55:[function(e,t,i){var n=e("./circle_bucket"),o={layoutAttributes:n.programInterface.layoutAttributes,indexArrayType:n.programInterface.indexArrayType,paintAttributes:[{property:"heatmap-weight"}]},r=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=F()(e&&e.prototype),t.prototype.constructor=t,t}(n);r.programInterface=o,t.exports=r},{"./circle_bucket":52}],56:[function(e,t,i){function n(e,t,i,n,o,r,a){e.emplaceBack(t.x,t.y,n?1:0,o?1:-1,Math.round(y*i.x)+128,Math.round(y*i.y)+128,1+(0===r?0:r<0?-1:1)|(a*g&63)<<2,a*g>>6)}var o=e("../segment"),r=o.SegmentVector,a=e("../../gl/vertex_buffer"),s=e("../../gl/index_buffer"),l=e("../program_configuration"),u=l.ProgramConfigurationSet,c=e("../vertex_array_type"),p=e("../index_array_type"),f=p.TriangleIndexArray,d=e("../load_geometry"),h=e("../extent"),m=e("@mapbox/vector-tile").VectorTileFeature.types,y=63,v=Math.cos(Math.PI/180*37.5),g=.5,_=Math.pow(2,14)/g,b={layoutAttributes:[{name:"a_pos_normal",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],paintAttributes:[{property:"line-color"},{property:"line-blur"},{property:"line-opacity"},{property:"line-gap-width",name:"gapwidth"},{property:"line-offset"},{property:"line-width"},{property:"line-floorwidth"}],indexArrayType:f},x=c(b.layoutAttributes),w=function(e){this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.index=e.index,this.layoutVertexArray=new x(e.layoutVertexArray),this.indexArray=new f(e.indexArray),this.programConfigurations=new u(b,e.layers,e.zoom,e.programConfigurations),this.segments=new r(e.segments)};w.prototype.populate=function(e,t){for(var i=this,n=0,o=e;n<o.length;n+=1){var r=o[n],a=r.feature,s=r.index,l=r.sourceLayerIndex;if(i.layers[0]._featureFilter({zoom:i.zoom},a)){var u=d(a);i.addFeature(a,u),t.featureIndex.insert(a,u,s,l,i.index)}}},w.prototype.isEmpty=function(){return 0===this.layoutVertexArray.length},w.prototype.serialize=function(e){return{zoom:this.zoom,layerIds:this.layers.map(function(e){return e.id}),layoutVertexArray:this.layoutVertexArray.serialize(e),indexArray:this.indexArray.serialize(e),programConfigurations:this.programConfigurations.serialize(e),segments:this.segments.get()}},w.prototype.upload=function(e){this.layoutVertexBuffer=new a(e,this.layoutVertexArray),this.indexBuffer=new s(e,this.indexArray),this.programConfigurations.upload(e)},w.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},w.prototype.addFeature=function(e,t){for(var i=this,n=this.layers[0].layout,o=n.get("line-join").evaluate(e),r=n.get("line-cap"),a=n.get("line-miter-limit"),s=n.get("line-round-limit"),l=0,u=t;l<u.length;l+=1){var c=u[l];i.addLine(c,e,o,r,a,s)}},w.prototype.addLine=function(e,t,i,n,o,r){for(var a=this,s="Polygon"===m[t.type],l=e.length;l>=2&&e[l-1].equals(e[l-2]);)l--;for(var u=0;u<l-1&&e[u].equals(e[u+1]);)u++;if(!(l<(s?3:2))){"bevel"===i&&(o=1.05);var c=h/(512*this.overscaling)*15,p=e[u],f=this.segments.prepareSegment(10*l,this.layoutVertexArray,this.indexArray);this.distance=0;var d,y,g,_=n,b=s?"butt":n,x=!0,w=void 0,z=void 0,A=void 0,T=void 0;this.e1=this.e2=this.e3=-1,s&&(d=e[l-2],T=p.sub(d)._unit()._perp());for(var k=u;k<l;k++)if(!(z=s&&k===l-1?e[u+1]:e[k+1])||!e[k].equals(z)){T&&(A=T),d&&(w=d),d=e[k],T=z?z.sub(d)._unit()._perp():A,A=A||T;var S=A.add(T);0===S.x&&0===S.y||S._unit();var E=S.x*T.x+S.y*T.y,C=0!==E?1/E:1/0,M=E<v&&w&&z;if(M&&k>u){var I=d.dist(w);if(I>2*c){var L=d.sub(d.sub(w)._mult(c/I)._round());a.distance+=L.dist(w),a.addCurrentVertex(L,a.distance,A.mult(1),0,0,!1,f),w=L}}var R=w&&z,P=R?i:z?_:b;if(R&&"round"===P&&(C<r?P="miter":C<=2&&(P="fakeround")),"miter"===P&&C>o&&(P="bevel"),"bevel"===P&&(C>2&&(P="flipbevel"),C<o&&(P="miter")),w&&(a.distance+=d.dist(w)),"miter"===P)S._mult(C),a.addCurrentVertex(d,a.distance,S,0,0,!1,f);else if("flipbevel"===P){if(C>100)S=T.clone().mult(-1);else{var D=A.x*T.y-A.y*T.x>0?-1:1,B=C*A.add(T).mag()/A.sub(T).mag();S._perp()._mult(B*D)}a.addCurrentVertex(d,a.distance,S,0,0,!1,f),a.addCurrentVertex(d,a.distance,S.mult(-1),0,0,!1,f)}else if("bevel"===P||"fakeround"===P){var F=A.x*T.y-A.y*T.x>0,j=-Math.sqrt(C*C-1);if(F?(g=0,y=j):(y=0,g=j),x||a.addCurrentVertex(d,a.distance,A,y,g,!1,f),"fakeround"===P){for(var O=Math.floor(8*(.5-(E-.5))),N=void 0,V=0;V<O;V++)N=T.mult((V+1)/(O+1))._add(A)._unit(),a.addPieSliceVertex(d,a.distance,N,F,f);a.addPieSliceVertex(d,a.distance,S,F,f);for(var q=O-1;q>=0;q--)N=A.mult((q+1)/(O+1))._add(T)._unit(),a.addPieSliceVertex(d,a.distance,N,F,f)}z&&a.addCurrentVertex(d,a.distance,T,-y,-g,!1,f)}else"butt"===P?(x||a.addCurrentVertex(d,a.distance,A,0,0,!1,f),z&&a.addCurrentVertex(d,a.distance,T,0,0,!1,f)):"square"===P?(x||(a.addCurrentVertex(d,a.distance,A,1,1,!1,f),a.e1=a.e2=-1),z&&a.addCurrentVertex(d,a.distance,T,-1,-1,!1,f)):"round"===P&&(x||(a.addCurrentVertex(d,a.distance,A,0,0,!1,f),a.addCurrentVertex(d,a.distance,A,1,1,!0,f),a.e1=a.e2=-1),z&&(a.addCurrentVertex(d,a.distance,T,-1,-1,!0,f),a.addCurrentVertex(d,a.distance,T,0,0,!1,f)));if(M&&k<l-1){var U=d.dist(z);if(U>2*c){var Z=d.add(z.sub(d)._mult(c/U)._round());a.distance+=Z.dist(d),a.addCurrentVertex(Z,a.distance,T.mult(1),0,0,!1,f),d=Z}}x=!1}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,t)}},w.prototype.addCurrentVertex=function(e,t,i,o,r,a,s){var l,u=this.layoutVertexArray,c=this.indexArray;l=i.clone(),o&&l._sub(i.perp()._mult(o)),n(u,e,l,a,!1,o,t),this.e3=s.vertexLength++,this.e1>=0&&this.e2>=0&&(c.emplaceBack(this.e1,this.e2,this.e3),s.primitiveLength++),this.e1=this.e2,this.e2=this.e3,l=i.mult(-1),r&&l._sub(i.perp()._mult(r)),n(u,e,l,a,!0,-r,t),this.e3=s.vertexLength++,this.e1>=0&&this.e2>=0&&(c.emplaceBack(this.e1,this.e2,this.e3),s.primitiveLength++),this.e1=this.e2,this.e2=this.e3,t>_/2&&(this.distance=0,this.addCurrentVertex(e,this.distance,i,o,r,a,s))},w.prototype.addPieSliceVertex=function(e,t,i,o,r){i=i.mult(o?-1:1);var a=this.layoutVertexArray,s=this.indexArray;n(a,e,i,!1,o,0,t),this.e3=r.vertexLength++,this.e1>=0&&this.e2>=0&&(s.emplaceBack(this.e1,this.e2,this.e3),r.primitiveLength++),o?this.e2=this.e3:this.e1=this.e3},w.programInterface=b,t.exports=w},{"../../gl/index_buffer":71,"../../gl/vertex_buffer":72,"../extent":58,"../index_array_type":60,"../load_geometry":61,"../program_configuration":63,"../segment":65,"../vertex_array_type":66,"@mapbox/vector-tile":6}],57:[function(e,t,i){function n(e,t,i,n,o,r,a,s){e.emplaceBack(t,i,Math.round(64*n),Math.round(64*o),r,a,s?s[0]:void 0,s?s[1]:void 0)}function o(e,t,i){e.emplaceBack(t.x,t.y,i),e.emplaceBack(t.x,t.y,i),e.emplaceBack(t.x,t.y,i),e.emplaceBack(t.x,t.y,i)}var r=e("@mapbox/point-geometry"),a=e("../segment"),s=a.SegmentVector,l=e("../../gl/vertex_buffer"),u=e("../../gl/index_buffer"),c=e("../program_configuration"),p=c.ProgramConfigurationSet,f=e("../vertex_array_type"),d=e("../index_array_type"),h=d.TriangleIndexArray,m=d.LineIndexArray,y=e("../../symbol/transform_text"),v=e("../../symbol/mergelines"),g=e("../../util/script_detection"),_=e("../load_geometry"),b=e("@mapbox/vector-tile").VectorTileFeature.types,x=e("../../util/struct_array"),w=e("../../util/verticalize_punctuation"),z=(e("../../symbol/anchor"),e("../../symbol/opacity_state"),e("../../symbol/symbol_size")),A=z.getSizeData,T=x({members:[{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"hidden"}]}),k=x({members:[{type:"Float32",name:"offsetX"}]}),S=x({members:[{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]}),E=[{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"}],C=[{name:"a_projected_pos",components:3,type:"Float32"}],M=[{name:"a_fade_opacity",components:1,type:"Uint32"}],I=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}],L=[{name:"a_placed",components:2,type:"Uint8"}],R={text:{layoutAttributes:E,dynamicLayoutAttributes:C,indexArrayType:h,opacityAttributes:M,paintAttributes:[{property:"text-color",name:"fill_color"},{property:"text-halo-color",name:"halo_color"},{property:"text-halo-width",name:"halo_width"},{property:"text-halo-blur",name:"halo_blur"},{property:"text-opacity",name:"opacity"}]},icon:{layoutAttributes:E,dynamicLayoutAttributes:C,indexArrayType:h,opacityAttributes:M,paintAttributes:[{property:"icon-color",name:"fill_color"},{property:"icon-halo-color",name:"halo_color"},{property:"icon-halo-width",name:"halo_width"},{property:"icon-halo-blur",name:"halo_blur"},{property:"icon-opacity",name:"opacity"}]},collisionBox:{layoutAttributes:[{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],indexArrayType:m,collisionAttributes:L},collisionCircle:{layoutAttributes:[{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],collisionAttributes:L,indexArrayType:h}},P=function(e,t,i,n){this.programInterface=e;var o=f(e.layoutAttributes),r=e.indexArrayType;if(this.layoutVertexArray=new o(n&&n.layoutVertexArray),this.indexArray=new r(n&&n.indexArray),this.programConfigurations=new p(e,t,i,n&&n.programConfigurations),this.segments=new s(n&&n.segments),e.dynamicLayoutAttributes){var a=f(e.dynamicLayoutAttributes);this.dynamicLayoutVertexArray=new a(n&&n.dynamicLayoutVertexArray)}if(e.opacityAttributes){var l=f(e.opacityAttributes);this.opacityVertexArray=new l(n&&n.opacityVertexArray)}if(e.collisionAttributes){var u=f(e.collisionAttributes);this.collisionVertexArray=new u(n&&n.collisionVertexArray)}};P.prototype.serialize=function(e){return{layoutVertexArray:this.layoutVertexArray.serialize(e),indexArray:this.indexArray.serialize(e),programConfigurations:this.programConfigurations.serialize(e),segments:this.segments.get(),dynamicLayoutVertexArray:this.dynamicLayoutVertexArray&&this.dynamicLayoutVertexArray.serialize(e),opacityVertexArray:this.opacityVertexArray&&this.opacityVertexArray.serialize(e),collisionVertexArray:this.collisionVertexArray&&this.collisionVertexArray.serialize(e)}},P.prototype.upload=function(e,t){this.layoutVertexBuffer=new l(e,this.layoutVertexArray),this.indexBuffer=new u(e,this.indexArray,t),this.programConfigurations.upload(e),this.programInterface.dynamicLayoutAttributes&&(this.dynamicLayoutVertexBuffer=new l(e,this.dynamicLayoutVertexArray,!0)),this.programInterface.opacityAttributes&&(this.opacityVertexBuffer=new l(e,this.opacityVertexArray,!0),this.opacityVertexBuffer.itemSize=1,this.opacityVertexBuffer.attributes=I),this.programInterface.collisionAttributes&&(this.collisionVertexBuffer=new l(e,this.collisionVertexArray,!0))},P.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer&&this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer&&this.opacityVertexBuffer.destroy(),this.collisionVertexBuffer&&this.collisionVertexBuffer.destroy())};var D=function(e){if(this.collisionBoxArray=e.collisionBoxArray,this.zoom=e.zoom,this.overscaling=e.overscaling,this.layers=e.layers,this.index=e.index,this.sdfIcons=e.sdfIcons,this.iconsNeedLinear=e.iconsNeedLinear,this.pixelRatio=e.pixelRatio,e.text){this.text=new P(R.text,e.layers,e.zoom,e.text),this.icon=new P(R.icon,e.layers,e.zoom,e.icon),this.collisionBox=new P(R.collisionBox,e.layers,e.zoom,e.collisionBox),this.collisionCircle=new P(R.collisionCircle,e.layers,e.zoom,e.collisionCircle),this.textSizeData=e.textSizeData,this.iconSizeData=e.iconSizeData,this.placedGlyphArray=new T(e.placedGlyphArray),this.placedIconArray=new T(e.placedIconArray),this.glyphOffsetArray=new k(e.glyphOffsetArray),this.lineVertexArray=new S(e.lineVertexArray),this.symbolInstances=e.symbolInstances;var t=e.layers[0].layout;this.sortFeaturesByY=t.get("text-allow-overlap")||t.get("icon-allow-overlap")||t.get("text-ignore-placement")||t.get("icon-ignore-placement")}else{var i=this.layers[0],n=i._unevaluatedLayout._values;if(this.textSizeData=A(this.zoom,n["text-size"]),"composite"===this.textSizeData.functionType){var o=this.textSizeData.zoomRange,r=o.min,a=o.max;this.compositeTextSizes=[n["text-size"].possiblyEvaluate({zoom:r}),n["text-size"].possiblyEvaluate({zoom:a})]}if(this.iconSizeData=A(this.zoom,n["icon-size"]),"composite"===this.iconSizeData.functionType){var s=this.iconSizeData.zoomRange,l=s.min,u=s.max;this.compositeIconSizes=[n["icon-size"].possiblyEvaluate({zoom:l}),n["icon-size"].possiblyEvaluate({zoom:u})]}this.layoutTextSize=n["text-size"].possiblyEvaluate({zoom:this.zoom+1}),this.layoutIconSize=n["icon-size"].possiblyEvaluate({zoom:this.zoom+1}),this.textMaxSize=n["text-size"].possiblyEvaluate({zoom:18})}};D.prototype.createArrays=function(){this.text=new P(R.text,this.layers,this.zoom),this.icon=new P(R.icon,this.layers,this.zoom),this.collisionBox=new P(R.collisionBox,this.layers,this.zoom),this.collisionCircle=new P(R.collisionCircle,this.layers,this.zoom),this.placedGlyphArray=new T,this.placedIconArray=new T,this.glyphOffsetArray=new k,this.lineVertexArray=new S},D.prototype.populate=function(e,t){var i=this,n=this.layers[0],o=n.layout,r=o.get("text-font").join(","),a=o.get("text-field"),s=o.get("icon-image"),l="constant"!==a.value.kind||a.value.value.length>0&&r.length>0,u="constant"!==s.value.kind||s.value.value&&s.value.value.length>0;if(this.features=[],l||u){for(var c=t.iconDependencies,p=t.glyphDependencies,f=p[r]=p[r]||{},d={zoom:this.zoom},h=0,m=e;h<m.length;h+=1){var x=m[h],z=x.feature,A=x.index,T=x.sourceLayerIndex;if(n._featureFilter(d,z)){var k=void 0;l&&(k=n.getValueAndResolveTokens("text-field",z),k=y(k,n,z));var S=void 0;if(u&&(S=n.getValueAndResolveTokens("icon-image",z)),k||S){var E={text:k,icon:S,index:A,sourceLayerIndex:T,geometry:_(z),properties:z.properties,type:b[z.type]};if(void 0!==z.id&&(E.id=z.id),i.features.push(E),S&&(c[S]=!0),k)for(var C="map"===o.get("text-rotation-alignment")&&"line"===o.get("symbol-placement"),M=g.allowsVerticalWritingMode(k),I=0;I<k.length;I++)if(f[k.charCodeAt(I)]=!0,C&&M){var L=w.lookup[k.charAt(I)];L&&(f[L.charCodeAt(0)]=!0)}}}}"line"===o.get("symbol-placement")&&(this.features=v(this.features))}},D.prototype.isEmpty=function(){return 0===this.symbolInstances.length},D.prototype.serialize=function(e){return{zoom:this.zoom,layerIds:this.layers.map(function(e){return e.id}),sdfIcons:this.sdfIcons,iconsNeedLinear:this.iconsNeedLinear,textSizeData:this.textSizeData,iconSizeData:this.iconSizeData,placedGlyphArray:this.placedGlyphArray.serialize(e),placedIconArray:this.placedIconArray.serialize(e),glyphOffsetArray:this.glyphOffsetArray.serialize(e),lineVertexArray:this.lineVertexArray.serialize(e),text:this.text.serialize(e),icon:this.icon.serialize(e),collisionBox:this.collisionBox.serialize(e),collisionCircle:this.collisionCircle.serialize(e),symbolInstances:this.symbolInstances}},D.prototype.upload=function(e){this.text.upload(e,this.sortFeaturesByY),this.icon.upload(e,this.sortFeaturesByY),this.collisionBox.upload(e),this.collisionCircle.upload(e)},D.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.collisionBox.destroy(),this.collisionCircle.destroy()},D.prototype.addToLineVertexArray=function(e,t){var i=this,n=this.lineVertexArray.length;if(void 0!==e.segment){for(var o=e.dist(t[e.segment+1]),r=e.dist(t[e.segment]),a={},s=e.segment+1;s<t.length;s++)a[s]={x:t[s].x,y:t[s].y,tileUnitDistanceFromAnchor:o},s<t.length-1&&(o+=t[s+1].dist(t[s]));for(var l=e.segment||0;l>=0;l--)a[l]={x:t[l].x,y:t[l].y,tileUnitDistanceFromAnchor:r},l>0&&(r+=t[l-1].dist(t[l]));for(var u=0;u<t.length;u++){var c=a[u];i.lineVertexArray.emplaceBack(c.x,c.y,c.tileUnitDistanceFromAnchor)}}return{lineStartIndex:n,lineLength:this.lineVertexArray.length-n}},D.prototype.addSymbols=function(e,t,i,r,a,s,l,u,c,p,f){for(var d=this,h=e.indexArray,m=e.layoutVertexArray,y=e.dynamicLayoutVertexArray,v=e.segments.prepareSegment(4*t.length,e.layoutVertexArray,e.indexArray),g=this.glyphOffsetArray.length,_=v.vertexLength,b=0,x=t;b<x.length;b+=1){var w=x[b],z=w.tl,A=w.tr,T=w.bl,k=w.br,S=w.tex,E=v.vertexLength,C=w.glyphOffset[1];n(m,u.x,u.y,z.x,C+z.y,S.x,S.y,i),n(m,u.x,u.y,A.x,C+A.y,S.x+S.w,S.y,i),n(m,u.x,u.y,T.x,C+T.y,S.x,S.y+S.h,i),n(m,u.x,u.y,k.x,C+k.y,S.x+S.w,S.y+S.h,i),o(y,u,0),h.emplaceBack(E,E+1,E+2),h.emplaceBack(E+1,E+2,E+3),v.vertexLength+=4,v.primitiveLength+=2,d.glyphOffsetArray.emplaceBack(w.glyphOffset[0])}f.emplaceBack(u.x,u.y,g,this.glyphOffsetArray.length-g,_,c,p,u.segment,i?i[0]:0,i?i[1]:0,r[0],r[1],l,!1),e.programConfigurations.populatePaintArrays(e.layoutVertexArray.length,s)},D.prototype._addCollisionDebugVertex=function(e,t,i,n,o){return t.emplaceBack(0,0),e.emplaceBack(i.x,i.y,n.x,n.y,Math.round(o.x),Math.round(o.y))},D.prototype.addCollisionDebugVertices=function(e,t,i,n,o,a,s,l){var u=o.segments.prepareSegment(4,o.layoutVertexArray,o.indexArray),c=u.vertexLength,p=o.layoutVertexArray,f=o.indexArray,d=o.collisionVertexArray;this._addCollisionDebugVertex(p,d,a,s.anchor,new r(e,t)),this._addCollisionDebugVertex(p,d,a,s.anchor,new r(i,t)),this._addCollisionDebugVertex(p,d,a,s.anchor,new r(i,n)),this._addCollisionDebugVertex(p,d,a,s.anchor,new r(e,n)),u.vertexLength+=4,l?(f.emplaceBack(c,c+1,c+2),f.emplaceBack(c,c+2,c+3),u.primitiveLength+=2):(f.emplaceBack(c,c+1),f.emplaceBack(c+1,c+2),f.emplaceBack(c+2,c+3),f.emplaceBack(c+3,c),u.primitiveLength+=4)},D.prototype.generateCollisionDebugBuffers=function(){for(var e=this,t=0,i=e.symbolInstances;t<i.length;t+=1){var n=i[t];n.textCollisionFeature={boxStartIndex:n.textBoxStartIndex,boxEndIndex:n.textBoxEndIndex},n.iconCollisionFeature={boxStartIndex:n.iconBoxStartIndex,boxEndIndex:n.iconBoxEndIndex};for(var o=0;o<2;o++){var r=n[0===o?"textCollisionFeature":"iconCollisionFeature"];if(r)for(var a=r.boxStartIndex;a<r.boxEndIndex;a++){var s=e.collisionBoxArray.get(a),l=s.x1,u=s.y1,c=s.x2,p=s.y2,f=s.radius>0;e.addCollisionDebugVertices(l,u,c,p,f?e.collisionCircle:e.collisionBox,s.anchorPoint,n,f)}}}},D.prototype.deserializeCollisionBoxes=function(e,t,i,n,o){for(var r={},a=t;a<i;a++){var s=e.get(a);if(0===s.radius){r.textBox={x1:s.x1,y1:s.y1,x2:s.x2,y2:s.y2,anchorPointX:s.anchorPointX,anchorPointY:s.anchorPointY};break}r.textCircles||(r.textCircles=[]),r.textCircles.push(s.anchorPointX,s.anchorPointY,s.radius,s.signedDistanceFromAnchor,1)}for(var l=n;l<o;l++){var u=e.get(l);if(0===u.radius){r.iconBox={x1:u.x1,y1:u.y1,x2:u.x2,y2:u.y2,anchorPointX:u.anchorPointX,anchorPointY:u.anchorPointY};break}}return r},D.prototype.sortFeatures=function(e){var t=this;if(this.sortFeaturesByY&&this.sortedAngle!==e&&(this.sortedAngle=e,!(this.text.segments.get().length>1||this.icon.segments.get().length>1))){for(var i=[],n=0;n<this.symbolInstances.length;n++)i.push(n);var o=Math.sin(e),r=Math.cos(e);i.sort(function(e,i){var n=t.symbolInstances[e],a=t.symbolInstances[i];return(o*n.anchor.x+r*n.anchor.y|0)-(o*a.anchor.x+r*a.anchor.y|0)||a.featureIndex-n.featureIndex}),this.text.indexArray.clear(),this.icon.indexArray.clear();for(var a=0,s=i;a<s.length;a+=1){for(var l=s[a],u=t.symbolInstances[l],c=0,p=u.placedTextSymbolIndices;c<p.length;c+=1)for(var f=p[c],d=t.placedGlyphArray.get(f),h=d.vertexStartIndex+4*d.numGlyphs,m=d.vertexStartIndex;m<h;m+=4)t.text.indexArray.emplaceBack(m,m+1,m+2),t.text.indexArray.emplaceBack(m+1,m+2,m+3);var y=t.placedIconArray.get(l);if(y.numGlyphs){var v=y.vertexStartIndex;t.icon.indexArray.emplaceBack(v,v+1,v+2),t.icon.indexArray.emplaceBack(v+1,v+2,v+3)}}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray.serialize()),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray.serialize())}},D.programInterfaces=R,D.MAX_GLYPHS=65535,D.addDynamicAttributes=o,t.exports=D},{"../../gl/index_buffer":71,"../../gl/vertex_buffer":72,"../../symbol/anchor":205,"../../symbol/mergelines":214,"../../symbol/opacity_state":215,"../../symbol/symbol_size":221,"../../symbol/transform_text":222,"../../util/script_detection":261,"../../util/struct_array":263,"../../util/verticalize_punctuation":268,"../index_array_type":60,"../load_geometry":61,"../program_configuration":63,"../segment":65,"../vertex_array_type":66,"@mapbox/point-geometry":2,"@mapbox/vector-tile":6}],58:[function(e,t,i){t.exports=8192},{}],59:[function(e,t,i){function n(e,t){return t-e}var o=(e("@mapbox/point-geometry"),e("./load_geometry")),r=e("./extent"),a=e("../style-spec/feature_filter"),s=e("../util/struct_array"),l=e("grid-index"),u=e("../util/dictionary_coder"),c=e("@mapbox/vector-tile"),p=e("pbf"),f=e("../util/vectortile_to_geojson"),d=e("../util/util").arraysIntersect,h=e("../source/tile_coord"),m=s({members:[{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]}),y=function(e,t,i,n){this.coord=e,this.overscaling=t,this.x=e.x,this.y=e.y,this.z=e.z-Math.log(t)/Math.LN2,this.grid=i||new l(r,16,0),this.featureIndexArray=n||new m};y.deserialize=function(e,t){var i=e.coord,n=new y(new h(i.z,i.x,i.y,i.w),e.overscaling,new l(e.grid),new m(e.featureIndexArray));return n.rawTileData=t,n.bucketLayerIDs=e.bucketLayerIDs,n},y.prototype.insert=function(e,t,i,n,o){var r=this,a=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(i,n,o);for(var s=0;s<t.length;s++){for(var l=t[s],u=[1/0,1/0,-1/0,-1/0],c=0;c<l.length;c++){var p=l[c];u[0]=Math.min(u[0],p.x),u[1]=Math.min(u[1],p.y),u[2]=Math.max(u[2],p.x),u[3]=Math.max(u[3],p.y)}r.grid.insert(a,u[0],u[1],u[2],u[3])}},y.prototype.setCollisionIndex=function(e){this.collisionIndex=e},y.prototype.serialize=function(e){var t=this.grid.toArrayBuffer();return e&&e.push(t),{coord:this.coord,overscaling:this.overscaling,grid:t,featureIndexArray:this.featureIndexArray.serialize(e),bucketLayerIDs:this.bucketLayerIDs}},y.prototype.query=function(e,t){this.vtLayers||(this.vtLayers=new c.VectorTile(new p(this.rawTileData)).layers,this.sourceLayerCoder=new u(this.vtLayers?R()(this.vtLayers).sort():["_geojsonTileLayer"]));for(var i={},o=e.params||{},s=r/e.tileSize/e.scale,l=a(o.filter),f=e.queryGeometry,d=e.additionalRadius*s,h=1/0,m=1/0,y=-1/0,v=-1/0,g=0;g<f.length;g++)for(var _=f[g],b=0;b<_.length;b++){var x=_[b];h=Math.min(h,x.x),m=Math.min(m,x.y),y=Math.max(y,x.x),v=Math.max(v,x.y)}var w=this.grid.query(h-d,m-d,y+d,v+d);w.sort(n),this.filterMatching(i,w,this.featureIndexArray,f,l,o.layers,t,e.bearing,s);var z=this.collisionIndex?this.collisionIndex.queryRenderedSymbols(f,this.coord,e.tileSourceMaxZoom,r/e.tileSize,e.collisionBoxArray,e.sourceID):[];return z.sort(),this.filterMatching(i,z,e.collisionBoxArray,f,l,o.layers,t,e.bearing,s),i},y.prototype.filterMatching=function(e,t,i,n,r,a,s,l,u){for(var c,p=this,h=0;h<t.length;h++){var m=t[h];if(m!==c){c=m;var y=i.get(m),v=p.bucketLayerIDs[y.bucketIndex];if(!a||d(a,v)){var g=p.sourceLayerCoder.decode(y.sourceLayerIndex),_=p.vtLayers[g],b=_.feature(y.featureIndex);if(r({zoom:p.coord.z},b))for(var x=null,w=0;w<v.length;w++){var z=v[w];if(!(a&&a.indexOf(z)<0)){var A=s[z];if(A&&("symbol"===A.type||(x||(x=o(b)),A.queryIntersectsFeature(n,b,x,p.z,l,u)))){var T=new f(b,p.z,p.x,p.y);T.layer=A.serialize();var k=e[z];void 0===k&&(k=e[z]=[]),k.push({featureIndex:m,feature:T})}}}}}}},y.prototype.hasLayer=function(e){for(var t=this,i=0,n=t.bucketLayerIDs;i<n.length;i+=1)for(var o=n[i],r=0,a=o;r<a.length;r+=1){var s=a[r];if(e===s)return!0}return!1},t.exports=y},{"../source/tile_coord":112,"../style-spec/feature_filter":145,"../util/dictionary_coder":250,"../util/struct_array":263,"../util/util":266,"../util/vectortile_to_geojson":267,"./extent":58,"./load_geometry":61,"@mapbox/point-geometry":2,"@mapbox/vector-tile":6,"grid-index":23,pbf:38}],60:[function(e,t,i){function n(e){return o({members:[{type:"Uint16",name:"vertices",components:e}]})}var o=e("../util/struct_array");t.exports={LineIndexArray:n(2),TriangleIndexArray:n(3)}},{"../util/struct_array":263}],61:[function(e,t,i){var n=e("../util/util"),o=e("./extent"),r=function(e){return{min:-1*Math.pow(2,e-1),max:Math.pow(2,e-1)-1}}(16);t.exports=function(e){for(var t=o/e.extent,i=e.loadGeometry(),a=0;a<i.length;a++)for(var s=i[a],l=0;l<s.length;l++){var u=s[l];u.x=Math.round(u.x*t),u.y=Math.round(u.y*t),(u.x<r.min||u.x>r.max||u.y<r.min||u.y>r.max)&&n.warnOnce("Geometry exceeds allowed extent, reduce your vector tile buffer size")}return i}},{"../util/util":266,"./extent":58}],62:[function(e,t,i){var n=e("../util/struct_array"),o=n({members:[{name:"a_pos",type:"Int16",components:2}]});t.exports=o},{"../util/struct_array":263}],63:[function(e,t,i){function n(e){return[r(255*e.r,255*e.g),r(255*e.b,255*e.a)]}var o=e("./vertex_array_type"),r=e("../shaders/encode_attribute").packUint8ToFloat,a=e("../gl/vertex_buffer"),s=e("../style-spec/util/color"),l=function(e,t,i,n){this.value=e,this.name=t,this.type=i,this.property=n,this.statistics={max:-1/0}};l.prototype.defines=function(){return["#define HAS_UNIFORM_u_"+this.name]},l.prototype.populatePaintArray=function(){},l.prototype.setUniforms=function(e,t,i,n){var o=n.constantOr(this.value);"color"===this.type?e.uniform4f(t.uniforms["u_"+this.name],o.r,o.g,o.b,o.a):e.uniform1f(t.uniforms["u_"+this.name],o)};var u=function(e,t,i,n){this.expression=e,this.name=t,this.type=i,this.property=n,this.statistics={max:-1/0}};u.prototype.defines=function(){return[]},u.prototype.populatePaintArray=function(e,t,i,o){var r=this,a=this.expression.evaluate({zoom:0},o);if("color"===this.type)for(var s=n(a),l=t;l<i;l++){var u=e.get(l);u["a_"+r.name+"0"]=s[0],u["a_"+r.name+"1"]=s[1]}else{for(var c=t;c<i;c++)e.get(c)["a_"+r.name]=a;this.statistics.max=Math.max(this.statistics.max,a)}},u.prototype.setUniforms=function(e,t){e.uniform1f(t.uniforms["a_"+this.name+"_t"],0)};var c=function(e,t,i,n,o,r){this.expression=e,this.name=t,this.type=i,this.property=n,this.useIntegerZoom=o,this.zoom=r,this.statistics={max:-1/0}};c.prototype.defines=function(){return[]},c.prototype.populatePaintArray=function(e,t,i,o){var r=this,a=this.expression.evaluate({zoom:this.zoom},o),s=this.expression.evaluate({zoom:this.zoom+1},o);if("color"===this.type)for(var l=n(a),u=n(s),c=t;c<i;c++){var p=e.get(c);p["a_"+r.name+"0"]=l[0],p["a_"+r.name+"1"]=l[1],p["a_"+r.name+"2"]=u[0],p["a_"+r.name+"3"]=u[1]}else{for(var f=t;f<i;f++){var d=e.get(f);d["a_"+r.name+"0"]=a,d["a_"+r.name+"1"]=s}this.statistics.max=Math.max(this.statistics.max,a,s)}},c.prototype.interpolationFactor=function(e){return this.useIntegerZoom?this.expression.interpolationFactor(Math.floor(e),this.zoom,this.zoom+1):this.expression.interpolationFactor(e,this.zoom,this.zoom+1)},c.prototype.setUniforms=function(e,t,i){e.uniform1f(t.uniforms["a_"+this.name+"_t"],this.interpolationFactor(i.zoom))};var p=function(){this.binders={},this.cacheKey=""};p.createDynamic=function(e,t,i){for(var n=new p,r=[],a=0,s=e.paintAttributes||[];a<s.length;a+=1){var f=s[a],d=f.property,h=f.name||d.replace(t.type+"-","").replace(/-/g,"_"),m=t.paint.get(d),y=m.property.specification.type,v=m.property.useIntegerZoom;"constant"===m.value.kind?(n.binders[h]=new l(m.value,h,y,d),n.cacheKey+="/u_"+h):"source"===m.value.kind?(n.binders[h]=new u(m.value,h,y,d),n.cacheKey+="/a_"+h,r.push({name:"a_"+h,type:"Float32",components:"color"===y?2:1})):(n.binders[h]=new c(m.value,h,y,d,v,i),n.cacheKey+="/z_"+h,r.push({name:"a_"+h,type:"Float32",components:"color"===y?4:2}))}return n.PaintVertexArray=o(r),n.interface=e,n.layer=t,n},p.forBackgroundColor=function(e,t){var i=new p;return i.binders.color=new l(e,"color","color","background-color"),i.cacheKey+="/u_color",i.binders.opacity=new l(t,"opacity","number","background-opacity"),i.cacheKey+="/u_opacity",i},p.forBackgroundPattern=function(e){var t=new p;return t.binders.opacity=new l(e,"opacity","number","background-opacity"),t.cacheKey+="/u_opacity",t},p.forTileClippingMask=function(){return p.forBackgroundColor(s.black,1)},p.prototype.populatePaintArray=function(e,t){var i=this,n=this.paintVertexArray;if(0!==n.bytesPerElement){var o=n.length;n.resize(e);for(var r in i.binders)i.binders[r].populatePaintArray(n,o,e,t)}},p.prototype.defines=function(){var e=this,t=[];for(var i in e.binders)t.push.apply(t,e.binders[i].defines());return t},p.prototype.setUniforms=function(e,t,i,n){var o=this;for(var r in o.binders){var a=o.binders[r];a.setUniforms(e,t,n,i.get(a.property))}},p.prototype.serialize=function(e){var t=this;if(0===this.paintVertexArray.length)return null;var i={};for(var n in t.binders)i[t.binders[n].property]=t.binders[n].statistics;return{array:this.paintVertexArray.serialize(e),type:this.paintVertexArray.constructor.serialize(),statistics:i}},p.deserialize=function(e,t,i,n){var r=p.createDynamic(e,t,i);return n&&(r.PaintVertexArray=o(n.type.members),r.paintVertexArray=new r.PaintVertexArray(n.array),r.paintPropertyStatistics=n.statistics),r},p.prototype.upload=function(e){this.paintVertexArray&&(this.paintVertexBuffer=new a(e,this.paintVertexArray))},p.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var f=function(e,t,i,n){var o=this;if(this.programConfigurations={},n)for(var r=0,a=t;r<a.length;r+=1){var s=a[r];o.programConfigurations[s.id]=p.deserialize(e,s,i,n[s.id])}else for(var l=0,u=t;l<u.length;l+=1){var c=u[l],f=p.createDynamic(e,c,i);f.paintVertexArray=new f.PaintVertexArray,o.programConfigurations[c.id]=f}};f.prototype.populatePaintArrays=function(e,t){var i=this;for(var n in i.programConfigurations)i.programConfigurations[n].populatePaintArray(e,t)},f.prototype.serialize=function(e){var t=this,i={};for(var n in t.programConfigurations){var o=t.programConfigurations[n].serialize(e);o&&(i[n]=o)}return i},f.prototype.get=function(e){return this.programConfigurations[e]},f.prototype.upload=function(e){var t=this;for(var i in t.programConfigurations)t.programConfigurations[i].upload(e)},f.prototype.destroy=function(){var e=this;for(var t in e.programConfigurations)e.programConfigurations[t].destroy()},t.exports={ProgramConfiguration:p,ProgramConfigurationSet:f}},{"../gl/vertex_buffer":72,"../shaders/encode_attribute":96,"../style-spec/util/color":150,"./vertex_array_type":66}],64:[function(e,t,i){var n=e("../util/struct_array"),o=n({members:[{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]});t.exports=o},{"../util/struct_array":263}],65:[function(e,t,i){var n=e("../util/util"),o=n.warnOnce,r=Math.pow(2,16)-1,a=function(e){void 0===e&&(e=[]),this.segments=e};a.prototype.prepareSegment=function(e,i,n){var a=this.segments[this.segments.length-1];return e>r&&o("Max vertices per segment is "+r+": bucket requested "+e),(!a||a.vertexLength+e>t.exports.MAX_VERTEX_ARRAY_LENGTH)&&(a={vertexOffset:i.length,primitiveOffset:n.length,vertexLength:0,primitiveLength:0},this.segments.push(a)),a},a.prototype.get=function(){return this.segments},a.prototype.destroy=function(){for(var e=this,t=0,i=e.segments;t<i.length;t+=1){var n=i[t];for(var o in n.vaos)n.vaos[o].destroy()}},t.exports={SegmentVector:a,MAX_VERTEX_ARRAY_LENGTH:r}},{"../util/util":266}],66:[function(e,t,i){function n(e){return o({members:e,alignment:4})}var o=e("../util/struct_array");t.exports=n},{"../util/struct_array":263}],67:[function(e,t,i){var n=function(e,t,i){this.column=e,this.row=t,this.zoom=i};n.prototype.clone=function(){return new n(this.column,this.row,this.zoom)},n.prototype.zoomTo=function(e){return this.clone()._zoomTo(e)},n.prototype.sub=function(e){return this.clone()._sub(e)},n.prototype._zoomTo=function(e){var t=Math.pow(2,e-this.zoom);return this.column*=t,this.row*=t,this.zoom=e,this},n.prototype._sub=function(e){return e=e.zoomTo(this.zoom),this.column-=e.column,this.row-=e.row,this},t.exports=n},{}],68:[function(e,t,i){var n=e("../util/util").wrap,o=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid LngLat object: ("+e+", "+t+")");if(this.lng=+e,this.lat=+t,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};o.prototype.wrap=function(){return new o(n(this.lng,-180,180),this.lat)},o.prototype.toArray=function(){return[this.lng,this.lat]},o.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},o.prototype.toBounds=function(t){var i=360*t/40075017,n=i/Math.cos(Math.PI/180*this.lat);return new(e("./lng_lat_bounds"))(new o(this.lng-n,this.lat-i),new o(this.lng+n,this.lat+i))},o.convert=function(e){if(e instanceof o)return e;if(Array.isArray(e)&&(2===e.length||3===e.length))return new o(Number(e[0]),Number(e[1]));if(!Array.isArray(e)&&"object"==(void 0===e?"undefined":O()(e))&&null!==e)return new o(Number(e.lng),Number(e.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")},t.exports=o},{"../util/util":266,"./lng_lat_bounds":69}],69:[function(e,t,i){var n=e("./lng_lat"),o=function(e,t){e&&(t?this.setSouthWest(e).setNorthEast(t):4===e.length?this.setSouthWest([e[0],e[1]]).setNorthEast([e[2],e[3]]):this.setSouthWest(e[0]).setNorthEast(e[1]))};o.prototype.setNorthEast=function(e){return this._ne=e instanceof n?new n(e.lng,e.lat):n.convert(e),this},o.prototype.setSouthWest=function(e){return this._sw=e instanceof n?new n(e.lng,e.lat):n.convert(e),this},o.prototype.extend=function(e){var t,i,r=this._sw,a=this._ne;if(e instanceof n)t=e,i=e;else{if(!(e instanceof o))return Array.isArray(e)?e.every(Array.isArray)?this.extend(o.convert(e)):this.extend(n.convert(e)):this;if(t=e._sw,i=e._ne,!t||!i)return this}return r||a?(r.lng=Math.min(t.lng,r.lng),r.lat=Math.min(t.lat,r.lat),a.lng=Math.max(i.lng,a.lng),a.lat=Math.max(i.lat,a.lat)):(this._sw=new n(t.lng,t.lat),this._ne=new n(i.lng,i.lat)),this},o.prototype.getCenter=function(){return new n((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},o.prototype.getSouthWest=function(){return this._sw},o.prototype.getNorthEast=function(){return this._ne},o.prototype.getNorthWest=function(){return new n(this.getWest(),this.getNorth())},o.prototype.getSouthEast=function(){return new n(this.getEast(),this.getSouth())},o.prototype.getWest=function(){return this._sw.lng},o.prototype.getSouth=function(){return this._sw.lat},o.prototype.getEast=function(){return this._ne.lng},o.prototype.getNorth=function(){return this._ne.lat},o.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},o.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},o.convert=function(e){return!e||e instanceof o?e:new o(e)},t.exports=o},{"./lng_lat":68}],70:[function(e,t,i){var n=e("./lng_lat"),o=e("@mapbox/point-geometry"),r=e("./coordinate"),a=e("../util/util"),s=e("../style-spec/util/interpolate").number,l=e("../source/tile_coord"),u=e("../data/extent"),c=e("@mapbox/gl-matrix"),p=c.vec4,f=c.mat4,d=c.mat2,h=function(e,t,i){this.tileSize=512,this._renderWorldCopies=void 0===i||i,this._minZoom=e||0,this._maxZoom=t||22,this.latRange=[-85.05113,85.05113],this.width=0,this.height=0,this._center=new n(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._posMatrixCache={}},m={minZoom:{},maxZoom:{},renderWorldCopies:{},worldSize:{},centerPoint:{},size:{},bearing:{},pitch:{},fov:{},zoom:{},center:{},unmodified:{},x:{},y:{},point:{}};h.prototype.clone=function(){var e=new h(this._minZoom,this._maxZoom,this._renderWorldCopies);return e.tileSize=this.tileSize,e.latRange=this.latRange,e.width=this.width,e.height=this.height,e._center=this._center,e.zoom=this.zoom,e.angle=this.angle,e._fov=this._fov,e._pitch=this._pitch,e._unmodified=this._unmodified,e._calcMatrices(),e},m.minZoom.get=function(){return this._minZoom},m.minZoom.set=function(e){this._minZoom!==e&&(this._minZoom=e,this.zoom=Math.max(this.zoom,e))},m.maxZoom.get=function(){return this._maxZoom},m.maxZoom.set=function(e){this._maxZoom!==e&&(this._maxZoom=e,this.zoom=Math.min(this.zoom,e))},m.renderWorldCopies.get=function(){return this._renderWorldCopies},m.worldSize.get=function(){return this.tileSize*this.scale},m.centerPoint.get=function(){return this.size._div(2)},m.size.get=function(){return new o(this.width,this.height)},m.bearing.get=function(){return-this.angle/Math.PI*180},m.bearing.set=function(e){var t=-a.wrap(e,-180,180)*Math.PI/180;this.angle!==t&&(this._unmodified=!1,this.angle=t,this._calcMatrices(),this.rotationMatrix=d.create(),d.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},m.pitch.get=function(){return this._pitch/Math.PI*180},m.pitch.set=function(e){var t=a.clamp(e,0,60)/180*Math.PI;this._pitch!==t&&(this._unmodified=!1,this._pitch=t,this._calcMatrices())},m.fov.get=function(){return this._fov/Math.PI*180},m.fov.set=function(e){e=Math.max(.01,Math.min(60,e)),this._fov!==e&&(this._unmodified=!1,this._fov=e/180*Math.PI,this._calcMatrices())},m.zoom.get=function(){return this._zoom},m.zoom.set=function(e){var t=Math.min(Math.max(e,this.minZoom),this.maxZoom);this._zoom!==t&&(this._unmodified=!1,this._zoom=t,this.scale=this.zoomScale(t),this.tileZoom=Math.floor(t),this.zoomFraction=t-this.tileZoom,this._constrain(),this._calcMatrices())},m.center.get=function(){return this._center},m.center.set=function(e){e.lat===this._center.lat&&e.lng===this._center.lng||(this._unmodified=!1,this._center=e,this._constrain(),this._calcMatrices())},h.prototype.coveringZoomLevel=function(e){return(e.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/e.tileSize))},h.prototype.getVisibleWrappedCoordinates=function(e){for(var t=this.pointCoordinate(new o(0,0),0),i=this.pointCoordinate(new o(this.width,0),0),n=Math.floor(t.column),r=Math.floor(i.column),a=[e],s=n;s<=r;s++)0!==s&&a.push(new l(e.z,e.x,e.y,s));return a},h.prototype.coveringTiles=function(e){var t=this.coveringZoomLevel(e),i=t;if(void 0!==e.minzoom&&t<e.minzoom)return[];void 0!==e.maxzoom&&t>e.maxzoom&&(t=e.maxzoom);var n=this.pointCoordinate(this.centerPoint,t),r=new o(n.column-.5,n.row-.5),a=[this.pointCoordinate(new o(0,0),t),this.pointCoordinate(new o(this.width,0),t),this.pointCoordinate(new o(this.width,this.height),t),this.pointCoordinate(new o(0,this.height),t)];return l.cover(t,a,e.reparseOverscaled?i:t,this._renderWorldCopies).sort(function(e,t){return r.dist(e)-r.dist(t)})},h.prototype.resize=function(e,t){this.width=e,this.height=t,this.pixelsToGLUnits=[2/e,-2/t],this._constrain(),this._calcMatrices()},m.unmodified.get=function(){return this._unmodified},h.prototype.zoomScale=function(e){return Math.pow(2,e)},h.prototype.scaleZoom=function(e){return Math.log(e)/Math.LN2},h.prototype.project=function(e){return new o(this.lngX(e.lng),this.latY(e.lat))},h.prototype.unproject=function(e){return new n(this.xLng(e.x),this.yLat(e.y))},m.x.get=function(){return this.lngX(this.center.lng)},m.y.get=function(){return this.latY(this.center.lat)},m.point.get=function(){return new o(this.x,this.y)},h.prototype.lngX=function(e){return(180+e)*this.worldSize/360},h.prototype.latY=function(e){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+e*Math.PI/360)))*this.worldSize/360},h.prototype.xLng=function(e){return 360*e/this.worldSize-180},h.prototype.yLat=function(e){var t=180-360*e/this.worldSize;return 360/Math.PI*Math.atan(Math.exp(t*Math.PI/180))-90},h.prototype.setLocationAtPoint=function(e,t){var i=this.pointCoordinate(t)._sub(this.pointCoordinate(this.centerPoint));this.center=this.coordinateLocation(this.locationCoordinate(e)._sub(i)),this._renderWorldCopies&&(this.center=this.center.wrap())},h.prototype.locationPoint=function(e){return this.coordinatePoint(this.locationCoordinate(e))},h.prototype.pointLocation=function(e){return this.coordinateLocation(this.pointCoordinate(e))},h.prototype.locationCoordinate=function(e){return new r(this.lngX(e.lng)/this.tileSize,this.latY(e.lat)/this.tileSize,this.zoom).zoomTo(this.tileZoom)},h.prototype.coordinateLocation=function(e){var t=e.zoomTo(this.zoom);return new n(this.xLng(t.column*this.tileSize),this.yLat(t.row*this.tileSize))},h.prototype.pointCoordinate=function(e,t){void 0===t&&(t=this.tileZoom);var i=[e.x,e.y,0,1],n=[e.x,e.y,1,1];p.transformMat4(i,i,this.pixelMatrixInverse),p.transformMat4(n,n,this.pixelMatrixInverse);var o=i[3],a=n[3],l=i[0]/o,u=n[0]/a,c=i[1]/o,f=n[1]/a,d=i[2]/o,h=n[2]/a,m=d===h?0:(0-d)/(h-d);return new r(s(l,u,m)/this.tileSize,s(c,f,m)/this.tileSize,this.zoom)._zoomTo(t)},h.prototype.coordinatePoint=function(e){var t=e.zoomTo(this.zoom),i=[t.column*this.tileSize,t.row*this.tileSize,0,1];return p.transformMat4(i,i,this.pixelMatrix),new o(i[0]/i[3],i[1]/i[3])},h.prototype.calculatePosMatrix=function(e,t){var i=e.id.toString();if(t&&(i+=t.toString()),this._posMatrixCache[i])return this._posMatrixCache[i];var n=e.toCoordinate(t),o=this.worldSize/this.zoomScale(n.zoom),r=f.identity(new Float64Array(16));return f.translate(r,r,[n.column*o,n.row*o,0]),f.scale(r,r,[o/u,o/u,1]),f.multiply(r,this.projMatrix,r),this._posMatrixCache[i]=new Float32Array(r),this._posMatrixCache[i]},h.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var e,t,i,n,r=-90,a=90,s=-180,l=180,u=this.size,c=this._unmodified;if(this.latRange){var p=this.latRange;r=this.latY(p[1]),a=this.latY(p[0]),e=a-r<u.y?u.y/(a-r):0}if(this.lngRange){var f=this.lngRange;s=this.lngX(f[0]),l=this.lngX(f[1]),t=l-s<u.x?u.x/(l-s):0}var d=Math.max(t||0,e||0);if(d)return this.center=this.unproject(new o(t?(l+s)/2:this.x,e?(a+r)/2:this.y)),this.zoom+=this.scaleZoom(d),this._unmodified=c,void(this._constraining=!1);if(this.latRange){var h=this.y,m=u.y/2;h-m<r&&(n=r+m),h+m>a&&(n=a-m)}if(this.lngRange){var y=this.x,v=u.x/2;y-v<s&&(i=s+v),y+v>l&&(i=l-v)}void 0===i&&void 0===n||(this.center=this.unproject(new o(void 0!==i?i:this.x,void 0!==n?n:this.y))),this._unmodified=c,this._constraining=!1}},h.prototype._calcMatrices=function(){if(this.height){this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var e=this._fov/2,t=Math.PI/2+this._pitch,i=Math.sin(e)*this.cameraToCenterDistance/Math.sin(Math.PI-t-e),n=Math.cos(Math.PI/2-this._pitch)*i+this.cameraToCenterDistance,o=1.01*n,r=new Float64Array(16);f.perspective(r,this._fov,this.width/this.height,1,o),f.scale(r,r,[1,-1,1]),f.translate(r,r,[0,0,-this.cameraToCenterDistance]),f.rotateX(r,r,this._pitch),f.rotateZ(r,r,this.angle),f.translate(r,r,[-this.x,-this.y,0]);var a=this.worldSize/(2*Math.PI*6378137*Math.abs(Math.cos(this.center.lat*(Math.PI/180))));if(f.scale(r,r,[1,1,a,1]),this.projMatrix=r,r=f.create(),f.scale(r,r,[this.width/2,-this.height/2,1]),f.translate(r,r,[1,-1,0]),this.pixelMatrix=f.multiply(new Float64Array(16),r,this.projMatrix),!(r=f.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=r,this._posMatrixCache={}}},v()(h.prototype,m),t.exports=h},{"../data/extent":58,"../source/tile_coord":112,"../style-spec/util/interpolate":154,"../util/util":266,"./coordinate":67,"./lng_lat":68,"@mapbox/gl-matrix":1,"@mapbox/point-geometry":2}],71:[function(e,t,i){var n=function(e,t,i){this.gl=e,this.buffer=e.createBuffer(),this.dynamicDraw=Boolean(i),this.unbindVAO(),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,this.buffer),e.bufferData(e.ELEMENT_ARRAY_BUFFER,t.arrayBuffer,this.dynamicDraw?e.DYNAMIC_DRAW:e.STATIC_DRAW),this.dynamicDraw||delete t.arrayBuffer};n.prototype.unbindVAO=function(){void 0===this.gl.extVertexArrayObject&&(this.gl.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object")),this.gl.extVertexArrayObject&&this.gl.extVertexArrayObject.bindVertexArrayOES(null)},n.prototype.bind=function(){this.gl.bindBuffer(this.gl.ELEMENT_ARRAY_BUFFER,this.buffer)},n.prototype.updateData=function(e){this.unbindVAO(),this.bind(),this.gl.bufferSubData(this.gl.ELEMENT_ARRAY_BUFFER,0,e.arrayBuffer)},n.prototype.destroy=function(){this.buffer&&(this.gl.deleteBuffer(this.buffer),delete this.buffer)},t.exports=n},{}],72:[function(e,t,i){var n={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},o=function(e,t,i){this.length=t.length,this.attributes=t.members,this.itemSize=t.bytesPerElement,this.dynamicDraw=i,this.gl=e,this.buffer=e.createBuffer(),this.gl.bindBuffer(e.ARRAY_BUFFER,this.buffer),this.gl.bufferData(e.ARRAY_BUFFER,t.arrayBuffer,this.dynamicDraw?e.DYNAMIC_DRAW:e.STATIC_DRAW),this.dynamicDraw||delete t.arrayBuffer};o.prototype.bind=function(){this.gl.bindBuffer(this.gl.ARRAY_BUFFER,this.buffer)},o.prototype.updateData=function(e){this.bind(),this.gl.bufferSubData(this.gl.ARRAY_BUFFER,0,e.arrayBuffer)},o.prototype.enableAttributes=function(e,t){for(var i=this,n=0;n<this.attributes.length;n++){var o=i.attributes[n],r=t.attributes[o.name];void 0!==r&&e.enableVertexAttribArray(r)}},o.prototype.setVertexAttribPointers=function(e,t,i){for(var o=this,r=0;r<this.attributes.length;r++){var a=o.attributes[r],s=t.attributes[a.name];void 0!==s&&e.vertexAttribPointer(s,a.components,e[n[a.type]],!1,o.itemSize,a.offset+o.itemSize*(i||0))}},o.prototype.destroy=function(){this.buffer&&(this.gl.deleteBuffer(this.buffer),delete this.buffer)},t.exports=o},{}],73:[function(e,t,i){var n=e("mapbox-gl-supported"),o=e("./util/browser"),r=e("../package.json").version,a=e("./ui/map"),s=e("./ui/control/navigation_control"),l=e("./ui/control/geolocate_control"),u=e("./ui/control/attribution_control"),c=e("./ui/control/scale_control"),p=e("./ui/control/fullscreen_control"),f=e("./ui/popup"),d=e("./ui/marker"),h=e("./style/style"),m=e("./geo/lng_lat"),y=e("./geo/lng_lat_bounds"),v=e("@mapbox/point-geometry"),g=e("./util/evented"),_=e("./util/config"),b=e("./source/rtl_text_plugin");t.exports={version:r,supported:n,workerCount:Math.max(Math.floor(o.hardwareConcurrency/2),1),setRTLTextPlugin:b.setRTLTextPlugin,Map:a,NavigationControl:s,GeolocateControl:l,AttributionControl:u,ScaleControl:c,FullscreenControl:p,Popup:f,Marker:d,Style:h,LngLat:m,LngLatBounds:y,Point:v,Evented:g,config:_,get accessToken(){return _.ACCESS_TOKEN},set accessToken(e){_.ACCESS_TOKEN=e}}},{"../package.json":50,"./geo/lng_lat":68,"./geo/lng_lat_bounds":69,"./source/rtl_text_plugin":107,"./style/style":185,"./ui/control/attribution_control":225,"./ui/control/fullscreen_control":226,"./ui/control/geolocate_control":227,"./ui/control/navigation_control":229,"./ui/control/scale_control":230,"./ui/map":240,"./ui/marker":241,"./ui/popup":242,"./util/browser":245,"./util/config":249,"./util/evented":253,"@mapbox/point-geometry":2,"mapbox-gl-supported":37}],74:[function(e,t,i){function n(e,t,i){var n=i.paint.get("background-color"),r=i.paint.get("background-opacity");if(0!==r){var s=e.gl,p=e.transform,f=p.tileSize,d=i.paint.get("background-pattern"),h={zoom:p.zoom},m=d||1!==n.a||1!==r?"translucent":"opaque";if(e.renderPass===m){s.disable(s.STENCIL_TEST),e.setDepthSublayer(0);var y=new l(c);y._values["background-color"]=new u(c.properties["fill-color"],{kind:"constant",value:n},h),y._values["background-opacity"]=new u(c.properties["fill-opacity"],{kind:"constant",value:r},h);var v;if(d){if(o.isPatternMissing(d,e))return;var g=a.forBackgroundPattern(r);v=e.useProgram("fillPattern",g),g.setUniforms(s,v,y,h),o.prepare(d,e,v),e.tileExtentPatternVAO.bind(s,v,e.tileExtentBuffer)}else{var _=a.forBackgroundColor(n,r);v=e.useProgram("fill",_),_.setUniforms(s,v,y,h),e.tileExtentVAO.bind(s,v,e.tileExtentBuffer)}for(var b=p.coveringTiles({tileSize:f}),x=0,w=b;x<w.length;x+=1){var z=w[x];d&&o.setTile({coord:z,tileSize:f},e,v),s.uniformMatrix4fv(v.uniforms.u_matrix,!1,e.transform.calculatePosMatrix(z)),s.drawArrays(s.TRIANGLE_STRIP,0,e.tileExtentBuffer.length)}}}}var o=e("./pattern"),r=e("../data/program_configuration"),a=r.ProgramConfiguration,s=e("../style/properties"),l=s.PossiblyEvaluated,u=s.PossiblyEvaluatedPropertyValue,c=e("../style/style_layer/fill_style_layer_properties").paint;t.exports=n},{"../data/program_configuration":63,"../style/properties":183,"../style/style_layer/fill_style_layer_properties":194,"./pattern":90}],75:[function(e,t,i){function n(e,t,i,n){if("translucent"===e.renderPass){var r=i.paint.get("circle-opacity"),a=i.paint.get("circle-stroke-width"),s=i.paint.get("circle-stroke-opacity");if(0!==r.constantOr(1)||0!==a.constantOr(1)&&0!==s.constantOr(1)){var l=e.gl;e.setDepthSublayer(0),e.depthMask(!1),l.disable(l.STENCIL_TEST);for(var u=0;u<n.length;u++){var c=n[u],p=t.getTile(c),f=p.getBucket(i);if(f){var d=f.programConfigurations.get(i.id),h=e.useProgram("circle",d);if(d.setUniforms(l,h,i.paint,{zoom:e.transform.zoom}),l.uniform1f(h.uniforms.u_camera_to_center_distance,e.transform.cameraToCenterDistance),l.uniform1i(h.uniforms.u_scale_with_map,"map"===i.paint.get("circle-pitch-scale")?1:0),"map"===i.paint.get("circle-pitch-alignment")){l.uniform1i(h.uniforms.u_pitch_with_map,1);var m=o(p,1,e.transform.zoom);l.uniform2f(h.uniforms.u_extrude_scale,m,m)}else l.uniform1i(h.uniforms.u_pitch_with_map,0),l.uniform2fv(h.uniforms.u_extrude_scale,e.transform.pixelsToGLUnits);l.uniformMatrix4fv(h.uniforms.u_matrix,!1,e.translatePosMatrix(c.posMatrix,p,i.paint.get("circle-translate"),i.paint.get("circle-translate-anchor"))),h.draw(l,l.TRIANGLES,i.id,f.layoutVertexBuffer,f.indexBuffer,f.segments,d)}}}}}var o=e("../source/pixels_to_tile_units");t.exports=n},{"../source/pixels_to_tile_units":104}],76:[function(e,t,i){function n(e,t,i,n,o){for(var a=e.gl,s=o?e.useProgram("collisionCircle"):e.useProgram("collisionBox"),l=0;l<n.length;l++){var u=n[l],c=t.getTile(u),p=c.getBucket(i);if(p){var f=o?p.collisionCircle:p.collisionBox;if(f){a.uniformMatrix4fv(s.uniforms.u_matrix,!1,u.posMatrix),o||e.lineWidth(1),a.uniform1f(s.uniforms.u_camera_to_center_distance,e.transform.cameraToCenterDistance);var d=r(c,1,e.transform.zoom),h=Math.pow(2,e.transform.zoom-c.coord.z);a.uniform1f(s.uniforms.u_pixels_to_tile_units,d),a.uniform2f(s.uniforms.u_extrude_scale,e.transform.pixelsToGLUnits[0]/(d*h),e.transform.pixelsToGLUnits[1]/(d*h)),s.draw(a,o?a.TRIANGLES:a.LINES,i.id,f.layoutVertexBuffer,f.indexBuffer,f.segments,null,f.collisionVertexBuffer,null)}}}}function o(e,t,i,o){n(e,t,i,o,!1),n(e,t,i,o,!0)}var r=e("../source/pixels_to_tile_units");t.exports=o},{"../source/pixels_to_tile_units":104}],77:[function(e,t,i){function n(e,t,i){for(var n=0;n<i.length;n++)o(e,t,i[n])}function o(e,t,i){var n=e.gl;n.disable(n.STENCIL_TEST),e.lineWidth(1*a.devicePixelRatio);var o=i.posMatrix,f=e.useProgram("debug");n.uniformMatrix4fv(f.uniforms.u_matrix,!1,o),n.uniform4f(f.uniforms.u_color,1,0,0,1),e.debugVAO.bind(n,f,e.debugBuffer),n.drawArrays(n.LINE_STRIP,0,e.debugBuffer.length);for(var d=r(i.toString(),50,200,5),h=new p,m=0;m<d.length;m+=2)h.emplaceBack(d[m],d[m+1]);var y=new u(n,h);(new c).bind(n,f,y),n.uniform4f(f.uniforms.u_color,1,1,1,1);for(var v=t.getTile(i).tileSize,g=l/(Math.pow(2,e.transform.zoom-i.z)*v),_=[[-1,-1],[-1,1],[1,-1],[1,1]],b=0;b<_.length;b++){var x=_[b];n.uniformMatrix4fv(f.uniforms.u_matrix,!1,s.translate([],o,[g*x[0],g*x[1],0])),n.drawArrays(n.LINES,0,y.length)}n.uniform4f(f.uniforms.u_color,0,0,0,1),n.uniformMatrix4fv(f.uniforms.u_matrix,!1,o),n.drawArrays(n.LINES,0,y.length)}function r(e,t,i,n){n=n||1;var o,r,a,s,l,u,c,p,d=[];for(o=0,r=e.length;o<r;o++)if(l=f[e[o]]){for(p=null,a=0,s=l[1].length;a<s;a+=2)-1===l[1][a]&&-1===l[1][a+1]?p=null:(u=t+l[1][a]*n,c=i-l[1][a+1]*n,p&&d.push(p.x,p.y,u,c),p={x:u,y:c});t+=l[0]*n}return d}var a=e("../util/browser"),s=e("@mapbox/gl-matrix").mat4,l=e("../data/extent"),u=e("../gl/vertex_buffer"),c=e("./vertex_array_object"),p=e("../data/pos_array");t.exports=n;var f={" ":[16,[]],"!":[10,[5,21,5,7,-1,-1,5,2,4,1,5,0,6,1,5,2]],'"':[16,[4,21,4,14,-1,-1,12,21,12,14]],"#":[21,[11,25,4,-7,-1,-1,17,25,10,-7,-1,-1,4,12,18,12,-1,-1,3,6,17,6]],$:[20,[8,25,8,-4,-1,-1,12,25,12,-4,-1,-1,17,18,15,20,12,21,8,21,5,20,3,18,3,16,4,14,5,13,7,12,13,10,15,9,16,8,17,6,17,3,15,1,12,0,8,0,5,1,3,3]],"%":[24,[21,21,3,0,-1,-1,8,21,10,19,10,17,9,15,7,14,5,14,3,16,3,18,4,20,6,21,8,21,10,20,13,19,16,19,19,20,21,21,-1,-1,17,7,15,6,14,4,14,2,16,0,18,0,20,1,21,3,21,5,19,7,17,7]],"&":[26,[23,12,23,13,22,14,21,14,20,13,19,11,17,6,15,3,13,1,11,0,7,0,5,1,4,2,3,4,3,6,4,8,5,9,12,13,13,14,14,16,14,18,13,20,11,21,9,20,8,18,8,16,9,13,11,10,16,3,18,1,20,0,22,0,23,1,23,2]],"'":[10,[5,19,4,20,5,21,6,20,6,18,5,16,4,15]],"(":[14,[11,25,9,23,7,20,5,16,4,11,4,7,5,2,7,-2,9,-5,11,-7]],")":[14,[3,25,5,23,7,20,9,16,10,11,10,7,9,2,7,-2,5,-5,3,-7]],"*":[16,[8,21,8,9,-1,-1,3,18,13,12,-1,-1,13,18,3,12]],"+":[26,[13,18,13,0,-1,-1,4,9,22,9]],",":[10,[6,1,5,0,4,1,5,2,6,1,6,-1,5,-3,4,-4]],"-":[26,[4,9,22,9]],".":[10,[5,2,4,1,5,0,6,1,5,2]],"/":[22,[20,25,2,-7]],0:[20,[9,21,6,20,4,17,3,12,3,9,4,4,6,1,9,0,11,0,14,1,16,4,17,9,17,12,16,17,14,20,11,21,9,21]],1:[20,[6,17,8,18,11,21,11,0]],2:[20,[4,16,4,17,5,19,6,20,8,21,12,21,14,20,15,19,16,17,16,15,15,13,13,10,3,0,17,0]],3:[20,[5,21,16,21,10,13,13,13,15,12,16,11,17,8,17,6,16,3,14,1,11,0,8,0,5,1,4,2,3,4]],4:[20,[13,21,3,7,18,7,-1,-1,13,21,13,0]],5:[20,[15,21,5,21,4,12,5,13,8,14,11,14,14,13,16,11,17,8,17,6,16,3,14,1,11,0,8,0,5,1,4,2,3,4]],6:[20,[16,18,15,20,12,21,10,21,7,20,5,17,4,12,4,7,5,3,7,1,10,0,11,0,14,1,16,3,17,6,17,7,16,10,14,12,11,13,10,13,7,12,5,10,4,7]],7:[20,[17,21,7,0,-1,-1,3,21,17,21]],8:[20,[8,21,5,20,4,18,4,16,5,14,7,13,11,12,14,11,16,9,17,7,17,4,16,2,15,1,12,0,8,0,5,1,4,2,3,4,3,7,4,9,6,11,9,12,13,13,15,14,16,16,16,18,15,20,12,21,8,21]],9:[20,[16,14,15,11,13,9,10,8,9,8,6,9,4,11,3,14,3,15,4,18,6,20,9,21,10,21,13,20,15,18,16,14,16,9,15,4,13,1,10,0,8,0,5,1,4,3]],":":[10,[5,14,4,13,5,12,6,13,5,14,-1,-1,5,2,4,1,5,0,6,1,5,2]],";":[10,[5,14,4,13,5,12,6,13,5,14,-1,-1,6,1,5,0,4,1,5,2,6,1,6,-1,5,-3,4,-4]],"<":[24,[20,18,4,9,20,0]],"=":[26,[4,12,22,12,-1,-1,4,6,22,6]],">":[24,[4,18,20,9,4,0]],"?":[18,[3,16,3,17,4,19,5,20,7,21,11,21,13,20,14,19,15,17,15,15,14,13,13,12,9,10,9,7,-1,-1,9,2,8,1,9,0,10,1,9,2]],"@":[27,[18,13,17,15,15,16,12,16,10,15,9,14,8,11,8,8,9,6,11,5,14,5,16,6,17,8,-1,-1,12,16,10,14,9,11,9,8,10,6,11,5,-1,-1,18,16,17,8,17,6,19,5,21,5,23,7,24,10,24,12,23,15,22,17,20,19,18,20,15,21,12,21,9,20,7,19,5,17,4,15,3,12,3,9,4,6,5,4,7,2,9,1,12,0,15,0,18,1,20,2,21,3,-1,-1,19,16,18,8,18,6,19,5]],A:[18,[9,21,1,0,-1,-1,9,21,17,0,-1,-1,4,7,14,7]],B:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,15,17,13,16,12,13,11,-1,-1,4,11,13,11,16,10,17,9,18,7,18,4,17,2,16,1,13,0,4,0]],C:[21,[18,16,17,18,15,20,13,21,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5]],D:[21,[4,21,4,0,-1,-1,4,21,11,21,14,20,16,18,17,16,18,13,18,8,17,5,16,3,14,1,11,0,4,0]],E:[19,[4,21,4,0,-1,-1,4,21,17,21,-1,-1,4,11,12,11,-1,-1,4,0,17,0]],F:[18,[4,21,4,0,-1,-1,4,21,17,21,-1,-1,4,11,12,11]],G:[21,[18,16,17,18,15,20,13,21,9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,18,8,-1,-1,13,8,18,8]],H:[22,[4,21,4,0,-1,-1,18,21,18,0,-1,-1,4,11,18,11]],I:[8,[4,21,4,0]],J:[16,[12,21,12,5,11,2,10,1,8,0,6,0,4,1,3,2,2,5,2,7]],K:[21,[4,21,4,0,-1,-1,18,21,4,7,-1,-1,9,12,18,0]],L:[17,[4,21,4,0,-1,-1,4,0,16,0]],M:[24,[4,21,4,0,-1,-1,4,21,12,0,-1,-1,20,21,12,0,-1,-1,20,21,20,0]],N:[22,[4,21,4,0,-1,-1,4,21,18,0,-1,-1,18,21,18,0]],O:[22,[9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,19,8,19,13,18,16,17,18,15,20,13,21,9,21]],P:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,14,17,12,16,11,13,10,4,10]],Q:[22,[9,21,7,20,5,18,4,16,3,13,3,8,4,5,5,3,7,1,9,0,13,0,15,1,17,3,18,5,19,8,19,13,18,16,17,18,15,20,13,21,9,21,-1,-1,12,4,18,-2]],R:[21,[4,21,4,0,-1,-1,4,21,13,21,16,20,17,19,18,17,18,15,17,13,16,12,13,11,4,11,-1,-1,11,11,18,0]],S:[20,[17,18,15,20,12,21,8,21,5,20,3,18,3,16,4,14,5,13,7,12,13,10,15,9,16,8,17,6,17,3,15,1,12,0,8,0,5,1,3,3]],T:[16,[8,21,8,0,-1,-1,1,21,15,21]],U:[22,[4,21,4,6,5,3,7,1,10,0,12,0,15,1,17,3,18,6,18,21]],V:[18,[1,21,9,0,-1,-1,17,21,9,0]],W:[24,[2,21,7,0,-1,-1,12,21,7,0,-1,-1,12,21,17,0,-1,-1,22,21,17,0]],X:[20,[3,21,17,0,-1,-1,17,21,3,0]],Y:[18,[1,21,9,11,9,0,-1,-1,17,21,9,11]],Z:[20,[17,21,3,0,-1,-1,3,21,17,21,-1,-1,3,0,17,0]],"[":[14,[4,25,4,-7,-1,-1,5,25,5,-7,-1,-1,4,25,11,25,-1,-1,4,-7,11,-7]],"\\":[14,[0,21,14,-3]],"]":[14,[9,25,9,-7,-1,-1,10,25,10,-7,-1,-1,3,25,10,25,-1,-1,3,-7,10,-7]],"^":[16,[6,15,8,18,10,15,-1,-1,3,12,8,17,13,12,-1,-1,8,17,8,0]],_:[16,[0,-2,16,-2]],"`":[10,[6,21,5,20,4,18,4,16,5,15,6,16,5,17]],a:[19,[15,14,15,0,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],b:[19,[4,21,4,0,-1,-1,4,11,6,13,8,14,11,14,13,13,15,11,16,8,16,6,15,3,13,1,11,0,8,0,6,1,4,3]],c:[18,[15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],d:[19,[15,21,15,0,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],e:[18,[3,8,15,8,15,10,14,12,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],f:[12,[10,21,8,21,6,20,5,17,5,0,-1,-1,2,14,9,14]],g:[19,[15,14,15,-2,14,-5,13,-6,11,-7,8,-7,6,-6,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],h:[19,[4,21,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0]],i:[8,[3,21,4,20,5,21,4,22,3,21,-1,-1,4,14,4,0]],j:[10,[5,21,6,20,7,21,6,22,5,21,-1,-1,6,14,6,-3,5,-6,3,-7,1,-7]],k:[17,[4,21,4,0,-1,-1,14,14,4,4,-1,-1,8,8,15,0]],l:[8,[4,21,4,0]],m:[30,[4,14,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0,-1,-1,15,10,18,13,20,14,23,14,25,13,26,10,26,0]],n:[19,[4,14,4,0,-1,-1,4,10,7,13,9,14,12,14,14,13,15,10,15,0]],o:[19,[8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3,16,6,16,8,15,11,13,13,11,14,8,14]],p:[19,[4,14,4,-7,-1,-1,4,11,6,13,8,14,11,14,13,13,15,11,16,8,16,6,15,3,13,1,11,0,8,0,6,1,4,3]],q:[19,[15,14,15,-7,-1,-1,15,11,13,13,11,14,8,14,6,13,4,11,3,8,3,6,4,3,6,1,8,0,11,0,13,1,15,3]],r:[13,[4,14,4,0,-1,-1,4,8,5,11,7,13,9,14,12,14]],s:[17,[14,11,13,13,10,14,7,14,4,13,3,11,4,9,6,8,11,7,13,6,14,4,14,3,13,1,10,0,7,0,4,1,3,3]],t:[12,[5,21,5,4,6,1,8,0,10,0,-1,-1,2,14,9,14]],u:[19,[4,14,4,4,5,1,7,0,10,0,12,1,15,4,-1,-1,15,14,15,0]],v:[16,[2,14,8,0,-1,-1,14,14,8,0]],w:[22,[3,14,7,0,-1,-1,11,14,7,0,-1,-1,11,14,15,0,-1,-1,19,14,15,0]],x:[17,[3,14,14,0,-1,-1,14,14,3,0]],y:[16,[2,14,8,0,-1,-1,14,14,8,0,6,-4,4,-6,2,-7,1,-7]],z:[17,[14,14,3,0,-1,-1,3,14,14,14,-1,-1,3,0,14,0]],"{":[14,[9,25,7,24,6,23,5,21,5,19,6,17,7,16,8,14,8,12,6,10,-1,-1,7,24,6,22,6,20,7,18,8,17,9,15,9,13,8,11,4,9,8,7,9,5,9,3,8,1,7,0,6,-2,6,-4,7,-6,-1,-1,6,8,8,6,8,4,7,2,6,1,5,-1,5,-3,6,-5,7,-6,9,-7]],"|":[8,[4,25,4,-7]],"}":[14,[5,25,7,24,8,23,9,21,9,19,8,17,7,16,6,14,6,12,8,10,-1,-1,7,24,8,22,8,20,7,18,6,17,5,15,5,13,6,11,10,9,6,7,5,5,5,3,6,1,7,0,8,-2,8,-4,7,-6,-1,-1,8,8,6,6,6,4,7,2,8,1,9,-1,9,-3,8,-5,7,-6,5,-7]],"~":[24,[3,6,3,8,4,11,6,12,8,12,10,11,14,8,16,7,18,7,20,8,21,10,-1,-1,3,8,4,10,6,11,8,11,10,10,14,7,16,6,18,6,20,7,21,10,21,12]]}},{"../data/extent":58,"../data/pos_array":62,"../gl/vertex_buffer":72,"../util/browser":245,"./vertex_array_object":95,"@mapbox/gl-matrix":1}],78:[function(e,t,i){function n(e,t,i,n){var s=i.paint.get("fill-color"),l=i.paint.get("fill-opacity");if(0!==l.constantOr(1)){var c=e.gl;c.enable(c.STENCIL_TEST);var p=i.paint.get("fill-pattern")||1!==s.constantOr(u.transparent).a||1!==l.constantOr(0)?"translucent":"opaque";e.renderPass===p&&(e.setDepthSublayer(1),e.depthMask("opaque"===e.renderPass),o(e,t,i,n,r)),"translucent"===e.renderPass&&i.paint.get("fill-antialias")&&(e.lineWidth(2),e.depthMask(!1),e.setDepthSublayer(i.getPaintProperty("fill-outline-color")?2:0),o(e,t,i,n,a))}}function o(e,t,i,n,o){if(!l.isPatternMissing(i.paint.get("fill-pattern"),e))for(var r=!0,a=0,s=n;a<s.length;a+=1){var u=s[a],c=t.getTile(u),p=c.getBucket(i);p&&(e.enableTileClippingMask(u),o(e,t,i,c,u,p,r),r=!1)}}function r(e,t,i,n,o,r,a){var l=e.gl,u=r.programConfigurations.get(i.id);s("fill",i.paint.get("fill-pattern"),e,u,i,n,o,a).draw(l,l.TRIANGLES,i.id,r.layoutVertexBuffer,r.indexBuffer,r.segments,u)}function a(e,t,i,n,o,r,a){var l=e.gl,u=r.programConfigurations.get(i.id),c=i.getPaintProperty("fill-outline-color")?null:i.paint.get("fill-pattern"),p=s("fillOutline",c,e,u,i,n,o,a);l.uniform2f(p.uniforms.u_world,l.drawingBufferWidth,l.drawingBufferHeight),p.draw(l,l.LINES,i.id,r.layoutVertexBuffer,r.indexBuffer2,r.segments2,u)}function s(e,t,i,n,o,r,a,s){var u,c=i.currentProgram;return t?(u=i.useProgram(e+"Pattern",n),(s||u!==c)&&(n.setUniforms(i.gl,u,o.paint,{zoom:i.transform.zoom}),l.prepare(t,i,u)),l.setTile(r,i,u)):(u=i.useProgram(e,n),(s||u!==c)&&n.setUniforms(i.gl,u,o.paint,{zoom:i.transform.zoom})),i.gl.uniformMatrix4fv(u.uniforms.u_matrix,!1,i.translatePosMatrix(a.posMatrix,r,o.paint.get("fill-translate"),o.paint.get("fill-translate-anchor"))),u}var l=e("./pattern"),u=e("../style-spec/util/color");t.exports=n},{"../style-spec/util/color":150,"./pattern":90}],79:[function(e,t,i){function n(e,t,i,n){if(0!==i.paint.get("fill-extrusion-opacity"))if("3d"===e.renderPass){var a=e.gl;a.disable(a.STENCIL_TEST),a.enable(a.DEPTH_TEST),e.clearColor(),e.depthMask(!0);for(var s=0;s<n.length;s++)r(e,t,i,n[s])}else"translucent"===e.renderPass&&o(e,i)}function o(e,t){var i=t.viewportFrame;if(i){var n=e.gl,o=e.useProgram("extrusionTexture");n.disable(n.STENCIL_TEST),n.disable(n.DEPTH_TEST),n.activeTexture(n.TEXTURE0),n.bindTexture(n.TEXTURE_2D,i.texture),n.uniform1f(o.uniforms.u_opacity,t.paint.get("fill-extrusion-opacity")),n.uniform1i(o.uniforms.u_image,0);var r=c.create();c.ortho(r,0,e.width,e.height,0,0,1),n.uniformMatrix4fv(o.uniforms.u_matrix,!1,r),n.uniform2f(o.uniforms.u_world,n.drawingBufferWidth,n.drawingBufferHeight),e.viewportVAO.bind(n,o,e.viewportBuffer),n.drawArrays(n.TRIANGLE_STRIP,0,4)}}function r(e,t,i,n){var o=t.getTile(n),r=o.getBucket(i);if(r){var s=e.gl,u=i.paint.get("fill-extrusion-pattern"),c=r.programConfigurations.get(i.id),p=e.useProgram(u?"fillExtrusionPattern":"fillExtrusion",c);if(c.setUniforms(s,p,i.paint,{zoom:e.transform.zoom}),u){if(l.isPatternMissing(u,e))return;l.prepare(u,e,p),l.setTile(o,e,p),s.uniform1f(p.uniforms.u_height_factor,-Math.pow(2,n.z)/o.tileSize/8)}e.gl.uniformMatrix4fv(p.uniforms.u_matrix,!1,e.translatePosMatrix(n.posMatrix,o,i.paint.get("fill-extrusion-translate"),i.paint.get("fill-extrusion-translate-anchor"))),a(p,e),p.draw(s,s.TRIANGLES,i.id,r.layoutVertexBuffer,r.indexBuffer,r.segments,c)}}function a(e,t){var i=t.gl,n=t.style.light,o=n.properties.get("position"),r=[o.x,o.y,o.z],a=u.create();"viewport"===n.properties.get("anchor")&&u.fromRotation(a,-t.transform.angle),p.transformMat3(r,r,a);var s=n.properties.get("color");i.uniform3fv(e.uniforms.u_lightpos,r),i.uniform1f(e.uniforms.u_lightintensity,n.properties.get("intensity")),i.uniform3f(e.uniforms.u_lightcolor,s.r,s.g,s.b)}var s=e("@mapbox/gl-matrix"),l=e("./pattern"),u=s.mat3,c=s.mat4,p=s.vec3;t.exports=n},{"./pattern":90,"@mapbox/gl-matrix":1}],80:[function(e,t,i){function n(e,t,i,n){if(!e.isOpaquePass&&0!==i.paint.get("heatmap-opacity")){var r=e.gl;e.setDepthSublayer(0),e.depthMask(!1),r.disable(r.STENCIL_TEST),o(r,e,i),r.clearColor(0,0,0,0),r.clear(r.COLOR_BUFFER_BIT),r.blendFunc(r.ONE,r.ONE);for(var s=0;s<n.length;s++){var l=n[s];if(!t.hasRenderableParent(l)){var c=t.getTile(l),p=c.getBucket(i);if(p){var f=p.programConfigurations.get(i.id),d=e.useProgram("heatmap",f),h=e.transform,m=h.zoom;f.setUniforms(r,d,i.paint,{zoom:m}),r.uniform1f(d.uniforms.u_radius,i.paint.get("heatmap-radius")),r.uniform1f(d.uniforms.u_extrude_scale,u(c,1,m)),r.uniform1f(d.uniforms.u_intensity,i.paint.get("heatmap-intensity")),r.uniformMatrix4fv(d.uniforms.u_matrix,!1,l.posMatrix),d.draw(r,r.TRIANGLES,i.id,p.layoutVertexBuffer,p.indexBuffer,p.segments,f)}}}a(r,e,i)}}function o(e,t,i){e.activeTexture(e.TEXTURE1),e.viewport(0,0,t.width/4,t.height/4);var n=i.heatmapTexture,o=i.heatmapFbo;n?(e.bindTexture(e.TEXTURE_2D,n),e.bindFramebuffer(e.FRAMEBUFFER,o)):(n=i.heatmapTexture=e.createTexture(),e.bindTexture(e.TEXTURE_2D,n),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),o=i.heatmapFbo=e.createFramebuffer(),r(e,t,n,o))}function r(e,t,i,n){e.texImage2D(e.TEXTURE_2D,0,e.RGBA,t.width/4,t.height/4,0,e.RGBA,t.extTextureHalfFloat?t.extTextureHalfFloat.HALF_FLOAT_OES:e.UNSIGNED_BYTE,null),e.bindFramebuffer(e.FRAMEBUFFER,n),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,i,0),t.extTextureHalfFloat&&e.checkFramebufferStatus(e.FRAMEBUFFER)!==e.FRAMEBUFFER_COMPLETE&&(t.extTextureHalfFloat=null,r(e,t,i,n))}function a(e,t,i){e.bindFramebuffer(e.FRAMEBUFFER,null),e.activeTexture(e.TEXTURE2);var n=i.colorRampTexture;n||(n=i.colorRampTexture=new l(e,i.colorRamp,e.RGBA)),n.bind(e.LINEAR,e.CLAMP_TO_EDGE),e.blendFunc(e.ONE,e.ONE_MINUS_SRC_ALPHA);var o=t.useProgram("heatmapTexture");e.viewport(0,0,t.width,t.height),e.activeTexture(e.TEXTURE0),e.bindTexture(e.TEXTURE_2D,i.heatmapTexture);var r=i.paint.get("heatmap-opacity");e.uniform1f(o.uniforms.u_opacity,r),e.uniform1i(o.uniforms.u_image,1),e.uniform1i(o.uniforms.u_color_ramp,2);var a=s.create();s.ortho(a,0,t.width,t.height,0,0,1),e.uniformMatrix4fv(o.uniforms.u_matrix,!1,a),e.disable(e.DEPTH_TEST),e.uniform2f(o.uniforms.u_world,e.drawingBufferWidth,e.drawingBufferHeight),t.viewportVAO.bind(e,o,t.viewportBuffer),e.drawArrays(e.TRIANGLE_STRIP,0,4),e.enable(e.DEPTH_TEST)}var s=e("@mapbox/gl-matrix").mat4,l=e("./texture"),u=e("../source/pixels_to_tile_units");t.exports=n},{"../source/pixels_to_tile_units":104,"./texture":93,"@mapbox/gl-matrix":1}],81:[function(e,t,i){function n(e,t,i,n,a,s,l,u,c){var p,f,d,h,m=t.gl,y=a.paint.get("line-dasharray"),v=a.paint.get("line-pattern");if(u||c){var g=1/r(i,1,t.transform.tileZoom);if(y){p=t.lineAtlas.getDash(y.from,"round"===a.layout.get("line-cap")),f=t.lineAtlas.getDash(y.to,"round"===a.layout.get("line-cap"));var _=p.width*y.fromScale,b=f.width*y.toScale;m.uniform2f(e.uniforms.u_patternscale_a,g/_,-p.height/2),m.uniform2f(e.uniforms.u_patternscale_b,g/b,-f.height/2),m.uniform1f(e.uniforms.u_sdfgamma,t.lineAtlas.width/(256*Math.min(_,b)*o.devicePixelRatio)/2)}else if(v){if(d=t.imageManager.getPattern(v.from),h=t.imageManager.getPattern(v.to),!d||!h)return;m.uniform2f(e.uniforms.u_pattern_size_a,d.displaySize[0]*v.fromScale/g,h.displaySize[1]),m.uniform2f(e.uniforms.u_pattern_size_b,h.displaySize[0]*v.toScale/g,h.displaySize[1]);var x=t.imageManager.getPixelSize(),w=x.width,z=x.height;m.uniform2fv(e.uniforms.u_texsize,[w,z])}m.uniform2f(e.uniforms.u_gl_units_to_pixels,1/t.transform.pixelsToGLUnits[0],1/t.transform.pixelsToGLUnits[1])}u&&(y?(m.uniform1i(e.uniforms.u_image,0),m.activeTexture(m.TEXTURE0),t.lineAtlas.bind(m),m.uniform1f(e.uniforms.u_tex_y_a,p.y),m.uniform1f(e.uniforms.u_tex_y_b,f.y),m.uniform1f(e.uniforms.u_mix,y.t)):v&&(m.uniform1i(e.uniforms.u_image,0),m.activeTexture(m.TEXTURE0),t.imageManager.bind(m),m.uniform2fv(e.uniforms.u_pattern_tl_a,d.tl),m.uniform2fv(e.uniforms.u_pattern_br_a,d.br),m.uniform2fv(e.uniforms.u_pattern_tl_b,h.tl),m.uniform2fv(e.uniforms.u_pattern_br_b,h.br),m.uniform1f(e.uniforms.u_fade,v.t))),t.enableTileClippingMask(s);var A=t.translatePosMatrix(s.posMatrix,i,a.paint.get("line-translate"),a.paint.get("line-translate-anchor"));m.uniformMatrix4fv(e.uniforms.u_matrix,!1,A),m.uniform1f(e.uniforms.u_ratio,1/r(i,1,t.transform.zoom)),e.draw(m,m.TRIANGLES,a.id,n.layoutVertexBuffer,n.indexBuffer,n.segments,l)}var o=e("../util/browser"),r=e("../source/pixels_to_tile_units");t.exports=function(e,t,i,o){if("translucent"===e.renderPass&&0!==i.paint.get("line-opacity").constantOr(1)){e.setDepthSublayer(0),e.depthMask(!1);var r=e.gl;r.enable(r.STENCIL_TEST);for(var a,s=i.paint.get("line-dasharray")?"lineSDF":i.paint.get("line-pattern")?"linePattern":"line",l=!0,u=0,c=o;u<c.length;u+=1){var p=c[u],f=t.getTile(p),d=f.getBucket(i);if(d){var h=d.programConfigurations.get(i.id),m=e.currentProgram,y=e.useProgram(s,h),v=l||y!==m,g=a!==f.coord.z;v&&h.setUniforms(e.gl,y,i.paint,{zoom:e.transform.zoom}),n(y,e,f,d,i,p,h,v,g),a=f.coord.z,l=!1}}}}},{"../source/pixels_to_tile_units":104,"../util/browser":245}],82:[function(e,t,i){function n(e,t,i,n){if("translucent"===e.renderPass&&0!==i.paint.get("raster-opacity")){var l=e.gl,c=t.getSource(),p=e.useProgram("raster");l.enable(l.DEPTH_TEST),e.depthMask(1===i.paint.get("raster-opacity")),l.depthFunc(l.LESS),l.disable(l.STENCIL_TEST),l.uniform1f(p.uniforms.u_brightness_low,i.paint.get("raster-brightness-min")),l.uniform1f(p.uniforms.u_brightness_high,i.paint.get("raster-brightness-max")),l.uniform1f(p.uniforms.u_saturation_factor,a(i.paint.get("raster-saturation"))),l.uniform1f(p.uniforms.u_contrast_factor,r(i.paint.get("raster-contrast"))),l.uniform3fv(p.uniforms.u_spin_weights,o(i.paint.get("raster-hue-rotate"))),l.uniform1f(p.uniforms.u_buffer_scale,1),l.uniform1i(p.uniforms.u_image0,0),l.uniform1i(p.uniforms.u_image1,1);for(var f=n.length&&n[0].z,d=0,h=n;d<h.length;d+=1){var m=h[d];e.setDepthSublayer(m.z-f);var y=t.getTile(m),v=e.transform.calculatePosMatrix(m,t.getSource().maxzoom);y.registerFadeDuration(i.paint.get("raster-fade-duration")),l.uniformMatrix4fv(p.uniforms.u_matrix,!1,v);var g=t.findLoadedParent(m,0,{}),_=s(y,g,t,i,e.transform),b=void 0,x=void 0;if(l.activeTexture(l.TEXTURE0),y.texture.bind(l.LINEAR,l.CLAMP_TO_EDGE,l.LINEAR_MIPMAP_NEAREST),l.activeTexture(l.TEXTURE1),g?(g.texture.bind(l.LINEAR,l.CLAMP_TO_EDGE,l.LINEAR_MIPMAP_NEAREST),b=Math.pow(2,g.coord.z-y.coord.z),x=[y.coord.x*b%1,y.coord.y*b%1]):y.texture.bind(l.LINEAR,l.CLAMP_TO_EDGE,l.LINEAR_MIPMAP_NEAREST),l.uniform2fv(p.uniforms.u_tl_parent,x||[0,0]),l.uniform1f(p.uniforms.u_scale_parent,b||1),l.uniform1f(p.uniforms.u_fade_t,_.mix),l.uniform1f(p.uniforms.u_opacity,_.opacity*i.paint.get("raster-opacity")),c instanceof u){var w=c.boundsBuffer;c.boundsVAO.bind(l,p,w),l.drawArrays(l.TRIANGLE_STRIP,0,w.length)}else if(y.maskedBoundsBuffer&&y.maskedIndexBuffer&&y.segments)p.draw(l,l.TRIANGLES,i.id,y.maskedBoundsBuffer,y.maskedIndexBuffer,y.segments);else{var z=e.rasterBoundsBuffer,A=e.rasterBoundsVAO;A.bind(l,p,z),l.drawArrays(l.TRIANGLE_STRIP,0,z.length)}}l.depthFunc(l.LEQUAL)}}function o(e){e*=Math.PI/180;var t=Math.sin(e),i=Math.cos(e);return[(2*i+1)/3,(-Math.sqrt(3)*t-i+1)/3,(Math.sqrt(3)*t-i+1)/3]}function r(e){return e>0?1/(1-e):1+e}function a(e){return e>0?1-1/(1.001-e):-e}function s(e,t,i,n,o){var r=n.paint.get("raster-fade-duration");if(r>0){var a=Date.now(),s=(a-e.timeAdded)/r,u=t?(a-t.timeAdded)/r:-1,c=i.getSource(),p=o.coveringZoomLevel({tileSize:c.tileSize,roundZoom:c.roundZoom}),f=!t||Math.abs(t.coord.z-p)>Math.abs(e.coord.z-p),d=f&&e.refreshedUponExpiration?1:l.clamp(f?s:1-u,0,1);return e.refreshedUponExpiration&&s>=1&&(e.refreshedUponExpiration=!1),t?{opacity:1,mix:1-d}:{opacity:d,mix:0}}return{opacity:1,mix:0}}var l=e("../util/util"),u=e("../source/image_source");t.exports=n},{"../source/image_source":102,"../util/util":266}],83:[function(e,t,i){function n(e,t,i,n){if("translucent"===e.renderPass){var r=e.gl;r.disable(r.STENCIL_TEST),e.setDepthSublayer(0),e.depthMask(!1),0!==i.paint.get("icon-opacity").constantOr(1)&&o(e,t,i,n,!1,i.paint.get("icon-translate"),i.paint.get("icon-translate-anchor"),i.layout.get("icon-rotation-alignment"),i.layout.get("icon-pitch-alignment"),i.layout.get("icon-keep-upright")),0!==i.paint.get("text-opacity").constantOr(1)&&o(e,t,i,n,!0,i.paint.get("text-translate"),i.paint.get("text-translate-anchor"),i.layout.get("text-rotation-alignment"),i.layout.get("text-pitch-alignment"),i.layout.get("text-keep-upright")),t.map.showCollisionBoxes&&l(e,t,i,n)}}function o(e,t,i,n,o,s,l,p,f,h){var m=e.gl,y=e.transform,v="map"===p,g="map"===f,_=v&&"line"===i.layout.get("symbol-placement"),b=v&&!g&&!_,x=g;x?m.enable(m.DEPTH_TEST):m.disable(m.DEPTH_TEST);for(var w,z=0,A=n;z<A.length;z+=1){var T=A[z],k=t.getTile(T),S=k.getBucket(i);if(S){var E=o?S.text:S.icon;if(E&&E.segments.get().length){var C=E.programConfigurations.get(i.id),M=o||S.sdfIcons,I=o?S.textSizeData:S.iconSizeData;if(w||(w=e.useProgram(M?"symbolSDF":"symbolIcon",C),C.setUniforms(m,w,i.paint,{zoom:e.transform.zoom}),r(w,e,i,o,b,g,I)),m.activeTexture(m.TEXTURE0),m.uniform1i(w.uniforms.u_texture,0),o)k.glyphAtlasTexture.bind(m.LINEAR,m.CLAMP_TO_EDGE),m.uniform2fv(w.uniforms.u_texsize,k.glyphAtlasTexture.size);else{var L=1!==i.layout.get("icon-size").constantOr(0)||S.iconsNeedLinear,R=g||0!==y.pitch;k.iconAtlasTexture.bind(M||e.options.rotating||e.options.zooming||L||R?m.LINEAR:m.NEAREST,m.CLAMP_TO_EDGE),m.uniform2fv(w.uniforms.u_texsize,k.iconAtlasTexture.size)}e.enableTileClippingMask(T),m.uniformMatrix4fv(w.uniforms.u_matrix,!1,e.translatePosMatrix(T.posMatrix,k,s,l));var P=u(k,1,e.transform.zoom),D=c.getLabelPlaneMatrix(T.posMatrix,g,v,e.transform,P),B=c.getGlCoordMatrix(T.posMatrix,g,v,e.transform,P);m.uniformMatrix4fv(w.uniforms.u_gl_coord_matrix,!1,e.translatePosMatrix(B,k,s,l,!0)),_?(m.uniformMatrix4fv(w.uniforms.u_label_plane_matrix,!1,d),c.updateLineLabels(S,T.posMatrix,e,o,D,B,g,h)):m.uniformMatrix4fv(w.uniforms.u_label_plane_matrix,!1,D),m.uniform1f(w.uniforms.u_fade_change,e.options.collisionFadeDuration?(Date.now()-S.fadeStartTime)/e.options.collisionFadeDuration:1),a(w,C,e,i,k,E,o,M,g)}}}x||m.enable(m.DEPTH_TEST)}function r(e,t,i,n,o,r,a){var s=t.gl,l=t.transform;s.uniform1i(e.uniforms.u_pitch_with_map,r?1:0),s.uniform1f(e.uniforms.u_is_text,n?1:0),s.uniform1f(e.uniforms.u_pitch,l.pitch/360*2*Math.PI);var u="constant"===a.functionType||"source"===a.functionType,c="constant"===a.functionType||"camera"===a.functionType;s.uniform1i(e.uniforms.u_is_size_zoom_constant,u?1:0),s.uniform1i(e.uniforms.u_is_size_feature_constant,c?1:0),s.uniform1f(e.uniforms.u_camera_to_center_distance,l.cameraToCenterDistance);var f=p.evaluateSizeForZoom(a,l.zoom,h.properties[n?"text-size":"icon-size"]);void 0!==f.uSizeT&&s.uniform1f(e.uniforms.u_size_t,f.uSizeT),void 0!==f.uSize&&s.uniform1f(e.uniforms.u_size,f.uSize),s.uniform1f(e.uniforms.u_aspect_ratio,l.width/l.height),s.uniform1i(e.uniforms.u_rotate_symbol,o?1:0)}function a(e,t,i,n,o,r,a,l,u){var c=i.gl,p=i.transform;if(l){var f=0!==n.paint.get(a?"text-halo-width":"icon-halo-width").constantOr(1),d=u?Math.cos(p._pitch)*p.cameraToCenterDistance:1;c.uniform1f(e.uniforms.u_gamma_scale,d),f&&(c.uniform1f(e.uniforms.u_is_halo,1),s(r,n,c,e)),c.uniform1f(e.uniforms.u_is_halo,0)}s(r,n,c,e)}function s(e,t,i,n){n.draw(i,i.TRIANGLES,t.id,e.layoutVertexBuffer,e.indexBuffer,e.segments,e.programConfigurations.get(t.id),e.dynamicLayoutVertexBuffer,e.opacityVertexBuffer)}var l=e("./draw_collision_debug"),u=e("../source/pixels_to_tile_units"),c=e("../symbol/projection"),p=e("../symbol/symbol_size"),f=e("@mapbox/gl-matrix").mat4,d=f.identity(new Float32Array(16)),h=e("../style/style_layer/symbol_style_layer_properties").layout;t.exports=n},{"../source/pixels_to_tile_units":104,"../style/style_layer/symbol_style_layer_properties":202,"../symbol/projection":216,"../symbol/symbol_size":221,"./draw_collision_debug":76,"@mapbox/gl-matrix":1}],84:[function(e,t,i){function n(e){var t=a.create({width:0,height:0}),i={},n=new o(0,0,{autoResize:!0});for(var r in e){var l=e[r],u=i[r]={};for(var c in l){var p=l[+c];if(p&&0!==p.bitmap.width&&0!==p.bitmap.height){var f=n.packOne(p.bitmap.width+2*s,p.bitmap.height+2*s);a.resize(t,{width:n.w,height:n.h}),a.copy(p.bitmap,t,{x:0,y:0},{x:f.x+s,y:f.y+s},p.bitmap),u[c]={rect:f,metrics:p.metrics}}}}return n.shrink(),a.resize(t,{width:n.w,height:n.h}),{image:t,positions:i}}var o=e("@mapbox/shelf-pack"),r=e("../util/image"),a=r.AlphaImage,s=1;t.exports={makeGlyphAtlas:n}},{"../util/image":256,"@mapbox/shelf-pack":3}],85:[function(e,t,i){var n=e("../style/load_glyph_range"),o=e("@mapbox/tiny-sdf"),r=e("../util/is_char_in_unicode_block"),a=e("../util/util"),s=a.asyncAll,l=e("../util/image"),u=l.AlphaImage,c=function(e,t){this.requestTransform=e,this.localIdeographFontFamily=t,this.entries={}};c.prototype.setURL=function(e){this.url=e},c.prototype.getGlyphs=function(e,t){var i=this,o=[];for(var r in e)for(var a=0,l=e[r];a<l.length;a+=1){var u=l[a];o.push({stack:r,id:u})}s(o,function(e,t){var o=e.stack,r=e.id,a=i.entries[o];a||(a=i.entries[o]={glyphs:{},requests:{}});var s=a.glyphs[r];if(void 0!==s)return void t(null,{stack:o,id:r,glyph:s});if(s=i._tinySDF(a,o,r))return void t(null,{stack:o,id:r,glyph:s});var l=Math.floor(r/256);if(256*l>65535)return void t(new Error("glyphs > 65535 not supported"));var u=a.requests[l];u||(u=a.requests[l]=[],n(o,l,i.url,i.requestTransform,function(e,t){if(t)for(var i in t)a.glyphs[+i]=t[+i];for(var n=0,o=u;n<o.length;n+=1)(0,o[n])(e,t);delete a.requests[l]})),u.push(function(e,i){e?t(e):i&&t(null,{stack:o,id:r,glyph:i[r]||null})})},function(e,i){if(e)t(e);else if(i){for(var n={},o=0,r=i;o<r.length;o+=1){var a=r[o],s=a.stack,l=a.id,u=a.glyph;(n[s]||(n[s]={}))[l]=u}t(null,n)}})},c.prototype._tinySDF=function(e,t,i){var n=this.localIdeographFontFamily;if(n&&(r["CJK Unified Ideographs"](i)||r["Hangul Syllables"](i))){var a=e.tinySDF;if(!a){var s="400";/bold/i.test(t)?s="900":/medium/i.test(t)?s="500":/light/i.test(t)&&(s="200"),a=e.tinySDF=new o(24,3,8,.25,n,s)}return{id:i,bitmap:u.create({width:30,height:30},a.draw(String.fromCharCode(i))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},t.exports=c},{"../style/load_glyph_range":179,"../util/image":256,"../util/is_char_in_unicode_block":258,"../util/util":266,"@mapbox/tiny-sdf":4}],86:[function(e,t,i){function n(e,t){var i=t.pixelRatio,n={x:e.x+l,y:e.y+l,w:e.w-2*l,h:e.h-2*l};return{pixelRatio:i,textureRect:n,tl:[n.x,n.y],br:[n.x+n.w,n.y+n.h],displaySize:[n.w/i,n.h/i]}}function o(e){var t=s.create({width:0,height:0}),i={},o=new r(0,0,{autoResize:!0});for(var a in e){var u=e[a],c=o.packOne(u.data.width+2*l,u.data.height+2*l);s.resize(t,{width:o.w,height:o.h}),s.copy(u.data,t,{x:0,y:0},{x:c.x+l,y:c.y+l},u.data),i[a]=n(c,u)}return o.shrink(),s.resize(t,{width:o.w,height:o.h}),{image:t,positions:i}}var r=e("@mapbox/shelf-pack"),a=e("../util/image"),s=a.RGBAImage,l=1;t.exports={imagePosition:n,makeImageAtlas:o}},{"../util/image":256,"@mapbox/shelf-pack":3}],87:[function(e,t,i){var n=e("@mapbox/shelf-pack"),o=e("../util/image"),r=o.RGBAImage,a=e("./image_atlas"),s=a.imagePosition,l=e("./texture"),u=function(){this.images={},this.loaded=!1,this.requestors=[],this.shelfPack=new n(64,64,{autoResize:!0}),this.patterns={},this.atlasImage=r.create({width:64,height:64}),this.dirty=!0};u.prototype.isLoaded=function(){return this.loaded},u.prototype.setLoaded=function(e){var t=this;if(this.loaded!==e&&(this.loaded=e,e)){for(var i=0,n=t.requestors;i<n.length;i+=1){var o=n[i],r=o.ids,a=o.callback;t._notify(r,a)}this.requestors=[]}},u.prototype.getImage=function(e){return this.images[e]},u.prototype.addImage=function(e,t){this.images[e]=t},u.prototype.removeImage=function(e){delete this.images[e];var t=this.patterns[e];t&&(this.shelfPack.unref(t.bin),delete this.patterns[e])},u.prototype.getImages=function(e,t){var i=this,n=!0;if(!this.isLoaded())for(var o=0,r=e;o<r.length;o+=1){var a=r[o];i.images[a]||(n=!1)}this.isLoaded()||n?this._notify(e,t):this.requestors.push({ids:e,callback:t})},u.prototype._notify=function(e,t){for(var i=this,n={},o=0,r=e;o<r.length;o+=1){var a=r[o],s=i.images[a];s&&(n[a]=s)}t(null,n)},u.prototype.getPixelSize=function(){return{width:this.shelfPack.w,height:this.shelfPack.h}},u.prototype.getPattern=function(e){var t=this.patterns[e];if(t)return t.position;var i=this.getImage(e);if(!i)return null;var n=i.data.width+2,o=i.data.height+2,a=this.shelfPack.packOne(n,o);if(!a)return null;r.resize(this.atlasImage,this.getPixelSize());var l=i.data,u=this.atlasImage,c=a.x+1,p=a.y+1,f=l.width,d=l.height;r.copy(l,u,{x:0,y:0},{x:c,y:p},{width:f,height:d}),r.copy(l,u,{x:0,y:d-1},{x:c,y:p-1},{width:f,height:1}),r.copy(l,u,{x:0,y:0},{x:c,y:p+d},{width:f,height:1}),r.copy(l,u,{x:f-1,y:0},{x:c-1,y:p},{width:1,height:d}),r.copy(l,u,{x:0,y:0},{x:c+f,y:p},{width:1,height:d}),this.dirty=!0;var h=s(a,i);return this.patterns[e]={bin:a,position:h},h},u.prototype.bind=function(e){this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new l(e,this.atlasImage,e.RGBA),this.atlasTexture.bind(e.LINEAR,e.CLAMP_TO_EDGE)},t.exports=u},{"../util/image":256,"./image_atlas":86,"./texture":93,"@mapbox/shelf-pack":3}],88:[function(e,t,i){var n=e("../util/util"),o=function(e,t){this.width=e,this.height=t,this.nextRow=0,this.bytes=4,this.data=new Uint8Array(this.width*this.height*this.bytes),this.positions={}};o.prototype.getDash=function(e,t){var i=e.join(",")+String(t);return this.positions[i]||(this.positions[i]=this.addDash(e,t)),this.positions[i]},o.prototype.addDash=function(e,t){var i=this,o=t?7:0,r=2*o+1;if(this.nextRow+r>this.height)return n.warnOnce("LineAtlas out of space"),null;for(var a=0,s=0;s<e.length;s++)a+=e[s];for(var l=this.width/a,u=l/2,c=e.length%2==1,p=-o;p<=o;p++)for(var f=i.nextRow+o+p,d=i.width*f,h=c?-e[e.length-1]:0,m=e[0],y=1,v=0;v<this.width;v++){for(;m<v/l;)h=m,m+=e[y],c&&y===e.length-1&&(m+=e[0]),y++;var g=Math.abs(v-h*l),_=Math.abs(v-m*l),b=Math.min(g,_),x=y%2==1,w=void 0;if(t){var z=o?p/o*(u+1):0;if(x){var A=u-Math.abs(z);w=Math.sqrt(b*b+A*A)}else w=u-Math.sqrt(b*b+z*z)}else w=(x?1:-1)*b;i.data[3+4*(d+v)]=Math.max(0,Math.min(255,w+128))}var T={y:(this.nextRow+o+.5)/this.height,height:2*o/this.height,width:a};return this.nextRow+=r,this.dirty=!0,T},o.prototype.bind=function(e){this.texture?(e.bindTexture(e.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,e.texSubImage2D(e.TEXTURE_2D,0,0,0,this.width,this.height,e.RGBA,e.UNSIGNED_BYTE,this.data))):(this.texture=e.createTexture(),e.bindTexture(e.TEXTURE_2D,this.texture),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,this.width,this.height,0,e.RGBA,e.UNSIGNED_BYTE,this.data))},t.exports=o},{"../util/util":266}],89:[function(e,t,i){var n=e("../util/browser"),o=e("@mapbox/gl-matrix").mat4,r=e("../source/source_cache"),a=e("../data/extent"),s=e("../source/pixels_to_tile_units"),l=e("../util/util"),u=e("../gl/vertex_buffer"),c=e("./vertex_array_object"),p=e("../data/raster_bounds_array"),f=e("../data/pos_array"),d=e("../data/program_configuration"),h=d.ProgramConfiguration,m=e("../symbol/cross_tile_symbol_index"),y=e("../shaders"),v=e("./program"),g=e("./render_texture"),_=e("./tile_mask"),b={symbol:e("./draw_symbol"),circle:e("./draw_circle"),heatmap:e("./draw_heatmap"),line:e("./draw_line"),fill:e("./draw_fill"),"fill-extrusion":e("./draw_fill_extrusion"),raster:e("./draw_raster"),background:e("./draw_background"),debug:e("./draw_debug")},x=function(e,t){this.gl=e,this.transform=t,this._tileTextures={},this.setup(),this.numSublayers=r.maxUnderzooming+r.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.lineWidthRange=e.getParameter(e.ALIASED_LINE_WIDTH_RANGE),this.emptyProgramConfiguration=new h,this.crossTileSymbolIndex=new m};x.prototype.resize=function(e,t){var i=this,o=this.gl;if(this.width=e*n.devicePixelRatio,this.height=t*n.devicePixelRatio,o.viewport(0,0,this.width,this.height),this.style)for(var r=0,a=i.style._order;r<a.length;r+=1){var s=a[r];i.style._layers[s].resize(o)}this.depthRbo&&(this.gl.deleteRenderbuffer(this.depthRbo),this.depthRbo=null)},x.prototype.setup=function(){var e=this.gl;e.enable(e.BLEND),e.blendFunc(e.ONE,e.ONE_MINUS_SRC_ALPHA),e.enable(e.STENCIL_TEST),e.enable(e.DEPTH_TEST),e.depthFunc(e.LEQUAL),this._depthMask=!1,e.depthMask(!1);var t=new f;t.emplaceBack(0,0),t.emplaceBack(a,0),t.emplaceBack(0,a),t.emplaceBack(a,a),this.tileExtentBuffer=new u(e,t),this.tileExtentVAO=new c,this.tileExtentPatternVAO=new c;var i=new f;i.emplaceBack(0,0),i.emplaceBack(a,0),i.emplaceBack(a,a),i.emplaceBack(0,a),i.emplaceBack(0,0),this.debugBuffer=new u(e,i),this.debugVAO=new c;var n=new p;n.emplaceBack(0,0,0,0),n.emplaceBack(a,0,a,0),n.emplaceBack(0,a,0,a),n.emplaceBack(a,a,a,a),this.rasterBoundsBuffer=new u(e,n),this.rasterBoundsVAO=new c;var o=new f;o.emplaceBack(0,0),o.emplaceBack(1,0),o.emplaceBack(0,1),o.emplaceBack(1,1),this.viewportBuffer=new u(e,o),this.viewportVAO=new c,this.extTextureFilterAnisotropic=e.getExtension("EXT_texture_filter_anisotropic")||e.getExtension("MOZ_EXT_texture_filter_anisotropic")||e.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=e.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=e.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&e.getExtension("OES_texture_half_float_linear")},x.prototype.clearColor=function(){var e=this.gl;e.clearColor(0,0,0,0),e.clear(e.COLOR_BUFFER_BIT)},x.prototype.clearStencil=function(){var e=this.gl;e.colorMask(!1,!1,!1,!1),this.depthMask(!1),e.disable(e.DEPTH_TEST),e.enable(e.STENCIL_TEST),e.stencilMask(255),e.stencilOp(e.ZERO,e.ZERO,e.ZERO),e.stencilFunc(e.ALWAYS,0,255);var t=o.create();o.ortho(t,0,this.width,this.height,0,0,1),o.scale(t,t,[e.drawingBufferWidth,e.drawingBufferHeight,0]);var i=this.useProgram("fill",h.forTileClippingMask());e.uniformMatrix4fv(i.uniforms.u_matrix,!1,t),this.viewportVAO.bind(e,i,this.viewportBuffer),e.drawArrays(e.TRIANGLE_STRIP,0,4),e.stencilMask(0),e.colorMask(!0,!0,!0,!0),this.depthMask(!0),e.enable(e.DEPTH_TEST)},x.prototype.clearDepth=function(){var e=this.gl;e.clearDepth(1),this.depthMask(!0),e.clear(e.DEPTH_BUFFER_BIT)},x.prototype._renderTileClippingMasks=function(e){var t=this,i=this.gl;i.colorMask(!1,!1,!1,!1),this.depthMask(!1),i.disable(i.DEPTH_TEST),i.enable(i.STENCIL_TEST),i.stencilMask(255),i.stencilOp(i.KEEP,i.KEEP,i.REPLACE);var n=1;this._tileClippingMaskIDs={};for(var o=h.forTileClippingMask(),r=0,a=e;r<a.length;r+=1){var s=a[r],l=t._tileClippingMaskIDs[s.id]=n++;i.stencilFunc(i.ALWAYS,l,255);var u=t.useProgram("fill",o);i.uniformMatrix4fv(u.uniforms.u_matrix,!1,s.posMatrix),t.tileExtentVAO.bind(i,u,t.tileExtentBuffer),i.drawArrays(i.TRIANGLE_STRIP,0,t.tileExtentBuffer.length)}i.stencilMask(0),i.colorMask(!0,!0,!0,!0),this.depthMask(!0),i.enable(i.DEPTH_TEST)},x.prototype.enableTileClippingMask=function(e){var t=this.gl;t.stencilFunc(t.EQUAL,this._tileClippingMaskIDs[e.id],255)},x.prototype.render=function(e,t){var i=this;this.style=e,this.options=t,this.lineAtlas=e.lineAtlas,this.imageManager=e.imageManager,this.glyphManager=e.glyphManager;for(var n in e.sourceCaches){var o=i.style.sourceCaches[n];o.used&&o.prepare(i.gl)}var r=this.style._order,a=l.filterObject(this.style.sourceCaches,function(e){return"raster"===e._source.type});for(var s in a)!function(e){var t=a[e],n=t.getVisibleCoordinates(),o=n.map(function(e){return t.getTile(e)});_(o,i.gl)}(s);this.renderPass="3d";for(var u,c=!0,p=[],f=0;f<r.length;f++){var d=i.style._layers[r[f]];if(d.has3DPass()&&!d.isHidden(i.transform.zoom)&&(d.source!==(u&&u.id)&&(u=i.style.sourceCaches[d.source],p=[],u&&(i.clearStencil(),p=u.getVisibleCoordinates()),p.reverse()),p.length)){i._setup3DRenderbuffer();var h=d.viewportFrame||new g(i);d.viewportFrame=h,h.bindWithDepth(i.depthRbo),c&&(i.clearDepth(),c=!1),i.renderLayer(i,u,d,p),h.unbind()}}this.clearColor(),this.clearDepth(),this.showOverdrawInspector(t.showOverdrawInspector),this.depthRange=(e._order.length+2)*this.numSublayers*this.depthEpsilon,this.renderPass="opaque";var m,y=[];for(this.currentLayer=r.length-1,this._showOverdrawInspector||this.gl.disable(this.gl.BLEND),this.currentLayer;this.currentLayer>=0;this.currentLayer--){var v=i.style._layers[r[i.currentLayer]];v.source!==(m&&m.id)&&(m=i.style.sourceCaches[v.source],y=[],m&&(i.clearStencil(),y=m.getVisibleCoordinates(),m.getSource().isTileClipped&&i._renderTileClippingMasks(y))),i.renderLayer(i,m,v,y)}this.renderPass="translucent";var x,w=[];for(this.gl.enable(this.gl.BLEND),this.currentLayer=0,this.currentLayer;this.currentLayer<r.length;this.currentLayer++){var z=i.style._layers[r[i.currentLayer]];z.source!==(x&&x.id)&&(x=i.style.sourceCaches[z.source],w=[],x&&(i.clearStencil(),w=x.getVisibleCoordinates(),x.getSource().isTileClipped&&i._renderTileClippingMasks(w)),w.reverse()),i.renderLayer(i,x,z,w)}if(this.options.showTileBoundaries){var A=this.style.sourceCaches[R()(this.style.sourceCaches)[0]];A&&b.debug(this,A,A.getVisibleCoordinates())}},x.prototype._setup3DRenderbuffer=function(){if(!this.depthRbo){var e=this.gl;this.depthRbo=e.createRenderbuffer(),e.bindRenderbuffer(e.RENDERBUFFER,this.depthRbo),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_COMPONENT16,this.width,this.height),e.bindRenderbuffer(e.RENDERBUFFER,null)}this.depthRboAttached=!0},x.prototype.depthMask=function(e){e!==this._depthMask&&(this._depthMask=e,this.gl.depthMask(e))},x.prototype.renderLayer=function(e,t,i,n){i.isHidden(this.transform.zoom)||("background"===i.type||n.length)&&(this.id=i.id,b[i.type](e,t,i,n))},x.prototype.setDepthSublayer=function(e){var t=1-((1+this.currentLayer)*this.numSublayers+e)*this.depthEpsilon,i=t-1+this.depthRange;this.gl.depthRange(i,t)},x.prototype.translatePosMatrix=function(e,t,i,n,r){if(!i[0]&&!i[1])return e;var a=r?"map"===n?this.transform.angle:0:"viewport"===n?-this.transform.angle:0;if(a){var l=Math.sin(a),u=Math.cos(a);i=[i[0]*u-i[1]*l,i[0]*l+i[1]*u]}var c=[r?i[0]:s(t,i[0],this.transform.zoom),r?i[1]:s(t,i[1],this.transform.zoom),0],p=new Float32Array(16);return o.translate(p,e,c),p},x.prototype.saveTileTexture=function(e){var t=this._tileTextures[e.size[0]];t?t.push(e):this._tileTextures[e.size[0]]=[e]},x.prototype.getTileTexture=function(e){var t=this._tileTextures[e];return t&&t.length>0?t.pop():null},x.prototype.lineWidth=function(e){this.gl.lineWidth(l.clamp(e,this.lineWidthRange[0],this.lineWidthRange[1]))},x.prototype.showOverdrawInspector=function(e){if(e||this._showOverdrawInspector){this._showOverdrawInspector=e;var t=this.gl;e?(t.blendFunc(t.CONSTANT_COLOR,t.ONE),t.blendColor(1/8,1/8,1/8,0),t.clearColor(0,0,0,1),t.clear(t.COLOR_BUFFER_BIT)):t.blendFunc(t.ONE,t.ONE_MINUS_SRC_ALPHA)}},x.prototype._createProgramCached=function(e,t){this.cache=this.cache||{};var i=""+e+(t.cacheKey||"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[i]||(this.cache[i]=new v(this.gl,y[e],t,this._showOverdrawInspector)),this.cache[i]},x.prototype.useProgram=function(e,t){var i=this.gl,n=this._createProgramCached(e,t||this.emptyProgramConfiguration);return this.currentProgram!==n&&(i.useProgram(n.program),this.currentProgram=n),n},t.exports=x},{"../data/extent":58,"../data/pos_array":62,"../data/program_configuration":63,"../data/raster_bounds_array":64,"../gl/vertex_buffer":72,"../shaders":97,"../source/pixels_to_tile_units":104,"../source/source_cache":109,"../symbol/cross_tile_symbol_index":211,"../util/browser":245,"../util/util":266,"./draw_background":74,"./draw_circle":75,"./draw_debug":77,"./draw_fill":78,"./draw_fill_extrusion":79,"./draw_heatmap":80,"./draw_line":81,"./draw_raster":82,"./draw_symbol":83,"./program":91,"./render_texture":92,"./tile_mask":94,"./vertex_array_object":95,"@mapbox/gl-matrix":1}],90:[function(e,t,i){var n=e("../source/pixels_to_tile_units");i.isPatternMissing=function(e,t){if(!e)return!1;var i=t.imageManager.getPattern(e.from),n=t.imageManager.getPattern(e.to);return!i||!n},i.prepare=function(e,t,i){var n=t.gl,o=t.imageManager.getPattern(e.from),r=t.imageManager.getPattern(e.to);n.uniform1i(i.uniforms.u_image,0),n.uniform2fv(i.uniforms.u_pattern_tl_a,o.tl),n.uniform2fv(i.uniforms.u_pattern_br_a,o.br),n.uniform2fv(i.uniforms.u_pattern_tl_b,r.tl),n.uniform2fv(i.uniforms.u_pattern_br_b,r.br);var a=t.imageManager.getPixelSize(),s=a.width,l=a.height;n.uniform2fv(i.uniforms.u_texsize,[s,l]),n.uniform1f(i.uniforms.u_mix,e.t),n.uniform2fv(i.uniforms.u_pattern_size_a,o.displaySize),n.uniform2fv(i.uniforms.u_pattern_size_b,r.displaySize),n.uniform1f(i.uniforms.u_scale_a,e.fromScale),n.uniform1f(i.uniforms.u_scale_b,e.toScale),n.activeTexture(n.TEXTURE0),t.imageManager.bind(n)},i.setTile=function(e,t,i){var o=t.gl;o.uniform1f(i.uniforms.u_tile_units_to_pixels,1/n(e,1,t.transform.tileZoom));var r=Math.pow(2,e.coord.z),a=e.tileSize*Math.pow(2,t.transform.tileZoom)/r,s=a*(e.coord.x+e.coord.w*r),l=a*e.coord.y;o.uniform2f(i.uniforms.u_pixel_coord_upper,s>>16,l>>16),o.uniform2f(i.uniforms.u_pixel_coord_lower,65535&s,65535&l)}},{"../source/pixels_to_tile_units":104}],91:[function(e,t,i){var n=e("../util/browser"),o=e("../shaders"),r=e("../data/program_configuration"),a=(r.ProgramConfiguration,e("./vertex_array_object")),s=function(e,t,i,r){var a=this;this.gl=e,this.program=e.createProgram();var s=i.defines().concat("#define DEVICE_PIXEL_RATIO "+n.devicePixelRatio.toFixed(1));r&&s.push("#define OVERDRAW_INSPECTOR;");var l=s.concat(o.prelude.fragmentSource,t.fragmentSource).join("\n"),u=s.concat(o.prelude.vertexSource,t.vertexSource).join("\n"),c=e.createShader(e.FRAGMENT_SHADER);e.shaderSource(c,l),e.compileShader(c),e.attachShader(this.program,c);var p=e.createShader(e.VERTEX_SHADER);e.shaderSource(p,u),e.compileShader(p),e.attachShader(this.program,p);for(var f=i.interface?i.interface.layoutAttributes:[],d=0;d<f.length;d++)e.bindAttribLocation(a.program,d,f[d].name);e.linkProgram(this.program),this.numAttributes=e.getProgramParameter(this.program,e.ACTIVE_ATTRIBUTES),this.attributes={},this.uniforms={};for(var h=0;h<this.numAttributes;h++){var m=e.getActiveAttrib(a.program,h);m&&(a.attributes[m.name]=e.getAttribLocation(a.program,m.name))}for(var y=e.getProgramParameter(this.program,e.ACTIVE_UNIFORMS),v=0;v<y;v++){var g=e.getActiveUniform(a.program,v);g&&(a.uniforms[g.name]=e.getUniformLocation(a.program,g.name))}};s.prototype.draw=function(e,t,i,n,o,r,s,l,u){for(var c,p=this,f=(c={},c[e.LINES]=2,c[e.TRIANGLES]=3,c)[t],d=0,h=r.get();d<h.length;d+=1){var m=h[d],y=m.vaos||(m.vaos={});(y[i]||(y[i]=new a)).bind(e,p,n,o,s&&s.paintVertexBuffer,m.vertexOffset,l,u),e.drawElements(t,m.primitiveLength*f,e.UNSIGNED_SHORT,m.primitiveOffset*f*2)}},t.exports=s},{"../data/program_configuration":63,"../shaders":97,"../util/browser":245,"./vertex_array_object":95}],92:[function(e,t,i){var n=function(e){var t=this.gl=e.gl,i=this.texture=t.createTexture();t.bindTexture(t.TEXTURE_2D,i),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,e.width,e.height,0,t.RGBA,t.UNSIGNED_BYTE,null),t.bindTexture(t.TEXTURE_2D,null);var n=this.fbo=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,n),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,i,0)};n.prototype.bindWithDepth=function(e){var t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,this.fbo),this.attachedRbo!==e&&(t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.RENDERBUFFER,e),this.attachedRbo=e)},n.prototype.unbind=function(){var e=this.gl;e.bindFramebuffer(e.FRAMEBUFFER,null)},t.exports=n},{}],93:[function(e,t,i){var n=e("../util/window"),o=n.HTMLImageElement,r=n.HTMLCanvasElement,a=n.HTMLVideoElement,s=n.ImageData,l=function(e,t,i){this.gl=e;var n=t.width,o=t.height;this.size=[n,o],this.format=i,this.texture=e.createTexture(),this.update(t)};l.prototype.update=function(e){var t=e.width,i=e.height;this.size=[t,i];var n=this,l=n.gl;l.bindTexture(l.TEXTURE_2D,this.texture),l.pixelStorei(l.UNPACK_ALIGNMENT,1),this.format===l.RGBA&&l.pixelStorei(l.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),e instanceof o||e instanceof r||e instanceof a||e instanceof s?l.texImage2D(l.TEXTURE_2D,0,this.format,this.format,l.UNSIGNED_BYTE,e):l.texImage2D(l.TEXTURE_2D,0,this.format,t,i,0,this.format,l.UNSIGNED_BYTE,e.data)},l.prototype.bind=function(e,t,i){var n=this,o=n.gl;o.bindTexture(o.TEXTURE_2D,this.texture),e!==this.filter&&(o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MAG_FILTER,e),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,i||e),this.filter=e),t!==this.wrap&&(o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_S,t),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_T,t),this.wrap=t)},l.prototype.destroy=function(){this.gl.deleteTexture(this.texture),this.texture=null},t.exports=l},{"../util/window":247}],94:[function(e,t,i){function n(e,t,i,r,a){for(var s=0;s<i.length;s++){var l=i[s];if(r.isLessThan(l.coord))break;if(t.id===l.coord.id)return;if(l.coord.isChildOf(t,l.sourceMaxZoom)){for(var u=t.children(1/0),c=0;c<u.length;c++)n(e,u[c],i.slice(s),r,a);return}}var p=t.z-e.z,f=new o(p,t.x-(e.x<<p),t.y-(e.y<<p)).id;a[f]=a[f]||!0}var o=e("../source/tile_coord");t.exports=function(e,t){for(var i=e.sort(function(e,t){return e.coord.isLessThan(t.coord)?-1:t.coord.isLessThan(e.coord)?1:0}),r=0;r<i.length;r++){var a={},s=i[r],l=i.slice(r+1);n(s.coord.wrapped(),s.coord,l,new o(0,0,0,s.coord.w+1),a),s.setMask(a,t)}}},{"../source/tile_coord":112}],95:[function(e,t,i){var n=function(){this.boundProgram=null,this.boundVertexBuffer=null,this.boundVertexBuffer2=null,this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};n.prototype.bind=function(e,t,i,n,o,r,a,s){void 0===e.extVertexArrayObject&&(e.extVertexArrayObject=e.getExtension("OES_vertex_array_object"));var l=!this.vao||this.boundProgram!==t||this.boundVertexBuffer!==i||this.boundVertexBuffer2!==o||this.boundIndexBuffer!==n||this.boundVertexOffset!==r||this.boundDynamicVertexBuffer!==a||this.boundDynamicVertexBuffer2!==s;!e.extVertexArrayObject||l?(this.freshBind(e,t,i,n,o,r,a,s),this.gl=e):(e.extVertexArrayObject.bindVertexArrayOES(this.vao),a&&a.bind(),n&&n.dynamicDraw&&n.bind(),s&&s.bind())},n.prototype.freshBind=function(e,t,i,n,o,r,a,s){var l,u=t.numAttributes;if(e.extVertexArrayObject)this.vao&&this.destroy(),this.vao=e.extVertexArrayObject.createVertexArrayOES(),e.extVertexArrayObject.bindVertexArrayOES(this.vao),l=0,this.boundProgram=t,this.boundVertexBuffer=i,this.boundVertexBuffer2=o,this.boundIndexBuffer=n,this.boundVertexOffset=r,this.boundDynamicVertexBuffer=a,this.boundDynamicVertexBuffer2=s;else{l=e.currentNumAttributes||0;for(var c=u;c<l;c++)e.disableVertexAttribArray(c)}i.enableAttributes(e,t),o&&o.enableAttributes(e,t),a&&a.enableAttributes(e,t),s&&s.enableAttributes(e,t),i.bind(),i.setVertexAttribPointers(e,t,r),o&&(o.bind(),o.setVertexAttribPointers(e,t,r)),a&&(a.bind(),a.setVertexAttribPointers(e,t,r)),n&&n.bind(),s&&(s.bind(),s.setVertexAttribPointers(e,t,r)),e.currentNumAttributes=u},n.prototype.destroy=function(){this.vao&&(this.gl.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)},t.exports=n},{}],96:[function(e,t,i){var n=e("../util/util");i.packUint8ToFloat=function(e,t){return e=n.clamp(Math.floor(e),0,255),t=n.clamp(Math.floor(t),0,255),256*e+t}},{"../util/util":266}],97:[function(e,t,i){var n={prelude:{fragmentSource:"#ifdef GL_ES\nprecision mediump float;\n#else\n\n#if !defined(lowp)\n#define lowp\n#endif\n\n#if !defined(mediump)\n#define mediump\n#endif\n\n#if !defined(highp)\n#define highp\n#endif\n\n#endif\n",vertexSource:"#ifdef GL_ES\nprecision highp float;\n#else\n\n#if !defined(lowp)\n#define lowp\n#endif\n\n#if !defined(mediump)\n#define mediump\n#endif\n\n#if !defined(highp)\n#define highp\n#endif\n\n#endif\n\n// Unpack a pair of values that have been packed into a single float.\n// The packed values are assumed to be 8-bit unsigned integers, and are\n// packed like so:\n// packedValue = floor(input[0]) * 256 + input[1],\nvec2 unpack_float(const float packedValue) {\n    int packedIntValue = int(packedValue);\n    int v0 = packedIntValue / 256;\n    return vec2(v0, packedIntValue - v0 * 256);\n}\n\nvec2 unpack_opacity(const float packedOpacity) {\n    int intOpacity = int(packedOpacity) / 2;\n    return vec2(float(intOpacity) / 127.0, mod(packedOpacity, 2.0));\n}\n\n// To minimize the number of attributes needed, we encode a 4-component\n// color into a pair of floats (i.e. a vec2) as follows:\n// [ floor(color.r * 255) * 256 + color.g * 255,\n//   floor(color.b * 255) * 256 + color.g * 255 ]\nvec4 decode_color(const vec2 encodedColor) {\n    return vec4(\n        unpack_float(encodedColor[0]) / 255.0,\n        unpack_float(encodedColor[1]) / 255.0\n    );\n}\n\n// Unpack a pair of paint values and interpolate between them.\nfloat unpack_mix_vec2(const vec2 packedValue, const float t) {\n    return mix(packedValue[0], packedValue[1], t);\n}\n\n// Unpack a pair of paint values and interpolate between them.\nvec4 unpack_mix_vec4(const vec4 packedColors, const float t) {\n    vec4 minColor = decode_color(vec2(packedColors[0], packedColors[1]));\n    vec4 maxColor = decode_color(vec2(packedColors[2], packedColors[3]));\n    return mix(minColor, maxColor, t);\n}\n\n// The offset depends on how many pixels are between the world origin and the edge of the tile:\n// vec2 offset = mod(pixel_coord, size)\n//\n// At high zoom levels there are a ton of pixels between the world origin and the edge of the tile.\n// The glsl spec only guarantees 16 bits of precision for highp floats. We need more than that.\n//\n// The pixel_coord is passed in as two 16 bit values:\n// pixel_coord_upper = floor(pixel_coord / 2^16)\n// pixel_coord_lower = mod(pixel_coord, 2^16)\n//\n// The offset is calculated in a series of steps that should preserve this precision:\nvec2 get_pattern_pos(const vec2 pixel_coord_upper, const vec2 pixel_coord_lower,\n    const vec2 pattern_size, const float tile_units_to_pixels, const vec2 pos) {\n\n    vec2 offset = mod(mod(mod(pixel_coord_upper, pattern_size) * 256.0, pattern_size) * 256.0 + pixel_coord_lower, pattern_size);\n    return (tile_units_to_pixels * pos + offset) / pattern_size;\n}\n"},circle:{fragmentSource:"#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\n\nvarying vec3 v_data;\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize mediump float radius\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize highp vec4 stroke_color\n    #pragma mapbox: initialize mediump float stroke_width\n    #pragma mapbox: initialize lowp float stroke_opacity\n\n    vec2 extrude = v_data.xy;\n    float extrude_length = length(extrude);\n\n    lowp float antialiasblur = v_data.z;\n    float antialiased_blur = -max(blur, antialiasblur);\n\n    float opacity_t = smoothstep(0.0, antialiased_blur, extrude_length - 1.0);\n\n    float color_t = stroke_width < 0.01 ? 0.0 : smoothstep(\n        antialiased_blur,\n        0.0,\n        extrude_length - radius / (radius + stroke_width)\n    );\n\n    gl_FragColor = opacity_t * mix(color * opacity, stroke_color * stroke_opacity, color_t);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform bool u_scale_with_map;\nuniform bool u_pitch_with_map;\nuniform vec2 u_extrude_scale;\nuniform highp float u_camera_to_center_distance;\n\nattribute vec2 a_pos;\n\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define mediump float radius\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define highp vec4 stroke_color\n#pragma mapbox: define mediump float stroke_width\n#pragma mapbox: define lowp float stroke_opacity\n\nvarying vec3 v_data;\n\nvoid main(void) {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize mediump float radius\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize highp vec4 stroke_color\n    #pragma mapbox: initialize mediump float stroke_width\n    #pragma mapbox: initialize lowp float stroke_opacity\n\n    // unencode the extrusion vector that we snuck into the a_pos vector\n    vec2 extrude = vec2(mod(a_pos, 2.0) * 2.0 - 1.0);\n\n    // multiply a_pos by 0.5, since we had it * 2 in order to sneak\n    // in extrusion data\n    vec2 circle_center = floor(a_pos * 0.5);\n    if (u_pitch_with_map) {\n        vec2 corner_position = circle_center;\n        if (u_scale_with_map) {\n            corner_position += extrude * (radius + stroke_width) * u_extrude_scale;\n        } else {\n            // Pitching the circle with the map effectively scales it with the map\n            // To counteract the effect for pitch-scale: viewport, we rescale the\n            // whole circle based on the pitch scaling effect at its central point\n            vec4 projected_center = u_matrix * vec4(circle_center, 0, 1);\n            corner_position += extrude * (radius + stroke_width) * u_extrude_scale * (projected_center.w / u_camera_to_center_distance);\n        }\n\n        gl_Position = u_matrix * vec4(corner_position, 0, 1);\n    } else {\n        gl_Position = u_matrix * vec4(circle_center, 0, 1);\n\n        if (u_scale_with_map) {\n            gl_Position.xy += extrude * (radius + stroke_width) * u_extrude_scale * u_camera_to_center_distance;\n        } else {\n            gl_Position.xy += extrude * (radius + stroke_width) * u_extrude_scale * gl_Position.w;\n        }\n    }\n\n    // This is a minimum blur distance that serves as a faux-antialiasing for\n    // the circle. since blur is a ratio of the circle's size and the intent is\n    // to keep the blur at roughly 1px, the two are inversely related.\n    lowp float antialiasblur = 1.0 / DEVICE_PIXEL_RATIO / (radius + stroke_width);\n\n    v_data = vec3(extrude.x, extrude.y, antialiasblur);\n}\n"},heatmap:{fragmentSource:"#pragma mapbox: define highp float weight\n\nuniform highp float u_intensity;\nuniform highp float u_radius;\nvarying vec2 v_extrude;\n\n// Gaussian kernel coefficient: 1 / sqrt(2 * PI)\n#define GAUSS_COEF 0.3989422804014327\n\nvoid main() {\n    #pragma mapbox: initialize highp float weight\n\n    // Kernel density estimation with a Gaussian kernel of size 5x5\n    float d = -0.5 * 3.0 * 3.0 * dot(v_extrude, v_extrude);\n    float val = weight * u_intensity * GAUSS_COEF * exp(d);\n\n    gl_FragColor = vec4(val, 1.0, 1.0, 1.0);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"#pragma mapbox: define highp float weight\n\nuniform mat4 u_matrix;\nuniform float u_extrude_scale;\nuniform float u_radius;\nuniform float u_opacity;\nuniform float u_intensity;\n\nattribute vec2 a_pos;\n\nvarying vec2 v_extrude;\n\n// Effective \"0\" in the kernel density texture to adjust the kernel size to;\n// this empirically chosen number minimizes artifacts on overlapping kernels\n// for typical heatmap cases (assuming clustered source)\nconst highp float ZERO = 1.0 / 255.0 / 16.0;\n\n// Gaussian kernel coefficient: 1 / sqrt(2 * PI)\n#define GAUSS_COEF 0.3989422804014327\n\nvoid main(void) {\n    #pragma mapbox: initialize highp float weight\n\n    // unencode the extrusion vector that we snuck into the a_pos vector\n    vec2 unscaled_extrude = vec2(mod(a_pos, 2.0) * 2.0 - 1.0);\n\n    // This 'extrude' comes in ranging from [-1, -1], to [1, 1].  We'll use\n    // it to produce the vertices of a square mesh framing the point feature\n    // we're adding to the kernel density texture.  We'll also pass it as\n    // a varying, so that the fragment shader can determine the distance of\n    // each fragment from the point feature.\n    // Before we do so, we need to scale it up sufficiently so that the\n    // kernel falls effectively to zero at the edge of the mesh.\n    // That is, we want to know S such that\n    // weight * u_intensity * GAUSS_COEF * exp(-0.5 * 3.0^2 * S^2) == ZERO\n    // Which solves to:\n    // S = sqrt(-2.0 * log(ZERO / (weight * u_intensity * GAUSS_COEF))) / 3.0\n    float S = sqrt(-2.0 * log(ZERO / weight / u_intensity / GAUSS_COEF)) / 3.0;\n\n    // Pass the varying in units of u_radius\n    v_extrude = S * unscaled_extrude;\n\n    // Scale by u_radius and the zoom-based scale factor to produce actual\n    // mesh position\n    vec2 extrude = v_extrude * u_radius * u_extrude_scale;\n\n    // multiply a_pos by 0.5, since we had it * 2 in order to sneak\n    // in extrusion data\n    vec4 pos = vec4(floor(a_pos * 0.5) + extrude, 0, 1);\n\n    gl_Position = u_matrix * pos;\n}\n"},heatmapTexture:{fragmentSource:"uniform sampler2D u_image;\nuniform sampler2D u_color_ramp;\nuniform float u_opacity;\nvarying vec2 v_pos;\n\nvoid main() {\n    float t = texture2D(u_image, v_pos).r;\n    vec4 color = texture2D(u_color_ramp, vec2(t, 0.5));\n    gl_FragColor = color * u_opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(0.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_world;\nattribute vec2 a_pos;\nvarying vec2 v_pos;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos * u_world, 0, 1);\n\n    v_pos.x = a_pos.x;\n    v_pos.y = 1.0 - a_pos.y;\n}\n"},collisionBox:{fragmentSource:"\nvarying float v_placed;\nvarying float v_notUsed;\n\nvoid main() {\n\n    float alpha = 0.5;\n\n    // Red = collision, hide label\n    gl_FragColor = vec4(1.0, 0.0, 0.0, 1.0) * alpha;\n\n    // Blue = no collision, label is showing\n    if (v_placed > 0.5) {\n        gl_FragColor = vec4(0.0, 0.0, 1.0, 0.5) * alpha;\n    }\n\n    if (v_notUsed > 0.5) {\n        // This box not used, fade it out\n        gl_FragColor *= .1;\n    }\n}",vertexSource:"attribute vec2 a_pos;\nattribute vec2 a_anchor_pos;\nattribute vec2 a_extrude;\nattribute vec2 a_placed;\n\nuniform mat4 u_matrix;\nuniform vec2 u_extrude_scale;\nuniform float u_camera_to_center_distance;\n\nvarying float v_placed;\nvarying float v_notUsed;\n\nvoid main() {\n    vec4 projectedPoint = u_matrix * vec4(a_anchor_pos, 0, 1);\n    highp float camera_to_anchor_distance = projectedPoint.w;\n    highp float collision_perspective_ratio = 0.5 + 0.5 * (u_camera_to_center_distance / camera_to_anchor_distance);\n\n    gl_Position = u_matrix * vec4(a_pos, 0.0, 1.0);\n    gl_Position.xy += a_extrude * u_extrude_scale * gl_Position.w * collision_perspective_ratio;\n\n    v_placed = a_placed.x;\n    v_notUsed = a_placed.y;\n}\n"},collisionCircle:{fragmentSource:"\nvarying float v_placed;\nvarying float v_notUsed;\nvarying float v_radius;\nvarying vec2 v_extrude;\nvarying vec2 v_extrude_scale;\n\nvoid main() {\n    float alpha = 0.5;\n\n    // Red = collision, hide label\n    vec4 color = vec4(1.0, 0.0, 0.0, 1.0) * alpha;\n\n    // Blue = no collision, label is showing\n    if (v_placed > 0.5) {\n        color = vec4(0.0, 0.0, 1.0, 0.5) * alpha;\n    }\n\n    if (v_notUsed > 0.5) {\n        // This box not used, fade it out\n        color *= .2;\n    }\n\n    float extrude_scale_length = length(v_extrude_scale);\n    float extrude_length = length(v_extrude) * extrude_scale_length;\n    float stroke_width = 3.0;\n    float radius = v_radius * extrude_scale_length;\n\n    float distance_to_edge = abs(extrude_length - radius);\n    float opacity_t = smoothstep(-stroke_width, 0.0, -distance_to_edge);\n\n    gl_FragColor = opacity_t * color;\n}\n",vertexSource:"attribute vec2 a_pos;\nattribute vec2 a_anchor_pos;\nattribute vec2 a_extrude;\nattribute vec2 a_placed;\n\nuniform mat4 u_matrix;\nuniform vec2 u_extrude_scale;\nuniform float u_camera_to_center_distance;\n\nvarying float v_placed;\nvarying float v_notUsed;\nvarying float v_radius;\n\nvarying vec2 v_extrude;\nvarying vec2 v_extrude_scale;\n\nvoid main() {\n    vec4 projectedPoint = u_matrix * vec4(a_anchor_pos, 0, 1);\n    highp float camera_to_anchor_distance = projectedPoint.w;\n    highp float collision_perspective_ratio = 0.5 + 0.5 * (camera_to_anchor_distance / u_camera_to_center_distance);\n\n    gl_Position = u_matrix * vec4(a_pos, 0.0, 1.0);\n\n    highp float padding_factor = 1.2; // Pad the vertices slightly to make room for anti-alias blur\n    gl_Position.xy += a_extrude * u_extrude_scale * padding_factor * gl_Position.w / collision_perspective_ratio;\n\n    v_placed = a_placed.x;\n    v_notUsed = a_placed.y;\n    v_radius = abs(a_extrude.y); // We don't pitch the circles, so both units of the extrusion vector are equal in magnitude to the radius\n\n    v_extrude = a_extrude * padding_factor;\n    v_extrude_scale = u_extrude_scale * u_camera_to_center_distance / collision_perspective_ratio;\n}\n"},debug:{fragmentSource:"uniform highp vec4 u_color;\n\nvoid main() {\n    gl_FragColor = u_color;\n}\n",vertexSource:"attribute vec2 a_pos;\n\nuniform mat4 u_matrix;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n}\n"},fill:{fragmentSource:"#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float opacity\n\n    gl_FragColor = color * opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"attribute vec2 a_pos;\n\nuniform mat4 u_matrix;\n\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float opacity\n\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n}\n"},fillOutline:{fragmentSource:"#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\n\nvarying vec2 v_pos;\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 outline_color\n    #pragma mapbox: initialize lowp float opacity\n\n    float dist = length(v_pos - gl_FragCoord.xy);\n    float alpha = 1.0 - smoothstep(0.0, 1.0, dist);\n    gl_FragColor = outline_color * (alpha * opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"attribute vec2 a_pos;\n\nuniform mat4 u_matrix;\nuniform vec2 u_world;\n\nvarying vec2 v_pos;\n\n#pragma mapbox: define highp vec4 outline_color\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 outline_color\n    #pragma mapbox: initialize lowp float opacity\n\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n    v_pos = (gl_Position.xy / gl_Position.w + 1.0) / 2.0 * u_world;\n}\n"},fillOutlinePattern:{fragmentSource:"uniform vec2 u_pattern_tl_a;\nuniform vec2 u_pattern_br_a;\nuniform vec2 u_pattern_tl_b;\nuniform vec2 u_pattern_br_b;\nuniform vec2 u_texsize;\nuniform float u_mix;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\nvarying vec2 v_pos;\n\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n\n    vec2 imagecoord = mod(v_pos_a, 1.0);\n    vec2 pos = mix(u_pattern_tl_a / u_texsize, u_pattern_br_a / u_texsize, imagecoord);\n    vec4 color1 = texture2D(u_image, pos);\n\n    vec2 imagecoord_b = mod(v_pos_b, 1.0);\n    vec2 pos2 = mix(u_pattern_tl_b / u_texsize, u_pattern_br_b / u_texsize, imagecoord_b);\n    vec4 color2 = texture2D(u_image, pos2);\n\n    // find distance to outline for alpha interpolation\n\n    float dist = length(v_pos - gl_FragCoord.xy);\n    float alpha = 1.0 - smoothstep(0.0, 1.0, dist);\n\n\n    gl_FragColor = mix(color1, color2, u_mix) * alpha * opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_world;\nuniform vec2 u_pattern_size_a;\nuniform vec2 u_pattern_size_b;\nuniform vec2 u_pixel_coord_upper;\nuniform vec2 u_pixel_coord_lower;\nuniform float u_scale_a;\nuniform float u_scale_b;\nuniform float u_tile_units_to_pixels;\n\nattribute vec2 a_pos;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\nvarying vec2 v_pos;\n\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n\n    v_pos_a = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_a * u_pattern_size_a, u_tile_units_to_pixels, a_pos);\n    v_pos_b = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_b * u_pattern_size_b, u_tile_units_to_pixels, a_pos);\n\n    v_pos = (gl_Position.xy / gl_Position.w + 1.0) / 2.0 * u_world;\n}\n"},fillPattern:{fragmentSource:"uniform vec2 u_pattern_tl_a;\nuniform vec2 u_pattern_br_a;\nuniform vec2 u_pattern_tl_b;\nuniform vec2 u_pattern_br_b;\nuniform vec2 u_texsize;\nuniform float u_mix;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\n\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n\n    vec2 imagecoord = mod(v_pos_a, 1.0);\n    vec2 pos = mix(u_pattern_tl_a / u_texsize, u_pattern_br_a / u_texsize, imagecoord);\n    vec4 color1 = texture2D(u_image, pos);\n\n    vec2 imagecoord_b = mod(v_pos_b, 1.0);\n    vec2 pos2 = mix(u_pattern_tl_b / u_texsize, u_pattern_br_b / u_texsize, imagecoord_b);\n    vec4 color2 = texture2D(u_image, pos2);\n\n    gl_FragColor = mix(color1, color2, u_mix) * opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_pattern_size_a;\nuniform vec2 u_pattern_size_b;\nuniform vec2 u_pixel_coord_upper;\nuniform vec2 u_pixel_coord_lower;\nuniform float u_scale_a;\nuniform float u_scale_b;\nuniform float u_tile_units_to_pixels;\n\nattribute vec2 a_pos;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\n\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n\n    v_pos_a = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_a * u_pattern_size_a, u_tile_units_to_pixels, a_pos);\n    v_pos_b = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_b * u_pattern_size_b, u_tile_units_to_pixels, a_pos);\n}\n"},fillExtrusion:{fragmentSource:"varying vec4 v_color;\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n#pragma mapbox: define highp vec4 color\n\nvoid main() {\n    #pragma mapbox: initialize lowp float base\n    #pragma mapbox: initialize lowp float height\n    #pragma mapbox: initialize highp vec4 color\n\n    gl_FragColor = v_color;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec3 u_lightcolor;\nuniform lowp vec3 u_lightpos;\nuniform lowp float u_lightintensity;\n\nattribute vec2 a_pos;\nattribute vec3 a_normal;\nattribute float a_edgedistance;\n\nvarying vec4 v_color;\n\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n\n#pragma mapbox: define highp vec4 color\n\nvoid main() {\n    #pragma mapbox: initialize lowp float base\n    #pragma mapbox: initialize lowp float height\n    #pragma mapbox: initialize highp vec4 color\n\n    base = max(0.0, base);\n    height = max(0.0, height);\n\n    float ed = a_edgedistance; // use each attrib in order to not trip a VAO assert\n    float t = mod(a_normal.x, 2.0);\n\n    gl_Position = u_matrix * vec4(a_pos, t > 0.0 ? height : base, 1);\n\n    // Relative luminance (how dark/bright is the surface color?)\n    float colorvalue = color.r * 0.2126 + color.g * 0.7152 + color.b * 0.0722;\n\n    v_color = vec4(0.0, 0.0, 0.0, 1.0);\n\n    // Add slight ambient lighting so no extrusions are totally black\n    vec4 ambientlight = vec4(0.03, 0.03, 0.03, 1.0);\n    color += ambientlight;\n\n    // Calculate cos(theta), where theta is the angle between surface normal and diffuse light ray\n    float directional = clamp(dot(a_normal / 16384.0, u_lightpos), 0.0, 1.0);\n\n    // Adjust directional so that\n    // the range of values for highlight/shading is narrower\n    // with lower light intensity\n    // and with lighter/brighter surface colors\n    directional = mix((1.0 - u_lightintensity), max((1.0 - colorvalue + u_lightintensity), 1.0), directional);\n\n    // Add gradient along z axis of side surfaces\n    if (a_normal.y != 0.0) {\n        directional *= clamp((t + base) * pow(height / 150.0, 0.5), mix(0.7, 0.98, 1.0 - u_lightintensity), 1.0);\n    }\n\n    // Assign final color based on surface + ambient light color, diffuse light directional, and light color\n    // with lower bounds adjusted to hue of light\n    // so that shading is tinted with the complementary (opposite) color to the light color\n    v_color.r += clamp(color.r * directional * u_lightcolor.r, mix(0.0, 0.3, 1.0 - u_lightcolor.r), 1.0);\n    v_color.g += clamp(color.g * directional * u_lightcolor.g, mix(0.0, 0.3, 1.0 - u_lightcolor.g), 1.0);\n    v_color.b += clamp(color.b * directional * u_lightcolor.b, mix(0.0, 0.3, 1.0 - u_lightcolor.b), 1.0);\n}\n"},fillExtrusionPattern:{fragmentSource:"uniform vec2 u_pattern_tl_a;\nuniform vec2 u_pattern_br_a;\nuniform vec2 u_pattern_tl_b;\nuniform vec2 u_pattern_br_b;\nuniform vec2 u_texsize;\nuniform float u_mix;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\nvarying vec4 v_lighting;\n\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n\nvoid main() {\n    #pragma mapbox: initialize lowp float base\n    #pragma mapbox: initialize lowp float height\n\n    vec2 imagecoord = mod(v_pos_a, 1.0);\n    vec2 pos = mix(u_pattern_tl_a / u_texsize, u_pattern_br_a / u_texsize, imagecoord);\n    vec4 color1 = texture2D(u_image, pos);\n\n    vec2 imagecoord_b = mod(v_pos_b, 1.0);\n    vec2 pos2 = mix(u_pattern_tl_b / u_texsize, u_pattern_br_b / u_texsize, imagecoord_b);\n    vec4 color2 = texture2D(u_image, pos2);\n\n    vec4 mixedColor = mix(color1, color2, u_mix);\n\n    gl_FragColor = mixedColor * v_lighting;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_pattern_size_a;\nuniform vec2 u_pattern_size_b;\nuniform vec2 u_pixel_coord_upper;\nuniform vec2 u_pixel_coord_lower;\nuniform float u_scale_a;\nuniform float u_scale_b;\nuniform float u_tile_units_to_pixels;\nuniform float u_height_factor;\n\nuniform vec3 u_lightcolor;\nuniform lowp vec3 u_lightpos;\nuniform lowp float u_lightintensity;\n\nattribute vec2 a_pos;\nattribute vec3 a_normal;\nattribute float a_edgedistance;\n\nvarying vec2 v_pos_a;\nvarying vec2 v_pos_b;\nvarying vec4 v_lighting;\nvarying float v_directional;\n\n#pragma mapbox: define lowp float base\n#pragma mapbox: define lowp float height\n\nvoid main() {\n    #pragma mapbox: initialize lowp float base\n    #pragma mapbox: initialize lowp float height\n\n    base = max(0.0, base);\n    height = max(0.0, height);\n\n    float t = mod(a_normal.x, 2.0);\n    float z = t > 0.0 ? height : base;\n\n    gl_Position = u_matrix * vec4(a_pos, z, 1);\n\n    vec2 pos = a_normal.x == 1.0 && a_normal.y == 0.0 && a_normal.z == 16384.0\n        ? a_pos // extrusion top\n        : vec2(a_edgedistance, z * u_height_factor); // extrusion side\n\n    v_pos_a = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_a * u_pattern_size_a, u_tile_units_to_pixels, pos);\n    v_pos_b = get_pattern_pos(u_pixel_coord_upper, u_pixel_coord_lower, u_scale_b * u_pattern_size_b, u_tile_units_to_pixels, pos);\n\n    v_lighting = vec4(0.0, 0.0, 0.0, 1.0);\n    float directional = clamp(dot(a_normal / 16383.0, u_lightpos), 0.0, 1.0);\n    directional = mix((1.0 - u_lightintensity), max((0.5 + u_lightintensity), 1.0), directional);\n\n    if (a_normal.y != 0.0) {\n        directional *= clamp((t + base) * pow(height / 150.0, 0.5), mix(0.7, 0.98, 1.0 - u_lightintensity), 1.0);\n    }\n\n    v_lighting.rgb += clamp(directional * u_lightcolor, mix(vec3(0.0), vec3(0.3), 1.0 - u_lightcolor), vec3(1.0));\n}\n"},extrusionTexture:{fragmentSource:"uniform sampler2D u_image;\nuniform float u_opacity;\nvarying vec2 v_pos;\n\nvoid main() {\n    gl_FragColor = texture2D(u_image, v_pos) * u_opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(0.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_world;\nattribute vec2 a_pos;\nvarying vec2 v_pos;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos * u_world, 0, 1);\n\n    v_pos.x = a_pos.x;\n    v_pos.y = 1.0 - a_pos.y;\n}\n"},line:{fragmentSource:"#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n\nvarying vec2 v_width2;\nvarying vec2 v_normal;\nvarying float v_gamma_scale;\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n\n    // Calculate the distance of the pixel from the line in pixels.\n    float dist = length(v_normal) * v_width2.s;\n\n    // Calculate the antialiasing fade factor. This is either when fading in\n    // the line in case of an offset line (v_width2.t) or when fading out\n    // (v_width2.s)\n    float blur2 = (blur + 1.0 / DEVICE_PIXEL_RATIO) * v_gamma_scale;\n    float alpha = clamp(min(dist - (v_width2.t - blur2), v_width2.s - dist) / blur2, 0.0, 1.0);\n\n    gl_FragColor = color * (alpha * opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"\n\n// the distance over which the line edge fades out.\n// Retina devices need a smaller distance to avoid aliasing.\n#define ANTIALIASING 1.0 / DEVICE_PIXEL_RATIO / 2.0\n\n// floor(127 / 2) == 63.0\n// the maximum allowed miter limit is 2.0 at the moment. the extrude normal is\n// stored in a byte (-128..127). we scale regular normals up to length 63, but\n// there are also \"special\" normals that have a bigger length (of up to 126 in\n// this case).\n// #define scale 63.0\n#define scale 0.015873016\n\nattribute vec4 a_pos_normal;\nattribute vec4 a_data;\n\nuniform mat4 u_matrix;\nuniform mediump float u_ratio;\nuniform vec2 u_gl_units_to_pixels;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying float v_gamma_scale;\n\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize mediump float gapwidth\n    #pragma mapbox: initialize lowp float offset\n    #pragma mapbox: initialize mediump float width\n\n    vec2 a_extrude = a_data.xy - 128.0;\n    float a_direction = mod(a_data.z, 4.0) - 1.0;\n\n    vec2 pos = a_pos_normal.xy;\n\n    // x is 1 if it's a round cap, 0 otherwise\n    // y is 1 if the normal points up, and -1 if it points down\n    mediump vec2 normal = a_pos_normal.zw;\n    v_normal = normal;\n\n    // these transformations used to be applied in the JS and native code bases.\n    // moved them into the shader for clarity and simplicity.\n    gapwidth = gapwidth / 2.0;\n    float halfwidth = width / 2.0;\n    offset = -1.0 * offset;\n\n    float inset = gapwidth + (gapwidth > 0.0 ? ANTIALIASING : 0.0);\n    float outset = gapwidth + halfwidth * (gapwidth > 0.0 ? 2.0 : 1.0) + ANTIALIASING;\n\n    // Scale the extrusion vector down to a normal and then up by the line width\n    // of this vertex.\n    mediump vec2 dist = outset * a_extrude * scale;\n\n    // Calculate the offset when drawing a line that is to the side of the actual line.\n    // We do this by creating a vector that points towards the extrude, but rotate\n    // it when we're drawing round end points (a_direction = -1 or 1) since their\n    // extrude vector points in another direction.\n    mediump float u = 0.5 * a_direction;\n    mediump float t = 1.0 - abs(u);\n    mediump vec2 offset2 = offset * a_extrude * scale * normal.y * mat2(t, -u, u, t);\n\n    vec4 projected_extrude = u_matrix * vec4(dist / u_ratio, 0.0, 0.0);\n    gl_Position = u_matrix * vec4(pos + offset2 / u_ratio, 0.0, 1.0) + projected_extrude;\n\n    // calculate how much the perspective view squishes or stretches the extrude\n    float extrude_length_without_perspective = length(dist);\n    float extrude_length_with_perspective = length(projected_extrude.xy / gl_Position.w * u_gl_units_to_pixels);\n    v_gamma_scale = extrude_length_without_perspective / extrude_length_with_perspective;\n\n    v_width2 = vec2(outset, inset);\n}\n"},linePattern:{fragmentSource:"uniform vec2 u_pattern_size_a;\nuniform vec2 u_pattern_size_b;\nuniform vec2 u_pattern_tl_a;\nuniform vec2 u_pattern_br_a;\nuniform vec2 u_pattern_tl_b;\nuniform vec2 u_pattern_br_b;\nuniform vec2 u_texsize;\nuniform float u_fade;\n\nuniform sampler2D u_image;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying float v_linesofar;\nvarying float v_gamma_scale;\n\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n\nvoid main() {\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n\n    // Calculate the distance of the pixel from the line in pixels.\n    float dist = length(v_normal) * v_width2.s;\n\n    // Calculate the antialiasing fade factor. This is either when fading in\n    // the line in case of an offset line (v_width2.t) or when fading out\n    // (v_width2.s)\n    float blur2 = (blur + 1.0 / DEVICE_PIXEL_RATIO) * v_gamma_scale;\n    float alpha = clamp(min(dist - (v_width2.t - blur2), v_width2.s - dist) / blur2, 0.0, 1.0);\n\n    float x_a = mod(v_linesofar / u_pattern_size_a.x, 1.0);\n    float x_b = mod(v_linesofar / u_pattern_size_b.x, 1.0);\n    float y_a = 0.5 + (v_normal.y * v_width2.s / u_pattern_size_a.y);\n    float y_b = 0.5 + (v_normal.y * v_width2.s / u_pattern_size_b.y);\n    vec2 pos_a = mix(u_pattern_tl_a / u_texsize, u_pattern_br_a / u_texsize, vec2(x_a, y_a));\n    vec2 pos_b = mix(u_pattern_tl_b / u_texsize, u_pattern_br_b / u_texsize, vec2(x_b, y_b));\n\n    vec4 color = mix(texture2D(u_image, pos_a), texture2D(u_image, pos_b), u_fade);\n\n    gl_FragColor = color * alpha * opacity;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"// floor(127 / 2) == 63.0\n// the maximum allowed miter limit is 2.0 at the moment. the extrude normal is\n// stored in a byte (-128..127). we scale regular normals up to length 63, but\n// there are also \"special\" normals that have a bigger length (of up to 126 in\n// this case).\n// #define scale 63.0\n#define scale 0.015873016\n\n// We scale the distance before adding it to the buffers so that we can store\n// long distances for long segments. Use this value to unscale the distance.\n#define LINE_DISTANCE_SCALE 2.0\n\n// the distance over which the line edge fades out.\n// Retina devices need a smaller distance to avoid aliasing.\n#define ANTIALIASING 1.0 / DEVICE_PIXEL_RATIO / 2.0\n\nattribute vec4 a_pos_normal;\nattribute vec4 a_data;\n\nuniform mat4 u_matrix;\nuniform mediump float u_ratio;\nuniform vec2 u_gl_units_to_pixels;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying float v_linesofar;\nvarying float v_gamma_scale;\n\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define mediump float width\n\nvoid main() {\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize lowp float offset\n    #pragma mapbox: initialize mediump float gapwidth\n    #pragma mapbox: initialize mediump float width\n\n    vec2 a_extrude = a_data.xy - 128.0;\n    float a_direction = mod(a_data.z, 4.0) - 1.0;\n    float a_linesofar = (floor(a_data.z / 4.0) + a_data.w * 64.0) * LINE_DISTANCE_SCALE;\n\n    vec2 pos = a_pos_normal.xy;\n\n    // x is 1 if it's a round cap, 0 otherwise\n    // y is 1 if the normal points up, and -1 if it points down\n    mediump vec2 normal = a_pos_normal.zw;\n    v_normal = normal;\n\n    // these transformations used to be applied in the JS and native code bases.\n    // moved them into the shader for clarity and simplicity.\n    gapwidth = gapwidth / 2.0;\n    float halfwidth = width / 2.0;\n    offset = -1.0 * offset;\n\n    float inset = gapwidth + (gapwidth > 0.0 ? ANTIALIASING : 0.0);\n    float outset = gapwidth + halfwidth * (gapwidth > 0.0 ? 2.0 : 1.0) + ANTIALIASING;\n\n    // Scale the extrusion vector down to a normal and then up by the line width\n    // of this vertex.\n    mediump vec2 dist = outset * a_extrude * scale;\n\n    // Calculate the offset when drawing a line that is to the side of the actual line.\n    // We do this by creating a vector that points towards the extrude, but rotate\n    // it when we're drawing round end points (a_direction = -1 or 1) since their\n    // extrude vector points in another direction.\n    mediump float u = 0.5 * a_direction;\n    mediump float t = 1.0 - abs(u);\n    mediump vec2 offset2 = offset * a_extrude * scale * normal.y * mat2(t, -u, u, t);\n\n    vec4 projected_extrude = u_matrix * vec4(dist / u_ratio, 0.0, 0.0);\n    gl_Position = u_matrix * vec4(pos + offset2 / u_ratio, 0.0, 1.0) + projected_extrude;\n\n    // calculate how much the perspective view squishes or stretches the extrude\n    float extrude_length_without_perspective = length(dist);\n    float extrude_length_with_perspective = length(projected_extrude.xy / gl_Position.w * u_gl_units_to_pixels);\n    v_gamma_scale = extrude_length_without_perspective / extrude_length_with_perspective;\n\n    v_linesofar = a_linesofar;\n    v_width2 = vec2(outset, inset);\n}\n"},lineSDF:{fragmentSource:"\nuniform sampler2D u_image;\nuniform float u_sdfgamma;\nuniform float u_mix;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying vec2 v_tex_a;\nvarying vec2 v_tex_b;\nvarying float v_gamma_scale;\n\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize mediump float width\n    #pragma mapbox: initialize lowp float floorwidth\n\n    // Calculate the distance of the pixel from the line in pixels.\n    float dist = length(v_normal) * v_width2.s;\n\n    // Calculate the antialiasing fade factor. This is either when fading in\n    // the line in case of an offset line (v_width2.t) or when fading out\n    // (v_width2.s)\n    float blur2 = (blur + 1.0 / DEVICE_PIXEL_RATIO) * v_gamma_scale;\n    float alpha = clamp(min(dist - (v_width2.t - blur2), v_width2.s - dist) / blur2, 0.0, 1.0);\n\n    float sdfdist_a = texture2D(u_image, v_tex_a).a;\n    float sdfdist_b = texture2D(u_image, v_tex_b).a;\n    float sdfdist = mix(sdfdist_a, sdfdist_b, u_mix);\n    alpha *= smoothstep(0.5 - u_sdfgamma / floorwidth, 0.5 + u_sdfgamma / floorwidth, sdfdist);\n\n    gl_FragColor = color * (alpha * opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"// floor(127 / 2) == 63.0\n// the maximum allowed miter limit is 2.0 at the moment. the extrude normal is\n// stored in a byte (-128..127). we scale regular normals up to length 63, but\n// there are also \"special\" normals that have a bigger length (of up to 126 in\n// this case).\n// #define scale 63.0\n#define scale 0.015873016\n\n// We scale the distance before adding it to the buffers so that we can store\n// long distances for long segments. Use this value to unscale the distance.\n#define LINE_DISTANCE_SCALE 2.0\n\n// the distance over which the line edge fades out.\n// Retina devices need a smaller distance to avoid aliasing.\n#define ANTIALIASING 1.0 / DEVICE_PIXEL_RATIO / 2.0\n\nattribute vec4 a_pos_normal;\nattribute vec4 a_data;\n\nuniform mat4 u_matrix;\nuniform mediump float u_ratio;\nuniform vec2 u_patternscale_a;\nuniform float u_tex_y_a;\nuniform vec2 u_patternscale_b;\nuniform float u_tex_y_b;\nuniform vec2 u_gl_units_to_pixels;\n\nvarying vec2 v_normal;\nvarying vec2 v_width2;\nvarying vec2 v_tex_a;\nvarying vec2 v_tex_b;\nvarying float v_gamma_scale;\n\n#pragma mapbox: define highp vec4 color\n#pragma mapbox: define lowp float blur\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define mediump float gapwidth\n#pragma mapbox: define lowp float offset\n#pragma mapbox: define mediump float width\n#pragma mapbox: define lowp float floorwidth\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 color\n    #pragma mapbox: initialize lowp float blur\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize mediump float gapwidth\n    #pragma mapbox: initialize lowp float offset\n    #pragma mapbox: initialize mediump float width\n    #pragma mapbox: initialize lowp float floorwidth\n\n    vec2 a_extrude = a_data.xy - 128.0;\n    float a_direction = mod(a_data.z, 4.0) - 1.0;\n    float a_linesofar = (floor(a_data.z / 4.0) + a_data.w * 64.0) * LINE_DISTANCE_SCALE;\n\n    vec2 pos = a_pos_normal.xy;\n\n    // x is 1 if it's a round cap, 0 otherwise\n    // y is 1 if the normal points up, and -1 if it points down\n    mediump vec2 normal = a_pos_normal.zw;\n    v_normal = normal;\n\n    // these transformations used to be applied in the JS and native code bases.\n    // moved them into the shader for clarity and simplicity.\n    gapwidth = gapwidth / 2.0;\n    float halfwidth = width / 2.0;\n    offset = -1.0 * offset;\n\n    float inset = gapwidth + (gapwidth > 0.0 ? ANTIALIASING : 0.0);\n    float outset = gapwidth + halfwidth * (gapwidth > 0.0 ? 2.0 : 1.0) + ANTIALIASING;\n\n    // Scale the extrusion vector down to a normal and then up by the line width\n    // of this vertex.\n    mediump vec2 dist =outset * a_extrude * scale;\n\n    // Calculate the offset when drawing a line that is to the side of the actual line.\n    // We do this by creating a vector that points towards the extrude, but rotate\n    // it when we're drawing round end points (a_direction = -1 or 1) since their\n    // extrude vector points in another direction.\n    mediump float u = 0.5 * a_direction;\n    mediump float t = 1.0 - abs(u);\n    mediump vec2 offset2 = offset * a_extrude * scale * normal.y * mat2(t, -u, u, t);\n\n    vec4 projected_extrude = u_matrix * vec4(dist / u_ratio, 0.0, 0.0);\n    gl_Position = u_matrix * vec4(pos + offset2 / u_ratio, 0.0, 1.0) + projected_extrude;\n\n    // calculate how much the perspective view squishes or stretches the extrude\n    float extrude_length_without_perspective = length(dist);\n    float extrude_length_with_perspective = length(projected_extrude.xy / gl_Position.w * u_gl_units_to_pixels);\n    v_gamma_scale = extrude_length_without_perspective / extrude_length_with_perspective;\n\n    v_tex_a = vec2(a_linesofar * u_patternscale_a.x / floorwidth, normal.y * u_patternscale_a.y + u_tex_y_a);\n    v_tex_b = vec2(a_linesofar * u_patternscale_b.x / floorwidth, normal.y * u_patternscale_b.y + u_tex_y_b);\n\n    v_width2 = vec2(outset, inset);\n}\n"},raster:{fragmentSource:"uniform float u_fade_t;\nuniform float u_opacity;\nuniform sampler2D u_image0;\nuniform sampler2D u_image1;\nvarying vec2 v_pos0;\nvarying vec2 v_pos1;\n\nuniform float u_brightness_low;\nuniform float u_brightness_high;\n\nuniform float u_saturation_factor;\nuniform float u_contrast_factor;\nuniform vec3 u_spin_weights;\n\nvoid main() {\n\n    // read and cross-fade colors from the main and parent tiles\n    vec4 color0 = texture2D(u_image0, v_pos0);\n    vec4 color1 = texture2D(u_image1, v_pos1);\n    if (color0.a > 0.0) {\n        color0.rgb = color0.rgb / color0.a;\n    }\n    if (color1.a > 0.0) {\n        color1.rgb = color1.rgb / color1.a;\n    }\n    vec4 color = mix(color0, color1, u_fade_t);\n    color.a *= u_opacity;\n    vec3 rgb = color.rgb;\n\n    // spin\n    rgb = vec3(\n        dot(rgb, u_spin_weights.xyz),\n        dot(rgb, u_spin_weights.zxy),\n        dot(rgb, u_spin_weights.yzx));\n\n    // saturation\n    float average = (color.r + color.g + color.b) / 3.0;\n    rgb += (average - rgb) * u_saturation_factor;\n\n    // contrast\n    rgb = (rgb - 0.5) * u_contrast_factor + 0.5;\n\n    // brightness\n    vec3 u_high_vec = vec3(u_brightness_low, u_brightness_low, u_brightness_low);\n    vec3 u_low_vec = vec3(u_brightness_high, u_brightness_high, u_brightness_high);\n\n    gl_FragColor = vec4(mix(u_high_vec, u_low_vec, rgb) * color.a, color.a);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"uniform mat4 u_matrix;\nuniform vec2 u_tl_parent;\nuniform float u_scale_parent;\nuniform float u_buffer_scale;\n\nattribute vec2 a_pos;\nattribute vec2 a_texture_pos;\n\nvarying vec2 v_pos0;\nvarying vec2 v_pos1;\n\nvoid main() {\n    gl_Position = u_matrix * vec4(a_pos, 0, 1);\n    // We are using Int16 for texture position coordinates to give us enough precision for\n    // fractional coordinates. We use 8192 to scale the texture coordinates in the buffer\n    // as an arbitrarily high number to preserve adequate precision when rendering.\n    // This is also the same value as the EXTENT we are using for our tile buffer pos coordinates,\n    // so math for modifying either is consistent.\n    v_pos0 = (((a_texture_pos / 8192.0) - 0.5) / u_buffer_scale ) + 0.5;\n    v_pos1 = (v_pos0 * u_scale_parent) + u_tl_parent;\n}\n"},symbolIcon:{fragmentSource:"uniform sampler2D u_texture;\n\n#pragma mapbox: define lowp float opacity\n\nvarying vec2 v_tex;\nvarying float v_fade_opacity;\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n\n    lowp float alpha = opacity * v_fade_opacity;\n    gl_FragColor = texture2D(u_texture, v_tex) * alpha;\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"const float PI = 3.141592653589793;\n\nattribute vec4 a_pos_offset;\nattribute vec4 a_data;\nattribute vec3 a_projected_pos;\nattribute float a_fade_opacity;\n\nuniform bool u_is_size_zoom_constant;\nuniform bool u_is_size_feature_constant;\nuniform highp float u_size_t; // used to interpolate between zoom stops when size is a composite function\nuniform highp float u_size; // used when size is both zoom and feature constant\nuniform highp float u_camera_to_center_distance;\nuniform highp float u_pitch;\nuniform bool u_rotate_symbol;\nuniform highp float u_aspect_ratio;\nuniform float u_fade_change;\n\n#pragma mapbox: define lowp float opacity\n\nuniform mat4 u_matrix;\nuniform mat4 u_label_plane_matrix;\nuniform mat4 u_gl_coord_matrix;\n\nuniform bool u_is_text;\nuniform bool u_pitch_with_map;\n\nuniform vec2 u_texsize;\n\nvarying vec2 v_tex;\nvarying float v_fade_opacity;\n\nvoid main() {\n    #pragma mapbox: initialize lowp float opacity\n\n    vec2 a_pos = a_pos_offset.xy;\n    vec2 a_offset = a_pos_offset.zw;\n\n    vec2 a_tex = a_data.xy;\n    vec2 a_size = a_data.zw;\n\n    highp float segment_angle = -a_projected_pos[2];\n\n    float size;\n    if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {\n        size = mix(a_size[0], a_size[1], u_size_t) / 10.0;\n    } else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {\n        size = a_size[0] / 10.0;\n    } else if (!u_is_size_zoom_constant && u_is_size_feature_constant) {\n        size = u_size;\n    } else {\n        size = u_size;\n    }\n\n    vec4 projectedPoint = u_matrix * vec4(a_pos, 0, 1);\n    highp float camera_to_anchor_distance = projectedPoint.w;\n    // See comments in symbol_sdf.vertex\n    highp float distance_ratio = u_pitch_with_map ?\n        camera_to_anchor_distance / u_camera_to_center_distance :\n        u_camera_to_center_distance / camera_to_anchor_distance;\n    highp float perspective_ratio = 0.5 + 0.5 * distance_ratio;\n\n    size *= perspective_ratio;\n\n    float fontScale = u_is_text ? size / 24.0 : size;\n\n    highp float symbol_rotation = 0.0;\n    if (u_rotate_symbol) {\n        // See comments in symbol_sdf.vertex\n        vec4 offsetProjectedPoint = u_matrix * vec4(a_pos + vec2(1, 0), 0, 1);\n\n        vec2 a = projectedPoint.xy / projectedPoint.w;\n        vec2 b = offsetProjectedPoint.xy / offsetProjectedPoint.w;\n\n        symbol_rotation = atan((b.y - a.y) / u_aspect_ratio, b.x - a.x);\n    }\n\n    highp float angle_sin = sin(segment_angle + symbol_rotation);\n    highp float angle_cos = cos(segment_angle + symbol_rotation);\n    mat2 rotation_matrix = mat2(angle_cos, -1.0 * angle_sin, angle_sin, angle_cos);\n\n    vec4 projected_pos = u_label_plane_matrix * vec4(a_projected_pos.xy, 0.0, 1.0);\n    gl_Position = u_gl_coord_matrix * vec4(projected_pos.xy / projected_pos.w + rotation_matrix * (a_offset / 64.0 * fontScale), 0.0, 1.0);\n\n    v_tex = a_tex / u_texsize;\n    vec2 fade_opacity = unpack_opacity(a_fade_opacity);\n    float fade_change = fade_opacity[1] > 0.5 ? u_fade_change : -u_fade_change;\n    v_fade_opacity = max(0.0, min(1.0, fade_opacity[0] + fade_change));\n}\n"},symbolSDF:{fragmentSource:"#define SDF_PX 8.0\n#define EDGE_GAMMA 0.105/DEVICE_PIXEL_RATIO\n\nuniform bool u_is_halo;\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\n\nuniform sampler2D u_texture;\nuniform highp float u_gamma_scale;\nuniform bool u_is_text;\n\nvarying vec2 v_data0;\nvarying vec3 v_data1;\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 fill_color\n    #pragma mapbox: initialize highp vec4 halo_color\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize lowp float halo_width\n    #pragma mapbox: initialize lowp float halo_blur\n\n    vec2 tex = v_data0.xy;\n    float gamma_scale = v_data1.x;\n    float size = v_data1.y;\n    float fade_opacity = v_data1[2];\n\n    float fontScale = u_is_text ? size / 24.0 : size;\n\n    lowp vec4 color = fill_color;\n    highp float gamma = EDGE_GAMMA / (fontScale * u_gamma_scale);\n    lowp float buff = (256.0 - 64.0) / 256.0;\n    if (u_is_halo) {\n        color = halo_color;\n        gamma = (halo_blur * 1.19 / SDF_PX + EDGE_GAMMA) / (fontScale * u_gamma_scale);\n        buff = (6.0 - halo_width / fontScale) / SDF_PX;\n    }\n\n    lowp float dist = texture2D(u_texture, tex).a;\n    highp float gamma_scaled = gamma * gamma_scale;\n    highp float alpha = smoothstep(buff - gamma_scaled, buff + gamma_scaled, dist);\n\n    gl_FragColor = color * (alpha * opacity * fade_opacity);\n\n#ifdef OVERDRAW_INSPECTOR\n    gl_FragColor = vec4(1.0);\n#endif\n}\n",vertexSource:"const float PI = 3.141592653589793;\n\nattribute vec4 a_pos_offset;\nattribute vec4 a_data;\nattribute vec3 a_projected_pos;\nattribute float a_fade_opacity;\n\n// contents of a_size vary based on the type of property value\n// used for {text,icon}-size.\n// For constants, a_size is disabled.\n// For source functions, we bind only one value per vertex: the value of {text,icon}-size evaluated for the current feature.\n// For composite functions:\n// [ text-size(lowerZoomStop, feature),\n//   text-size(upperZoomStop, feature) ]\nuniform bool u_is_size_zoom_constant;\nuniform bool u_is_size_feature_constant;\nuniform highp float u_size_t; // used to interpolate between zoom stops when size is a composite function\nuniform highp float u_size; // used when size is both zoom and feature constant\n\n#pragma mapbox: define highp vec4 fill_color\n#pragma mapbox: define highp vec4 halo_color\n#pragma mapbox: define lowp float opacity\n#pragma mapbox: define lowp float halo_width\n#pragma mapbox: define lowp float halo_blur\n\nuniform mat4 u_matrix;\nuniform mat4 u_label_plane_matrix;\nuniform mat4 u_gl_coord_matrix;\n\nuniform bool u_is_text;\nuniform bool u_pitch_with_map;\nuniform highp float u_pitch;\nuniform bool u_rotate_symbol;\nuniform highp float u_aspect_ratio;\nuniform highp float u_camera_to_center_distance;\nuniform float u_fade_change;\n\nuniform vec2 u_texsize;\n\nvarying vec2 v_data0;\nvarying vec3 v_data1;\n\nvoid main() {\n    #pragma mapbox: initialize highp vec4 fill_color\n    #pragma mapbox: initialize highp vec4 halo_color\n    #pragma mapbox: initialize lowp float opacity\n    #pragma mapbox: initialize lowp float halo_width\n    #pragma mapbox: initialize lowp float halo_blur\n\n    vec2 a_pos = a_pos_offset.xy;\n    vec2 a_offset = a_pos_offset.zw;\n\n    vec2 a_tex = a_data.xy;\n    vec2 a_size = a_data.zw;\n\n    highp float segment_angle = -a_projected_pos[2];\n    float size;\n\n    if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {\n        size = mix(a_size[0], a_size[1], u_size_t) / 10.0;\n    } else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {\n        size = a_size[0] / 10.0;\n    } else if (!u_is_size_zoom_constant && u_is_size_feature_constant) {\n        size = u_size;\n    } else {\n        size = u_size;\n    }\n\n    vec4 projectedPoint = u_matrix * vec4(a_pos, 0, 1);\n    highp float camera_to_anchor_distance = projectedPoint.w;\n    // If the label is pitched with the map, layout is done in pitched space,\n    // which makes labels in the distance smaller relative to viewport space.\n    // We counteract part of that effect by multiplying by the perspective ratio.\n    // If the label isn't pitched with the map, we do layout in viewport space,\n    // which makes labels in the distance larger relative to the features around\n    // them. We counteract part of that effect by dividing by the perspective ratio.\n    highp float distance_ratio = u_pitch_with_map ?\n        camera_to_anchor_distance / u_camera_to_center_distance :\n        u_camera_to_center_distance / camera_to_anchor_distance;\n    highp float perspective_ratio = 0.5 + 0.5 * distance_ratio;\n\n    size *= perspective_ratio;\n\n    float fontScale = u_is_text ? size / 24.0 : size;\n\n    highp float symbol_rotation = 0.0;\n    if (u_rotate_symbol) {\n        // Point labels with 'rotation-alignment: map' are horizontal with respect to tile units\n        // To figure out that angle in projected space, we draw a short horizontal line in tile\n        // space, project it, and measure its angle in projected space.\n        vec4 offsetProjectedPoint = u_matrix * vec4(a_pos + vec2(1, 0), 0, 1);\n\n        vec2 a = projectedPoint.xy / projectedPoint.w;\n        vec2 b = offsetProjectedPoint.xy / offsetProjectedPoint.w;\n\n        symbol_rotation = atan((b.y - a.y) / u_aspect_ratio, b.x - a.x);\n    }\n\n    highp float angle_sin = sin(segment_angle + symbol_rotation);\n    highp float angle_cos = cos(segment_angle + symbol_rotation);\n    mat2 rotation_matrix = mat2(angle_cos, -1.0 * angle_sin, angle_sin, angle_cos);\n\n    vec4 projected_pos = u_label_plane_matrix * vec4(a_projected_pos.xy, 0.0, 1.0);\n    gl_Position = u_gl_coord_matrix * vec4(projected_pos.xy / projected_pos.w + rotation_matrix * (a_offset / 64.0 * fontScale), 0.0, 1.0);\n    float gamma_scale = gl_Position.w;\n\n    vec2 tex = a_tex / u_texsize;\n    vec2 fade_opacity = unpack_opacity(a_fade_opacity);\n    float fade_change = fade_opacity[1] > 0.5 ? u_fade_change : -u_fade_change;\n    float interpolated_fade_opacity = max(0.0, min(1.0, fade_opacity[0] + fade_change));\n\n    v_data0 = vec2(tex.x, tex.y);\n    v_data1 = vec3(gamma_scale, size, interpolated_fade_opacity);\n}\n"}},o=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g;for(var r in n)!function(e){var t=n[e],i={};t.fragmentSource=t.fragmentSource.replace(o,function(e,t,n,o,r){return i[r]=!0,"define"===t?"\n#ifndef HAS_UNIFORM_u_"+r+"\nvarying "+n+" "+o+" "+r+";\n#else\nuniform "+n+" "+o+" u_"+r+";\n#endif\n":"\n#ifdef HAS_UNIFORM_u_"+r+"\n    "+n+" "+o+" "+r+" = u_"+r+";\n#endif\n"}),t.vertexSource=t.vertexSource.replace(o,function(e,t,n,o,r){var a="float"===o?"vec2":"vec4";return i[r]?"define"===t?"\n#ifndef HAS_UNIFORM_u_"+r+"\nuniform lowp float a_"+r+"_t;\nattribute "+n+" "+a+" a_"+r+";\nvarying "+n+" "+o+" "+r+";\n#else\nuniform "+n+" "+o+" u_"+r+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+r+"\n    "+r+" = unpack_mix_"+a+"(a_"+r+", a_"+r+"_t);\n#else\n    "+n+" "+o+" "+r+" = u_"+r+";\n#endif\n":"define"===t?"\n#ifndef HAS_UNIFORM_u_"+r+"\nuniform lowp float a_"+r+"_t;\nattribute "+n+" "+a+" a_"+r+";\n#else\nuniform "+n+" "+o+" u_"+r+";\n#endif\n":"\n#ifndef HAS_UNIFORM_u_"+r+"\n    "+n+" "+o+" "+r+" = unpack_mix_"+a+"(a_"+r+", a_"+r+"_t);\n#else\n    "+n+" "+o+" "+r+" = u_"+r+";\n#endif\n"})}(r);t.exports=n},{}],98:[function(e,t,i){var n=e("./image_source"),o=e("../util/window"),r=function(e){function t(t,i,n,o){e.call(this,t,i,n,o),this.options=i,this.animate=void 0===i.animate||i.animate}return e&&(t.__proto__=e),t.prototype=F()(e&&e.prototype),t.prototype.constructor=t,t.prototype.load=function(){if(this.canvas=this.canvas||o.document.getElementById(this.options.canvas),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions())return this.fire("error",new Error("Canvas dimensions cannot be less than or equal to zero."));this.play=function(){this._playing=!0,this.map._rerender()},this.pause=function(){this._playing=!1},this._finishLoading()},t.prototype.getCanvas=function(){return this.canvas},t.prototype.onAdd=function(e){this.map=e,this.load(),this.canvas&&this.animate&&this.play()},t.prototype.onRemove=function(){this.pause()},t.prototype.prepare=function(){var e=!1;this.canvas.width!==this.width&&(this.width=this.canvas.width,e=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,e=!0),this._hasInvalidDimensions()||0!==R()(this.tiles).length&&this._prepareImage(this.map.painter.gl,this.canvas,e)},t.prototype.serialize=function(){return{type:"canvas",canvas:this.canvas,coordinates:this.coordinates}},t.prototype.hasTransition=function(){return this._playing},t.prototype._hasInvalidDimensions=function(){for(var e=this,t=0,i=[e.canvas.width,e.canvas.height];t<i.length;t+=1){var n=i[t];if(isNaN(n)||n<=0)return!0}return!1},t}(n);t.exports=r},{"../util/window":247,"./image_source":102}],99:[function(e,t,i){function n(e){var t=a.document.createElement("a");return t.href=e,t.href}var o=e("../util/evented"),r=e("../util/util"),a=e("../util/window"),s=e("../data/extent"),l=e("../util/ajax").ResourceType,u=e("../util/browser"),c=function(e){function t(t,i,n,o){e.call(this),this.id=t,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this.dispatcher=n,this.setEventedParent(o),this._data=i.data,this._options=r.extend({},i),void 0!==i.maxzoom&&(this.maxzoom=i.maxzoom),i.type&&(this.type=i.type);var a=s/this.tileSize;this.workerOptions=r.extend({source:this.id,cluster:i.cluster||!1,geojsonVtOptions:{buffer:(void 0!==i.buffer?i.buffer:128)*a,tolerance:(void 0!==i.tolerance?i.tolerance:.375)*a,extent:s,maxZoom:this.maxzoom},superclusterOptions:{maxZoom:void 0!==i.clusterMaxZoom?Math.min(i.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,extent:s,radius:(i.clusterRadius||50)*a,log:!1}},i.workerOptions)}return e&&(t.__proto__=e),t.prototype=F()(e&&e.prototype),t.prototype.constructor=t,t.prototype.load=function(){var e=this;this.fire("dataloading",{dataType:"source"}),this._updateWorkerData(function(t){if(t)return void e.fire("error",{error:t});e.fire("data",{dataType:"source",sourceDataType:"metadata"})})},t.prototype.onAdd=function(e){this.map=e,this.load()},t.prototype.setData=function(e){var t=this;return this._data=e,this.fire("dataloading",{dataType:"source"}),this._updateWorkerData(function(e){if(e)return t.fire("error",{error:e});t.fire("data",{dataType:"source",sourceDataType:"content"})}),this},t.prototype._updateWorkerData=function(e){var t=this,i=r.extend({},this.workerOptions),o=this._data;"string"==typeof o?i.request=this.map._transformRequest(n(o),l.Source):i.data=D()(o),this.workerID=this.dispatcher.send(this.type+".loadData",i,function(i){t._loaded=!0,e(i)},this.workerID)},t.prototype.loadTile=function(e,t){var i=this,n=void 0===e.workerID||"expired"===e.state?"loadTile":"reloadTile",o={type:this.type,uid:e.uid,coord:e.coord,zoom:e.coord.z,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:u.devicePixelRatio,overscaling:e.coord.z>this.maxzoom?Math.pow(2,e.coord.z-this.maxzoom):1,showCollisionBoxes:this.map.showCollisionBoxes};e.workerID=this.dispatcher.send(n,o,function(n,o){return e.unloadVectorData(),e.aborted?t(null):n?t(n):(e.loadVectorData(o,i.map.painter),t(null))},this.workerID)},t.prototype.abortTile=function(e){e.aborted=!0},t.prototype.unloadTile=function(e){e.unloadVectorData(),this.dispatcher.send("removeTile",{uid:e.uid,type:this.type,source:this.id},null,e.workerID)},t.prototype.onRemove=function(){this.dispatcher.broadcast("removeSource",{type:this.type,source:this.id})},t.prototype.serialize=function(){return r.extend({},this._options,{type:this.type,data:this._data})},t.prototype.hasTransition=function(){return!1},t}(o);t.exports=c},{"../data/extent":58,"../util/ajax":244,"../util/browser":245,"../util/evented":253,"../util/util":266,"../util/window":247}],100:[function(e,t,i){function n(e,t){var i=e.source,n=e.coord;if(!this._geoJSONIndexes[i])return t(null,null);var o=this._geoJSONIndexes[i].getTile(Math.min(n.z,e.maxZoom),n.x,n.y);if(!o)return t(null,null);var r=new a(o.features),l=s(r);0===l.byteOffset&&l.byteLength===l.buffer.byteLength||(l=new Uint8Array(l)),t(null,{vectorTile:r,rawData:l.buffer})}var o=e("../util/ajax"),r=e("geojson-rewind"),a=e("./geojson_wrapper"),s=e("vt-pbf"),l=e("supercluster"),u=e("geojson-vt"),c=e("./vector_tile_worker_source"),p=function(e){function t(t,i,o){e.call(this,t,i,n),o&&(this.loadGeoJSON=o),this._geoJSONIndexes={}}return e&&(t.__proto__=e),t.prototype=F()(e&&e.prototype),t.prototype.constructor=t,t.prototype.loadData=function(e,t){var i=this;this.loadGeoJSON(e,function(n,o){if(n||!o)return t(n);if("object"!=(void 0===o?"undefined":O()(o)))return t(new Error("Input data is not a valid GeoJSON object."));r(o,!0);try{i._geoJSONIndexes[e.source]=e.cluster?l(e.superclusterOptions).load(o.features):u(o,e.geojsonVtOptions)}catch(n){return t(n)}i.loaded[e.source]={},t(null)})},t.prototype.reloadTile=function(t,i){var n=this.loaded[t.source],o=t.uid;return n&&n[o]?e.prototype.reloadTile.call(this,t,i):this.loadTile(t,i)},t.prototype.loadGeoJSON=function(e,t){if(e.request)o.getJSON(e.request,t);else{if("string"!=typeof e.data)return t(new Error("Input data is not a valid GeoJSON object."));try{return t(null,JSON.parse(e.data))}catch(e){return t(new Error("Input data is not a valid GeoJSON object."))}}},t.prototype.removeSource=function(e,t){this._geoJSONIndexes[e.source]&&delete this._geoJSONIndexes[e.source],t()},t}(c);t.exports=p},{"../util/ajax":244,"./geojson_wrapper":101,"./vector_tile_worker_source":114,"geojson-rewind":14,"geojson-vt":18,supercluster:41,"vt-pbf":46}],101:[function(e,t,i){var n=e("@mapbox/point-geometry"),o=e("@mapbox/vector-tile").VectorTileFeature.prototype.toGeoJSON,r=e("../data/extent"),a=function(e){this._feature=e,this.extent=r,this.type=e.type,this.properties=e.tags,"id"in e&&!isNaN(e.id)&&(this.id=parseInt(e.id,10))};a.prototype.loadGeometry=function(){var e=this;if(1===this._feature.type){for(var t=[],i=0,o=e._feature.geometry;i<o.length;i+=1){var r=o[i];t.push([new n(r[0],r[1])])}return t}for(var a=[],s=0,l=e._feature.geometry;s<l.length;s+=1){for(var u=l[s],c=[],p=0,f=u;p<f.length;p+=1){var d=f[p];c.push(new n(d[0],d[1]))}a.push(c)}return a},a.prototype.toGeoJSON=function(e,t,i){return o.call(this,e,t,i)};var s=function(e){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=r,this.length=e.length,this._features=e};s.prototype.feature=function(e){return new a(this._features[e])},t.exports=s},{"../data/extent":58,"@mapbox/point-geometry":2,"@mapbox/vector-tile":6}],102:[function(e,t,i){var n=e("../util/util"),o=e("../util/window"),r=e("./tile_coord"),a=e("../geo/lng_lat"),s=e("@mapbox/point-geometry"),l=e("../util/evented"),u=e("../util/ajax"),c=e("../util/browser"),p=e("../data/extent"),f=e("../data/raster_bounds_array"),d=e("../gl/vertex_buffer"),h=e("../render/vertex_array_object"),m=e("../render/texture"),y=function(e){function t(t,i,n,o){e.call(this),this.id=t,this.dispatcher=n,this.coordinates=i.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this.setEventedParent(o),this.options=i,this.textureLoaded=!1}return e&&(t.__proto__=e),t.prototype=F()(e&&e.prototype),t.prototype.constructor=t,t.prototype.load=function(){var e=this;this.fire("dataloading",{dataType:"source"}),this.url=this.options.url,u.getImage(this.map._transformRequest(this.url,u.ResourceType.Image),function(t,i){t?e.fire("error",{error:t}):i&&(e.image=c.getImageData(i),e._finishLoading())})},t.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire("data",{dataType:"source",sourceDataType:"metadata"}))},t.prototype.onAdd=function(e){this.map=e,this.load()},t.prototype.setCoordinates=function(e){this.coordinates=e;var t=this.map,i=e.map(function(e){return t.transform.locationCoordinate(a.convert(e)).zoomTo(0)}),o=this.centerCoord=n.getCoordinatesCenter(i);o.column=Math.floor(o.column),o.row=Math.floor(o.row),this.coord=new r(o.zoom,o.column,o.row),this.minzoom=this.maxzoom=o.zoom;var l=i.map(function(e){var t=e.zoomTo(o.zoom);return new s(Math.round((t.column-o.column)*p),Math.round((t.row-o.row)*p))});return this._boundsArray=new f,this._boundsArray.emplaceBack(l[0].x,l[0].y,0,0),this._boundsArray.emplaceBack(l[1].x,l[1].y,p,0),this._boundsArray.emplaceBack(l[3].x,l[3].y,0,p),this._boundsArray.emplaceBack(l[2].x,l[2].y,p,p),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire("data",{dataType:"source",sourceDataType:"content"}),this},t.prototype.prepare=function(){0!==R()(this.tiles).length&&this.image&&this._prepareImage(this.map.painter.gl,this.image)},t.prototype._prepareImage=function(e,t,i){var n=this;this.boundsBuffer||(this.boundsBuffer=new d(e,this._boundsArray)),this.boundsVAO||(this.boundsVAO=new h),this.textureLoaded?i?this.texture.update(t):(t instanceof o.HTMLVideoElement||t instanceof o.ImageData||t instanceof o.HTMLCanvasElement)&&(this.texture.bind(e.LINEAR,e.CLAMP_TO_EDGE),e.texSubImage2D(e.TEXTURE_2D,0,0,0,e.RGBA,e.UNSIGNED_BYTE,t)):(this.textureLoaded=!0,this.texture=new m(e,t,e.RGBA),this.texture.bind(e.LINEAR,e.CLAMP_TO_EDGE));for(var r in n.tiles){var a=n.tiles[r];"loaded"!==a.state&&(a.state="loaded",a.texture=n.texture)}},t.prototype.loadTile=function(e,t){this.coord&&this.coord.toString()===e.coord.toString()?(this.tiles[String(e.coord.w)]=e,e.buckets={},t(null)):(e.state="errored",t(null))},t.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},t.prototype.hasTransition=function(){return!1},t}(l);t.exports=y},{"../data/extent":58,"../data/raster_bounds_array":64,"../geo/lng_lat":68,"../gl/vertex_buffer":72,"../render/texture":93,"../render/vertex_array_object":95,"../util/ajax":244,"../util/browser":245,"../util/evented":253,"../util/util":266,"../util/window":247,"./tile_coord":112,"@mapbox/point-geometry":2}],103:[function(e,t,i){var n=e("../util/util"),o=e("../util/ajax"),r=e("../util/browser"),a=e("../util/mapbox").normalizeSourceURL;t.exports=function(e,t,i){var s=function(e,t){if(e)return i(e);if(t){var o=n.pick(t,["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds"]);t.vector_layers&&(o.vectorLayers=t.vector_layers,o.vectorLayerIds=o.vectorLayers.map(function(e){return e.id})),i(null,o)}};e.url?o.getJSON(t(a(e.url),o.ResourceType.Source),s):r.frame(function(){return s(null,e)})}},{"../util/ajax":244,"../util/browser":245,"../util/mapbox":260,"../util/util":266}],104:[function(e,t,i){var n=e("../data/extent");t.exports=function(e,t,i){return t*(n/(e.tileSize*Math.pow(2,i-e.coord.z)))}},{"../data/extent":58}],105:[function(e,t,i){function n(e,t){var i=e.coord,n=t.coord;return i.z-n.z||i.y-n.y||i.w-n.w||i.x-n.x}function o(e){for(var t={},i={},n=0,o=e;n<o.length;n+=1){var r=o[n],a=r.queryResults,s=r.wrappedTileID,l=i[s]=i[s]||{};for(var u in a)for(var c=a[u],p=l[u]=l[u]||{},f=t[u]=t[u]||[],d=0,h=c;d<h.length;d+=1){var m=h[d];p[m.featureIndex]||(p[m.featureIndex]=!0,f.push(m.feature))}}return t}var r=e("./tile_coord");i.rendered=function(e,t,i,r,a,s){var l=e.tilesIn(i);l.sort(n);for(var u=[],c=0,p=l;c<p.length;c+=1){var f=p[c];u.push({wrappedTileID:f.coord.wrapped().id,queryResults:f.tile.queryRenderedFeatures(t,f.queryGeometry,f.scale,r,s,e.id)})}return o(u)},i.source=function(e,t){for(var i=e.getRenderableIds().map(function(t){return e.getTileByID(t)}),n=[],o={},a=0;a<i.length;a++){var s=i[a],l=new r(Math.min(s.sourceMaxZoom,s.coord.z),s.coord.x,s.coord.y,0).id;o[l]||(o[l]=!0,s.querySourceFeatures(n,t))}return n}},{"./tile_coord":112}],106:[function(e,t,i){var n=e("../util/util"),o=e("../util/ajax"),r=e("../util/evented"),a=e("./load_tilejson"),s=e("../util/mapbox").normalizeTileURL,l=e("./tile_bounds"),u=e("../render/texture"),c=function(e){function t(t,i,o,r){e.call(this),this.id=t,this.dispatcher=o,this.setEventedParent(r),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=n.extend({},i),n.extend(this,n.pick(i,["url","scheme","tileSize"]))}return e&&(t.__proto__=e),t.prototype=F()(e&&e.prototype),t.prototype.constructor=t,t.prototype.load=function(){var e=this;this.fire("dataloading",{dataType:"source"}),a(this._options,this.map._transformRequest,function(t,i){t?e.fire("error",t):i&&(n.extend(e,i),i.bounds&&(e.tileBounds=new l(i.bounds,e.minzoom,e.maxzoom)),e.fire("data",{dataType:"source",sourceDataType:"metadata"}),e.fire("data",{dataType:"source",sourceDataType:"content"}))})},t.prototype.onAdd=function(e){this.map=e,this.load()},t.prototype.serialize=function(){return n.extend({},this._options)},t.prototype.hasTile=function(e){return!this.tileBounds||this.tileBounds.contains(e,this.maxzoom)},t.prototype.loadTile=function(e,t){var i=this,n=s(e.coord.url(this.tiles,null,this.scheme),this.url,this.tileSize);e.request=o.getImage(this.map._transformRequest(n,o.ResourceType.Tile),function(n,o){if(delete e.request,e.aborted)e.state="unloaded",t(null);else if(n)e.state="errored",t(n);else if(o){i.map._refreshExpiredTiles&&e.setExpiryData(o),delete o.cacheControl,delete o.expires;var r=i.map.painter.gl;e.texture=i.map.painter.getTileTexture(o.width),e.texture?(e.texture.bind(r.LINEAR,r.CLAMP_TO_EDGE,r.LINEAR_MIPMAP_NEAREST),r.texSubImage2D(r.TEXTURE_2D,0,0,0,r.RGBA,r.UNSIGNED_BYTE,o)):(e.texture=new u(r,o,r.RGBA),e.texture.bind(r.LINEAR,r.CLAMP_TO_EDGE,r.LINEAR_MIPMAP_NEAREST),i.map.painter.extTextureFilterAnisotropic&&r.texParameterf(r.TEXTURE_2D,i.map.painter.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,i.map.painter.extTextureFilterAnisotropicMax)),r.generateMipmap(r.TEXTURE_2D),e.state="loaded",t(null)}})},t.prototype.abortTile=function(e,t){e.request&&(e.request.abort(),delete e.request),t()},t.prototype.unloadTile=function(e,t){e.texture&&this.map.painter.saveTileTexture(e.texture),t()},t.prototype.hasTransition=function(){return!1},t}(r);t.exports=c},{"../render/texture":93,"../util/ajax":244,"../util/evented":253,"../util/mapbox":260,"../util/util":266,"./load_tilejson":103,"./tile_bounds":111}],107:[function(e,t,i){var n=e("../util/ajax"),o=e("../util/evented"),r=e("../util/window"),a=!1,s=null;t.exports.evented=new o,t.exports.registerForPluginAvailability=function(e){return s?e({pluginBlobURL:s,errorCallback:t.exports.errorCallback}):t.exports.evented.once("pluginAvailable",e),e},t.exports.createBlobURL=function(e){return r.URL.createObjectURL(new r.Blob([e.data],{type:"text/javascript"}))},t.exports.clearRTLTextPlugin=function(){a=!1,s=null},t.exports.setRTLTextPlugin=function(e,i){if(a)throw new Error("setRTLTextPlugin cannot be called multiple times.");a=!0,t.exports.errorCallback=i,n.getArrayBuffer({url:e},function(e,n){e?i(e):n&&(s=t.exports.createBlobURL(n),t.exports.evented.fire("pluginAvailable",{pluginBlobURL:s,errorCallback:i}))})},t.exports.applyArabicShaping=null,t.exports.processBidirectionalText=null},{"../util/ajax":244,"../util/evented":253,"../util/window":247}],108:[function(e,t,i){var n=e("../util/util"),o={vector:e("../source/vector_tile_source"),raster:e("../source/raster_tile_source"),geojson:e("../source/geojson_source"),video:e("../source/video_source"),image:e("../source/image_source"),canvas:e("../source/canvas_source")};i.create=function(e,t,i,r){var a=new o[t.type](e,t,i,r);if(a.id!==e)throw new Error("Expected Source id to be "+e+" instead of "+a.id);return n.bindAll(["load","abort","unload","serialize","prepare"],a),a},i.getType=function(e){return o[e]},i.setType=function(e,t){o[e]=t}},{"../source/canvas_source":98,"../source/geojson_source":99,"../source/image_source":102,"../source/raster_tile_source":106,"../source/vector_tile_source":113,"../source/video_source":115,"../util/util":266}],109:[function(e,t,i){function n(e,t,i){var n=i.zoomTo(Math.min(e.z,t));return new d((n.column-(e.x+e.w*Math.pow(2,e.z)))*f,(n.row-e.y)*f)}function o(e){return"raster"===e||"image"===e||"video"===e}var r=e("./source").create,a=e("./tile"),s=e("../util/evented"),l=e("./tile_coord"),u=e("../util/lru_cache"),c=e("../geo/coordinate"),p=e("../util/util"),f=e("../data/extent"),d=e("@mapbox/point-geometry"),h=function(e){function t(t,i,n){var o=this;e.call(this),this.id=t,this.dispatcher=n,this.on("data",function(e){"source"===e.dataType&&"metadata"===e.sourceDataType&&(o._sourceLoaded=!0),o._sourceLoaded&&!o._paused&&"source"===e.dataType&&"content"===e.sourceDataType&&(o.reload(),o.transform&&o.update(o.transform))}),this.on("error",function(){o._sourceErrored=!0}),this._source=r(t,i,n,this),this._tiles={},this._cache=new u(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._isIdRenderable=this._isIdRenderable.bind(this),this._coveredTiles={}}return e&&(t.__proto__=e),t.prototype=F()(e&&e.prototype),t.prototype.constructor=t,t.prototype.onAdd=function(e){this.map=e,this._maxTileCacheSize=e?e._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(e)},t.prototype.onRemove=function(e){this._source&&this._source.onRemove&&this._source.onRemove(e)},t.prototype.loaded=function(){var e=this;if(this._sourceErrored)return!0;if(!this._sourceLoaded)return!1;for(var t in e._tiles){var i=e._tiles[t];if("loaded"!==i.state&&"errored"!==i.state)return!1}return!0},t.prototype.getSource=function(){return this._source},t.prototype.pause=function(){this._paused=!0},t.prototype.getNeedsFullPlacement=function(){return this._needsFullPlacement},t.prototype.resume=function(){if(this._paused){var e=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,e&&this.reload(),this.transform&&this.update(this.transform)}},t.prototype._loadTile=function(e,t){return this._source.loadTile(e,t)},t.prototype._unloadTile=function(e){if(this._source.unloadTile)return this._source.unloadTile(e,function(){})},t.prototype._abortTile=function(e){if(this._source.abortTile)return this._source.abortTile(e,function(){})},t.prototype.serialize=function(){return this._source.serialize()},t.prototype.prepare=function(e){var t=this;this._source.prepare&&this._source.prepare();for(var i in t._tiles)t._tiles[i].upload(e)},t.prototype.getIds=function(){var e=this,t=function(t,i){var n=l.fromID(t),o=l.fromID(i),r=new d(n.x,n.y).rotate(e.transform.angle),a=new d(o.x,o.y).rotate(e.transform.angle);return n.z-o.z||a.y-r.y||a.x-r.x};return R()(this._tiles).map(Number).sort(t)},t.prototype.getRenderableIds=function(){return this.getIds().filter(this._isIdRenderable)},t.prototype.hasRenderableParent=function(e){var t=this.findLoadedParent(e,0,{});return!!t&&this._isIdRenderable(t.coord.id)},t.prototype._isIdRenderable=function(e){return this._tiles[e]&&this._tiles[e].hasData()&&!this._coveredTiles[e]},t.prototype.reload=function(){var e=this;if(this._paused)return void(this._shouldReloadOnResume=!0);this._cache.reset();for(var t in e._tiles)e._reloadTile(t,"reloading")},t.prototype._reloadTile=function(e,t){var i=this._tiles[e];i&&("loading"!==i.state&&(i.state=t),this._loadTile(i,this._tileLoaded.bind(this,i,e,t)))},t.prototype._tileLoaded=function(e,t,i,n){if(n)return e.state="errored",void(404!==n.status?this._source.fire("error",{tile:e,error:n}):this.update(this.transform));e.timeAdded=(new Date).getTime(),"expired"===i&&(e.refreshedUponExpiration=!0),this._setTileReloadTimer(t,e),this._source.fire("data",{dataType:"source",tile:e,coord:e.coord}),this.map&&(this.map.painter.tileExtentVAO.vao=null),this._updatePlacement(),this.map&&e.added(this.map.painter.crossTileSymbolIndex)},t.prototype.getTile=function(e){return this.getTileByID(e.id)},t.prototype.getTileByID=function(e){return this._tiles[e]},t.prototype.getZoom=function(e){return e.zoom+e.scaleZoom(e.tileSize/this._source.tileSize)},t.prototype._findLoadedChildren=function(e,t,i){var n=this,o=!1;for(var r in n._tiles){var a=n._tiles[r];if(!(i[r]||!a.hasData()||a.coord.z<=e.z||a.coord.z>t)){var s=Math.pow(2,Math.min(a.coord.z,n._source.maxzoom)-Math.min(e.z,n._source.maxzoom));if(Math.floor(a.coord.x/s)===e.x&&Math.floor(a.coord.y/s)===e.y)for(i[r]=!0,o=!0;a&&a.coord.z-1>e.z;){var l=a.coord.parent(n._source.maxzoom);if(!l)break;(a=n._tiles[l.id])&&a.hasData()&&(delete i[r],i[l.id]=!0)}}}return o},t.prototype.findLoadedParent=function(e,t,i){for(var n=this,o=e.z-1;o>=t;o--){var r=e.parent(n._source.maxzoom);if(!r)return;e=r;var a=String(e.id),s=n._tiles[a];if(s&&s.hasData())return i[a]=!0,s;if(n._cache.has(a))return i[a]=!0,n._cache.get(a)}},t.prototype.updateCacheSize=function(e){var t=Math.ceil(e.width/this._source.tileSize)+1,i=Math.ceil(e.height/this._source.tileSize)+1,n=t*i,o=Math.floor(5*n),r="number"==typeof this._maxTileCacheSize?Math.min(this._maxTileCacheSize,o):o;this._cache.setMaxSize(r)},t.prototype.update=function(e){var i=this;if(this.transform=e,this._sourceLoaded&&!this._paused){this.updateCacheSize(e),this._coveredTiles={};var n;this.used?this._source.coord?n=e.getVisibleWrappedCoordinates(this._source.coord):(n=e.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(n=n.filter(function(e){return i._source.hasTile(e)}))):n=[];var r=(this._source.roundZoom?Math.round:Math.floor)(this.getZoom(e)),a=Math.max(r-t.maxOverzooming,this._source.minzoom),s=Math.max(r+t.maxUnderzooming,this._source.minzoom),u=this._updateRetainedTiles(n,r),c={};if(o(this._source.type))for(var f=R()(u),d=0;d<f.length;d++){var h=f[d],m=l.fromID(+h),y=i._tiles[h];if(y&&(void 0===y.fadeEndTime||y.fadeEndTime>=Date.now())){i._findLoadedChildren(m,s,u)&&(u[h]=!0);var v=i.findLoadedParent(m,a,c);v&&i._addTile(v.coord)}}var g;for(g in c)u[g]||(i._coveredTiles[g]=!0);for(g in c)u[g]=!0;for(var _=p.keysDifference(this._tiles,u),b=0;b<_.length;b++)i._removeTile(_[b])}},t.prototype._updateRetainedTiles=function(e,i){var n,o,r,a,s=this,l={},u={},c=Math.max(i-t.maxOverzooming,this._source.minzoom);for(n=0;n<e.length;n++){o=e[n],r=s._addTile(o);var p=!1;if(r.hasData())l[o.id]=!0;else{if(p=r.wasRequested(),l[o.id]=!0,a=!0,i+1>s._source.maxzoom){var f=o.children(s._source.maxzoom)[0],d=s.getTile(f);d&&d.hasData()?l[f.id]=!0:a=!1}else for(var h=o.children(s._source.maxzoom),m=0;m<h.length;m++){var y=h[m],v=y?s.getTile(y):null;v&&v.hasData()?l[y.id]=!0:a=!1}if(!a)for(var g=i-1;g>=c;--g){var _=o.scaledTo(g,s._source.maxzoom);if(u[_.id])break;if(u[_.id]=!0,r=s.getTile(_),!r&&p&&(r=s._addTile(_)),r&&(l[_.id]=!0,p=r.wasRequested(),r.hasData()))break}}}return l},t.prototype._addTile=function(e){var t=this._tiles[e.id];if(t)return t;(t=this._cache.getAndRemove(e.id))&&(this._updatePlacement(),this.map&&t.added(this.map.painter.crossTileSymbolIndex),this._cacheTimers[e.id]&&(clearTimeout(this._cacheTimers[e.id]),delete this._cacheTimers[e.id],this._setTileReloadTimer(e.id,t)));var i=Boolean(t);if(!i){var n=e.z,o=n>this._source.maxzoom?Math.pow(2,n-this._source.maxzoom):1;t=new a(e,this._source.tileSize*o,this._source.maxzoom),this._loadTile(t,this._tileLoaded.bind(this,t,e.id,t.state))}return t?(t.uses++,this._tiles[e.id]=t,i||this._source.fire("dataloading",{tile:t,coord:t.coord,dataType:"source"}),t):null},t.prototype._setTileReloadTimer=function(e,t){var i=this,n=t.getExpiryTimeout();n&&(this._timers[e]=setTimeout(function(){i._reloadTile(e,"expired"),delete i._timers[e]},n))},t.prototype._setCacheInvalidationTimer=function(e,t){var i=this,n=t.getExpiryTimeout();n&&(this._cacheTimers[e]=setTimeout(function(){i._cache.remove(e),delete i._cacheTimers[e]},n))},t.prototype._removeTile=function(e){var t=this._tiles[e];if(t&&(t.uses--,delete this._tiles[e],this._timers[e]&&(clearTimeout(this._timers[e]),delete this._timers[e]),!(t.uses>0)))if(this._updatePlacement(),this.map&&t.removed(this.map.painter.crossTileSymbolIndex),t.hasData()){t.coord=t.coord.wrapped();var i=t.coord.id;this._cache.add(i,t),this._setCacheInvalidationTimer(i,t)}else t.aborted=!0,this._abortTile(t),this._unloadTile(t)},t.prototype._updatePlacement=function(){this._needsFullPlacement=!0},t.prototype.clearTiles=function(){var e=this;this._shouldReloadOnResume=!1,this._paused=!1;for(var t in e._tiles)e._removeTile(t);this._cache.reset()},t.prototype.tilesIn=function(e){for(var t=this,i=[],o=this.getIds(),r=1/0,a=1/0,s=-1/0,u=-1/0,p=e[0].zoom,d=0;d<e.length;d++){var h=e[d];r=Math.min(r,h.column),a=Math.min(a,h.row),s=Math.max(s,h.column),u=Math.max(u,h.row)}for(var m=0;m<o.length;m++){var y=t._tiles[o[m]],v=l.fromID(o[m]),g=[n(v,y.sourceMaxZoom,new c(r,a,p)),n(v,y.sourceMaxZoom,new c(s,u,p))];if(g[0].x<f&&g[0].y<f&&g[1].x>=0&&g[1].y>=0){for(var _=[],b=0;b<e.length;b++)_.push(n(v,y.sourceMaxZoom,e[b]));i.push({tile:y,coord:v,queryGeometry:[_],scale:Math.pow(2,t.transform.zoom-y.coord.z)})}}return i},t.prototype.commitPlacement=function(e,t){var i=this;this._needsFullPlacement=!1;for(var n=this.getIds(),o=0;o<n.length;o++)i.getTileByID(n[o]).commitPlacement(e,t,i.transform.angle)},t.prototype.getVisibleCoordinates=function(){for(var e=this,t=this.getRenderableIds().map(l.fromID),i=0,n=t;i<n.length;i+=1){var o=n[i];o.posMatrix=e.transform.calculatePosMatrix(o,e._source.maxzoom)}return t},t.prototype.hasTransition=function(){var e=this;if(this._source.hasTransition())return!0;if(o(this._source.type))for(var t in e._tiles){var i=e._tiles[t];if(void 0!==i.fadeEndTime&&i.fadeEndTime>=Date.now())return!0}return!1},t}(s);h.maxOverzooming=10,h.maxUnderzooming=3,t.exports=h},{"../data/extent":58,"../geo/coordinate":67,"../util/evented":253,"../util/lru_cache":259,"../util/util":266,"./source":108,"./tile":110,"./tile_coord":112,"@mapbox/point-geometry":2}],110:[function(e,t,i){var n=e("../util/util"),o=e("../data/bucket").deserialize,r=e("../data/bucket/symbol_bucket"),a=e("../data/feature_index"),s=e("@mapbox/vector-tile"),l=e("pbf"),u=e("../util/vectortile_to_geojson"),c=e("../style-spec/feature_filter"),p=(e("../symbol/collision_index"),e("../symbol/collision_box")),f=e("../data/raster_bounds_array"),d=e("./tile_coord"),h=e("../data/extent"),m=e("@mapbox/point-geometry"),y=e("../gl/vertex_buffer"),v=e("../gl/index_buffer"),g=e("../render/texture"),_=e("../data/segment"),b=_.SegmentVector,x=e("../data/index_array_type"),w=x.TriangleIndexArray,z=e("../symbol/projection"),A=e("../symbol/symbol_placement"),T=A.performSymbolPlacement,k=A.updateOpacities,S=e("../source/pixels_to_tile_units"),E=function(e,t,i){this.coord=e,this.uid=n.uniqueId(),this.uses=0,this.tileSize=t,this.sourceMaxZoom=i,this.buckets={},this.expirationTime=null,this.expiredRequestCount=0,this.state="loading"};E.prototype.registerFadeDuration=function(e){var t=e+this.timeAdded;t<Date.now()||this.fadeEndTime&&t<this.fadeEndTime||(this.fadeEndTime=t)},E.prototype.wasRequested=function(){return"errored"===this.state||"loaded"===this.state||"reloading"===this.state},E.prototype.loadVectorData=function(e,t){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",!e)return void(this.collisionBoxArray=new p);e.rawTileData&&(this.rawTileData=e.rawTileData),this.collisionBoxArray=new p(e.collisionBoxArray),this.featureIndex=a.deserialize(e.featureIndex,this.rawTileData),this.buckets=o(e.buckets,t.style),e.iconAtlasImage&&(this.iconAtlasImage=e.iconAtlasImage),e.glyphAtlasImage&&(this.glyphAtlasImage=e.glyphAtlasImage),e.iconAtlasImage&&(this.iconAtlasImage=e.iconAtlasImage),e.glyphAtlasImage&&(this.glyphAtlasImage=e.glyphAtlasImage)},E.prototype.unloadVectorData=function(){var e=this;for(var t in e.buckets)e.buckets[t].destroy();this.buckets={},this.iconAtlasTexture&&this.iconAtlasTexture.destroy(),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.collisionBoxArray=null,this.featureIndex=null,this.state="unloaded"},E.prototype.added=function(e){var t=this;for(var i in t.buckets){var n=t.buckets[i];n instanceof r&&e.addTileLayer(i,t.coord,t.sourceMaxZoom,n.symbolInstances)}},E.prototype.removed=function(e){var t=this;for(var i in t.buckets)t.buckets[i]instanceof r&&e.removeTileLayer(i,t.coord,t.sourceMaxZoom)},E.prototype.placeLayer=function(e,t,i,n){var o=this.getBucket(i),a=this.collisionBoxArray;if(o&&o instanceof r&&a){var s=t.transform.calculatePosMatrix(this.coord,this.sourceMaxZoom),l="map"===o.layers[0].layout.get("text-pitch-alignment"),u=h/this.tileSize,c=S(this,1,t.transform.zoom),p=z.getLabelPlaneMatrix(s,l,!0,t.transform,c);T(o,t,e,t.transform.zoom,u,s,p,this.coord.id,n,a)}},E.prototype.commitPlacement=function(e,t,i){var n=this;for(var o in n.buckets){var a=n.buckets[o];a instanceof r&&(k(a,t),a.sortFeatures(i))}this.featureIndex&&this.featureIndex.setCollisionIndex(e)},E.prototype.getBucket=function(e){return this.buckets[e.id]},E.prototype.upload=function(e){var t=this;for(var i in t.buckets){var n=t.buckets[i];n.uploaded||(n.upload(e),n.uploaded=!0)}this.iconAtlasImage&&(this.iconAtlasTexture=new g(e,this.iconAtlasImage,e.RGBA),this.iconAtlasImage=null),this.glyphAtlasImage&&(this.glyphAtlasTexture=new g(e,this.glyphAtlasImage,e.ALPHA),this.glyphAtlasImage=null)},E.prototype.queryRenderedFeatures=function(e,t,i,n,o,r){var a=this;if(!this.featureIndex)return{};var s=0;for(var l in e){var u=a.getBucket(e[l]);u&&(s=Math.max(s,e[l].queryRadius(u)))}return this.featureIndex.query({queryGeometry:t,scale:i,tileSize:this.tileSize,bearing:o,params:n,additionalRadius:s,tileSourceMaxZoom:this.sourceMaxZoom,collisionBoxArray:this.collisionBoxArray,sourceID:r},e)},E.prototype.querySourceFeatures=function(e,t){var i=this;if(this.rawTileData){this.vtLayers||(this.vtLayers=new s.VectorTile(new l(this.rawTileData)).layers);var n=t?t.sourceLayer:"",o=this.vtLayers._geojsonTileLayer||this.vtLayers[n];if(o)for(var r=c(t&&t.filter),a={z:this.coord.z,x:this.coord.x,y:this.coord.y},p=0;p<o.length;p++){var f=o.feature(p);if(r({zoom:i.coord.z},f)){var d=new u(f,i.coord.z,i.coord.x,i.coord.y);d.tile=a,e.push(d)}}}},E.prototype.clearMask=function(){this.segments&&(this.segments.destroy(),delete this.segments),this.maskedBoundsBuffer&&(this.maskedBoundsBuffer.destroy(),delete this.maskedBoundsBuffer),this.maskedIndexBuffer&&(this.maskedIndexBuffer.destroy(),delete this.maskedIndexBuffer)},E.prototype.setMask=function(e,t){var i=this;if(!n.deepEqual(this.mask,e)&&(this.mask=e,this.clearMask(),!n.deepEqual(e,{0:!0}))){var o=new f,r=new w;this.segments=new b,this.segments.prepareSegment(0,o,r);for(var a=R()(e),s=0;s<a.length;s++){var l=d.fromID(+a[s]),u=h>>l.z,c=new m(l.x*u,l.y*u),p=new m(c.x+u,c.y+u),g=i.segments.prepareSegment(4,o,r);o.emplaceBack(c.x,c.y,c.x,c.y),o.emplaceBack(p.x,c.y,p.x,c.y),o.emplaceBack(c.x,p.y,c.x,p.y),o.emplaceBack(p.x,p.y,p.x,p.y);var _=g.vertexLength;r.emplaceBack(_,_+1,_+2),r.emplaceBack(_+1,_+2,_+3),g.vertexLength+=4,g.primitiveLength+=2}this.maskedBoundsBuffer=new y(t,o),this.maskedIndexBuffer=new v(t,r)}},E.prototype.hasData=function(){return"loaded"===this.state||"reloading"===this.state||"expired"===this.state},E.prototype.setExpiryData=function(e){var t=this.expirationTime;if(e.cacheControl){var i=n.parseCacheControl(e.cacheControl);i["max-age"]&&(this.expirationTime=Date.now()+1e3*i["max-age"])}else e.expires&&(this.expirationTime=new Date(e.expires).getTime());if(this.expirationTime){var o=Date.now(),r=!1;if(this.expirationTime>o)r=!1;else if(t)if(this.expirationTime<t)r=!0;else{var a=this.expirationTime-t;a?this.expirationTime=o+Math.max(a,3e4):r=!0}else r=!0;r?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},E.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-(new Date).getTime(),Math.pow(2,31)-1)},t.exports=E},{"../data/bucket":51,"../data/bucket/symbol_bucket":57,"../data/extent":58,"../data/feature_index":59,"../data/index_array_type":60,"../data/raster_bounds_array":64,"../data/segment":65,"../gl/index_buffer":71,"../gl/vertex_buffer":72,"../render/texture":93,"../source/pixels_to_tile_units":104,"../style-spec/feature_filter":145,"../symbol/collision_box":208,"../symbol/collision_index":210,"../symbol/projection":216,"../symbol/symbol_placement":220,"../util/util":266,"../util/vectortile_to_geojson":267,"./tile_coord":112,"@mapbox/point-geometry":2,"@mapbox/vector-tile":6,pbf:38}],111:[function(e,t,i){var n=e("../geo/lng_lat_bounds"),o=e("../util/util").clamp,r=function(e,t,i){this.bounds=n.convert(this.validateBounds(e)),this.minzoom=t||0,this.maxzoom=i||24};r.prototype.validateBounds=function(e){return Array.isArray(e)&&4===e.length?[Math.max(-180,e[0]),Math.max(-90,e[1]),Math.min(180,e[2]),Math.min(90,e[3])]:[-180,-90,180,90]},r.prototype.contains=function(e,t){var i=t?Math.min(e.z,t):e.z,n={minX:Math.floor(this.lngX(this.bounds.getWest(),i)),minY:Math.floor(this.latY(this.bounds.getNorth(),i)),maxX:Math.ceil(this.lngX(this.bounds.getEast(),i)),maxY:Math.ceil(this.latY(this.bounds.getSouth(),i))};return e.x>=n.minX&&e.x<n.maxX&&e.y>=n.minY&&e.y<n.maxY},r.prototype.lngX=function(e,t){return(e+180)*(Math.pow(2,t)/360)},r.prototype.latY=function(e,t){var i=o(Math.sin(Math.PI/180*e),-.9999,.9999),n=Math.pow(2,t)/(2*Math.PI);return Math.pow(2,t-1)+.5*Math.log((1+i)/(1-i))*-n},t.exports=r},{"../geo/lng_lat_bounds":69,"../util/util":266}],112:[function(e,t,i){function n(e,t){if(e.row>t.row){var i=e;e=t,t=i}return{x0:e.column,y0:e.row,x1:t.column,y1:t.row,dx:t.column-e.column,dy:t.row-e.row}}function o(e,t,i,n,o){var r=Math.max(i,Math.floor(t.y0)),a=Math.min(n,Math.ceil(t.y1));if(e.x0===t.x0&&e.y0===t.y0?e.x0+t.dy/e.dy*e.dx<t.x1:e.x1-t.dy/e.dy*e.dx<t.x0){var s=e;e=t,t=s}for(var l=e.dx/e.dy,u=t.dx/t.dy,c=e.dx>0,p=t.dx<0,f=r;f<a;f++){var d=l*Math.max(0,Math.min(e.dy,f+c-e.y0))+e.x0,h=u*Math.max(0,Math.min(t.dy,f+p-t.y0))+t.x0;o(Math.floor(h),Math.ceil(d),f)}}function r(e,t,i,r,a,s){var l,u=n(e,t),c=n(t,i),p=n(i,e);u.dy>c.dy&&(l=u,u=c,c=l),u.dy>p.dy&&(l=u,u=p,p=l),c.dy>p.dy&&(l=c,c=p,p=l),u.dy&&o(p,u,r,a,s),c.dy&&o(p,c,r,a,s)}function a(e,t,i){for(var n,o="",r=e;r>0;r--)n=1<<r-1,o+=(t&n?1:0)+(i&n?2:0);return o}var s=e("@mapbox/whoots-js"),l=e("../geo/coordinate"),u=function(e,t,i,n){(void 0===n||isNaN(n))&&(n=0),this.z=+e,this.x=+t,this.y=+i,this.w=+n,(n*=2)<0&&(n=-1*n-1);var o=1<<this.z;this.id=32*(o*o*n+o*this.y+this.x)+this.z,this.posMatrix=null};u.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y},u.prototype.toCoordinate=function(e){var t=Math.min(this.z,void 0===e?this.z:e),i=Math.pow(2,t),n=this.y,o=this.x+i*this.w;return new l(o,n,t)},u.prototype.url=function(e,t,i){var n=s.getTileBBox(this.x,this.y,this.z),o=a(this.z,this.x,this.y);return e[(this.x+this.y)%e.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(Math.min(this.z,t||this.z))).replace("{x}",String(this.x)).replace("{y}",String("tms"===i?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",o).replace("{bbox-epsg-3857}",n)},u.prototype.parent=function(e){return 0===this.z?null:this.z>e?new u(this.z-1,this.x,this.y,this.w):new u(this.z-1,Math.floor(this.x/2),Math.floor(this.y/2),this.w)},u.prototype.wrapped=function(){return new u(this.z,this.x,this.y,0)},u.prototype.isLessThan=function(e){return this.w<e.w||!(this.w>e.w)&&(this.z<e.z||!(this.z>e.z)&&(this.x<e.x||!(this.x>e.x)&&this.y<e.y))},u.prototype.children=function(e){if(this.z>=e)return[new u(this.z+1,this.x,this.y,this.w)];var t=this.z+1,i=2*this.x,n=2*this.y;return[new u(t,i,n,this.w),new u(t,i+1,n,this.w),new u(t,i,n+1,this.w),new u(t,i+1,n+1,this.w)]},u.prototype.scaledTo=function(e,t){return this.z>t?new u(e,this.x,this.y,this.w):e<=this.z?new u(e,this.x>>this.z-e,this.y>>this.z-e,this.w):new u(e,this.x<<e-this.z,this.y<<e-this.z,this.w)},u.prototype.isChildOf=function(e,t){var i=Math.min(t,e.z),n=Math.min(t,this.z);return 0===e.z||e.z<this.z&&e.x===this.x>>n-i&&e.y===this.y>>n-i},u.cover=function(e,t,i,n){function o(e,t,o){var r,l,c,p;if(o>=0&&o<=a)for(r=e;r<t;r++)l=Math.floor(r/a),c=(r%a+a)%a,0!==l&&!0!==n||(p=new u(i,c,o,l),s[p.id]=p)}void 0===n&&(n=!0);var a=1<<e,s={};return r(t[0],t[1],t[2],0,a,o),r(t[2],t[3],t[0],0,a,o),R()(s).map(function(e){return s[e]})},u.fromID=function(e){var t=e%32,i=1<<t,n=(e-t)/32,o=n%i,r=(n-o)/i%i,a=Math.floor(n/(i*i));return a%2!=0&&(a=-1*a-1),a/=2,new u(t,o,r,a)},t.exports=u},{"../geo/coordinate":67,"@mapbox/whoots-js":10}],113:[function(e,t,i){var n=e("../util/evented"),o=e("../util/util"),r=e("./load_tilejson"),a=e("../util/mapbox").normalizeTileURL,s=e("./tile_bounds"),l=e("../util/ajax").ResourceType,u=e("../util/browser"),c=function(e){function t(t,i,n,r){if(e.call(this),this.id=t,this.dispatcher=n,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,o.extend(this,o.pick(i,["url","scheme","tileSize"])),this._options=o.extend({type:"vector"},i),512!==this.tileSize)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(r)}return e&&(t.__proto__=e),t.prototype=F()(e&&e.prototype),t.prototype.constructor=t,t.prototype.load=function(){var e=this;this.fire("dataloading",{dataType:"source"}),r(this._options,this.map._transformRequest,function(t,i){t?e.fire("error",t):i&&(o.extend(e,i),i.bounds&&(e.tileBounds=new s(i.bounds,e.minzoom,e.maxzoom)),e.fire("data",{dataType:"source",sourceDataType:"metadata"}),e.fire("data",{dataType:"source",sourceDataType:"content"}))})},t.prototype.hasTile=function(e){return!this.tileBounds||this.tileBounds.contains(e,this.maxzoom)},t.prototype.onAdd=function(e){this.map=e,this.load()},t.prototype.serialize=function(){return o.extend({},this._options)},t.prototype.loadTile=function(e,t){function i(i,n){return e.aborted?t(null):i?t(i):(this.map._refreshExpiredTiles&&e.setExpiryData(n),e.loadVectorData(n,this.map.painter),t(null),void(e.reloadCallback&&(this.loadTile(e,e.reloadCallback),e.reloadCallback=null)))}var n=e.coord.z>this.maxzoom?Math.pow(2,e.coord.z-this.maxzoom):1,o=a(e.coord.url(this.tiles,this.maxzoom,this.scheme),this.url),r={request:this.map._transformRequest(o,l.Tile),uid:e.uid,coord:e.coord,zoom:e.coord.z,tileSize:this.tileSize*n,type:this.type,source:this.id,pixelRatio:u.devicePixelRatio,overscaling:n,showCollisionBoxes:this.map.showCollisionBoxes};void 0===e.workerID||"expired"===e.state?e.workerID=this.dispatcher.send("loadTile",r,i.bind(this)):"loading"===e.state?e.reloadCallback=t:this.dispatcher.send("reloadTile",r,i.bind(this),e.workerID)},t.prototype.abortTile=function(e){this.dispatcher.send("abortTile",{uid:e.uid,type:this.type,source:this.id},void 0,e.workerID)},t.prototype.unloadTile=function(e){e.unloadVectorData(),this.dispatcher.send("removeTile",{uid:e.uid,type:this.type,source:this.id},void 0,e.workerID)},t.prototype.hasTransition=function(){return!1},t}(n);t.exports=c},{"../util/ajax":244,"../util/browser":245,"../util/evented":253,"../util/mapbox":260,"../util/util":266,"./load_tilejson":103,"./tile_bounds":111}],114:[function(e,t,i){function n(e,t){var i=o.getArrayBuffer(e.request,function(e,i){e?t(e):i&&t(null,{vectorTile:new r.VectorTile(new a(i.data)),rawData:i.data,cacheControl:i.cacheControl,expires:i.expires})});return function(){i.abort(),t()}}var o=e("../util/ajax"),r=e("@mapbox/vector-tile"),a=e("pbf"),s=e("./worker_tile"),l=e("../util/util"),u=function(e,t,i){this.actor=e,this.layerIndex=t,this.loadVectorData=i||n,this.loading={},this.loaded={}};u.prototype.loadTile=function(e,t){var i=this,n=e.source,o=e.uid;this.loading[n]||(this.loading[n]={});var r=this.loading[n][o]=new s(e);r.abort=this.loadVectorData(e,function(e,a){if(delete i.loading[n][o],e||!a)return t(e);var s=a.rawData,u={};a.expires&&(u.expires=a.expires),a.cacheControl&&(u.cacheControl=a.cacheControl),r.vectorTile=a.vectorTile,r.parse(a.vectorTile,i.layerIndex,i.actor,function(e,i,n){if(e||!i)return t(e);t(null,l.extend({rawTileData:s},i,u),n)}),i.loaded[n]=i.loaded[n]||{},i.loaded[n][o]=r})},u.prototype.reloadTile=function(e,t){function i(e,i){if(this.reloadCallback){var n=this.reloadCallback;delete this.reloadCallback,this.parse(this.vectorTile,r.layerIndex,r.actor,n)}t(e,i)}var n=this.loaded[e.source],o=e.uid,r=this;if(n&&n[o]){var a=n[o];a.showCollisionBoxes=e.showCollisionBoxes,"parsing"===a.status?a.reloadCallback=t:"done"===a.status&&a.parse(a.vectorTile,this.layerIndex,this.actor,i.bind(a))}},u.prototype.abortTile=function(e,t){var i=this.loading[e.source],n=e.uid;i&&i[n]&&i[n].abort&&(i[n].abort(),delete i[n]),t()},u.prototype.removeTile=function(e,t){var i=this.loaded[e.source],n=e.uid;i&&i[n]&&delete i[n],t()},t.exports=u},{"../util/ajax":244,"../util/util":266,"./worker_tile":117,"@mapbox/vector-tile":6,pbf:38}],115:[function(e,t,i){var n=e("../util/ajax"),o=e("./image_source"),r=function(e){function t(t,i,n,o){e.call(this,t,i,n,o),this.roundZoom=!0,this.type="video",this.options=i}return e&&(t.__proto__=e),t.prototype=F()(e&&e.prototype),t.prototype.constructor=t,t.prototype.load=function(){var e=this,t=this.options;this.urls=t.urls,n.getVideo(t.urls,function(t,i){t?e.fire("error",{error:t}):i&&(e.video=i,e.video.loop=!0,e.video.addEventListener("playing",function(){e.map._rerender()}),e.map&&e.video.play(),e._finishLoading())})},t.prototype.getVideo=function(){return this.video},t.prototype.onAdd=function(e){this.map||(this.map=e,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},t.prototype.prepare=function(){0===R()(this.tiles).length||this.video.readyState<2||this._prepareImage(this.map.painter.gl,this.video)},t.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},t.prototype.hasTransition=function(){return this.video&&!this.video.paused},t}(o);t.exports=r},{"../util/ajax":244,"./image_source":102}],116:[function(e,t,i){var n=e("../util/actor"),o=e("../style/style_layer_index"),r=e("./vector_tile_worker_source"),a=e("./geojson_worker_source"),s=e("./rtl_text_plugin"),l=function(e){var t=this;this.self=e,this.actor=new n(e,this),this.layerIndexes={},this.workerSourceTypes={vector:r,geojson:a},this.workerSources={},this.self.registerWorkerSource=function(e,i){if(t.workerSourceTypes[e])throw new Error('Worker source with name "'+e+'" already registered.');t.workerSourceTypes[e]=i},this.self.registerRTLTextPlugin=function(e){if(s.applyArabicShaping||s.processBidirectionalText)throw new Error("RTL text plugin already registered.");s.applyArabicShaping=e.applyArabicShaping,s.processBidirectionalText=e.processBidirectionalText}};l.prototype.setLayers=function(e,t,i){this.getLayerIndex(e).replace(t),i()},l.prototype.updateLayers=function(e,t,i){this.getLayerIndex(e).update(t.layers,t.removedIds),i()},l.prototype.loadTile=function(e,t,i){this.getWorkerSource(e,t.type).loadTile(t,i)},l.prototype.reloadTile=function(e,t,i){this.getWorkerSource(e,t.type).reloadTile(t,i)},l.prototype.abortTile=function(e,t,i){this.getWorkerSource(e,t.type).abortTile(t,i)},l.prototype.removeTile=function(e,t,i){this.getWorkerSource(e,t.type).removeTile(t,i)},l.prototype.removeSource=function(e,t,i){var n=this.getWorkerSource(e,t.type);void 0!==n.removeSource?n.removeSource(t,i):i()},l.prototype.loadWorkerSource=function(e,t,i){try{this.self.importScripts(t.url),i()}catch(e){i(e)}},l.prototype.loadRTLTextPlugin=function(e,t,i){try{s.applyArabicShaping||s.processBidirectionalText||(this.self.importScripts(t),s.applyArabicShaping&&s.processBidirectionalText||i(new Error("RTL Text Plugin failed to import scripts from "+t)))}catch(e){i(e)}},l.prototype.getLayerIndex=function(e){var t=this.layerIndexes[e];return t||(t=this.layerIndexes[e]=new o),t},l.prototype.getWorkerSource=function(e,t){var i=this;if(this.workerSources[e]||(this.workerSources[e]={}),!this.workerSources[e][t]){var n={send:function(t,n,o,r){i.actor.send(t,n,o,r,e)}};this.workerSources[e][t]=new this.workerSourceTypes[t](n,this.getLayerIndex(e))}return this.workerSources[e][t]},t.exports=function(e){return new l(e)}},{"../style/style_layer_index":203,"../util/actor":243,"./geojson_worker_source":100,"./rtl_text_plugin":107,"./vector_tile_worker_source":114}],117:[function(e,t,i){function n(e,t){for(var i=0,n=e;i<n.length;i+=1)n[i].recalculate({zoom:t,now:Number.MAX_VALUE,defaultFadeDuration:0,zoomHistory:{lastIntegerZoom:0,lastIntegerZoomTime:0,lastZoom:0}})}function o(e,t){return e.filter(function(e){return!e.isEmpty()}).map(function(e){return e.serialize(t)})}var r=e("../data/feature_index"),a=e("../symbol/symbol_layout"),s=a.performSymbolLayout,l=e("../symbol/collision_box"),u=e("../util/dictionary_coder"),c=e("../data/bucket/symbol_bucket"),p=e("../util/util"),f=e("../render/image_atlas"),d=f.makeImageAtlas,h=e("../render/glyph_atlas"),m=h.makeGlyphAtlas,y=function(e){this.coord=e.coord,this.uid=e.uid,this.zoom=e.zoom,this.pixelRatio=e.pixelRatio,this.tileSize=e.tileSize,this.source=e.source,this.overscaling=e.overscaling,this.showCollisionBoxes=e.showCollisionBoxes};y.prototype.parse=function(e,t,i,a){function f(){var e=this;if(I)return a(I);if(L&&P){var t=m(L),i=d(P);for(var r in g){var l=g[r];l instanceof c&&(n(l.layers,e.zoom),s(l,L,t.positions,P,i.positions,e.showCollisionBoxes))}this.status="done";var u=[t.image.data.buffer,i.image.data.buffer];a(null,{buckets:o(p.values(g),u),featureIndex:v.serialize(u),collisionBoxArray:this.collisionBoxArray.serialize(),glyphAtlasImage:t.image,iconAtlasImage:i.image},u)}}var h=this;this.status="parsing",this.data=e,this.collisionBoxArray=new l;var y=new u(R()(e.layers).sort()),v=new r(this.coord,this.overscaling);v.bucketLayerIDs=[];var g={},_={featureIndex:v,iconDependencies:{},glyphDependencies:{}},b=t.familiesBySource[this.source];for(var x in b){var w=e.layers[x];if(w){1===w.version&&p.warnOnce('Vector tile source "'+h.source+'" layer "'+x+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var z=y.encode(x),A=[],T=0;T<w.length;T++){var k=w.feature(T);A.push({feature:k,index:T,sourceLayerIndex:z})}for(var S=0,E=b[x];S<E.length;S+=1){var C=E[S],M=C[0];M.minzoom&&h.zoom<Math.floor(M.minzoom)||M.maxzoom&&h.zoom>=M.maxzoom||"none"===M.visibility||(n(C,h.zoom),(g[M.id]=M.createBucket({index:v.bucketLayerIDs.length,layers:C,zoom:h.zoom,pixelRatio:h.pixelRatio,overscaling:h.overscaling,collisionBoxArray:h.collisionBoxArray})).populate(A,_),v.bucketLayerIDs.push(C.map(function(e){return e.id})))}}}var I,L,P,D=p.mapObject(_.glyphDependencies,function(e){return R()(e).map(Number)});R()(D).length?i.send("getGlyphs",{uid:this.uid,stacks:D},function(e,t){I||(I=e,L=t,f.call(h))}):L={};var B=R()(_.iconDependencies);B.length?i.send("getImages",{icons:B},function(e,t){I||(I=e,P=t,f.call(h))}):P={},f.call(this)},t.exports=y},{"../data/bucket/symbol_bucket":57,"../data/feature_index":59,"../render/glyph_atlas":84,"../render/image_atlas":86,"../symbol/collision_box":208,"../symbol/symbol_layout":219,"../util/dictionary_coder":250,"../util/util":266}],118:[function(e,t,i){function n(e,t){var i={};for(var n in e)"ref"!==n&&(i[n]=e[n]);return r.forEach(function(e){e in t&&(i[e]=t[e])}),i}function o(e){e=e.slice();for(var t=F()(null),i=0;i<e.length;i++)t[e[i].id]=e[i];for(var o=0;o<e.length;o++)"ref"in e[o]&&(e[o]=n(e[o],t[e[o].ref]));return e}var r=e("./util/ref_properties");t.exports=o},{"./util/ref_properties":155}],119:[function(e,t,i){function n(e,t,i,n){e=e||{},t=t||{};var o;for(o in e)e.hasOwnProperty(o)&&(t.hasOwnProperty(o)||(i.push({command:c.removeSource,args:[o]}),n[o]=!0));for(o in t)t.hasOwnProperty(o)&&(e.hasOwnProperty(o)?u(e[o],t[o])||("geojson"===e[o].type&&"geojson"===t[o].type?i.push({command:c.setGeoJSONSourceData,args:[o,t[o].data]}):(i.push({command:c.removeSource,args:[o]}),i.push({command:c.addSource,args:[o,t[o]]}),n[o]=!0)):i.push({command:c.addSource,args:[o,t[o]]}))}function o(e,t,i,n,o,r){e=e||{},t=t||{};var a;for(a in e)e.hasOwnProperty(a)&&(u(e[a],t[a])||i.push({command:r,args:[n,a,t[a],o]}));for(a in t)t.hasOwnProperty(a)&&!e.hasOwnProperty(a)&&(u(e[a],t[a])||i.push({command:r,args:[n,a,t[a],o]}))}function r(e){return e.id}function a(e,t){return e[t.id]=t,e}function s(e,t,i){e=e||[],t=t||[];var n,s,l,p,f,d,h,m=e.map(r),y=t.map(r),v=e.reduce(a,{}),g=t.reduce(a,{}),_=m.slice(),b=F()(null);for(n=0,s=0;n<m.length;n++)l=m[n],g.hasOwnProperty(l)?s++:(i.push({command:c.removeLayer,args:[l]}),_.splice(_.indexOf(l,s),1));for(n=0,s=0;n<y.length;n++)l=y[y.length-1-n],_[_.length-1-n]!==l&&(v.hasOwnProperty(l)?(i.push({command:c.removeLayer,args:[l]}),_.splice(_.lastIndexOf(l,_.length-s),1)):s++,d=_[_.length-n],i.push({command:c.addLayer,args:[g[l],d]}),_.splice(_.length-n,0,l),b[l]=!0);for(n=0;n<y.length;n++)if(l=y[n],p=v[l],f=g[l],!b[l]&&!u(p,f))if(u(p.source,f.source)&&u(p["source-layer"],f["source-layer"])&&u(p.type,f.type)){o(p.layout,f.layout,i,l,null,c.setLayoutProperty),o(p.paint,f.paint,i,l,null,c.setPaintProperty),u(p.filter,f.filter)||i.push({command:c.setFilter,args:[l,f.filter]}),u(p.minzoom,f.minzoom)&&u(p.maxzoom,f.maxzoom)||i.push({command:c.setLayerZoomRange,args:[l,f.minzoom,f.maxzoom]});for(h in p)p.hasOwnProperty(h)&&"layout"!==h&&"paint"!==h&&"filter"!==h&&"metadata"!==h&&"minzoom"!==h&&"maxzoom"!==h&&(0===h.indexOf("paint.")?o(p[h],f[h],i,l,h.slice(6),c.setPaintProperty):u(p[h],f[h])||i.push({command:c.setLayerProperty,args:[l,h,f[h]]}));for(h in f)f.hasOwnProperty(h)&&!p.hasOwnProperty(h)&&"layout"!==h&&"paint"!==h&&"filter"!==h&&"metadata"!==h&&"minzoom"!==h&&"maxzoom"!==h&&(0===h.indexOf("paint.")?o(p[h],f[h],i,l,h.slice(6),c.setPaintProperty):u(p[h],f[h])||i.push({command:c.setLayerProperty,args:[l,h,f[h]]}))}else i.push({command:c.removeLayer,args:[l]}),d=_[_.lastIndexOf(l)+1],i.push({command:c.addLayer,args:[f,d]})}function l(e,t){if(!e)return[{command:c.setStyle,args:[t]}];var i=[];try{if(!u(e.version,t.version))return[{command:c.setStyle,args:[t]}];u(e.center,t.center)||i.push({command:c.setCenter,args:[t.center]}),u(e.zoom,t.zoom)||i.push({command:c.setZoom,args:[t.zoom]}),u(e.bearing,t.bearing)||i.push({command:c.setBearing,args:[t.bearing]}),u(e.pitch,t.pitch)||i.push({command:c.setPitch,args:[t.pitch]}),u(e.sprite,t.sprite)||i.push({command:c.setSprite,args:[t.sprite]}),u(e.glyphs,t.glyphs)||i.push({command:c.setGlyphs,args:[t.glyphs]}),u(e.transition,t.transition)||i.push({command:c.setTransition,args:[t.transition]}),u(e.light,t.light)||i.push({command:c.setLight,args:[t.light]});var o={},r=[];n(e.sources,t.sources,r,o);var a=[];e.layers&&e.layers.forEach(function(e){o[e.source]?i.push({command:c.removeLayer,args:[e.id]}):a.push(e)}),i=i.concat(r),s(a,t.layers,i)}catch(e){console.warn("Unable to compute style diff:",e),i=[{command:c.setStyle,args:[t]}]}return i}var u=e("lodash.isequal"),c={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};t.exports=l,t.exports.operations=c},{"lodash.isequal":34}],120:[function(e,t,i){function n(e,t){for(var i=[],n=arguments.length-2;n-- >0;)i[n]=arguments[n+2];this.message=(e?e+": ":"")+o.apply(o,i),null!==t&&void 0!==t&&t.__line__&&(this.line=t.__line__)}var o=e("util").format;t.exports=n},{util:45}],121:[function(e,t,i){function n(e){return{type:e}}function o(e){return Array.isArray(e)?"("+e.map(a).join(", ")+")":"("+a(e.type)+"...)"}var r=e("./types"),a=r.toString,s=e("./parsing_context"),l=(e("./evaluation_context"),function(e,t,i,n){this.name=e,this.type=t,this._evaluate=i,this.args=n});l.prototype.evaluate=function(e){return this._evaluate(e,this.args)},l.prototype.eachChild=function(e){this.args.forEach(e)},l.parse=function(e,t){var i=e[0],n=l.definitions[i];if(!n)return t.error('Unknown expression "'+i+'". If you wanted a literal array, use ["literal", [...]].',0);for(var r=Array.isArray(n)?n[0]:n.type,u=Array.isArray(n)?[[n[1],n[2]]]:n.overloads,c=u.filter(function(t){var i=t[0];return!Array.isArray(i)||i.length===e.length-1}),p=[],f=1;f<e.length;f++){var d=e[f],h=void 0;if(1===c.length){var m=c[0][0];h=Array.isArray(m)?m[f-1]:m.type}var y=t.parse(d,1+p.length,h);if(!y)return null;p.push(y)}for(var v=null,g=0,_=c;g<_.length;g+=1){var b=_[g],x=b[0],w=b[1];if(v=new s(t.definitions,t.path,null,t.scope),Array.isArray(x)&&x.length!==p.length)v.error("Expected "+x.length+" arguments, but found "+p.length+" instead.");else{for(var z=0;z<p.length;z++){var A=Array.isArray(x)?x[z]:x.type,T=p[z];v.concat(z+1).checkSubtype(A,T.type)}if(0===v.errors.length)return new l(i,r,w,p)}}if(1===c.length)t.errors.push.apply(t.errors,v.errors);else{var k=c.length?c:u,S=k.map(function(e){return o(e[0])}).join(" | "),E=p.map(function(e){return a(e.type)}).join(", ");t.error("Expected arguments of type "+S+", but found ("+E+") instead.")}return null},l.register=function(e,t){l.definitions=t;for(var i in t)e[i]=l},t.exports={CompoundExpression:l,varargs:n}},{"./evaluation_context":135,"./parsing_context":138,"./types":143}],122:[function(e,t,i){var n=e("../types"),o=n.toString,r=n.array,a=n.ValueType,s=n.StringType,l=n.NumberType,u=n.BooleanType,c=n.checkSubtype,p=e("../values"),f=p.typeOf,d=e("../runtime_error"),h={string:s,number:l,boolean:u},m=function(e,t){this.type=e,this.input=t};m.parse=function(e,t){if(e.length<2||e.length>4)return t.error("Expected 1, 2, or 3 arguments, but found "+(e.length-1)+" instead.");var i,n;if(e.length>2){var o=e[1];if("string"!=typeof o||!(o in h))return t.error('The item type argument of "array" must be one of string, number, boolean',1);i=h[o]}else i=a;if(e.length>3){if("number"!=typeof e[2]||e[2]<0||e[2]!==Math.floor(e[2]))return t.error('The length argument to "array" must be a positive integer literal',2);n=e[2]}var s=r(i,n),l=t.parse(e[e.length-1],e.length-1,a);return l?new m(s,l):null},m.prototype.evaluate=function(e){var t=this.input.evaluate(e);if(c(this.type,f(t)))throw new d("Expected value to be of type "+o(this.type)+", but found "+o(f(t))+" instead.");return t},m.prototype.eachChild=function(e){e(this.input)},t.exports=m},{"../runtime_error":140,"../types":143,"../values":144}],123:[function(e,t,i){var n=e("../types"),o=n.ObjectType,r=n.ValueType,a=n.StringType,s=n.NumberType,l=n.BooleanType,u=e("../runtime_error"),c=e("../types"),p=c.checkSubtype,f=c.toString,d=e("../values"),h=d.typeOf,m={string:a,number:s,boolean:l,object:o},y=function(e,t){this.type=e,this.args=t};y.parse=function(e,t){if(e.length<2)return t.error("Expected at least one argument.");for(var i=e[0],n=m[i],o=[],a=1;a<e.length;a++){var s=t.parse(e[a],a,r);if(!s)return null;o.push(s)}return new y(n,o)},y.prototype.evaluate=function(e){for(var t=this,i=0;i<this.args.length;i++){var n=t.args[i].evaluate(e);if(!p(t.type,h(n)))return n;if(i===t.args.length-1)throw new u("Expected value to be of type "+f(t.type)+", but found "+f(h(n))+" instead.")}return null},y.prototype.eachChild=function(e){this.args.forEach(e)},t.exports=y},{"../runtime_error":140,"../types":143,"../values":144}],124:[function(e,t,i){var n=e("../types"),o=n.array,r=n.ValueType,a=n.NumberType,s=e("../runtime_error"),l=function(e,t,i){this.type=e,this.index=t,this.input=i};l.parse=function(e,t){if(3!==e.length)return t.error("Expected 2 arguments, but found "+(e.length-1)+" instead.");var i=t.parse(e[1],1,a),n=t.parse(e[2],2,o(t.expectedType||r));if(!i||!n)return null;var s=n.type;return new l(s.itemType,i,n)},l.prototype.evaluate=function(e){var t=this.index.evaluate(e),i=this.input.evaluate(e);if(t<0||t>=i.length)throw new s("Array index out of bounds: "+t+" > "+i.length+".");if(t!==Math.floor(t))throw new s("Array index must be an integer, but found "+t+" instead.");return i[t]},l.prototype.eachChild=function(e){e(this.index),e(this.input)},t.exports=l},{"../runtime_error":140,"../types":143}],125:[function(e,t,i){var n=e("../types"),o=n.BooleanType,r=function(e,t,i){this.type=e,this.branches=t,this.otherwise=i};r.parse=function(e,t){if(e.length<4)return t.error("Expected at least 3 arguments, but found only "+(e.length-1)+".");if(e.length%2!=0)return t.error("Expected an odd number of arguments.");var i;t.expectedType&&"value"!==t.expectedType.kind&&(i=t.expectedType);for(var n=[],a=1;a<e.length-1;a+=2){var s=t.parse(e[a],a,o);if(!s)return null;var l=t.parse(e[a+1],a+1,i);if(!l)return null;n.push([s,l]),i=i||l.type}var u=t.parse(e[e.length-1],e.length-1,i);return u?new r(i,n,u):null},r.prototype.evaluate=function(e){for(var t=this,i=0,n=t.branches;i<n.length;i+=1){var o=n[i],r=o[0],a=o[1];if(r.evaluate(e))return a.evaluate(e)}return this.otherwise.evaluate(e)},r.prototype.eachChild=function(e){for(var t=this,i=0,n=t.branches;i<n.length;i+=1){var o=n[i],r=o[0],a=o[1];e(r),e(a)}e(this.otherwise)},t.exports=r},{"../types":143}],126:[function(e,t,i){var n=function(e,t){this.type=e,this.args=t};n.parse=function(e,t){if(e.length<2)return t.error("Expectected at least one argument.");var i=null;t.expectedType&&"value"!==t.expectedType.kind&&(i=t.expectedType);for(var o=[],r=0,a=e.slice(1);r<a.length;r+=1){var s=a[r],l=t.parse(s,1+o.length,i);if(!l)return null;i=i||l.type,o.push(l)}return new n(i,o)},n.prototype.evaluate=function(e){for(var t=this,i=null,n=0,o=t.args;n<o.length&&null===(i=o[n].evaluate(e));n+=1);return i},n.prototype.eachChild=function(e){this.args.forEach(e)},t.exports=n},{}],127:[function(e,t,i){var n=e("../types"),o=n.ColorType,r=n.ValueType,a=n.NumberType,s=e("../values"),l=s.Color,u=s.validateRGBA,c=e("../runtime_error"),p={"to-number":a,"to-color":o},f=function(e,t){this.type=e,this.args=t};f.parse=function(e,t){if(e.length<2)return t.error("Expected at least one argument.");for(var i=e[0],n=p[i],o=[],a=1;a<e.length;a++){var s=t.parse(e[a],a,r);if(!s)return null;o.push(s)}return new f(n,o)},f.prototype.evaluate=function(e){var t=this;if("color"===this.type.kind){for(var i,n,o=0,r=t.args;o<r.length;o+=1)if(i=r[o].evaluate(e),n=null,"string"==typeof i){var a=e.parseColor(i);if(a)return a}else if(Array.isArray(i)&&!(n=i.length<3||i.length>4?"Invalid rbga value "+D()(i)+": expected an array containing either three or four numeric values.":u(i[0],i[1],i[2],i[3])))return new l(i[0]/255,i[1]/255,i[2]/255,i[3]);throw new c(n||"Could not parse color from value '"+("string"==typeof i?i:D()(i))+"'")}for(var s=null,p=0,f=t.args;p<f.length;p+=1)if(null!==(s=f[p].evaluate(e))){var d=Number(s);if(!isNaN(d))return d}throw new c("Could not convert "+D()(s)+" to number.")},f.prototype.eachChild=function(e){this.args.forEach(e)},t.exports=f},{"../runtime_error":140,"../types":143,"../values":144}],128:[function(e,t,i){function n(e,t){var i=t[0],n=t[1],o=t[2],r=t[3];i=i.evaluate(e),n=n.evaluate(e),o=o.evaluate(e),r=r&&r.evaluate(e);var a=C(i,n,o,r);if(a)throw new R(a);return new E(i/255,n/255,o/255,r)}function o(e,t){return e in t}function r(e,t){var i=t[e];return void 0===i?null:i}function a(e,t){return t[0].evaluate(e).length}function l(e,t){var i=t[0],n=t[1];return i.evaluate(e)===n.evaluate(e)}function c(e,t){var i=t[0],n=t[1];return i.evaluate(e)!==n.evaluate(e)}function p(e,t){var i=t[0],n=t[1];return i.evaluate(e)<n.evaluate(e)}function f(e,t){var i=t[0],n=t[1];return i.evaluate(e)>n.evaluate(e)}function d(e,t){var i=t[0],n=t[1];return i.evaluate(e)<=n.evaluate(e)}function h(e,t){var i=t[0],n=t[1];return i.evaluate(e)>=n.evaluate(e)}var m=e("../types"),y=m.NullType,v=m.NumberType,g=m.StringType,_=m.BooleanType,b=m.ColorType,x=m.ObjectType,w=m.ValueType,z=m.ErrorType,A=m.array,T=m.toString,k=e("../values"),S=k.typeOf,E=k.Color,C=k.validateRGBA,M=e("../compound_expression"),I=M.CompoundExpression,L=M.varargs,R=e("../runtime_error"),P=e("./let"),B=e("./var"),F=e("./literal"),j=e("./assertion"),N=e("./array"),V=e("./coercion"),q=e("./at"),U=e("./match"),Z=e("./case"),W=e("./step"),G=e("./interpolate"),H=e("./coalesce"),X={let:P,var:B,literal:F,string:j,number:j,boolean:j,object:j,array:N,"to-number":V,"to-color":V,at:q,case:Z,match:U,coalesce:H,step:W,interpolate:G};I.register(X,{error:[z,[g],function(e,t){var i=t[0];throw new R(i.evaluate(e))}],typeof:[g,[w],function(e,t){var i=t[0];return T(S(i.evaluate(e)))}],"to-string":[g,[w],function(e,t){var i=t[0];i=i.evaluate(e);var n=void 0===i?"undefined":O()(i);return null===i||"string"===n||"number"===n||"boolean"===n?String(i):i instanceof E?"rgba("+255*i.r+","+255*i.g+","+255*i.b+","+i.a+")":D()(i)}],"to-boolean":[_,[w],function(e,t){var i=t[0];return Boolean(i.evaluate(e))}],"to-rgba":[A(v,4),[b],function(e,t){var i=t[0],n=i.evaluate(e);return[n.r,n.g,n.b,n.a]}],rgb:[b,[v,v,v],n],rgba:[b,[v,v,v,v],n],length:{type:v,overloads:[[[g],a],[[A(w)],a]]},has:{type:_,overloads:[[[g],function(e,t){return o(t[0].evaluate(e),e.properties())}],[[g,x],function(e,t){var i=t[0],n=t[1];return o(i.evaluate(e),n.evaluate(e))}]]},get:{type:w,overloads:[[[g],function(e,t){return r(t[0].evaluate(e),e.properties())}],[[g,x],function(e,t){var i=t[0],n=t[1];return r(i.evaluate(e),n.evaluate(e))}]]},properties:[x,[],function(e){return e.properties()}],"geometry-type":[g,[],function(e){return e.geometryType()}],id:[w,[],function(e){return e.id()}],zoom:[v,[],function(e){return e.globals.zoom}],"heatmap-density":[v,[],function(e){return e.globals.heatmapDensity||0}],"+":[v,L(v),function(e,t){for(var i=0,n=0,o=t;n<o.length;n+=1)i+=o[n].evaluate(e);return i}],"*":[v,L(v),function(e,t){for(var i=1,n=0,o=t;n<o.length;n+=1)i*=o[n].evaluate(e);return i}],"-":{type:v,overloads:[[[v,v],function(e,t){var i=t[0],n=t[1];return i.evaluate(e)-n.evaluate(e)}],[[v],function(e,t){return-t[0].evaluate(e)}]]},"/":[v,[v,v],function(e,t){var i=t[0],n=t[1];return i.evaluate(e)/n.evaluate(e)}],"%":[v,[v,v],function(e,t){var i=t[0],n=t[1];return i.evaluate(e)%n.evaluate(e)}],ln2:[v,[],function(){return Math.LN2}],pi:[v,[],function(){return Math.PI}],e:[v,[],function(){return Math.E}],"^":[v,[v,v],function(e,t){var i=t[0],n=t[1];return Math.pow(i.evaluate(e),n.evaluate(e))}],sqrt:[v,[v],function(e,t){var i=t[0];return Math.sqrt(i.evaluate(e))}],log10:[v,[v],function(e,t){var i=t[0];return u()(i.evaluate(e))}],ln:[v,[v],function(e,t){var i=t[0];return Math.log(i.evaluate(e))}],log2:[v,[v],function(e,t){var i=t[0];return s()(i.evaluate(e))}],sin:[v,[v],function(e,t){var i=t[0];return Math.sin(i.evaluate(e))}],cos:[v,[v],function(e,t){var i=t[0];return Math.cos(i.evaluate(e))}],tan:[v,[v],function(e,t){var i=t[0];return Math.tan(i.evaluate(e))}],asin:[v,[v],function(e,t){var i=t[0];return Math.asin(i.evaluate(e))}],acos:[v,[v],function(e,t){var i=t[0];return Math.acos(i.evaluate(e))}],atan:[v,[v],function(e,t){var i=t[0];return Math.atan(i.evaluate(e))}],min:[v,L(v),function(e,t){return Math.min.apply(Math,t.map(function(t){return t.evaluate(e)}))}],max:[v,L(v),function(e,t){return Math.max.apply(Math,t.map(function(t){return t.evaluate(e)}))}],"==":{type:_,overloads:[[[v,v],l],[[g,g],l],[[_,_],l],[[y,y],l]]},"!=":{type:_,overloads:[[[v,v],c],[[g,g],c],[[_,_],c],[[y,y],c]]},">":{type:_,overloads:[[[v,v],f],[[g,g],f]]},"<":{type:_,overloads:[[[v,v],p],[[g,g],p]]},">=":{type:_,overloads:[[[v,v],h],[[g,g],h]]},"<=":{type:_,overloads:[[[v,v],d],[[g,g],d]]},all:{type:_,overloads:[[[_,_],function(e,t){var i=t[0],n=t[1];return i.evaluate(e)&&n.evaluate(e)}],[L(_),function(e,t){for(var i=0,n=t;i<n.length;i+=1)if(!n[i].evaluate(e))return!1;return!0}]]},any:{type:_,overloads:[[[_,_],function(e,t){var i=t[0],n=t[1];return i.evaluate(e)||n.evaluate(e)}],[L(_),function(e,t){for(var i=0,n=t;i<n.length;i+=1)if(n[i].evaluate(e))return!0;return!1}]]},"!":[_,[_],function(e,t){return!t[0].evaluate(e)}],upcase:[g,[g],function(e,t){return t[0].evaluate(e).toUpperCase()}],downcase:[g,[g],function(e,t){return t[0].evaluate(e).toLowerCase()}],concat:[g,L(g),function(e,t){return t.map(function(t){return t.evaluate(e)}).join("")}]}),t.exports=X},{"../compound_expression":121,"../runtime_error":140,"../types":143,"../values":144,"./array":122,"./assertion":123,"./at":124,"./case":125,"./coalesce":126,"./coercion":127,"./interpolate":129,"./let":130,"./literal":131,"./match":132,"./step":133,"./var":134}],129:[function(e,t,i){function n(e,t,i,n){var o=n-i,r=e-i;return 0===o?0:1===t?r/o:(Math.pow(t,r)-1)/(Math.pow(t,o)-1)}var o=e("@mapbox/unitbezier"),r=e("../../util/interpolate"),a=e("../types"),s=a.toString,l=a.NumberType,u=e("../stops"),c=u.findStopLessThanOrEqualTo,p=function(e,t,i,n){var o=this;this.type=e,this.interpolation=t,this.input=i,this.labels=[],this.outputs=[];for(var r=0,a=n;r<a.length;r+=1){var s=a[r],l=s[0],u=s[1];o.labels.push(l),o.outputs.push(u)}};p.interpolationFactor=function(e,t,i,r){var a=0;if("exponential"===e.name)a=n(t,e.base,i,r);else if("linear"===e.name)a=n(t,1,i,r);else if("cubic-bezier"===e.name){var s=e.controlPoints,l=new o(s[0],s[1],s[2],s[3]);a=l.solve(n(t,1,i,r))}return a},p.parse=function(e,t){var i=e[1],n=e[2],o=e.slice(3);if(!Array.isArray(i)||0===i.length)return t.error("Expected an interpolation type expression.",1);if("linear"===i[0])i={name:"linear"};else if("exponential"===i[0]){var r=i[1];if("number"!=typeof r)return t.error("Exponential interpolation requires a numeric base.",1,1);i={name:"exponential",base:r}}else{if("cubic-bezier"!==i[0])return t.error("Unknown interpolation type "+String(i[0]),1,0);var a=i.slice(1);if(4!==a.length||a.some(function(e){return"number"!=typeof e||e<0||e>1}))return t.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);i={name:"cubic-bezier",controlPoints:a}}if(e.length-1<4)return t.error("Expected at least 4 arguments, but found only "+(e.length-1)+".");if((e.length-1)%2!=0)return t.error("Expected an even number of arguments.");if(!(n=t.parse(n,2,l)))return null;var u=[],c=null;t.expectedType&&"value"!==t.expectedType.kind&&(c=t.expectedType);for(var f=0;f<o.length;f+=2){var d=o[f],h=o[f+1],m=f+3,y=f+4;if("number"!=typeof d)return t.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',m);if(u.length&&u[u.length-1][0]>=d)return t.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',m);var v=t.parse(h,y,c);if(!v)return null;c=c||v.type,u.push([d,v])}return"number"===c.kind||"color"===c.kind||"array"===c.kind&&"number"===c.itemType.kind&&"number"==typeof c.N?new p(c,i,n,u):t.error("Type "+s(c)+" is not interpolatable.")},p.prototype.evaluate=function(e){var t=this.labels,i=this.outputs;if(1===t.length)return i[0].evaluate(e);var n=this.input.evaluate(e);if(n<=t[0])return i[0].evaluate(e);var o=t.length;if(n>=t[o-1])return i[o-1].evaluate(e);var a=c(t,n),s=t[a],l=t[a+1],u=p.interpolationFactor(this.interpolation,n,s,l),f=i[a].evaluate(e),d=i[a+1].evaluate(e);return r[this.type.kind.toLowerCase()](f,d,u)},p.prototype.eachChild=function(e){var t=this;e(this.input);for(var i=0,n=t.outputs;i<n.length;i+=1)e(n[i])},t.exports=p},{"../../util/interpolate":154,"../stops":142,"../types":143,"@mapbox/unitbezier":5}],130:[function(e,t,i){var n=function(e,t){this.type=t.type,this.bindings=[].concat(e),this.result=t};n.prototype.evaluate=function(e){e.pushScope(this.bindings);var t=this.result.evaluate(e);return e.popScope(),t},n.prototype.eachChild=function(e){for(var t=this,i=0,n=t.bindings;i<n.length;i+=1)e(n[i][1]);e(this.result)},n.parse=function(e,t){if(e.length<4)return t.error("Expected at least 3 arguments, but found "+(e.length-1)+" instead.");for(var i=[],o=1;o<e.length-1;o+=2){var r=e[o];if("string"!=typeof r)return t.error("Expected string, but found "+(void 0===r?"undefined":O()(r))+" instead.",o);if(/[^a-zA-Z0-9_]/.test(r))return t.error("Variable names must contain only alphanumeric characters or '_'.",o);var a=t.parse(e[o+1],o+1);if(!a)return null;i.push([r,a])}var s=t.parse(e[e.length-1],e.length-1,void 0,i);return s?new n(i,s):null},t.exports=n},{}],131:[function(e,t,i){var n=e("../values"),o=n.isValue,r=n.typeOf,a=function(e,t){this.type=e,this.value=t};a.parse=function(e,t){if(2!==e.length)return t.error("'literal' expression requires exactly one argument, but found "+(e.length-1)+" instead.");if(!o(e[1]))return t.error("invalid value");var i=e[1],n=r(i),s=t.expectedType;return"array"!==n.kind||0!==n.N||!s||"array"!==s.kind||"number"==typeof s.N&&0!==s.N||(n=s),new a(n,i)},a.prototype.evaluate=function(){return this.value},a.prototype.eachChild=function(){},t.exports=a},{"../values":144}],132:[function(e,t,i){var n=e("../values"),o=n.typeOf,a=function(e,t,i,n,o,r){this.inputType=e,this.type=t,this.input=i,this.cases=n,this.outputs=o,this.otherwise=r};a.parse=function(e,t){if(e.length<5)return t.error("Expected at least 4 arguments, but found only "+(e.length-1)+".");if(e.length%2!=1)return t.error("Expected an even number of arguments.");var i,n;t.expectedType&&"value"!==t.expectedType.kind&&(n=t.expectedType);for(var s={},l=[],u=2;u<e.length-1;u+=2){var c=e[u],p=e[u+1];Array.isArray(c)||(c=[c]);var f=t.concat(u);if(0===c.length)return f.error("Expected at least one branch label.");for(var d=0,h=c;d<h.length;d+=1){var m=h[d];if("number"!=typeof m&&"string"!=typeof m)return f.error("Branch labels must be numbers or strings.");if("number"==typeof m&&Math.abs(m)>r.a)return f.error("Branch labels must be integers no larger than "+r.a+".");if("number"==typeof m&&Math.floor(m)!==m)return f.error("Numeric branch labels must be integer values.");if(i){if(f.checkSubtype(i,o(m)))return null}else i=o(m);if(void 0!==s[String(m)])return f.error("Branch labels must be unique.");s[String(m)]=l.length}var y=t.parse(p,u,n);if(!y)return null;n=n||y.type,l.push(y)}var v=t.parse(e[1],1,i);if(!v)return null;var g=t.parse(e[e.length-1],e.length-1,n);return g?new a(i,n,v,s,l,g):null},a.prototype.evaluate=function(e){var t=this.input.evaluate(e);return(this.outputs[this.cases[t]]||this.otherwise).evaluate(e)},a.prototype.eachChild=function(e){e(this.input),this.outputs.forEach(e),e(this.otherwise)},t.exports=a},{"../values":144}],133:[function(e,t,i){var n=e("../types"),o=n.NumberType,r=e("../stops"),a=r.findStopLessThanOrEqualTo,s=function(e,t,i){var n=this;this.type=e,this.input=t,this.labels=[],this.outputs=[];for(var o=0,r=i;o<r.length;o+=1){var a=r[o],s=a[0],l=a[1];n.labels.push(s),n.outputs.push(l)}};s.parse=function(e,t){var i=e[1],n=e.slice(2);if(e.length-1<4)return t.error("Expected at least 4 arguments, but found only "+(e.length-1)+".");if((e.length-1)%2!=0)return t.error("Expected an even number of arguments.");if(!(i=t.parse(i,1,o)))return null;var r=[],a=null;t.expectedType&&"value"!==t.expectedType.kind&&(a=t.expectedType),n.unshift(-1/0);for(var l=0;l<n.length;l+=2){var u=n[l],c=n[l+1],p=l+1,f=l+2;if("number"!=typeof u)return t.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',p);if(r.length&&r[r.length-1][0]>=u)return t.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',p);var d=t.parse(c,f,a);if(!d)return null;a=a||d.type,r.push([u,d])}return new s(a,i,r)},s.prototype.evaluate=function(e){var t=this.labels,i=this.outputs;if(1===t.length)return i[0].evaluate(e);var n=this.input.evaluate(e);if(n<=t[0])return i[0].evaluate(e);var o=t.length;return n>=t[o-1]?i[o-1].evaluate(e):i[a(t,n)].evaluate(e)},s.prototype.eachChild=function(e){var t=this;e(this.input);for(var i=0,n=t.outputs;i<n.length;i+=1)e(n[i])},t.exports=s},{"../stops":142,"../types":143}],134:[function(e,t,i){var n=function(e,t){this.type=t,this.name=e};n.parse=function(e,t){if(2!==e.length||"string"!=typeof e[1])return t.error("'var' expression requires exactly one string literal argument.");var i=e[1];return t.scope.has(i)?new n(i,t.scope.get(i).type):t.error('Unknown variable "'+i+'". Make sure "'+i+'" has been bound in an enclosing "let" expression before using it.',1)},n.prototype.evaluate=function(e){return e.scope.get(this.name).evaluate(e)},n.prototype.eachChild=function(){},t.exports=n},{}],135:[function(e,t,i){var n=e("./scope"),o=e("./values"),r=o.Color,a=["Unknown","Point","LineString","Polygon"],s=function(){this.scope=new n,this._parseColorCache={}};s.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},s.prototype.geometryType=function(){return this.feature?"number"==typeof this.feature.type?a[this.feature.type]:this.feature.type:null},s.prototype.properties=function(){return this.feature&&this.feature.properties||{}},s.prototype.pushScope=function(e){this.scope=this.scope.concat(e)},s.prototype.popScope=function(){this.scope=this.scope.parent},s.prototype.parseColor=function(e){var t=this._parseColorCache[e];return t||(t=this._parseColorCache[e]=r.parse(e)),t},t.exports=s},{"./scope":141,"./values":144}],136:[function(e,t,i){function n(e){return Array.isArray(e)&&e.length>0&&"string"==typeof e[0]&&e[0]in _}function o(e,t,i){void 0===i&&(i={});var n=new p(_,[],l(t)),o=n.parse(e);if(!o)return A(n.errors);var r,a=new f;if(!1===i.handleErrors)r=function(e,t){return a.globals=e,a.feature=t,o.evaluate(a)};else{var s,c={},d=u(t);"enum"===t.type&&(s=t.values),r=function(e,t){a.globals=e,a.feature=t;try{var i=o.evaluate(a);if(null===i||void 0===i)return d;if(s&&!(i in s))throw new x("Expected value to be one of "+R()(s).map(function(e){return D()(e)}).join(", ")+", but found "+D()(i)+" instead.");return i}catch(e){return c[e.message]||(c[e.message]=!0,"undefined"!=typeof console&&console.warn(e.message)),d}}}return z({evaluate:r,parsed:o})}function r(e,t,i){if(void 0===i&&(i={}),e=o(e,t,i),"error"===e.result)return e;var n=e.value,r=n.evaluate,a=n.parsed,l=b.isFeatureConstant(a);if(!l&&!t["property-function"])return A([new c("","property expressions not supported")]);var u=b.isGlobalPropertyConstant(a,["zoom"]);if(!u&&!1===t["zoom-function"])return A([new c("","zoom expressions not supported")]);var p=s(a);if(!p&&!u)return A([new c("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);if(p instanceof c)return A([p]);if(p instanceof y&&"piecewise-constant"===t.function)return A([new c("",'"interpolate" expressions cannot be used with this property')]);if(!p)return z(l?{kind:"constant",parsed:a,evaluate:r}:{kind:"source",parsed:a,evaluate:r});var f=p instanceof y?y.interpolationFactor.bind(void 0,p.interpolation):function(){return 0},d=p.labels;return z(l?{kind:"camera",parsed:a,evaluate:r,interpolationFactor:f,zoomStops:d}:{kind:"composite",parsed:a,evaluate:r,interpolationFactor:f,zoomStops:d})}function a(e,t){if(k(e))return S(e,t);if(n(e)){var i=r(e,t);if("error"===i.result)throw new Error(i.value.map(function(e){return e.key+": "+e.message}).join(", "));return i.value}var o=e;return"string"==typeof e&&"color"===t.type&&(o=C.parse(e)),{kind:"constant",evaluate:function(){return o}}}function s(e){var t=null;if(e instanceof g)t=s(e.result);else if(e instanceof v)for(var i=0,n=e.args;i<n.length;i+=1){var o=n[i];if(t=s(o))break}else(e instanceof m||e instanceof y)&&e.input instanceof h&&"zoom"===e.input.name&&(t=e);return t instanceof c?t:(e.eachChild(function(e){var i=s(e);i instanceof c?t=i:!t&&i?t=new c("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):t&&i&&t!==i&&(t=new c("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),t)}function l(e){var t={color:I,string:L,number:P,enum:L,boolean:B};return"array"===e.type?j(t[e.value]||F,e.length):t[e.type]||null}function u(e){return"color"===e.type&&k(e.default)?new C(0,0,0,0):"color"===e.type?C.parse(e.default)||null:void 0===e.default?null:e.default}var c=e("./parsing_error"),p=e("./parsing_context"),f=e("./evaluation_context"),d=e("./compound_expression"),h=d.CompoundExpression,m=e("./definitions/step"),y=e("./definitions/interpolate"),v=e("./definitions/coalesce"),g=e("./definitions/let"),_=e("./definitions"),b=e("./is_constant"),x=e("./runtime_error"),w=e("../util/result"),z=w.success,A=w.error,T=e("../function"),k=T.isFunction,S=T.createFunction,E=e("./values"),C=E.Color;t.exports={isExpression:n,createExpression:o,createPropertyExpression:r,normalizePropertyExpression:a};var M=e("./types"),I=M.ColorType,L=M.StringType,P=M.NumberType,B=M.BooleanType,F=M.ValueType,j=M.array},{"../function":146,"../util/result":156,"./compound_expression":121,"./definitions":128,"./definitions/coalesce":126,"./definitions/interpolate":129,"./definitions/let":130,"./definitions/step":133,"./evaluation_context":135,"./is_constant":137,"./parsing_context":138,"./parsing_error":139,"./runtime_error":140,"./types":143,"./values":144}],137:[function(e,t,i){function n(e){if(e instanceof a){if("get"===e.name&&1===e.args.length)return!1;if("has"===e.name&&1===e.args.length)return!1;if("properties"===e.name||"geometry-type"===e.name||"id"===e.name)return!1}var t=!0;return e.eachChild(function(e){t&&!n(e)&&(t=!1)}),t}function o(e,t){if(e instanceof a&&t.indexOf(e.name)>=0)return!1;var i=!0;return e.eachChild(function(e){i&&!o(e,t)&&(i=!1)}),i}var r=e("./compound_expression"),a=r.CompoundExpression;t.exports={isFeatureConstant:n,isGlobalPropertyConstant:o}},{"./compound_expression":121}],138:[function(e,t,i){function n(t){var i=e("./compound_expression"),n=i.CompoundExpression,o=e("./is_constant"),r=o.isGlobalPropertyConstant,a=o.isFeatureConstant;if(t instanceof e("./definitions/var"))return!1;if(t instanceof n&&"error"===t.name)return!1;var s=!0;return t.eachChild(function(e){e instanceof l||(s=!1)}),!!s&&a(t)&&r(t,["zoom","heatmap-density"])}var o=e("./scope"),r=e("./types"),a=r.checkSubtype,s=e("./parsing_error"),l=e("./definitions/literal"),u=function(e,t,i,n,r){void 0===t&&(t=[]),void 0===n&&(n=new o),void 0===r&&(r=[]),this.definitions=e,this.path=t,this.key=t.map(function(e){return"["+e+"]"}).join(""),this.scope=n,this.errors=r,this.expectedType=i};u.prototype.parse=function(t,i,o,r){var a=this;if(i&&(a=a.concat(i,o,r)),null!==t&&"string"!=typeof t&&"boolean"!=typeof t&&"number"!=typeof t||(t=["literal",t]),Array.isArray(t)){if(0===t.length)return a.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var s=t[0];if("string"!=typeof s)return a.error("Expression name must be a string, but found "+(void 0===s?"undefined":O()(s))+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var u=a.definitions[s];if(u){var c=u.parse(t,a);if(!c)return null;var p=a.expectedType,f=c.type;if(p){if("string"!==p.kind&&"number"!==p.kind&&"boolean"!==p.kind||"value"!==f.kind){if("color"===p.kind&&("value"===f.kind||"string"===f.kind)){var d=e("./definitions/coercion");c=new d(p,[c])}}else c=new(e("./definitions/assertion"))(p,[c]);if(a.checkSubtype(p,c.type))return null}if(!(c instanceof l)&&n(c)){var h=new(e("./evaluation_context"));try{c=new l(c.type,c.evaluate(h))}catch(t){return a.error(t.message),null}}return c}return a.error('Unknown expression "'+s+'". If you wanted a literal array, use ["literal", [...]].',0)}return void 0===t?a.error("'undefined' value invalid. Use null instead."):"object"==(void 0===t?"undefined":O()(t))?a.error('Bare objects invalid. Use ["literal", {...}] instead.'):a.error("Expected an array, but found "+(void 0===t?"undefined":O()(t))+" instead.")},u.prototype.concat=function(e,t,i){var n="number"==typeof e?this.path.concat(e):this.path,o=i?this.scope.concat(i):this.scope;return new u(this.definitions,n,t||null,o,this.errors)},u.prototype.error=function(e){for(var t=[],i=arguments.length-1;i-- >0;)t[i]=arguments[i+1];var n=""+this.key+t.map(function(e){return"["+e+"]"}).join("");this.errors.push(new s(n,e))},u.prototype.checkSubtype=function(e,t){var i=a(e,t);return i&&this.error(i),i},t.exports=u},{"./compound_expression":121,"./definitions/assertion":123,"./definitions/coercion":127,"./definitions/literal":131,"./definitions/var":134,"./evaluation_context":135,"./is_constant":137,"./parsing_error":139,"./scope":141,"./types":143}],139:[function(e,t,i){var n=function(e){function t(t,i){e.call(this,i),this.message=i,this.key=t}return e&&(t.__proto__=e),t.prototype=F()(e&&e.prototype),t.prototype.constructor=t,t}(Error);t.exports=n},{}],140:[function(e,t,i){var n=function(e){this.name="ExpressionEvaluationError",this.message=e};n.prototype.toJSON=function(){return this.message},t.exports=n},{}],141:[function(e,t,i){var n=function(e,t){var i=this;void 0===t&&(t=[]),this.parent=e,this.bindings={};for(var n=0,o=t;n<o.length;n+=1){var r=o[n],a=r[0],s=r[1];i.bindings[a]=s}};n.prototype.concat=function(e){return new n(this,e)},n.prototype.get=function(e){if(this.bindings[e])return this.bindings[e];if(this.parent)return this.parent.get(e);throw new Error(e+" not found in scope.")},n.prototype.has=function(e){return!!this.bindings[e]||!!this.parent&&this.parent.has(e)},t.exports=n},{}],142:[function(e,t,i){function n(e,t){for(var i,n,o=e.length,r=0,a=o-1,s=0;r<=a;){if(s=Math.floor((r+a)/2),i=e[s],n=e[s+1],t===i||t>i&&t<n)return s;i<t?r=s+1:i>t&&(a=s-1)}return Math.max(s-1,0)}t.exports={findStopLessThanOrEqualTo:n}},{}],143:[function(e,t,i){function n(e,t){return{kind:"array",itemType:e,N:t}}function o(e){if("array"===e.kind){var t=o(e.itemType);return"number"==typeof e.N?"array<"+t+", "+e.N+">":"value"===e.itemType.kind?"array":"array<"+t+">"}return e.kind}function r(e,t){if("error"===t.kind)return null;if("array"===e.kind){if("array"===t.kind&&!r(e.itemType,t.itemType)&&("number"!=typeof e.N||e.N===t.N))return null}else{if(e.kind===t.kind)return null;if("value"===e.kind)for(var i=0,n=h;i<n.length;i+=1){var a=n[i];if(!r(a,t))return null}}return"Expected "+o(e)+" but found "+o(t)+" instead."}var a={kind:"null"},s={kind:"number"},l={kind:"string"},u={kind:"boolean"},c={kind:"color"},p={kind:"object"},f={kind:"value"},d={kind:"error"},h=[a,s,l,u,c,p,n(f)];t.exports={NullType:a,NumberType:s,StringType:l,BooleanType:u,ColorType:c,ObjectType:p,ValueType:f,array:n,ErrorType:d,toString:o,checkSubtype:r}},{}],144:[function(e,t,i){function n(e,t,i,n){return"number"==typeof e&&e>=0&&e<=255&&"number"==typeof t&&t>=0&&t<=255&&"number"==typeof i&&i>=0&&i<=255?void 0===n||"number"==typeof n&&n>=0&&n<=1?null:"Invalid rgba value ["+[e,t,i,n].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+("number"==typeof n?[e,t,i,n]:[e,t,i]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function o(e){if(null===e)return!0;if("string"==typeof e)return!0;if("boolean"==typeof e)return!0;if("number"==typeof e)return!0;if(e instanceof a)return!0;if(Array.isArray(e)){for(var t=0,i=e;t<i.length;t+=1)if(!o(i[t]))return!1;return!0}if("object"==(void 0===e?"undefined":O()(e))){for(var n in e)if(!o(e[n]))return!1;return!0}return!1}function r(e){if(null===e)return l;if("string"==typeof e)return c;if("boolean"==typeof e)return p;if("number"==typeof e)return u;if(e instanceof a)return f;if(Array.isArray(e)){for(var t,i=e.length,n=0,o=e;n<o.length;n+=1){var s=o[n],y=r(s);if(t){if(t===y)continue;t=h;break}t=y}return m(t||h,i)}return d}var a=e("../util/color"),s=e("./types"),l=s.NullType,u=s.NumberType,c=s.StringType,p=s.BooleanType,f=s.ColorType,d=s.ObjectType,h=s.ValueType,m=s.array;t.exports={Color:a,validateRGBA:n,isValue:o,typeOf:r}},{"../util/color":150,"./types":143}],145:[function(e,t,i){function n(e){if(!Array.isArray(e)||0===e.length)return!1;switch(e[0]){case"has":return e.length>=2&&"$id"!==e[1]&&"$type"!==e[1];case"in":case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3===e.length&&(Array.isArray(e[1])||Array.isArray(e[2]));case"any":case"all":for(var t=0,i=e.slice(1);t<i.length;t+=1){var o=i[t];if(!n(o)&&"boolean"!=typeof o)return!1}return!0;default:return!0}}function o(e){if(!e)return function(){return!0};if(!n(e))return new Function("g","f","var p = (f && f.properties || {}); return "+r(e));var t=h(e,y);if("error"===t.result)throw new Error(t.value.map(function(e){return e.key+": "+e.message}).join(", "));return t.value.evaluate}function r(e){if(!e)return"true";var t=e[0];return e.length<=1?"any"===t?"false":"true":"("+("=="===t?s(e[1],e[2],"===",!1):"!="===t?s(e[1],e[2],"!==",!1):"<"===t||">"===t||"<="===t||">="===t?s(e[1],e[2],t,!0):"any"===t?l(e.slice(1),"||"):"all"===t?l(e.slice(1),"&&"):"none"===t?p(l(e.slice(1),"||")):"in"===t?u(e[1],e.slice(2)):"!in"===t?p(u(e[1],e.slice(2))):"has"===t?c(e[1]):"!has"===t?p(c(e[1])):"true")+")"}function a(e){return"$type"===e?"f.type":"$id"===e?"f.id":"p["+D()(e)+"]"}function s(e,t,i,n){var o=a(e),r="$type"===e?m.indexOf(t):D()(t);return(n?"typeof "+o+"=== typeof "+r+"&&":"")+o+i+r}function l(e,t){return e.map(r).join(t)}function u(e,t){"$type"===e&&(t=t.map(function(e){return m.indexOf(e)}));var i=D()(t.sort(f)),n=a(e);return t.length<=200?i+".indexOf("+n+") !== -1":"function(v, a, i, j) {while (i <= j) { var m = (i + j) >> 1;    if (a[m] === v) return true; if (a[m] > v) j = m - 1; else i = m + 1;}return false; }("+n+", "+i+",0,"+(t.length-1)+")"}function c(e){return"$id"===e?'"id" in f':D()(e)+" in p"}function p(e){return"!("+e+")"}function f(e,t){return e<t?-1:e>t?1:0}var d=e("../expression"),h=d.createExpression;t.exports=o,t.exports.isExpressionFilter=n;var m=["Unknown","Point","LineString","Polygon"],y={type:"boolean",default:!1,function:!0,"property-function":!0,"zoom-function":!0}},{"../expression":136}],146:[function(e,t,i){function n(e){return"object"==(void 0===e?"undefined":O()(e))&&null!==e&&!Array.isArray(e)}function o(e){return e}function r(e,t){var i="color"===t.type,n=e.stops&&"object"==O()(e.stops[0][0]),p=n||void 0!==e.property,f=n||!p,y=e.type||("interpolated"===t.function?"exponential":"interval");i&&(e=m({},e),e.stops&&(e.stops=e.stops.map(function(e){return[e[0],h.parse(e[1])]})),e.default?e.default=h.parse(e.default):e.default=h.parse(t.default));var v,_,b;if("exponential"===y)v=u;else if("interval"===y)v=l;else if("categorical"===y){v=s,_=F()(null);for(var x=0,w=e.stops;x<w.length;x+=1){var z=w[x];_[z[0]]=z[1]}b=O()(e.stops[0][0])}else{if("identity"!==y)throw new Error('Unknown function type "'+y+'"');v=c}var A;if(e.colorSpace&&"rgb"!==e.colorSpace){if(!d[e.colorSpace])throw new Error("Unknown color space: "+e.colorSpace);var T=d[e.colorSpace];e=JSON.parse(D()(e));for(var k=0;k<e.stops.length;k++)e.stops[k]=[e.stops[k][0],T.forward(e.stops[k][1])];A=T.reverse}else A=o;if(n){for(var S={},E=[],C=0;C<e.stops.length;C++){var M=e.stops[C],I=M[0].zoom;void 0===S[I]&&(S[I]={zoom:I,type:e.type,property:e.property,default:e.default,stops:[]},E.push(I)),S[I].stops.push([M[0].value,M[1]])}for(var L=[],R=0,P=E;R<P.length;R+=1){var B=P[R];L.push([S[B].zoom,r(S[B],t)])}return{kind:"composite",interpolationFactor:g.interpolationFactor.bind(void 0,{name:"linear"}),zoomStops:L.map(function(e){return e[0]}),evaluate:function(i,n){var o=i.zoom;return A(u({stops:L,base:e.base},t,o).evaluate(o,n))}}}return f?{kind:"camera",interpolationFactor:"exponential"===y?g.interpolationFactor.bind(void 0,{name:"exponential",base:void 0!==e.base?e.base:1}):function(){return 0},zoomStops:e.stops.map(function(e){return e[0]}),evaluate:function(i){var n=i.zoom;return A(v(e,t,n,_,b))}}:{kind:"source",evaluate:function(i,n){var o=n&&n.properties?n.properties[e.property]:void 0;return void 0===o?a(e.default,t.default):A(v(e,t,o,_,b))}}}function a(e,t,i){return void 0!==e?e:void 0!==t?t:void 0!==i?i:void 0}function s(e,t,i,n,o){return a((void 0===i?"undefined":O()(i))===o?n[i]:void 0,e.default,t.default)}function l(e,t,i){if("number"!==y(i))return a(e.default,t.default);var n=e.stops.length;if(1===n)return e.stops[0][1];if(i<=e.stops[0][0])return e.stops[0][1];if(i>=e.stops[n-1][0])return e.stops[n-1][1];var o=p(e.stops,i);return e.stops[o][1]}function u(e,t,i){var n=void 0!==e.base?e.base:1;if("number"!==y(i))return a(e.default,t.default);var r=e.stops.length;if(1===r)return e.stops[0][1];if(i<=e.stops[0][0])return e.stops[0][1];if(i>=e.stops[r-1][0])return e.stops[r-1][1];var s=p(e.stops,i),l=f(i,n,e.stops[s][0],e.stops[s+1][0]),u=e.stops[s][1],c=e.stops[s+1][1],d=v[t.type]||o;return"function"==typeof u.evaluate?{evaluate:function(){for(var e=[],t=arguments.length;t--;)e[t]=arguments[t];var i=u.evaluate.apply(void 0,e),n=c.evaluate.apply(void 0,e);if(void 0!==i&&void 0!==n)return d(i,n,l)}}:d(u,c,l)}function c(e,t,i){return"color"===t.type?i=h.parse(i):y(i)===t.type||"enum"===t.type&&t.values[i]||(i=void 0),a(i,e.default,t.default)}function p(e,t){for(var i,n,o=e.length,r=0,a=o-1,s=0;r<=a;){if(s=Math.floor((r+a)/2),i=e[s][0],n=e[s+1][0],t===i||t>i&&t<n)return s;i<t?r=s+1:i>t&&(a=s-1)}return Math.max(s-1,0)}function f(e,t,i,n){var o=n-i,r=e-i;return 0===o?0:1===t?r/o:(Math.pow(t,r)-1)/(Math.pow(t,o)-1)}var d=e("../util/color_spaces"),h=e("../util/color"),m=e("../util/extend"),y=e("../util/get_type"),v=e("../util/interpolate"),g=e("../expression/definitions/interpolate");t.exports={createFunction:r,isFunction:n}},{"../expression/definitions/interpolate":129,"../util/color":150,"../util/color_spaces":151,"../util/extend":152,"../util/get_type":153,"../util/interpolate":154}],147:[function(e,t,i){function n(e){var t=void 0===e?"undefined":O()(e);if("number"===t||"boolean"===t||"string"===t||void 0===e||null===e)return D()(e);if(Array.isArray(e)){for(var i="[",o=0,r=e;o<r.length;o+=1)i+=n(r[o])+",";return i+"]"}for(var a=R()(e).sort(),s="{",l=0;l<a.length;l++)s+=D()(a[l])+":"+n(e[a[l]])+",";return s+"}"}function o(e){for(var t="",i=0,o=a;i<o.length;i+=1)t+="/"+n(e[o[i]]);return t}function r(e){for(var t={},i=0;i<e.length;i++){var n=o(e[i]),r=t[n];r||(r=t[n]=[]),r.push(e[i])}var a=[];for(var s in t)a.push(t[s]);return a}var a=e("./util/ref_properties");t.exports=r},{"./util/ref_properties":155}],148:[function(e,t,i){t.exports=e("./v8.json")},{"./v8.json":149}],149:[function(e,t,i){t.exports={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_geojson","source_video","source_image","source_canvas"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.0511,180,85.0511]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.0511,180,85.0511]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},buffer:{type:"number",default:128,maximum:512,minimum:0},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_canvas:{type:{required:!0,type:"enum",values:{canvas:{}}},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}},animate:{type:"boolean",default:"true"},canvas:{type:"string",required:!0}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},background:{}}},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible"}},layout_fill:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible"}},layout_circle:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible"}},layout_line:{"line-cap":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{butt:{},round:{},square:{}},default:"butt"},"line-join":{type:"enum",function:"piecewise-constant","zoom-function":!0,"property-function":!0,values:{bevel:{},round:{},miter:{}},default:"miter"},"line-miter-limit":{type:"number",default:2,function:"interpolated","zoom-function":!0,requires:[{"line-join":"miter"}]},"line-round-limit":{type:"number",default:1.05,function:"interpolated","zoom-function":!0,requires:[{"line-join":"round"}]},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible"}},layout_symbol:{"symbol-placement":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{point:{},line:{}},default:"point"},"symbol-spacing":{type:"number",default:250,minimum:1,function:"interpolated","zoom-function":!0,units:"pixels",requires:[{"symbol-placement":"line"}]},"symbol-avoid-edges":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!1},"icon-allow-overlap":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!1,requires:["icon-image"]},"icon-ignore-placement":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!1,requires:["icon-image"]},"icon-optional":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!1,requires:["icon-image","text-field"]},"icon-rotation-alignment":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"]},"icon-size":{type:"number",default:1,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,units:"factor of the original icon size",requires:["icon-image"]},"icon-text-fit":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"]},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",function:"interpolated","zoom-function":!0,requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}]},"icon-image":{type:"string",function:"piecewise-constant","zoom-function":!0,"property-function":!0,tokens:!0},"icon-rotate":{type:"number",default:0,period:360,function:"interpolated","zoom-function":!0,"property-function":!0,units:"degrees",requires:["icon-image"]},"icon-padding":{type:"number",default:2,minimum:0,function:"interpolated","zoom-function":!0,units:"pixels",requires:["icon-image"]},"icon-keep-upright":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":"line"}]},"icon-offset":{type:"array",value:"number",units:'pixels multiplied by the value of "icon-size"',length:2,default:[0,0],function:"interpolated","zoom-function":!0,"property-function":!0,requires:["icon-image"]},"icon-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,"property-function":!0,values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"]},"icon-pitch-alignment":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"]},"text-pitch-alignment":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"]},"text-rotation-alignment":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"]},"text-field":{type:"string",function:"piecewise-constant","zoom-function":!0,"property-function":!0,default:"",tokens:!0},"text-font":{type:"array",value:"string",function:"piecewise-constant","zoom-function":!0,default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"]},"text-size":{type:"number",default:16,minimum:0,units:"pixels",function:"interpolated","zoom-function":!0,"property-function":!0,requires:["text-field"]},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",function:"interpolated","zoom-function":!0,"property-function":!0,requires:["text-field"]},"text-line-height":{type:"number",default:1.2,units:"ems",function:"interpolated","zoom-function":!0,requires:["text-field"]},"text-letter-spacing":{type:"number",default:0,units:"ems",function:"interpolated","zoom-function":!0,"property-function":!0,requires:["text-field"]},"text-justify":{type:"enum",function:"piecewise-constant","zoom-function":!0,"property-function":!0,values:{left:{},center:{},right:{}},default:"center",requires:["text-field"]},"text-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,"property-function":!0,values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field"]},"text-max-angle":{type:"number",default:45,units:"degrees",function:"interpolated","zoom-function":!0,requires:["text-field",{"symbol-placement":"line"}]},"text-rotate":{type:"number",default:0,period:360,units:"degrees",function:"interpolated","zoom-function":!0,"property-function":!0,requires:["text-field"]},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",function:"interpolated","zoom-function":!0,requires:["text-field"]},"text-keep-upright":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":"line"}]},"text-transform":{type:"enum",function:"piecewise-constant","zoom-function":!0,"property-function":!0,values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"]},"text-offset":{type:"array",value:"number",units:"ems",function:"interpolated","zoom-function":!0,"property-function":!0,length:2,default:[0,0],requires:["text-field"]},"text-allow-overlap":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!1,requires:["text-field"]},"text-ignore-placement":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!1,requires:["text-field"]},"text-optional":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!1,requires:["text-field","icon-image"]},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:22,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},expression_name:{type:"enum",values:{let:{group:"Variable binding"},var:{group:"Variable binding"},literal:{group:"Types"},array:{group:"Types"},at:{group:"Lookup"},case:{group:"Decision"},match:{group:"Decision"},coalesce:{group:"Decision"},step:{group:"Ramps, scales, curves"},interpolate:{group:"Ramps, scales, curves"},ln2:{group:"Math"},pi:{group:"Math"},e:{group:"Math"},typeof:{group:"Types"},string:{group:"Types"},number:{group:"Types"},boolean:{group:"Types"},object:{group:"Types"},"to-string":{group:"Types"},"to-number":{group:"Types"},"to-boolean":{group:"Types"},"to-rgba":{group:"Color"},"to-color":{group:"Types"},rgb:{group:"Color"},rgba:{group:"Color"},get:{group:"Lookup"},has:{group:"Lookup"},length:{group:"Lookup"},properties:{group:"Feature data"},"geometry-type":{group:"Feature data"},id:{group:"Feature data"},zoom:{group:"Zoom"},"heatmap-density":{group:"Heatmap"},"+":{group:"Math"},"*":{group:"Math"},"-":{group:"Math"},"/":{group:"Math"},"%":{group:"Math"},"^":{group:"Math"},sqrt:{group:"Math"},log10:{group:"Math"},ln:{group:"Math"},log2:{group:"Math"},sin:{group:"Math"},cos:{group:"Math"},tan:{group:"Math"},asin:{group:"Math"},acos:{group:"Math"},atan:{group:"Math"},min:{group:"Math"},max:{group:"Math"},"==":{group:"Decision"},"!=":{group:"Decision"},">":{group:"Decision"},"<":{group:"Decision"},">=":{group:"Decision"},"<=":{group:"Decision"},all:{group:"Decision"},any:{group:"Decision"},"!":{group:"Decision"},upcase:{group:"String"},downcase:{group:"String"},concat:{group:"String"}}},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},transition:!1,"zoom-function":!0,"property-function":!1,function:"piecewise-constant"},position:{type:"array",default:[1.15,210,30],length:3,value:"number",transition:!0,function:"interpolated","zoom-function":!0,"property-function":!1},color:{type:"color",default:"#ffffff",function:"interpolated","zoom-function":!0,"property-function":!1,transition:!0},intensity:{type:"number",default:.5,minimum:0,maximum:1,function:"interpolated","zoom-function":!0,"property-function":!1,transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",function:"piecewise-constant","zoom-function":!0,default:!0},"fill-opacity":{type:"number",function:"interpolated","zoom-function":!0,"property-function":!0,default:1,minimum:0,maximum:1,transition:!0},"fill-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:[{"!":"fill-pattern"}]},"fill-outline-color":{type:"color",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}]},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],function:"interpolated","zoom-function":!0,transition:!0,units:"pixels"},"fill-translate-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{}},default:"map",requires:["fill-translate"]},"fill-pattern":{type:"string",function:"piecewise-constant","zoom-function":!0,transition:!0}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",function:"interpolated","zoom-function":!0,"property-function":!1,default:1,minimum:0,maximum:1,transition:!0},"fill-extrusion-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:[{"!":"fill-extrusion-pattern"}]},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],function:"interpolated","zoom-function":!0,transition:!0,units:"pixels"},"fill-extrusion-translate-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"]},"fill-extrusion-pattern":{type:"string",function:"piecewise-constant","zoom-function":!0,transition:!0},"fill-extrusion-height":{type:"number",function:"interpolated","zoom-function":!0,"property-function":!0,default:0,minimum:0,units:"meters",transition:!0},"fill-extrusion-base":{type:"number",function:"interpolated","zoom-function":!0,"property-function":!0,default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"]}},paint_line:{"line-opacity":{type:"number",function:"interpolated","zoom-function":!0,"property-function":!0,default:1,minimum:0,maximum:1,transition:!0},"line-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:[{"!":"line-pattern"}]},"line-translate":{type:"array",value:"number",length:2,default:[0,0],function:"interpolated","zoom-function":!0,transition:!0,units:"pixels"},"line-translate-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{}},default:"map",requires:["line-translate"]},"line-width":{type:"number",default:1,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"line-gap-width":{type:"number",default:0,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"line-offset":{type:"number",default:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"line-blur":{type:"number",default:0,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"line-dasharray":{type:"array",value:"number",function:"piecewise-constant","zoom-function":!0,minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}]},"line-pattern":{type:"string",function:"piecewise-constant","zoom-function":!0,transition:!0}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"circle-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0},"circle-blur":{type:"number",default:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],function:"interpolated","zoom-function":!0,transition:!0,units:"pixels"},"circle-translate-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{}},default:"map",requires:["circle-translate"]},"circle-pitch-scale":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{}},default:"map"},"circle-pitch-alignment":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{}},default:"viewport"},"circle-stroke-width":{type:"number",default:0,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels"},"circle-stroke-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,function:"interpolated","zoom-function":!0,"property-function":!1,transition:!0,units:"pixels"},"heatmap-weight":{type:"number",default:1,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!1},"heatmap-intensity":{type:"number",default:1,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!1,transition:!0},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],function:"interpolated","zoom-function":!1,"property-function":!1,transition:!0},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,function:"interpolated","zoom-function":!0,"property-function":!1,transition:!0}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:["icon-image"]},"icon-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:["icon-image"]},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:["icon-image"]},"icon-halo-width":{type:"number",default:0,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels",requires:["icon-image"]},"icon-halo-blur":{type:"number",default:0,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels",requires:["icon-image"]},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],function:"interpolated","zoom-function":!0,transition:!0,units:"pixels",requires:["icon-image"]},"icon-translate-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"]},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:["text-field"]},"text-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:["text-field"]},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,requires:["text-field"]},"text-halo-width":{type:"number",default:0,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels",requires:["text-field"]},"text-halo-blur":{type:"number",default:0,minimum:0,function:"interpolated","zoom-function":!0,"property-function":!0,transition:!0,units:"pixels",requires:["text-field"]},"text-translate":{type:"array",value:"number",length:2,default:[0,0],function:"interpolated","zoom-function":!0,transition:!0,units:"pixels",requires:["text-field"]},"text-translate-anchor":{type:"enum",function:"piecewise-constant","zoom-function":!0,values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"]}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,function:"interpolated","zoom-function":!0,transition:!0},"raster-hue-rotate":{type:"number",default:0,period:360,function:"interpolated","zoom-function":!0,transition:!0,units:"degrees"},"raster-brightness-min":{type:"number",function:"interpolated","zoom-function":!0,default:0,minimum:0,maximum:1,transition:!0},"raster-brightness-max":{type:"number",function:"interpolated","zoom-function":!0,default:1,minimum:0,maximum:1,transition:!0},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,function:"interpolated","zoom-function":!0,transition:!0},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,function:"interpolated","zoom-function":!0,transition:!0},"raster-fade-duration":{type:"number",default:300,minimum:0,function:"interpolated","zoom-function":!0,transition:!0,units:"milliseconds"}},paint_background:{"background-color":{type:"color",default:"#000000",function:"interpolated","zoom-function":!0,transition:!0,requires:[{"!":"background-pattern"}]},"background-pattern":{type:"string",function:"piecewise-constant","zoom-function":!0,transition:!0},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,function:"interpolated","zoom-function":!0,transition:!0}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}}}},{}],150:[function(e,t,i){var n=e("csscolorparser"),o=n.parseCSSColor,r=function(e,t,i,n){void 0===n&&(n=1),this.r=e,this.g=t,this.b=i,this.a=n};r.parse=function(e){if(e){if(e instanceof r)return e;if("string"==typeof e){var t=o(e);if(t)return new r(t[0]/255*t[3],t[1]/255*t[3],t[2]/255*t[3],t[3])}}},r.black=new r(0,0,0,1),r.white=new r(1,1,1,1),r.transparent=new r(0,0,0,0),t.exports=r},{csscolorparser:11}],151:[function(e,t,i){function n(e){return e>g?Math.pow(e,1/3):e/v+m}function o(e){return e>y?e*e*e:v*(e-m)}function r(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function a(e){return e/=255,e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function s(e){var t=a(e.r),i=a(e.g),o=a(e.b),r=n((.4124564*t+.3575761*i+.1804375*o)/f),s=n((.2126729*t+.7151522*i+.072175*o)/d);return{l:116*s-16,a:500*(r-s),b:200*(s-n((.0193339*t+.119192*i+.9503041*o)/h)),alpha:e.a}}function l(e){var t=(e.l+16)/116,i=isNaN(e.a)?t:t+e.a/500,n=isNaN(e.b)?t:t-e.b/200;return t=d*o(t),i=f*o(i),n=h*o(n),new p(r(3.2404542*i-1.5371385*t-.4985314*n),r(-.969266*i+1.8760108*t+.041556*n),r(.0556434*i-.2040259*t+1.0572252*n),e.alpha)}function u(e){var t=s(e),i=t.l,n=t.a,o=t.b,r=Math.atan2(o,n)*b;return{h:r<0?r+360:r,c:Math.sqrt(n*n+o*o),l:i,alpha:e.a}}function c(e){var t=e.h*_,i=e.c;return l({l:e.l,a:Math.cos(t)*i,b:Math.sin(t)*i,alpha:e.alpha})}var p=e("./color"),f=.95047,d=1,h=1.08883,m=4/29,y=6/29,v=3*y*y,g=y*y*y,_=Math.PI/180,b=180/Math.PI;t.exports={lab:{forward:s,reverse:l},hcl:{forward:u,reverse:c}}},{"./color":150}],152:[function(e,t,i){t.exports=function(e){for(var t=[],i=arguments.length-1;i-- >0;)t[i]=arguments[i+1];for(var n=0,o=t;n<o.length;n+=1){var r=o[n];for(var a in r)e[a]=r[a]}return e}},{}],153:[function(e,t,i){t.exports=function(e){return e instanceof Number?"number":e instanceof String?"string":e instanceof Boolean?"boolean":Array.isArray(e)?"array":null===e?"null":void 0===e?"undefined":O()(e)}},{}],154:[function(e,t,i){function n(e,t,i){return e*(1-i)+t*i}function o(e,t,i){return new a(n(e.r,t.r,i),n(e.g,t.g,i),n(e.b,t.b,i),n(e.a,t.a,i))}function r(e,t,i){return e.map(function(e,o){return n(e,t[o],i)})}var a=e("./color");t.exports={number:n,color:o,array:r}},{"./color":150}],155:[function(e,t,i){t.exports=["type","source","source-layer","minzoom","maxzoom","filter","layout"]},{}],156:[function(e,t,i){function n(e){return{result:"success",value:e}}function o(e){return{result:"error",value:e}}t.exports={success:n,error:o}},{}],157:[function(e,t,i){function n(e){return e instanceof Number||e instanceof String||e instanceof Boolean?e.valueOf():e}function o(e){return Array.isArray(e)?e.map(o):n(e)}t.exports=n,t.exports.deep=o},{}],158:[function(e,t,i){var n=e("../error/validation_error"),o=e("../util/get_type"),r=e("../util/extend"),a=e("../util/unbundle_jsonlint"),s=e("../expression"),l=s.isExpression,u=e("../function"),c=u.isFunction;t.exports=function(t){var i=e("./validate_function"),s=e("./validate_expression"),u=e("./validate_object"),p={"*":function(){return[]},array:e("./validate_array"),boolean:e("./validate_boolean"),number:e("./validate_number"),color:e("./validate_color"),constants:e("./validate_constants"),enum:e("./validate_enum"),filter:e("./validate_filter"),function:e("./validate_function"),layer:e("./validate_layer"),object:e("./validate_object"),source:e("./validate_source"),light:e("./validate_light"),string:e("./validate_string")},f=t.value,d=t.valueSpec,h=t.key,m=t.styleSpec,y=t.style;if("string"===o(f)&&"@"===f[0]){if(m.$version>7)return[new n(h,f,"constants have been deprecated as of v8")];if(!(f in y.constants))return[new n(h,f,'constant "%s" not found',f)];t=r({},t,{value:y.constants[f]})}return d.function&&c(a(f))?i(t):d.function&&l(a.deep(f))?s(t):d.type&&p[d.type]?p[d.type](t):u(r({},t,{valueSpec:d.type?m[d.type]:d}))}},{"../error/validation_error":120,"../expression":136,"../function":146,"../util/extend":152,"../util/get_type":153,"../util/unbundle_jsonlint":157,"./validate_array":159,"./validate_boolean":160,"./validate_color":161,"./validate_constants":162,"./validate_enum":163,"./validate_expression":164,"./validate_filter":165,"./validate_function":166,"./validate_layer":168,"./validate_light":170,"./validate_number":171,"./validate_object":172,"./validate_source":175,"./validate_string":176}],159:[function(e,t,i){var n=e("../util/get_type"),o=e("./validate"),r=e("../error/validation_error");t.exports=function(e){var t=e.value,i=e.valueSpec,a=e.style,s=e.styleSpec,l=e.key,u=e.arrayElementValidator||o;if("array"!==n(t))return[new r(l,t,"array expected, %s found",n(t))];if(i.length&&t.length!==i.length)return[new r(l,t,"array length %d expected, length %d found",i.length,t.length)];if(i["min-length"]&&t.length<i["min-length"])return[new r(l,t,"array length at least %d expected, length %d found",i["min-length"],t.length)];var c={type:i.value};s.$version<7&&(c.function=i.function),"object"===n(i.value)&&(c=i.value);for(var p=[],f=0;f<t.length;f++)p=p.concat(u({array:t,arrayIndex:f,value:t[f],valueSpec:c,style:a,styleSpec:s,key:l+"["+f+"]"}));return p}},{"../error/validation_error":120,"../util/get_type":153,"./validate":158}],160:[function(e,t,i){var n=e("../util/get_type"),o=e("../error/validation_error");t.exports=function(e){var t=e.value,i=e.key,r=n(t);return"boolean"!==r?[new o(i,t,"boolean expected, %s found",r)]:[]}},{"../error/validation_error":120,"../util/get_type":153}],161:[function(e,t,i){var n=e("../error/validation_error"),o=e("../util/get_type"),r=e("csscolorparser").parseCSSColor;t.exports=function(e){var t=e.key,i=e.value,a=o(i);return"string"!==a?[new n(t,i,"color expected, %s found",a)]:null===r(i)?[new n(t,i,'color expected, "%s" found',i)]:[]}},{"../error/validation_error":120,"../util/get_type":153,csscolorparser:11}],162:[function(e,t,i){var n=e("../error/validation_error");t.exports=function(e){var t=e.key,i=e.value;return i?[new n(t,i,"constants have been deprecated as of v8")]:[]}},{"../error/validation_error":120}],163:[function(e,t,i){var n=e("../error/validation_error"),o=e("../util/unbundle_jsonlint");t.exports=function(e){var t=e.key,i=e.value,r=e.valueSpec,a=[];return Array.isArray(r.values)?-1===r.values.indexOf(o(i))&&a.push(new n(t,i,"expected one of [%s], %s found",r.values.join(", "),D()(i))):-1===R()(r.values).indexOf(o(i))&&a.push(new n(t,i,"expected one of [%s], %s found",R()(r.values).join(", "),D()(i))),a}},{"../error/validation_error":120,"../util/unbundle_jsonlint":157}],164:[function(e,t,i){var n=e("../error/validation_error"),o=e("../expression"),r=o.createExpression,a=o.createPropertyExpression,s=e("../util/unbundle_jsonlint");t.exports=function(e){var t=("property"===e.expressionContext?a:r)(s.deep(e.value),e.valueSpec);return"error"!==t.result?[]:t.value.map(function(t){return new n(""+e.key+t.key,e.value,t.message)})}},{"../error/validation_error":120,"../expression":136,"../util/unbundle_jsonlint":157}],165:[function(e,t,i){function n(e){var t=e.value,i=e.key;if("array"!==s(t))return[new o(i,t,"array expected, %s found",s(t))];var r,u=e.styleSpec,c=[];if(t.length<1)return[new o(i,t,"filter array must have at least 1 element")];switch(c=c.concat(a({key:i+"[0]",value:t[0],valueSpec:u.filter_operator,style:e.style,styleSpec:e.styleSpec})),l(t[0])){case"<":case"<=":case">":case">=":t.length>=2&&"$type"===l(t[1])&&c.push(new o(i,t,'"$type" cannot be use with operator "%s"',t[0]));case"==":case"!=":3!==t.length&&c.push(new o(i,t,'filter array for operator "%s" must have 3 elements',t[0]));case"in":case"!in":t.length>=2&&"string"!==(r=s(t[1]))&&c.push(new o(i+"[1]",t[1],"string expected, %s found",r));for(var p=2;p<t.length;p++)r=s(t[p]),"$type"===l(t[1])?c=c.concat(a({key:i+"["+p+"]",value:t[p],valueSpec:u.geometry_type,style:e.style,styleSpec:e.styleSpec})):"string"!==r&&"number"!==r&&"boolean"!==r&&c.push(new o(i+"["+p+"]",t[p],"string, number, or boolean expected, %s found",r));break;case"any":case"all":case"none":for(var f=1;f<t.length;f++)c=c.concat(n({key:i+"["+f+"]",value:t[f],style:e.style,styleSpec:e.styleSpec}));break;case"has":case"!has":r=s(t[1]),2!==t.length?c.push(new o(i,t,'filter array for "%s" operator must have 2 elements',t[0])):"string"!==r&&c.push(new o(i+"[1]",t[1],"string expected, %s found",r))}return c}var o=e("../error/validation_error"),r=e("./validate_expression"),a=e("./validate_enum"),s=e("../util/get_type"),l=e("../util/unbundle_jsonlint"),u=e("../util/extend"),c=e("../feature_filter"),p=c.isExpressionFilter;t.exports=function(e){return p(l.deep(e.value))?r(u({},e,{expressionContext:"filter",valueSpec:{value:"boolean"}})):n(e)}},{"../error/validation_error":120,"../feature_filter":145,"../util/extend":152,"../util/get_type":153,"../util/unbundle_jsonlint":157,"./validate_enum":163,"./validate_expression":164}],166:[function(e,t,i){var n=e("../error/validation_error"),o=e("../util/get_type"),r=e("./validate"),a=e("./validate_object"),s=e("./validate_array"),l=e("./validate_number"),u=e("../util/unbundle_jsonlint");t.exports=function(e){function t(e){if("identity"===y)return[new n(e.key,e.value,'identity function may not have a "stops" property')];var t=[],r=e.value;return t=t.concat(s({key:e.key,value:r,valueSpec:e.valueSpec,style:e.style,styleSpec:e.styleSpec,arrayElementValidator:i})),"array"===o(r)&&0===r.length&&t.push(new n(e.key,r,"array must have at least one stop")),t}function i(e){var t=[],i=e.value,s=e.key;if("array"!==o(i))return[new n(s,i,"array expected, %s found",o(i))];if(2!==i.length)return[new n(s,i,"array length %d expected, length %d found",2,i.length)];if(b){if("object"!==o(i[0]))return[new n(s,i,"object expected, %s found",o(i[0]))];if(void 0===i[0].zoom)return[new n(s,i,"object stop key must have zoom")];if(void 0===i[0].value)return[new n(s,i,"object stop key must have value")];if(h&&h>u(i[0].zoom))return[new n(s,i[0].zoom,"stop zoom values must appear in ascending order")];u(i[0].zoom)!==h&&(h=u(i[0].zoom),d=void 0,v={}),t=t.concat(a({key:s+"[0]",value:i[0],valueSpec:{zoom:{}},style:e.style,styleSpec:e.styleSpec,objectElementValidators:{zoom:l,value:c}}))}else t=t.concat(c({key:s+"[0]",value:i[0],valueSpec:{},style:e.style,styleSpec:e.styleSpec},i));return t.concat(r({key:s+"[1]",value:i[1],valueSpec:m,style:e.style,styleSpec:e.styleSpec}))}function c(e,t){var i=o(e.value),r=u(e.value),a=null!==e.value?e.value:t;if(f){if(i!==f)return[new n(e.key,a,"%s stop domain type must match previous stop domain type %s",i,f)]}else f=i;if("number"!==i&&"string"!==i&&"boolean"!==i)return[new n(e.key,a,"stop domain value must be a number, string, or boolean")];if("number"!==i&&"categorical"!==y){var s="number expected, %s found";return m["property-function"]&&void 0===y&&(s+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new n(e.key,a,s,i)]}return"categorical"!==y||"number"!==i||isFinite(r)&&Math.floor(r)===r?"categorical"!==y&&"number"===i&&void 0!==d&&r<d?[new n(e.key,a,"stop domain values must appear in ascending order")]:(d=r,"categorical"===y&&r in v?[new n(e.key,a,"stop domain values must be unique")]:(v[r]=!0,[])):[new n(e.key,a,"integer expected, found %s",r)]}function p(e){return r({key:e.key,value:e.value,valueSpec:m,style:e.style,styleSpec:e.styleSpec})}var f,d,h,m=e.valueSpec,y=u(e.value.type),v={},g="categorical"!==y&&void 0===e.value.property,_=!g,b="array"===o(e.value.stops)&&"array"===o(e.value.stops[0])&&"object"===o(e.value.stops[0][0]),x=a({key:e.key,value:e.value,valueSpec:e.styleSpec.function,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{stops:t,default:p}});return"identity"===y&&g&&x.push(new n(e.key,e.value,'missing required property "property"')),"identity"===y||e.value.stops||x.push(new n(e.key,e.value,'missing required property "stops"')),"exponential"===y&&"piecewise-constant"===e.valueSpec.function&&x.push(new n(e.key,e.value,"exponential functions not supported")),e.styleSpec.$version>=8&&(_&&!e.valueSpec["property-function"]?x.push(new n(e.key,e.value,"property functions not supported")):g&&!e.valueSpec["zoom-function"]&&"heatmap-color"!==e.objectKey&&x.push(new n(e.key,e.value,"zoom functions not supported"))),"categorical"!==y&&!b||void 0!==e.value.property||x.push(new n(e.key,e.value,'"property" property is required')),x}},{"../error/validation_error":120,"../util/get_type":153,"../util/unbundle_jsonlint":157,"./validate":158,"./validate_array":159,"./validate_number":171,"./validate_object":172}],167:[function(e,t,i){var n=e("../error/validation_error"),o=e("./validate_string");t.exports=function(e){var t=e.value,i=e.key,r=o(e);return r.length?r:(-1===t.indexOf("{fontstack}")&&r.push(new n(i,t,'"glyphs" url must include a "{fontstack}" token')),-1===t.indexOf("{range}")&&r.push(new n(i,t,'"glyphs" url must include a "{range}" token')),r)}},{"../error/validation_error":120,"./validate_string":176}],168:[function(e,t,i){var n=e("../error/validation_error"),o=e("../util/unbundle_jsonlint"),r=e("./validate_object"),a=e("./validate_filter"),s=e("./validate_paint_property"),l=e("./validate_layout_property"),u=e("../util/extend");t.exports=function(e){var t=[],i=e.value,c=e.key,p=e.style,f=e.styleSpec;i.type||i.ref||t.push(new n(c,i,'either "type" or "ref" is required'));var d=o(i.type),h=o(i.ref);if(i.id)for(var m=o(i.id),y=0;y<e.arrayIndex;y++){var v=p.layers[y];o(v.id)===m&&t.push(new n(c,i.id,'duplicate layer id "%s", previously used at line %d',i.id,v.id.__line__))}if("ref"in i){["type","source","source-layer","filter","layout"].forEach(function(e){e in i&&t.push(new n(c,i[e],'"%s" is prohibited for ref layers',e))});var g;p.layers.forEach(function(e){o(e.id)===h&&(g=e)}),g?g.ref?t.push(new n(c,i.ref,"ref cannot reference another ref layer")):d=o(g.type):t.push(new n(c,i.ref,'ref layer "%s" not found',h))}else if("background"!==d)if(i.source){var _=p.sources&&p.sources[i.source],b=_&&o(_.type);_?"vector"===b&&"raster"===d?t.push(new n(c,i.source,'layer "%s" requires a raster source',i.id)):"raster"===b&&"raster"!==d?t.push(new n(c,i.source,'layer "%s" requires a vector source',i.id)):"vector"!==b||i["source-layer"]||t.push(new n(c,i,'layer "%s" must specify a "source-layer"',i.id)):t.push(new n(c,i.source,'source "%s" not found',i.source))}else t.push(new n(c,i,'missing required property "source"'));return t=t.concat(r({key:c,value:i,valueSpec:f.layer,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":function(){return[]},filter:a,layout:function(e){return r({layer:i,key:e.key,value:e.value,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":function(e){return l(u({layerType:d},e))}}})},paint:function(e){return r({layer:i,key:e.key,value:e.value,style:e.style,styleSpec:e.styleSpec,objectElementValidators:{"*":function(e){return s(u({layerType:d},e))}}})}}}))}},{"../error/validation_error":120,"../util/extend":152,"../util/unbundle_jsonlint":157,"./validate_filter":165,"./validate_layout_property":169,"./validate_object":172,"./validate_paint_property":173}],169:[function(e,t,i){var n=e("./validate_property");t.exports=function(e){return n(e,"layout")}},{"./validate_property":174}],170:[function(e,t,i){var n=e("../error/validation_error"),o=e("../util/get_type"),r=e("./validate");t.exports=function(e){var t=e.value,i=e.styleSpec,a=i.light,s=e.style,l=[],u=o(t);if(void 0===t)return l;if("object"!==u)return l=l.concat([new n("light",t,"object expected, %s found",u)]);for(var c in t){var p=c.match(/^(.*)-transition$/);l=p&&a[p[1]]&&a[p[1]].transition?l.concat(r({key:c,value:t[c],valueSpec:i.transition,style:s,styleSpec:i})):a[c]?l.concat(r({key:c,value:t[c],valueSpec:a[c],style:s,styleSpec:i})):l.concat([new n(c,t[c],'unknown property "%s"',c)])}return l}},{"../error/validation_error":120,"../util/get_type":153,"./validate":158}],171:[function(e,t,i){var n=e("../util/get_type"),o=e("../error/validation_error");t.exports=function(e){var t=e.key,i=e.value,r=e.valueSpec,a=n(i);return"number"!==a?[new o(t,i,"number expected, %s found",a)]:"minimum"in r&&i<r.minimum?[new o(t,i,"%s is less than the minimum value %s",i,r.minimum)]:"maximum"in r&&i>r.maximum?[new o(t,i,"%s is greater than the maximum value %s",i,r.maximum)]:[]}},{"../error/validation_error":120,"../util/get_type":153}],172:[function(e,t,i){var n=e("../error/validation_error"),o=e("../util/get_type"),r=e("./validate");t.exports=function(e){var t=e.key,i=e.value,a=e.valueSpec||{},s=e.objectElementValidators||{},l=e.style,u=e.styleSpec,c=[],p=o(i);if("object"!==p)return[new n(t,i,"object expected, %s found",p)];for(var f in i){var d=f.split(".")[0],h=a[d]||a["*"],m=void 0;if(s[d])m=s[d];else if(a[d])m=r;else if(s["*"])m=s["*"];else{if(!a["*"]){c.push(new n(t,i[f],'unknown property "%s"',f));continue}m=r}c=c.concat(m({key:(t?t+".":t)+f,value:i[f],valueSpec:h,style:l,styleSpec:u,object:i,objectKey:f},i))}for(var y in a)a[y].required&&void 0===a[y].default&&void 0===i[y]&&c.push(new n(t,i,'missing required property "%s"',y));return c}},{"../error/validation_error":120,"../util/get_type":153,"./validate":158}],173:[function(e,t,i){var n=e("./validate_property");t.exports=function(e){return n(e,"paint")}},{"./validate_property":174}],174:[function(e,t,i){var n=e("./validate"),o=e("../error/validation_error"),r=e("../util/get_type");t.exports=function(e,t){var i=e.key,a=e.style,s=e.styleSpec,l=e.value,u=e.objectKey,c=s[t+"_"+e.layerType];if(!c)return[];var p=u.match(/^(.*)-transition$/);if("paint"===t&&p&&c[p[1]]&&c[p[1]].transition)return n({key:i,value:l,valueSpec:s.transition,style:a,styleSpec:s});var f=e.valueSpec||c[u];if(!f)return[new o(i,l,'unknown property "%s"',u)];var d;if("string"===r(l)&&f["property-function"]&&!f.tokens&&(d=/^{([^}]+)}$/.exec(l)))return[new o(i,l,'"%s" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": %s` }`.',u,D()(d[1]))];var h=[];return"symbol"===e.layerType&&"text-field"===u&&a&&!a.glyphs&&h.push(new o(i,l,'use of "text-field" requires a style "glyphs" property')),h.concat(n({key:e.key,value:l,valueSpec:f,style:a,styleSpec:s,expressionContext:"property"}))}},{"../error/validation_error":120,"../util/get_type":153,"./validate":158}],175:[function(e,t,i){var n=e("../error/validation_error"),o=e("../util/unbundle_jsonlint"),r=e("./validate_object"),a=e("./validate_enum");t.exports=function(e){var t=e.value,i=e.key,s=e.styleSpec,l=e.style;if(!t.type)return[new n(i,t,'"type" is required')];var u=o(t.type),c=[];switch(u){case"vector":case"raster":if(c=c.concat(r({key:i,value:t,valueSpec:s["source_"+u],style:e.style,styleSpec:s})),"url"in t)for(var p in t)["type","url","tileSize"].indexOf(p)<0&&c.push(new n(i+"."+p,t[p],'a source with a "url" property may not include a "%s" property',p));return c;case"geojson":return r({key:i,value:t,valueSpec:s.source_geojson,style:l,styleSpec:s});case"video":return r({key:i,value:t,valueSpec:s.source_video,style:l,styleSpec:s});case"image":return r({key:i,value:t,valueSpec:s.source_image,style:l,styleSpec:s});case"canvas":return r({key:i,value:t,valueSpec:s.source_canvas,style:l,styleSpec:s});default:return a({key:i+".type",value:t.type,valueSpec:{values:["vector","raster","geojson","video","image","canvas"]},style:l,styleSpec:s})}}},{"../error/validation_error":120,"../util/unbundle_jsonlint":157,"./validate_enum":163,"./validate_object":172}],176:[function(e,t,i){var n=e("../util/get_type"),o=e("../error/validation_error");t.exports=function(e){var t=e.value,i=e.key,r=n(t);return"string"!==r?[new o(i,t,"string expected, %s found",r)]:[]}},{"../error/validation_error":120,"../util/get_type":153}],177:[function(e,t,i){function n(e,t){t=t||l;var i=[];return i=i.concat(s({key:"",value:e,valueSpec:t.$root,styleSpec:t,style:e,objectElementValidators:{glyphs:u,"*":function(){return[]}}})),e.constants&&(i=i.concat(a({key:"constants",value:e.constants,style:e,styleSpec:t}))),o(i)}function o(e){return[].concat(e).sort(function(e,t){return e.line-t.line})}function r(e){return function(){return o(e.apply(this,arguments))}}var a=e("./validate/validate_constants"),s=e("./validate/validate"),l=e("./reference/latest"),u=e("./validate/validate_glyphs_url");n.source=r(e("./validate/validate_source")),n.light=r(e("./validate/validate_light")),n.layer=r(e("./validate/validate_layer")),n.filter=r(e("./validate/validate_filter")),n.paintProperty=r(e("./validate/validate_paint_property")),n.layoutProperty=r(e("./validate/validate_layout_property")),t.exports=n},{"./reference/latest":148,"./validate/validate":158,"./validate/validate_constants":162,"./validate/validate_filter":165,"./validate/validate_glyphs_url":167,"./validate/validate_layer":168,"./validate/validate_layout_property":169,"./validate/validate_light":170,"./validate/validate_paint_property":173,"./validate/validate_source":175}],178:[function(e,t,i){var n=e("../style-spec/reference/latest"),o=e("../util/util"),r=e("../util/evented"),a=e("./validate_style"),s=e("../util/util"),l=s.sphericalToCartesian,u=(e("../style-spec/util/color"),e("../style-spec/util/interpolate")),c=e("./properties"),p=c.Properties,f=c.Transitionable,d=(c.Transitioning,c.PossiblyEvaluated,c.DataConstantProperty),h=function(){this.specification=n.light.position};h.prototype.possiblyEvaluate=function(e,t){return l(e.expression.evaluate(t))},h.prototype.interpolate=function(e,t,i){return{x:u.number(e.x,t.x,i),y:u.number(e.y,t.y,i),z:u.number(e.z,t.z,i)}};var m=new p({anchor:new d(n.light.anchor),position:new h,color:new d(n.light.color),intensity:new d(n.light.intensity)}),y=function(e){function t(t){e.call(this),this._transitionable=new f(m),this.setLight(t),this._transitioning=this._transitionable.untransitioned()}return e&&(t.__proto__=e),t.prototype=F()(e&&e.prototype),t.prototype.constructor=t,t.prototype.getLight=function(){return this._transitionable.serialize()},t.prototype.setLight=function(e){var t=this;if(!this._validate(a.light,e))for(var i in e){var n=e[i];o.endsWith(i,"-transition")?t._transitionable.setTransition(i.slice(0,-"-transition".length),n):t._transitionable.setValue(i,n)}},t.prototype.updateTransitions=function(e,t){!1===e.transition?this._transitioning=this._transitionable.untransitioned():this._transitioning=this._transitionable.transitioned({now:Date.now(),transition:t},this._transitioning)},t.prototype.hasTransition=function(){return this._transitioning.hasTransition()},t.prototype.recalculate=function(e){this.properties=this._transitioning.possiblyEvaluate(e)},t.prototype._validate=function(e,t){return a.emitErrors(this,e.call(a,o.extend({value:t,style:{glyphs:!0,sprite:!0},styleSpec:n})))},t}(r);t.exports=y},{"../style-spec/reference/latest":148,"../style-spec/util/color":150,"../style-spec/util/interpolate":154,"../util/evented":253,"../util/util":266,"./properties":183,"./validate_style":204}],179:[function(e,t,i){var n=e("../util/mapbox"),o=n.normalizeGlyphsURL,r=e("../util/ajax"),a=e("./parse_glyph_pbf");t.exports=function(e,t,i,n,s){var l=256*t,u=l+255,c=n(o(i).replace("{fontstack}",e).replace("{range}",l+"-"+u),r.ResourceType.Glyphs);r.getArrayBuffer(c,function(e,t){if(e)s(e);else if(t){for(var i={},n=0,o=a(t.data);n<o.length;n+=1){var r=o[n];i[r.id]=r}s(null,i)}})}},{"../util/ajax":244,"../util/mapbox":260,"./parse_glyph_pbf":181}],180:[function(e,t,i){var n=e("../util/ajax"),o=e("../util/browser"),r=e("../util/mapbox"),a=r.normalizeSpriteURL,s=e("../util/image"),l=s.RGBAImage;t.exports=function(e,t,i){function r(){if(c)i(c);else if(s&&u){var e=o.getImageData(u),t={};for(var n in s){var r=s[n],a=r.width,p=r.height,f=r.x,d=r.y,h=r.sdf,m=r.pixelRatio,y=l.create({width:a,height:p});l.copy(e,y,{x:f,y:d},{x:0,y:0},{width:a,height:p}),t[n]={data:y,pixelRatio:m,sdf:h}}i(null,t)}}var s,u,c,p=o.devicePixelRatio>1?"@2x":"";n.getJSON(t(a(e,p,".json"),n.ResourceType.SpriteJSON),function(e,t){c||(c=e,s=t,r())}),n.getImage(t(a(e,p,".png"),n.ResourceType.SpriteImage),function(e,t){c||(c=e,u=t,r())})}},{"../util/ajax":244,"../util/browser":245,"../util/image":256,"../util/mapbox":260}],181:[function(e,t,i){function n(e,t,i){1===e&&i.readMessage(o,t)}function o(e,t,i){if(3===e){var n=i.readMessage(r,{}),o=n.id,a=n.bitmap,l=n.width,c=n.height,p=n.left,f=n.top,d=n.advance;t.push({id:o,bitmap:s.create({width:l+2*u,height:c+2*u},a),metrics:{width:l,height:c,left:p,top:f,advance:d}})}}function r(e,t,i){1===e?t.id=i.readVarint():2===e?t.bitmap=i.readBytes():3===e?t.width=i.readVarint():4===e?t.height=i.readVarint():5===e?t.left=i.readSVarint():6===e?t.top=i.readSVarint():7===e&&(t.advance=i.readVarint())}var a=e("../util/image"),s=a.AlphaImage,l=e("pbf"),u=3;t.exports=function(e){return new l(e).readFields(n,[])},t.exports.GLYPH_PBF_BORDER=u},{"../util/image":256,pbf:38}],182:[function(e,t,i){function n(e,t){var i=a.fromID(e),n=a.fromID(t);return i.isLessThan(n)?-1:n.isLessThan(i)?1:0}var o=e("../util/browser"),r=e("../symbol/collision_index"),a=e("../source/tile_coord"),s=function(e){this._currentTileIndex=0,this._tileIDs=e};s.prototype.continuePlacement=function(e,t,i,n,o){for(var r=this;this._currentTileIndex<this._tileIDs.length;)if(e.getTileByID(r._tileIDs[r._currentTileIndex]).placeLayer(i,t,n,e.id),r._currentTileIndex++,o())return!0};var l=function(e,t,i,n,a,s){this.collisionIndex=new r(e.clone()),this._currentPlacementIndex=t.length-1,this._forceFullPlacement=i,this._showCollisionBoxes=n,this._sourceCacheTileIDs={},this._done=!1,this._delayUntil=i||!s?o.now():s._delayUntil+300,this._collisionFadeTimes=s?s._collisionFadeTimes:{latestStart:0,duration:a}};l.prototype.isDone=function(){return this._done},l.prototype.continuePlacement=function(e,t,i){var r=this,a=o.now();if(a<this._delayUntil)return!0;for(var l=function(){var e=o.now()-a;return!r._forceFullPlacement&&e>2};this._currentPlacementIndex>=0;){var u=e[r._currentPlacementIndex],c=t[u];if("symbol"===c.type){var p=i[c.source];if(r._inProgressLayer||(r._sourceCacheTileIDs[c.source]||(r._sourceCacheTileIDs[c.source]=p.getRenderableIds().sort(n)),r._inProgressLayer=new s(r._sourceCacheTileIDs[c.source])),r._inProgressLayer.continuePlacement(p,r.collisionIndex,r._showCollisionBoxes,c,l))return;delete r._inProgressLayer}r._currentPlacementIndex--}for(var f in i)i[f].commitPlacement(r.collisionIndex,r._collisionFadeTimes);this._done=!0},l.prototype.stillFading=function(){return Date.now()<this._collisionFadeTimes.latestStart+this._collisionFadeTimes.duration},t.exports=l},{"../source/tile_coord":112,"../symbol/collision_index":210,"../util/browser":245}],183:[function(e,t,i){var n=e("../util/util"),o=n.extend,r=n.easeCubicInOut,a=e("../style-spec/util/interpolate"),s=e("../style-spec/expression"),l=s.normalizePropertyExpression,u=(e("../style-spec/util/color"),function(e,t){this.property=e,this.value=t,this.expression=l(void 0===t?e.specification.default:t,e.specification)});u.prototype.isDataDriven=function(){return"source"===this.expression.kind||"composite"===this.expression.kind},u.prototype.possiblyEvaluate=function(e){return this.property.possiblyEvaluate(this,e)};var c=function(e){this.property=e,this.value=new u(e,void 0)};c.prototype.transitioned=function(e,t){return new f(this.property,this.value,t,o({},this.transition,e.transition),e.now)},c.prototype.untransitioned=function(){return new f(this.property,this.value,null,{},0)};var p=function(e){this._properties=e,this._values=F()(e.defaultTransitionablePropertyValues)};p.prototype.getValue=function(e){return this._values[e].value.value},p.prototype.setValue=function(e,t){this._values.hasOwnProperty(e)||(this._values[e]=new c(this._values[e].property)),this._values[e].value=new u(this._values[e].property,null===t?void 0:t)},p.prototype.getTransition=function(e){return this._values[e].transition},p.prototype.setTransition=function(e,t){this._values.hasOwnProperty(e)||(this._values[e]=new c(this._values[e].property)),this._values[e].transition=t||void 0},p.prototype.serialize=function(){for(var e=this,t={},i=0,n=R()(e._values);i<n.length;i+=1){var o=n[i],r=e.getValue(o);void 0!==r&&(t[o]=r);var a=e.getTransition(o);void 0!==a&&(t[o+"-transition"]=a)}return t},p.prototype.transitioned=function(e,t){for(var i=this,n=new d(this._properties),o=0,r=R()(i._values);o<r.length;o+=1){var a=r[o];n._values[a]=i._values[a].transitioned(e,t._values[a])}return n},p.prototype.untransitioned=function(){for(var e=this,t=new d(this._properties),i=0,n=R()(e._values);i<n.length;i+=1){var o=n[i];t._values[o]=e._values[o].untransitioned()}return t};var f=function(e,t,i,n,o){this.property=e,this.value=t,this.begin=o+n.delay||0,this.end=this.begin+n.duration||0,(n.delay||n.duration)&&(this.prior=i)};f.prototype.possiblyEvaluate=function(e){var t=e.now||0,i=this.value.possiblyEvaluate(e),n=this.prior;if(n){if(t>this.end)return this.prior=null,i;if(this.value.isDataDriven())return this.prior=null,i;if(t<this.begin)return n.possiblyEvaluate(e);var o=(t-this.begin)/(this.end-this.begin);return this.property.interpolate(n.possiblyEvaluate(e),i,r(o))}return i};var d=function(e){this._properties=e,this._values=F()(e.defaultTransitioningPropertyValues)};d.prototype.possiblyEvaluate=function(e){for(var t=this,i=new y(this._properties),n=0,o=R()(t._values);n<o.length;n+=1){var r=o[n];i._values[r]=t._values[r].possiblyEvaluate(e)}return i},d.prototype.hasTransition=function(){for(var e=this,t=0,i=R()(e._values);t<i.length;t+=1){var n=i[t];if(e._values[n].prior)return!0}return!1};var h=function(e){this._properties=e,this._values=F()(e.defaultPropertyValues)};h.prototype.getValue=function(e){return this._values[e].value},h.prototype.setValue=function(e,t){this._values[e]=new u(this._values[e].property,null===t?void 0:t)},h.prototype.serialize=function(){for(var e=this,t={},i=0,n=R()(e._values);i<n.length;i+=1){var o=n[i],r=e.getValue(o);void 0!==r&&(t[o]=r)}return t},h.prototype.possiblyEvaluate=function(e){for(var t=this,i=new y(this._properties),n=0,o=R()(t._values);n<o.length;n+=1){var r=o[n];i._values[r]=t._values[r].possiblyEvaluate(e)}return i};var m=function(e,t,i){this.property=e,this.value=t,this.globals=i};m.prototype.isConstant=function(){return"constant"===this.value.kind},m.prototype.constantOr=function(e){return"constant"===this.value.kind?this.value.value:e},m.prototype.evaluate=function(e){return this.property.evaluate(this.value,this.globals,e)};var y=function(e){this._properties=e,this._values=F()(e.defaultPossiblyEvaluatedValues)};y.prototype.get=function(e){return this._values[e]};var v=function(e){this.specification=e};v.prototype.possiblyEvaluate=function(e,t){return e.expression.evaluate(t)},v.prototype.interpolate=function(e,t,i){var n=a[this.specification.type];return n?n(e,t,i):e};var g=function(e,t){void 0===t&&(t=!1),this.specification=e,this.useIntegerZoom=t};g.prototype.possiblyEvaluate=function(e,t){return this.useIntegerZoom&&(t=o({},t,{zoom:Math.floor(t.zoom)})),"constant"===e.expression.kind||"camera"===e.expression.kind?new m(this,{kind:"constant",value:e.expression.evaluate(t)},t):new m(this,e.expression,t)},g.prototype.interpolate=function(e,t,i){if("constant"!==e.value.kind||"constant"!==t.value.kind)return e;if(void 0!==e.value.value&&void 0!==e.value.value){var n=a[this.specification.type];return n?new m(this,{kind:"constant",value:n(e.value.value,t.value.value,i)},e.globals):e}},g.prototype.evaluate=function(e,t,i){return this.useIntegerZoom&&(t=o({},t,{zoom:Math.floor(t.zoom)})),"constant"===e.kind?e.value:e.evaluate(t,i)};var _=function(e){this.specification=e};_.prototype.possiblyEvaluate=function(e,t){if(void 0!==e.value){if("constant"===e.expression.kind){var i=e.expression.evaluate(t);return this._calculate(i,i,i,t)}return this._calculate(e.expression.evaluate({zoom:t.zoom-1}),e.expression.evaluate({zoom:t.zoom}),e.expression.evaluate({zoom:t.zoom+1}),t)}},_.prototype._calculate=function(e,t,i,n){var o=n.zoom,r=o-Math.floor(o),a=n.defaultFadeDuration,s=0!==a?Math.min((n.now-n.zoomHistory.lastIntegerZoomTime)/a,1):1;return o>n.zoomHistory.lastIntegerZoom?{from:e,to:t,fromScale:2,toScale:1,t:r+(1-r)*s}:{from:i,to:t,fromScale:.5,toScale:1,t:1-(1-s)*r}},_.prototype.interpolate=function(e){return e};var b=function(e){this.specification=e};b.prototype.possiblyEvaluate=function(){},b.prototype.interpolate=function(){};var x=function(e){var t=this;this.properties=e,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={};for(var i in e){var n=e[i],o=t.defaultPropertyValues[i]=new u(n,void 0),r=t.defaultTransitionablePropertyValues[i]=new c(n);t.defaultTransitioningPropertyValues[i]=r.untransitioned(),t.defaultPossiblyEvaluatedValues[i]=o.possiblyEvaluate({})}};t.exports={PropertyValue:u,Transitionable:p,Transitioning:d,Layout:h,PossiblyEvaluatedPropertyValue:m,PossiblyEvaluated:y,DataConstantProperty:v,DataDrivenProperty:g,CrossFadedProperty:_,HeatmapColorProperty:b,Properties:x}},{"../style-spec/expression":136,"../style-spec/util/color":150,"../style-spec/util/interpolate":154,"../util/util":266}],184:[function(e,t,i){function n(e,t,i){var n=t.paint.get(e).value;return"constant"===n.kind?n.value:i.programConfigurations.get(t.id).paintPropertyStatistics[e].max}function o(e){return Math.sqrt(e[0]*e[0]+e[1]*e[1])}function r(e,t,i,n,o){if(!t[0]&&!t[1])return e;var r=a.convert(t);"viewport"===i&&r._rotate(-n);for(var s=[],l=0;l<e.length;l++){for(var u=e[l],c=[],p=0;p<u.length;p++)c.push(u[p].sub(r._mult(o)));s.push(c)}return s}var a=e("@mapbox/point-geometry");t.exports={getMaximumPaintValue:n,translateDistance:o,translate:r}},{"@mapbox/point-geometry":2}],185:[function(e,t,i){var n=e("../util/evented"),o=e("./style_layer"),r=e("./load_sprite"),a=e("../render/image_manager"),s=e("../render/glyph_manager"),l=e("./light"),u=e("../render/line_atlas"),c=e("../util/util"),p=e("../util/ajax"),f=e("../util/mapbox"),d=e("../util/browser"),h=e("../util/dispatcher"),m=e("./validate_style"),y=e("../source/source").getType,v=e("../source/source").setType,g=e("../source/query_features"),_=e("../source/source_cache"),b=(e("../source/geojson_source"),e("../style-spec/reference/latest")),x=e("../util/global_worker_pool"),w=e("../style-spec/deref"),z=e("../style-spec/diff"),A=e("../source/rtl_text_plugin"),T=e("./placement"),k=c.pick(z.operations,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),S=c.pick(z.operations,["setCenter","setZoom","setBearing","setPitch"]),E=function(e){function t(t,i){var n=this;void 0===i&&(i={}),e.call(this),this.map=t,this.dispatcher=new h(x(),this),this.imageManager=new a,this.glyphManager=new s(t._transformRequest,i.localIdeographFontFamily),this.lineAtlas=new u(256,512),this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory={},this._loaded=!1,this._resetUpdates();var o=this;this._rtlTextPluginCallback=A.registerForPluginAvailability(function(e){o.dispatcher.broadcast("loadRTLTextPlugin",e.pluginBlobURL,e.errorCallback);for(var t in o.sourceCaches)o.sourceCaches[t].reload()}),this.on("data",function(e){if("source"===e.dataType&&"metadata"===e.sourceDataType){var t=n.sourceCaches[e.sourceId];if(t){var i=t.getSource();if(i&&i.vectorLayerIds)for(var o in n._layers){var r=n._layers[o];r.source===i.id&&n._validateLayer(r)}}}})}return e&&(t.__proto__=e),t.prototype=F()(e&&e.prototype),t.prototype.constructor=t,t.prototype.loadURL=function(e,t){var i=this;void 0===t&&(t={}),this.fire("dataloading",{dataType:"style"});var n="boolean"==typeof t.validate?t.validate:!f.isMapboxURL(e);e=f.normalizeStyleURL(e,t.accessToken);var o=this.map._transformRequest(e,p.ResourceType.Style);p.getJSON(o,function(e,t){e?i.fire("error",{error:e}):t&&i._load(t,n)})},t.prototype.loadJSON=function(e,t){var i=this;void 0===t&&(t={}),this.fire("dataloading",{dataType:"style"}),d.frame(function(){i._load(e,!1!==t.validate)})},t.prototype._load=function(e,t){var i=this;if(!t||!m.emitErrors(this,m(e))){this._loaded=!0,this.stylesheet=e,this.updatePaintProperties();for(var n in e.sources)i.addSource(n,e.sources[n],{validate:!1});e.sprite?r(e.sprite,this.map._transformRequest,function(e,t){if(e)i.fire("error",e);else if(t)for(var n in t)i.imageManager.addImage(n,t[n]);i.imageManager.setLoaded(!0),i.fire("data",{dataType:"style"})}):this.imageManager.setLoaded(!0),this.glyphManager.setURL(e.glyphs);var a=w(this.stylesheet.layers);this._order=a.map(function(e){return e.id}),this._layers={};for(var s=0,u=a;s<u.length;s+=1){var c=u[s];c=o.create(c),c.setEventedParent(i,{layer:{id:c.id}}),i._layers[c.id]=c}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new l(this.stylesheet.light),this.fire("data",{dataType:"style"}),this.fire("style.load")}},t.prototype._validateLayer=function(e){var t=this.sourceCaches[e.source];if(t){var i=e.sourceLayer;if(i){var n=t.getSource();("geojson"===n.type||n.vectorLayerIds&&-1===n.vectorLayerIds.indexOf(i))&&this.fire("error",{error:new Error('Source layer "'+i+'" does not exist on source "'+n.id+'" as specified by style layer "'+e.id+'"')})}}},t.prototype.loaded=function(){var e=this;if(!this._loaded)return!1;if(R()(this._updatedSources).length)return!1;for(var t in e.sourceCaches)if(!e.sourceCaches[t].loaded())return!1;return!!this.imageManager.isLoaded()},t.prototype._serializeLayers=function(e){var t=this;return e.map(function(e){return t._layers[e].serialize()})},t.prototype._applyPaintPropertyUpdates=function(e){var t=this;if(this._loaded){e=e||{transition:!0};var i=c.extend({duration:300,delay:0},this.stylesheet.transition),n=this._updatedAllPaintProps?this._layers:this._updatedPaintProps;for(var o in n)t._layers[o].updatePaintTransitions(e,i);this.light.updateTransitions(e,i)}},t.prototype._recalculate=function(e){var t=this;if(this._loaded){for(var i in t.sourceCaches)t.sourceCaches[i].used=!1;for(var n={zoom:e,now:Date.now(),defaultFadeDuration:300,zoomHistory:this._updateZoomHistory(e)},o=0,r=t._order;o<r.length;o+=1){var a=r[o],s=t._layers[a];s.recalculate(n),!s.isHidden(e)&&s.source&&(t.sourceCaches[s.source].used=!0)}this.light.recalculate(n),this.z=e}},t.prototype.hasTransitions=function(){var e=this;if(this.light&&this.light.hasTransition())return!0;for(var t in e.sourceCaches)if(e.sourceCaches[t].hasTransition())return!0;for(var i in e._layers)if(e._layers[i].hasTransition())return!0;return!1},t.prototype._updateZoomHistory=function(e){var t=this.zoomHistory;return void 0===t.lastIntegerZoom&&(t.lastIntegerZoom=Math.floor(e),t.lastIntegerZoomTime=0,t.lastZoom=e),Math.floor(t.lastZoom)<Math.floor(e)?(t.lastIntegerZoom=Math.floor(e),t.lastIntegerZoomTime=Date.now()):Math.floor(t.lastZoom)>Math.floor(e)&&(t.lastIntegerZoom=Math.floor(e+1),t.lastIntegerZoomTime=Date.now()),t.lastZoom=e,t},t.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},t.prototype.update=function(e){var t=this;if(this._changed){var i=R()(this._updatedLayers),n=R()(this._removedLayers);(i.length||n.length)&&this._updateWorkerLayers(i,n);for(var o in t._updatedSources){var r=t._updatedSources[o];"reload"===r?t._reloadSource(o):"clear"===r&&t._clearSource(o)}this._applyPaintPropertyUpdates(e),this._resetUpdates(),this.fire("data",{dataType:"style"})}},t.prototype._updateWorkerLayers=function(e,t){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(e),removedIds:t})},t.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._updatedAllPaintProps=!1},t.prototype.setState=function(e){var t=this;if(this._checkLoaded(),m.emitErrors(this,m(e)))return!1;e=c.clone(e),e.layers=w(e.layers);var i=z(this.serialize(),e).filter(function(e){return!(e.command in S)});if(0===i.length)return!1;var n=i.filter(function(e){return!(e.command in k)});if(n.length>0)throw new Error("Unimplemented: "+n.map(function(e){return e.command}).join(", ")+".");return i.forEach(function(e){"setTransition"!==e.command&&t[e.command].apply(t,e.args)}),this.stylesheet=e,!0},t.prototype.addImage=function(e,t){if(this.imageManager.getImage(e))return this.fire("error",{error:new Error("An image with this name already exists.")});this.imageManager.addImage(e,t),this.fire("data",{dataType:"style"})},t.prototype.removeImage=function(e){if(!this.imageManager.getImage(e))return this.fire("error",{error:new Error("No image with this name exists.")});this.imageManager.removeImage(e),this.fire("data",{dataType:"style"})},t.prototype.addSource=function(e,t,i){var n=this;if(this._checkLoaded(),void 0!==this.sourceCaches[e])throw new Error("There is already a source with this ID");if(!t.type)throw new Error("The type property must be defined, but the only the following properties were given: "+R()(t).join(", ")+".");if(!(["vector","raster","geojson","video","image","canvas"].indexOf(t.type)>=0&&this._validate(m.source,"sources."+e,t,null,i))){var o=this.sourceCaches[e]=new _(e,t,this.dispatcher);o.style=this,o.setEventedParent(this,function(){return{isSourceLoaded:n.loaded(),source:o.serialize(),sourceId:e}}),o.onAdd(this.map),this._changed=!0}},t.prototype.removeSource=function(e){if(this._checkLoaded(),void 0===this.sourceCaches[e])throw new Error("There is no source with this ID");var t=this.sourceCaches[e];delete this.sourceCaches[e],delete this._updatedSources[e],t.fire("data",{sourceDataType:"metadata",dataType:"source",sourceId:e}),t.setEventedParent(null),t.clearTiles(),t.onRemove&&t.onRemove(this.map),this._changed=!0},t.prototype.setGeoJSONSourceData=function(e,t){this._checkLoaded(),this.sourceCaches[e].getSource().setData(t),this._changed=!0},t.prototype.getSource=function(e){return this.sourceCaches[e]&&this.sourceCaches[e].getSource()},t.prototype.addLayer=function(e,t,i){this._checkLoaded();var n=e.id;if("object"==O()(e.source)&&(this.addSource(n,e.source),e=c.clone(e),e=c.extend(e,{source:n})),!this._validate(m.layer,"layers."+n,e,{arrayIndex:-1},i)){var r=o.create(e);this._validateLayer(r),r.setEventedParent(this,{layer:{id:n}});var a=t?this._order.indexOf(t):this._order.length;if(t&&-1===a)return void this.fire("error",{message:new Error('Layer with id "'+t+'" does not exist on this map.')});if(this._order.splice(a,0,n),this._layerOrderChanged=!0,this._layers[n]=r,this._removedLayers[n]&&r.source){var s=this._removedLayers[n];delete this._removedLayers[n],s.type!==r.type?this._updatedSources[r.source]="clear":(this._updatedSources[r.source]="reload",this.sourceCaches[r.source].pause())}this._updateLayer(r),this.updatePaintProperties(n)}},t.prototype.moveLayer=function(e,t){if(this._checkLoaded(),this._changed=!0,!this._layers[e])return void this.fire("error",{error:new Error("The layer '"+e+"' does not exist in the map's style and cannot be moved.")});var i=this._order.indexOf(e);this._order.splice(i,1);var n=t?this._order.indexOf(t):this._order.length;this._order.splice(n,0,e),this._layerOrderChanged=!0},t.prototype.removeLayer=function(e){this._checkLoaded();var t=this._layers[e];if(!t)return void this.fire("error",{error:new Error("The layer '"+e+"' does not exist in the map's style and cannot be removed.")});t.setEventedParent(null);var i=this._order.indexOf(e);this._order.splice(i,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[e]=t,delete this._layers[e],delete this._updatedLayers[e],delete this._updatedPaintProps[e]},t.prototype.getLayer=function(e){return this._layers[e]},t.prototype.setLayerZoomRange=function(e,t,i){this._checkLoaded();var n=this.getLayer(e);if(!n)return void this.fire("error",{error:new Error("The layer '"+e+"' does not exist in the map's style and cannot have zoom extent.")});n.minzoom===t&&n.maxzoom===i||(null!=t&&(n.minzoom=t),null!=i&&(n.maxzoom=i),this._updateLayer(n))},t.prototype.setFilter=function(e,t){this._checkLoaded();var i=this.getLayer(e);return i?c.deepEqual(i.filter,t)?void 0:null===t||void 0===t?(i.filter=void 0,void this._updateLayer(i)):void(this._validate(m.filter,"layers."+i.id+".filter",t)||(i.filter=c.clone(t),this._updateLayer(i))):void this.fire("error",{error:new Error("The layer '"+e+"' does not exist in the map's style and cannot be filtered.")})},t.prototype.getFilter=function(e){return c.clone(this.getLayer(e).filter)},t.prototype.setLayoutProperty=function(e,t,i){this._checkLoaded();var n=this.getLayer(e);if(!n)return void this.fire("error",{error:new Error("The layer '"+e+"' does not exist in the map's style and cannot be styled.")});c.deepEqual(n.getLayoutProperty(t),i)||(n.setLayoutProperty(t,i),this._updateLayer(n))},t.prototype.getLayoutProperty=function(e,t){return this.getLayer(e).getLayoutProperty(t)},t.prototype.setPaintProperty=function(e,t,i){this._checkLoaded();var n=this.getLayer(e);if(!n)return void this.fire("error",{error:new Error("The layer '"+e+"' does not exist in the map's style and cannot be styled.")});if(!c.deepEqual(n.getPaintProperty(t),i)){var o=n._transitionablePaint._values[t].value.isDataDriven();n.setPaintProperty(t,i),(n._transitionablePaint._values[t].value.isDataDriven()||o)&&this._updateLayer(n),this.updatePaintProperties(e,t)}},t.prototype.getPaintProperty=function(e,t){return this.getLayer(e).getPaintProperty(t)},t.prototype.getTransition=function(){return c.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},t.prototype.updatePaintProperties=function(e,t){if(this._changed=!0,e){var i=this._updatedPaintProps;i[e]||(i[e]={}),i[e][t||"all"]=!0}else this._updatedAllPaintProps=!0},t.prototype.serialize=function(){var e=this;return c.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:c.mapObject(this.sourceCaches,function(e){return e.serialize()}),layers:this._order.map(function(t){return e._layers[t].serialize()})},function(e){return void 0!==e})},t.prototype._updateLayer=function(e){this._updatedLayers[e.id]=!0,e.source&&!this._updatedSources[e.source]&&(this._updatedSources[e.source]="reload",this.sourceCaches[e.source].pause()),this._changed=!0},t.prototype._flattenRenderedFeatures=function(e){for(var t=this,i=[],n=this._order.length-1;n>=0;n--)for(var o=t._order[n],r=0,a=e;r<a.length;r+=1){var s=a[r],l=s[o];if(l)for(var u=0,c=l;u<c.length;u+=1){var p=c[u];i.push(p)}}return i},t.prototype.queryRenderedFeatures=function(e,t,i,n){var o=this;t&&t.filter&&this._validate(m.filter,"queryRenderedFeatures.filter",t.filter);var r={};if(t&&t.layers){if(!Array.isArray(t.layers))return this.fire("error",{error:"parameters.layers must be an Array."}),[];for(var a=0,s=t.layers;a<s.length;a+=1){var l=s[a],u=o._layers[l];if(!u)return o.fire("error",{error:"The layer '"+l+"' does not exist in the map's style and cannot be queried for features."}),[];r[u.source]=!0}}var c=[];for(var p in o.sourceCaches)if(!t.layers||r[p]){var f=g.rendered(o.sourceCaches[p],o._layers,e,t,i,n);c.push(f)}return this._flattenRenderedFeatures(c)},t.prototype.querySourceFeatures=function(e,t){t&&t.filter&&this._validate(m.filter,"querySourceFeatures.filter",t.filter);var i=this.sourceCaches[e];return i?g.source(i,t):[]},t.prototype.addSourceType=function(e,t,i){return y(e)?i(new Error('A source type called "'+e+'" already exists.')):(v(e,t),t.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:e,url:t.workerSourceURL},i):i(null,null))},t.prototype.getLight=function(){return this.light.getLight()},t.prototype.setLight=function(e,t){this._checkLoaded();var i=this.light.getLight(),n=!1;for(var o in e)if(!c.deepEqual(e[o],i[o])){n=!0;break}if(n){t=t||{transition:!0};var r=c.extend({duration:300,delay:0},this.stylesheet.transition);this.light.setLight(e),this.light.updateTransitions(t,r)}},t.prototype._validate=function(e,t,i,n,o){return(!o||!1!==o.validate)&&m.emitErrors(this,e.call(m,c.extend({key:t,style:this.serialize(),value:i,styleSpec:b},n)))},t.prototype._remove=function(){var e=this;A.evented.off("pluginAvailable",this._rtlTextPluginCallback);for(var t in e.sourceCaches)e.sourceCaches[t].clearTiles();this.dispatcher.remove()},t.prototype._clearSource=function(e){this.sourceCaches[e].clearTiles()},t.prototype._reloadSource=function(e){this.sourceCaches[e].resume(),this.sourceCaches[e].reload()},t.prototype._updateSources=function(e){var t=this;for(var i in t.sourceCaches)t.sourceCaches[i].update(e)},t.prototype.getNeedsFullPlacement=function(){var e=this;if(this._layerOrderChanged)return!0;for(var t in e.sourceCaches)if(e.sourceCaches[t].getNeedsFullPlacement())return!0;return!1},t.prototype._generateCollisionBoxes=function(){var e=this;for(var t in e.sourceCaches)e._reloadSource(t)},t.prototype._updatePlacement=function(e,t,i){var n=this.getNeedsFullPlacement();return(n||!this.placement||this.placement.isDone())&&(this.placement=new T(e,this._order,n,t,i,this.placement),this._layerOrderChanged=!1),this.placement.continuePlacement(this._order,this._layers,this.sourceCaches),this.placement.isDone()&&(this.collisionIndex=this.placement.collisionIndex),!this.placement.isDone()||this.placement.stillFading()},t.prototype.getImages=function(e,t,i){this.imageManager.getImages(t.icons,i)},t.prototype.getGlyphs=function(e,t,i){this.glyphManager.getGlyphs(t.stacks,i)},t}(n);t.exports=E},{"../render/glyph_manager":85,"../render/image_manager":87,"../render/line_atlas":88,"../source/geojson_source":99,"../source/query_features":105,"../source/rtl_text_plugin":107,"../source/source":108,"../source/source_cache":109,"../style-spec/deref":118,"../style-spec/diff":119,"../style-spec/reference/latest":148,"../util/ajax":244,"../util/browser":245,"../util/dispatcher":251,"../util/evented":253,"../util/global_worker_pool":255,"../util/mapbox":260,"../util/util":266,"./light":178,"./load_sprite":180,"./placement":182,"./style_layer":186,"./validate_style":204}],186:[function(e,t,i){var n=e("../util/util"),o=e("../style-spec/reference/latest"),r=e("./validate_style"),a=e("../util/evented"),s=e("./properties"),l=s.Layout,u=s.Transitionable,c=(s.Transitioning,s.Properties,function(e){function t(t,i){var n=this;e.call(this),this.id=t.id,this.metadata=t.metadata,this.type=t.type,this.minzoom=t.minzoom,this.maxzoom=t.maxzoom,this.visibility="visible","background"!==t.type&&(this.source=t.source,this.sourceLayer=t["source-layer"],this.filter=t.filter),this._featureFilter=function(){return!0},i.layout&&(this._unevaluatedLayout=new l(i.layout)),this._transitionablePaint=new u(i.paint);for(var o in t.paint)n.setPaintProperty(o,t.paint[o],{validate:!1});for(var r in t.layout)n.setLayoutProperty(r,t.layout[r],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned()}return e&&(t.__proto__=e),t.prototype=F()(e&&e.prototype),t.prototype.constructor=t,t.prototype.getLayoutProperty=function(e){return"visibility"===e?this.visibility:this._unevaluatedLayout.getValue(e)},t.prototype.setLayoutProperty=function(e,t,i){if(null!==t&&void 0!==t){var n="layers."+this.id+".layout."+e;if(this._validate(r.layoutProperty,n,e,t,i))return}if("visibility"===e)return void(this.visibility="none"===t?t:"visible");this._unevaluatedLayout.setValue(e,t)},t.prototype.getPaintProperty=function(e){return n.endsWith(e,"-transition")?this._transitionablePaint.getTransition(e.slice(0,-"-transition".length)):this._transitionablePaint.getValue(e)},t.prototype.setPaintProperty=function(e,t,i){if(null!==t&&void 0!==t){var o="layers."+this.id+".paint."+e;if(this._validate(r.paintProperty,o,e,t,i))return}n.endsWith(e,"-transition")?this._transitionablePaint.setTransition(e.slice(0,-"-transition".length),t||void 0):this._transitionablePaint.setValue(e,t)},t.prototype.isHidden=function(e){return!!(this.minzoom&&e<this.minzoom)||!!(this.maxzoom&&e>=this.maxzoom)||"none"===this.visibility},t.prototype.updatePaintTransitions=function(e,t){!1===e.transition?this._transitioningPaint=this._transitionablePaint.untransitioned():this._transitioningPaint=this._transitionablePaint.transitioned({now:Date.now(),transition:t},this._transitioningPaint)},t.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},t.prototype.recalculate=function(e){this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(e)),this.paint=this._transitioningPaint.possiblyEvaluate(e)},t.prototype.serialize=function(){var e={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return"none"===this.visibility&&(e.layout=e.layout||{},e.layout.visibility="none"),n.filterObject(e,function(e,t){return!(void 0===e||"layout"===t&&!R()(e).length||"paint"===t&&!R()(e).length)})},t.prototype._validate=function(e,t,i,n,a){return(!a||!1!==a.validate)&&r.emitErrors(this,e.call(r,{key:t,layerType:this.type,objectKey:i,value:n,styleSpec:o,style:{glyphs:!0,sprite:!0}}))},t.prototype.has3DPass=function(){return!1},t.prototype.resize=function(e){},t}(a));t.exports=c;var p={circle:e("./style_layer/circle_style_layer"),heatmap:e("./style_layer/heatmap_style_layer"),fill:e("./style_layer/fill_style_layer"),"fill-extrusion":e("./style_layer/fill_extrusion_style_layer"),line:e("./style_layer/line_style_layer"),symbol:e("./style_layer/symbol_style_layer"),background:e("./style_layer/background_style_layer"),raster:e("./style_layer/raster_style_layer")};c.create=function(e){return new p[e.type](e)}},{"../style-spec/reference/latest":148,"../util/evented":253,"../util/util":266,"./properties":183,"./style_layer/background_style_layer":187,"./style_layer/circle_style_layer":189,"./style_layer/fill_extrusion_style_layer":191,"./style_layer/fill_style_layer":193,"./style_layer/heatmap_style_layer":195,"./style_layer/line_style_layer":197,"./style_layer/raster_style_layer":199,"./style_layer/symbol_style_layer":201,"./validate_style":204}],187:[function(e,t,i){var n=e("../style_layer"),o=e("./background_style_layer_properties"),r=e("../properties"),a=(r.Transitionable,r.Transitioning,r.PossiblyEvaluated,function(e){function t(t){e.call(this,t,o)}return e&&(t.__proto__=e),t.prototype=F()(e&&e.prototype),t.prototype.constructor=t,t}(n));t.exports=a},{"../properties":183,"../style_layer":186,"./background_style_layer_properties":188}],188:[function(e,t,i){var n=e("../../style-spec/reference/latest"),o=e("../properties"),r=o.Properties,a=o.DataConstantProperty,s=(o.DataDrivenProperty,o.CrossFadedProperty),l=(o.HeatmapColorProperty,new r({"background-color":new a(n.paint_background["background-color"]),"background-pattern":new s(n.paint_background["background-pattern"]),"background-opacity":new a(n.paint_background["background-opacity"])}));t.exports={paint:l}},{"../../style-spec/reference/latest":148,"../properties":183}],189:[function(e,t,i){var n=e("../style_layer"),o=e("../../data/bucket/circle_bucket"),r=e("../../util/intersection_tests"),a=r.multiPolygonIntersectsBufferedMultiPoint,s=e("../query_utils"),l=s.getMaximumPaintValue,u=s.translateDistance,c=s.translate,p=e("./circle_style_layer_properties"),f=e("../properties"),d=(f.Transitionable,f.Transitioning,f.PossiblyEvaluated,function(e){function t(t){e.call(this,t,p)}return e&&(t.__proto__=e),t.prototype=F()(e&&e.prototype),t.prototype.constructor=t,t.prototype.createBucket=function(e){return new o(e)},t.prototype.queryRadius=function(e){var t=e;return l("circle-radius",this,t)+l("circle-stroke-width",this,t)+u(this.paint.get("circle-translate"))},t.prototype.queryIntersectsFeature=function(e,t,i,n,o,r){var s=c(e,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),o,r),l=this.paint.get("circle-radius").evaluate(t)*r,u=this.paint.get("circle-stroke-width").evaluate(t)*r;return a(s,i,l+u)},t}(n));t.exports=d},{"../../data/bucket/circle_bucket":52,"../../util/intersection_tests":257,"../properties":183,"../query_utils":184,"../style_layer":186,"./circle_style_layer_properties":190}],190:[function(e,t,i){var n=e("../../style-spec/reference/latest"),o=e("../properties"),r=o.Properties,a=o.DataConstantProperty,s=o.DataDrivenProperty,l=(o.CrossFadedProperty,o.HeatmapColorProperty,new r({"circle-radius":new s(n.paint_circle["circle-radius"]),"circle-color":new s(n.paint_circle["circle-color"]),"circle-blur":new s(n.paint_circle["circle-blur"]),"circle-opacity":new s(n.paint_circle["circle-opacity"]),"circle-translate":new a(n.paint_circle["circle-translate"]),"circle-translate-anchor":new a(n.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new a(n.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new a(n.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new s(n.paint_circle["circle-stroke-width"]),"circle-stroke-color":new s(n.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new s(n.paint_circle["circle-stroke-opacity"])}));t.exports={paint:l}},{"../../style-spec/reference/latest":148,"../properties":183}],191:[function(e,t,i){var n=e("../style_layer"),o=e("../../data/bucket/fill_extrusion_bucket"),r=e("../../util/intersection_tests"),a=r.multiPolygonIntersectsMultiPolygon,s=e("../query_utils"),l=s.translateDistance,u=s.translate,c=e("./fill_extrusion_style_layer_properties"),p=e("../properties"),f=(p.Transitionable,p.Transitioning,p.PossiblyEvaluated,function(e){function t(t){e.call(this,t,c)}return e&&(t.__proto__=e),t.prototype=F()(e&&e.prototype),t.prototype.constructor=t,t.prototype.createBucket=function(e){return new o(e)},t.prototype.queryRadius=function(){return l(this.paint.get("fill-extrusion-translate"))},t.prototype.queryIntersectsFeature=function(e,t,i,n,o,r){var s=u(e,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),o,r);return a(s,i)},t.prototype.has3DPass=function(){return 0!==this.paint.get("fill-extrusion-opacity")&&"none"!==this.visibility},t.prototype.resize=function(e){if(this.viewportFrame){var t=this.viewportFrame,i=t.texture,n=t.fbo;e.deleteTexture(i),e.deleteFramebuffer(n),this.viewportFrame=null}},t}(n));t.exports=f},{"../../data/bucket/fill_extrusion_bucket":54,"../../util/intersection_tests":257,"../properties":183,"../query_utils":184,"../style_layer":186,"./fill_extrusion_style_layer_properties":192}],192:[function(e,t,i){var n=e("../../style-spec/reference/latest"),o=e("../properties"),r=o.Properties,a=o.DataConstantProperty,s=o.DataDrivenProperty,l=o.CrossFadedProperty,u=(o.HeatmapColorProperty,new r({"fill-extrusion-opacity":new a(n["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new s(n["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new a(n["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new a(n["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new l(n["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new s(n["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new s(n["paint_fill-extrusion"]["fill-extrusion-base"])}));t.exports={paint:u}},{"../../style-spec/reference/latest":148,"../properties":183}],193:[function(e,t,i){var n=e("../style_layer"),o=e("../../data/bucket/fill_bucket"),r=e("../../util/intersection_tests"),a=r.multiPolygonIntersectsMultiPolygon,s=e("../query_utils"),l=s.translateDistance,u=s.translate,c=e("./fill_style_layer_properties"),p=e("../properties"),f=(p.Transitionable,p.Transitioning,p.PossiblyEvaluated,function(e){function t(t){e.call(this,t,c)}return e&&(t.__proto__=e),t.prototype=F()(e&&e.prototype),t.prototype.constructor=t,t.prototype.recalculate=function(e){this.paint=this._transitioningPaint.possiblyEvaluate(e),void 0===this._transitionablePaint.getValue("fill-outline-color")&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},t.prototype.createBucket=function(e){return new o(e)},t.prototype.queryRadius=function(){return l(this.paint.get("fill-translate"))},t.prototype.queryIntersectsFeature=function(e,t,i,n,o,r){var s=u(e,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),o,r);return a(s,i)},t}(n));t.exports=f},{"../../data/bucket/fill_bucket":53,"../../util/intersection_tests":257,"../properties":183,"../query_utils":184,"../style_layer":186,"./fill_style_layer_properties":194}],194:[function(e,t,i){var n=e("../../style-spec/reference/latest"),o=e("../properties"),r=o.Properties,a=o.DataConstantProperty,s=o.DataDrivenProperty,l=o.CrossFadedProperty,u=(o.HeatmapColorProperty,new r({"fill-antialias":new a(n.paint_fill["fill-antialias"]),"fill-opacity":new s(n.paint_fill["fill-opacity"]),"fill-color":new s(n.paint_fill["fill-color"]),"fill-outline-color":new s(n.paint_fill["fill-outline-color"]),"fill-translate":new a(n.paint_fill["fill-translate"]),"fill-translate-anchor":new a(n.paint_fill["fill-translate-anchor"]),"fill-pattern":new l(n.paint_fill["fill-pattern"])}));t.exports={paint:u}},{"../../style-spec/reference/latest":148,"../properties":183}],195:[function(e,t,i){var n=e("../style_layer"),o=e("../../data/bucket/heatmap_bucket"),r=e("../../util/image").RGBAImage,a=e("./heatmap_style_layer_properties"),s=e("../properties"),l=(s.Transitionable,s.Transitioning,s.PossiblyEvaluated,function(e){function t(t){e.call(this,t,a),this._updateColorRamp()}return e&&(t.__proto__=e),t.prototype=F()(e&&e.prototype),t.prototype.constructor=t,t.prototype.createBucket=function(e){return new o(e)},t.prototype.setPaintProperty=function(t,i,n){e.prototype.setPaintProperty.call(this,t,i,n),"heatmap-color"===t&&this._updateColorRamp()},t.prototype._updateColorRamp=function(){for(var e=this._transitionablePaint._values["heatmap-color"].value.expression,t=new Uint8Array(1024),i=t.length,n=4;n<i;n+=4){var o=e.evaluate({heatmapDensity:n/i});t[n+0]=Math.floor(255*o.r/o.a),t[n+1]=Math.floor(255*o.g/o.a),t[n+2]=Math.floor(255*o.b/o.a),t[n+3]=Math.floor(255*o.a)}this.colorRamp=r.create({width:256,height:1},t),this.colorRampTexture=null},t.prototype.resize=function(e){this.heatmapTexture&&(e.deleteTexture(this.heatmapTexture),this.heatmapTexture=null),this.heatmapFbo&&(e.deleteFramebuffer(this.heatmapFbo),this.heatmapFbo=null)},t.prototype.queryRadius=function(){return 0},t.prototype.queryIntersectsFeature=function(){return!1},t}(n));t.exports=l},{"../../data/bucket/heatmap_bucket":55,"../../util/image":256,"../properties":183,"../style_layer":186,"./heatmap_style_layer_properties":196}],196:[function(e,t,i){var n=e("../../style-spec/reference/latest"),o=e("../properties"),r=o.Properties,a=o.DataConstantProperty,s=o.DataDrivenProperty,l=(o.CrossFadedProperty,o.HeatmapColorProperty),u=new r({"heatmap-radius":new a(n.paint_heatmap["heatmap-radius"]),"heatmap-weight":new s(n.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new a(n.paint_heatmap["heatmap-intensity"]),"heatmap-color":new l(n.paint_heatmap["heatmap-color"]),"heatmap-opacity":new a(n.paint_heatmap["heatmap-opacity"])});t.exports={paint:u}},{"../../style-spec/reference/latest":148,"../properties":183}],197:[function(e,t,i){function n(e,t){return t>0?t+2*e:e}function o(e,t){for(var i=[],n=new r(0,0),o=0;o<e.length;o++){for(var a=e[o],s=[],l=0;l<a.length;l++){var u=a[l-1],c=a[l],p=a[l+1],f=0===l?n:c.sub(u)._unit()._perp(),d=l===a.length-1?n:p.sub(c)._unit()._perp(),h=f._add(d)._unit(),m=h.x*d.x+h.y*d.y;h._mult(1/m),s.push(h._mult(t)._add(c))}i.push(s)}return i}var r=e("@mapbox/point-geometry"),a=e("../style_layer"),s=e("../../data/bucket/line_bucket"),l=e("../../util/intersection_tests"),u=l.multiPolygonIntersectsBufferedMultiLine,c=e("../query_utils"),p=c.getMaximumPaintValue,f=c.translateDistance,d=c.translate,h=e("./line_style_layer_properties"),m=e("../properties"),y=(m.Transitionable,m.Transitioning,m.Layout,m.PossiblyEvaluated,m.DataDrivenProperty),v=new y(h.paint.properties["line-width"].specification,!0),g=function(e){function t(t){e.call(this,t,h)}return e&&(t.__proto__=e),t.prototype=F()(e&&e.prototype),t.prototype.constructor=t,t.prototype.recalculate=function(t){e.prototype.recalculate.call(this,t),this.paint._values["line-floorwidth"]=v.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,t)},t.prototype.createBucket=function(e){return new s(e)},t.prototype.queryRadius=function(e){var t=e,i=n(p("line-width",this,t),p("line-gap-width",this,t)),o=p("line-offset",this,t);return i/2+Math.abs(o)+f(this.paint.get("line-translate"))},t.prototype.queryIntersectsFeature=function(e,t,i,r,a,s){var l=d(e,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),a,s),c=s/2*n(this.paint.get("line-width").evaluate(t),this.paint.get("line-gap-width").evaluate(t)),p=this.paint.get("line-offset").evaluate(t);return p&&(i=o(i,p*s)),u(l,i,c)},t}(a);t.exports=g},{"../../data/bucket/line_bucket":56,"../../util/intersection_tests":257,"../properties":183,"../query_utils":184,"../style_layer":186,"./line_style_layer_properties":198,"@mapbox/point-geometry":2}],198:[function(e,t,i){var n=e("../../style-spec/reference/latest"),o=e("../properties"),r=o.Properties,a=o.DataConstantProperty,s=o.DataDrivenProperty,l=o.CrossFadedProperty,u=(o.HeatmapColorProperty,new r({"line-cap":new a(n.layout_line["line-cap"]),"line-join":new s(n.layout_line["line-join"]),"line-miter-limit":new a(n.layout_line["line-miter-limit"]),"line-round-limit":new a(n.layout_line["line-round-limit"])})),c=new r({"line-opacity":new s(n.paint_line["line-opacity"]),"line-color":new s(n.paint_line["line-color"]),"line-translate":new a(n.paint_line["line-translate"]),"line-translate-anchor":new a(n.paint_line["line-translate-anchor"]),"line-width":new s(n.paint_line["line-width"]),"line-gap-width":new s(n.paint_line["line-gap-width"]),"line-offset":new s(n.paint_line["line-offset"]),"line-blur":new s(n.paint_line["line-blur"]),"line-dasharray":new l(n.paint_line["line-dasharray"]),"line-pattern":new l(n.paint_line["line-pattern"])});t.exports={paint:c,layout:u}},{"../../style-spec/reference/latest":148,"../properties":183}],199:[function(e,t,i){var n=e("../style_layer"),o=e("./raster_style_layer_properties"),r=e("../properties"),a=(r.Transitionable,r.Transitioning,r.PossiblyEvaluated,function(e){function t(t){e.call(this,t,o)}return e&&(t.__proto__=e),t.prototype=F()(e&&e.prototype),t.prototype.constructor=t,t}(n));t.exports=a},{"../properties":183,"../style_layer":186,"./raster_style_layer_properties":200}],200:[function(e,t,i){var n=e("../../style-spec/reference/latest"),o=e("../properties"),r=o.Properties,a=o.DataConstantProperty,s=(o.DataDrivenProperty,o.CrossFadedProperty,o.HeatmapColorProperty,new r({"raster-opacity":new a(n.paint_raster["raster-opacity"]),"raster-hue-rotate":new a(n.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new a(n.paint_raster["raster-brightness-min"]),"raster-brightness-max":new a(n.paint_raster["raster-brightness-max"]),"raster-saturation":new a(n.paint_raster["raster-saturation"]),"raster-contrast":new a(n.paint_raster["raster-contrast"]),"raster-fade-duration":new a(n.paint_raster["raster-fade-duration"])}));t.exports={paint:s}},{"../../style-spec/reference/latest":148,"../properties":183}],201:[function(e,t,i){var n=e("../style_layer"),o=e("../../data/bucket/symbol_bucket"),r=e("../../util/token"),a=e("../../style-spec/expression"),s=a.isExpression,l=e("./symbol_style_layer_properties"),u=e("../properties"),c=(u.Transitionable,u.Transitioning,u.Layout,u.PossiblyEvaluated,function(e){function t(t){e.call(this,t,l)}return e&&(t.__proto__=e),t.prototype=F()(e&&e.prototype),t.prototype.constructor=t,t.prototype.recalculate=function(t){e.prototype.recalculate.call(this,t),"auto"===this.layout.get("icon-rotation-alignment")&&("line"===this.layout.get("symbol-placement")?this.layout._values["icon-rotation-alignment"]="map":this.layout._values["icon-rotation-alignment"]="viewport"),"auto"===this.layout.get("text-rotation-alignment")&&("line"===this.layout.get("symbol-placement")?this.layout._values["text-rotation-alignment"]="map":this.layout._values["text-rotation-alignment"]="viewport"),"auto"===this.layout.get("text-pitch-alignment")&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),"auto"===this.layout.get("icon-pitch-alignment")&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"))},t.prototype.getValueAndResolveTokens=function(e,t){var i=this.layout.get(e).evaluate(t),n=this._unevaluatedLayout._values[e];return n.isDataDriven()||s(n.value)?i:r(t.properties,i)},t.prototype.createBucket=function(e){return new o(e)},t.prototype.queryRadius=function(){return 0},t.prototype.queryIntersectsFeature=function(){return!1},t}(n));t.exports=c},{"../../data/bucket/symbol_bucket":57,"../../style-spec/expression":136,"../../util/token":265,"../properties":183,"../style_layer":186,"./symbol_style_layer_properties":202}],202:[function(e,t,i){var n=e("../../style-spec/reference/latest"),o=e("../properties"),r=o.Properties,a=o.DataConstantProperty,s=o.DataDrivenProperty,l=(o.CrossFadedProperty,o.HeatmapColorProperty,new r({"symbol-placement":new a(n.layout_symbol["symbol-placement"]),"symbol-spacing":new a(n.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new a(n.layout_symbol["symbol-avoid-edges"]),"icon-allow-overlap":new a(n.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new a(n.layout_symbol["icon-ignore-placement"]),"icon-optional":new a(n.layout_symbol["icon-optional"]),"icon-rotation-alignment":new a(n.layout_symbol["icon-rotation-alignment"]),"icon-size":new s(n.layout_symbol["icon-size"]),"icon-text-fit":new a(n.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new a(n.layout_symbol["icon-text-fit-padding"]),"icon-image":new s(n.layout_symbol["icon-image"]),"icon-rotate":new s(n.layout_symbol["icon-rotate"]),"icon-padding":new a(n.layout_symbol["icon-padding"]),"icon-keep-upright":new a(n.layout_symbol["icon-keep-upright"]),"icon-offset":new s(n.layout_symbol["icon-offset"]),"icon-anchor":new s(n.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new a(n.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new a(n.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new a(n.layout_symbol["text-rotation-alignment"]),"text-field":new s(n.layout_symbol["text-field"]),"text-font":new a(n.layout_symbol["text-font"]),"text-size":new s(n.layout_symbol["text-size"]),"text-max-width":new s(n.layout_symbol["text-max-width"]),"text-line-height":new a(n.layout_symbol["text-line-height"]),"text-letter-spacing":new s(n.layout_symbol["text-letter-spacing"]),"text-justify":new s(n.layout_symbol["text-justify"]),"text-anchor":new s(n.layout_symbol["text-anchor"]),"text-max-angle":new a(n.layout_symbol["text-max-angle"]),"text-rotate":new s(n.layout_symbol["text-rotate"]),"text-padding":new a(n.layout_symbol["text-padding"]),"text-keep-upright":new a(n.layout_symbol["text-keep-upright"]),"text-transform":new s(n.layout_symbol["text-transform"]),"text-offset":new s(n.layout_symbol["text-offset"]),"text-allow-overlap":new a(n.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new a(n.layout_symbol["text-ignore-placement"]),"text-optional":new a(n.layout_symbol["text-optional"])})),u=new r({"icon-opacity":new s(n.paint_symbol["icon-opacity"]),"icon-color":new s(n.paint_symbol["icon-color"]),"icon-halo-color":new s(n.paint_symbol["icon-halo-color"]),"icon-halo-width":new s(n.paint_symbol["icon-halo-width"]),"icon-halo-blur":new s(n.paint_symbol["icon-halo-blur"]),"icon-translate":new a(n.paint_symbol["icon-translate"]),"icon-translate-anchor":new a(n.paint_symbol["icon-translate-anchor"]),"text-opacity":new s(n.paint_symbol["text-opacity"]),"text-color":new s(n.paint_symbol["text-color"]),"text-halo-color":new s(n.paint_symbol["text-halo-color"]),"text-halo-width":new s(n.paint_symbol["text-halo-width"]),"text-halo-blur":new s(n.paint_symbol["text-halo-blur"]),"text-translate":new a(n.paint_symbol["text-translate"]),"text-translate-anchor":new a(n.paint_symbol["text-translate-anchor"])});t.exports={paint:u,layout:l}},{"../../style-spec/reference/latest":148,"../properties":183}],203:[function(e,t,i){var n=e("./style_layer"),o=e("../util/util"),r=e("../style-spec/feature_filter"),a=e("../style-spec/group_by_layout"),s=function(e){e&&this.replace(e)};s.prototype.replace=function(e){this._layerConfigs={},this._layers={},this.update(e,[])},s.prototype.update=function(e,t){for(var i=this,s=0,l=e;s<l.length;s+=1){var u=l[s];i._layerConfigs[u.id]=u;var c=i._layers[u.id]=n.create(u);c._featureFilter=r(c.filter)}for(var p=0,f=t;p<f.length;p+=1){var d=f[p];delete i._layerConfigs[d],delete i._layers[d]}this.familiesBySource={};for(var h=a(o.values(this._layerConfigs)),m=0,y=h;m<y.length;m+=1){var v=y[m],g=v.map(function(e){return i._layers[e.id]}),_=g[0];if("none"!==_.visibility){var b=_.source||"",x=i.familiesBySource[b];x||(x=i.familiesBySource[b]={});var w=_.sourceLayer||"_geojsonTileLayer",z=x[w];z||(z=x[w]=[]),z.push(g)}}},t.exports=s},{"../style-spec/feature_filter":145,"../style-spec/group_by_layout":147,"../util/util":266,"./style_layer":186}],204:[function(e,t,i){t.exports=e("../style-spec/validate_style.min"),t.exports.emitErrors=function(e,t){if(t&&t.length){for(var i=0,n=t;i<n.length;i+=1){var o=n[i],r=o.message;e.fire("error",{error:new Error(r)})}return!0}return!1}},{"../style-spec/validate_style.min":177}],205:[function(e,t,i){var n=e("@mapbox/point-geometry"),o=function(e){function t(t,i,n,o){e.call(this,t,i),this.angle=n,void 0!==o&&(this.segment=o)}return e&&(t.__proto__=e),t.prototype=F()(e&&e.prototype),t.prototype.constructor=t,t.prototype.clone=function(){return new t(this.x,this.y,this.angle,this.segment)},t}(n);t.exports=o},{"@mapbox/point-geometry":2}],206:[function(e,t,i){function n(e,t,i,n,o){if(void 0===t.segment)return!0;for(var r=t,a=t.segment+1,s=0;s>-i/2;){if(--a<0)return!1;s-=e[a].dist(r),r=e[a]}s+=e[a].dist(e[a+1]),a++;for(var l=[],u=0;s<i/2;){var c=e[a-1],p=e[a],f=e[a+1];if(!f)return!1;var d=c.angleTo(p)-p.angleTo(f);for(d=Math.abs((d+3*Math.PI)%(2*Math.PI)-Math.PI),l.push({distance:s,angleDelta:d}),u+=d;s-l[0].distance>n;)u-=l.shift().angleDelta;if(u>o)return!1;a++,s+=p.dist(f)}return!0}t.exports=n},{}],207:[function(e,t,i){function n(e,t,i,n,r){for(var a=[],s=0;s<e.length;s++)for(var l=e[s],u=void 0,c=0;c<l.length-1;c++){var p=l[c],f=l[c+1];p.x<t&&f.x<t||(p.x<t?p=new o(t,p.y+(f.y-p.y)*((t-p.x)/(f.x-p.x)))._round():f.x<t&&(f=new o(t,p.y+(f.y-p.y)*((t-p.x)/(f.x-p.x)))._round()),p.y<i&&f.y<i||(p.y<i?p=new o(p.x+(f.x-p.x)*((i-p.y)/(f.y-p.y)),i)._round():f.y<i&&(f=new o(p.x+(f.x-p.x)*((i-p.y)/(f.y-p.y)),i)._round()),p.x>=n&&f.x>=n||(p.x>=n?p=new o(n,p.y+(f.y-p.y)*((n-p.x)/(f.x-p.x)))._round():f.x>=n&&(f=new o(n,p.y+(f.y-p.y)*((n-p.x)/(f.x-p.x)))._round()),p.y>=r&&f.y>=r||(p.y>=r?p=new o(p.x+(f.x-p.x)*((r-p.y)/(f.y-p.y)),r)._round():f.y>=r&&(f=new o(p.x+(f.x-p.x)*((r-p.y)/(f.y-p.y)),r)._round()),u&&p.equals(u[u.length-1])||(u=[p],a.push(u)),u.push(f)))))}return a}var o=e("@mapbox/point-geometry");t.exports=n},{"@mapbox/point-geometry":2}],208:[function(e,t,i){var n=e("../util/struct_array"),o=e("@mapbox/point-geometry"),r=n({members:[{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"},{type:"Int16",name:"radius"},{type:"Int16",name:"signedDistanceFromAnchor"}]});Object.defineProperty(r.prototype.StructType.prototype,"anchorPoint",{get:function(){return new o(this.anchorPointX,this.anchorPointY)}}),t.exports=r},{"../util/struct_array":263,"@mapbox/point-geometry":2}],209:[function(e,t,i){var n=function(e,t,i,n,o,r,a,s,l,u,c){var p=a.top*s-l,f=a.bottom*s+l,d=a.left*s-l,h=a.right*s+l;if(this.boxStartIndex=e.length,u){var m=f-p,y=h-d;m>0&&(m=Math.max(10*s,m),this._addLineCollisionCircles(e,t,i,i.segment,y,m,n,o,r,c))}else e.emplaceBack(i.x,i.y,d,p,h,f,n,o,r,0,0);this.boxEndIndex=e.length};n.prototype._addLineCollisionCircles=function(e,t,i,n,o,r,a,s,l,u){var c=r/2,p=Math.floor(o/c),f=1+.4*Math.log(u)/Math.LN2,d=Math.floor(p*f/2),h=-r/2,m=i,y=n+1,v=h,g=-o/2,_=g-o/4;do{if(--y<0){if(v>g)return;y=0;break}v-=t[y].dist(m),m=t[y]}while(v>_);for(var b=t[y].dist(t[y+1]),x=-d;x<p+d;x++){var w=x*c,z=g+w;if(w<0&&(z+=w),w>o&&(z+=w-o),!(z<v)){for(;v+b<z;){if(v+=b,++y+1>=t.length)return;b=t[y].dist(t[y+1])}var A=z-v,T=t[y],k=t[y+1],S=k.sub(T)._unit()._mult(A)._add(T)._round(),E=Math.abs(z-h)<c?0:.8*(z-h);e.emplaceBack(S.x,S.y,-r/2,-r/2,r/2,r/2,a,s,l,r/2,E)}}},t.exports=n},{}],210:[function(e,t,i){function n(e,t,i){e[t+4]=i?1:0}var o=e("@mapbox/point-geometry"),r=e("../util/intersection_tests"),a=e("./grid_index"),s=e("@mapbox/gl-matrix"),l=(s.mat4,e("../symbol/projection")),u=function(e,t,i){void 0===t&&(t=new a(e.width+200,e.height+200,25)),void 0===i&&(i=new a(e.width+200,e.height+200,25)),this.transform=e,this.grid=t,this.ignoredGrid=i,this.pitchfactor=Math.cos(e._pitch)*e.cameraToCenterDistance};u.prototype.placeCollisionBox=function(e,t,i,n){var o=this.projectAndGetPerspectiveRatio(n,e.anchorPointX,e.anchorPointY),r=i*o.perspectiveRatio,a=e.x1/r+o.point.x,s=e.y1/r+o.point.y,l=e.x2/r+o.point.x,u=e.y2/r+o.point.y;return!t&&this.grid.hitTest(a,s,l,u)?[]:[a,s,l,u]},u.prototype.approximateTileDistance=function(e,t,i,n,o){var r=o?1:n/this.pitchfactor,a=e.lastSegmentViewportDistance*i;return e.prevTileDistance+a+(r-1)*a*Math.abs(Math.sin(t))},u.prototype.placeCollisionCircles=function(e,t,i,r,a,s,u,c,p,f,d,h,m){var y=this,v=[],g=this.projectAnchor(f,s.anchorX,s.anchorY),_={},b=p/24,x=s.lineOffsetX*p,w=s.lineOffsetY*p,z=new o(s.anchorX,s.anchorY),A=l.project(z,d).point,T=l.placeFirstAndLastGlyph(b,c,x,w,!1,A,z,s,u,d,_,!0),k=!1,S=g.perspectiveRatio*r,E=S/i,C=0,M=0;T&&(C=this.approximateTileDistance(T.first.tileDistance,T.first.angle,E,g.cameraDistance,m),M=this.approximateTileDistance(T.last.tileDistance,T.last.angle,E,g.cameraDistance,m));for(var I=0;I<e.length;I+=5){var L=e[I],R=e[I+1],P=e[I+2],D=e[I+3];if(!T||D<-C||D>M)n(e,I,!1);else{var B=y.projectPoint(f,L,R),F=P/S;if(v.length>0){var j=B.x-v[v.length-4],O=B.y-v[v.length-3];if(F*F*2>j*j+O*O&&I+8<e.length){var N=e[I+8];if(N>-C&&N<M){n(e,I,!1);continue}}}var V=I/5;if(v.push(B.x,B.y,F,V),n(e,I,!0),!t&&y.grid.hitTestCircle(B.x,B.y,F)){if(!h)return[];k=!0}}}return k?[]:v},u.prototype.queryRenderedSymbols=function(e,t,i,n,a,s){var l=this,u={},c=[];if(0===e.length||0===this.grid.keysLength()&&0===this.ignoredGrid.keysLength())return c;for(var p=this.transform.calculatePosMatrix(t,i),f=[],d=1/0,h=1/0,m=-1/0,y=-1/0,v=0;v<e.length;v++)for(var g=e[v],_=0;_<g.length;_++){var b=l.projectPoint(p,g[_].x,g[_].y);d=Math.min(d,b.x),h=Math.min(h,b.y),m=Math.max(m,b.x),y=Math.max(y,b.y),f.push(b)}for(var x=t.id,w=[],z=this.grid.query(d,h,m,y),A=0;A<z.length;A++)z[A].sourceID===s&&z[A].tileID===x&&w.push(z[A].boxIndex);for(var T=this.ignoredGrid.query(d,h,m,y),k=0;k<T.length;k++)T[k].sourceID===s&&T[k].tileID===x&&w.push(T[k].boxIndex);for(var S=0;S<w.length;S++){var E=a.get(w[S]),C=E.sourceLayerIndex,M=E.featureIndex,I=E.bucketIndex;if(void 0===u[C]&&(u[C]={}),void 0===u[C][M]&&(u[C][M]={}),!u[C][M][I]){var L=l.projectAndGetPerspectiveRatio(p,E.anchorPointX,E.anchorPointY),R=n*L.perspectiveRatio,P=E.x1/R+L.point.x,D=E.y1/R+L.point.y,B=E.x2/R+L.point.x,F=E.y2/R+L.point.y,j=[new o(P,D),new o(B,D),new o(B,F),new o(P,F)];r.polygonIntersectsPolygon(f,j)&&(u[C][M][I]=!0,c.push(w[S]))}}return c},u.prototype.insertCollisionBox=function(e,t,i,n,o){var r=t?this.ignoredGrid:this.grid,a={tileID:i,sourceID:n,boxIndex:o};r.insert(a,e[0],e[1],e[2],e[3])},u.prototype.insertCollisionCircles=function(e,t,i,n,o){for(var r=t?this.ignoredGrid:this.grid,a=0;a<e.length;a+=4){var s={tileID:i,sourceID:n,boxIndex:o+e[a+3]};r.insertCircle(s,e[a],e[a+1],e[a+2])}},u.prototype.projectAnchor=function(e,t,i){var n=[t,i,0,1];return l.xyTransformMat4(n,n,e),{perspectiveRatio:.5+n[3]/this.transform.cameraToCenterDistance*.5,cameraDistance:n[3]}},u.prototype.projectPoint=function(e,t,i){var n=[t,i,0,1];return l.xyTransformMat4(n,n,e),new o((n[0]/n[3]+1)/2*this.transform.width+100,(-n[1]/n[3]+1)/2*this.transform.height+100)},u.prototype.projectAndGetPerspectiveRatio=function(e,t,i){var n=[t,i,0,1];return l.xyTransformMat4(n,n,e),{point:new o((n[0]/n[3]+1)/2*this.transform.width+100,(-n[1]/n[3]+1)/2*this.transform.height+100),perspectiveRatio:.5+n[3]/this.transform.cameraToCenterDistance*.5}},t.exports=u},{"../symbol/projection":216,"../util/intersection_tests":257,"./grid_index":213,"@mapbox/gl-matrix":1,"@mapbox/point-geometry":2}],211:[function(e,t,i){var n=e("../data/extent"),o=e("./opacity_state"),r=512/n/2,a=function(e,t,i){var n=this;this.coord=e,this.sourceMaxZoom=t,this.symbolInstances={};for(var r=0,a=i;r<a.length;r+=1){var s=a[r],l=s.key;n.symbolInstances[l]||(n.symbolInstances[l]=[]),n.symbolInstances[l].push({instance:s,coordinates:n.getScaledCoordinates(s,e)}),s.isDuplicate=!1,s.textOpacityState=new o,s.iconOpacityState=new o}};a.prototype.getScaledCoordinates=function(e,t){var i=Math.min(this.sourceMaxZoom,t.z)-Math.min(this.sourceMaxZoom,this.coord.z),o=r/(1<<i),a=e.anchor;return{x:Math.floor((t.x*n+a.x)*o),y:Math.floor((t.y*n+a.y)*o)}},a.prototype.getMatchingSymbol=function(e,t){var i=this;if(this.symbolInstances[e.key])for(var n=this.getScaledCoordinates(e,t),o=0,r=i.symbolInstances[e.key];o<r.length;o+=1){var a=r[o];if(Math.abs(a.coordinates.x-n.x)<=1&&Math.abs(a.coordinates.y-n.y)<=1)return a.instance}},a.prototype.forEachSymbolInstance=function(e){var t=this;for(var i in t.symbolInstances)for(var n=t.symbolInstances[i],o=0,r=n;o<r.length;o+=1){var a=r[o];e(a.instance)}};var s=function(){this.indexes={}};s.prototype.addTile=function(e,t,i){var n=this,o=25,r=0;for(var s in n.indexes)o=Math.min(s,o),r=Math.max(s,r);for(var l=new a(e,t,i),u=r;u>e.z;u--){var c=n.indexes[u];for(var p in c){var f=c[p];f.coord.isChildOf(e,t)&&n.blockLabels(f,l,!1)}}var d=this.indexes[e.z]&&this.indexes[e.z][e.id];d&&(this.blockLabels(l,d,!0),this.removeTile(e,t));for(var h=e.z-1;h>=o;h--){var m=e.scaledTo(h,t),y=n.indexes[h]&&n.indexes[h][m.id];y&&n.blockLabels(l,y,!0)}void 0===this.indexes[e.z]&&(this.indexes[e.z]={}),this.indexes[e.z][e.id]=l},s.prototype.removeTile=function(e,t){var i=this,n=this.indexes[e.z][e.id];delete this.indexes[e.z][e.id],0===R()(this.indexes[e.z]).length&&delete this.indexes[e.z];for(var o=Math.min.apply(Math,[25].concat(R()(this.indexes))),r=e,a=e.z-1;a>=o&&(r=r.parent(t));a--){var s=i.indexes[a]&&i.indexes[a][r.id];s&&i.unblockLabels(n,s)}},s.prototype.blockLabels=function(e,t,i){e.forEachSymbolInstance(function(n){if(!n.isDuplicate){var o=t.getMatchingSymbol(n,e.coord);void 0!==o&&(o.isDuplicate||(o.isDuplicate=!0,i&&(n.textOpacityState=o.textOpacityState.clone(),n.iconOpacityState=o.iconOpacityState.clone())))}})},s.prototype.unblockLabels=function(e,t){e.forEachSymbolInstance(function(i){if(!i.isDuplicate){var n=t.getMatchingSymbol(i,e.coord);void 0!==n&&(n.isDuplicate=!1,n.textOpacityState=i.textOpacityState.clone(),n.iconOpacityState=i.iconOpacityState.clone(),i.isDuplicate=!0)}})};var l=function(){this.layerIndexes={}};l.prototype.addTileLayer=function(e,t,i,n){var o=this.layerIndexes[e];void 0===o&&(o=this.layerIndexes[e]=new s),o.addTile(t,i,n)},l.prototype.removeTileLayer=function(e,t,i){var n=this.layerIndexes[e];void 0!==n&&n.removeTile(t,i)},t.exports=l},{"../data/extent":58,"./opacity_state":215}],212:[function(e,t,i){function n(e,t,i,n,r,a,s,l,u){var c=n?.6*a*s:0,p=Math.max(n?n.right-n.left:0,r?r.right-r.left:0),f=0===e[0].x||e[0].x===u||0===e[0].y||e[0].y===u;t-p*s<t/4&&(t=p*s+t/4);var d=2*a;return o(e,f?t/2*l%t:(p/2+d)*s*l%t,t,c,i,p*s,f,!1,u)}function o(e,t,i,n,l,u,c,p,f){for(var d=u/2,h=0,m=0;m<e.length-1;m++)h+=e[m].dist(e[m+1]);for(var y=0,v=t-i,g=[],_=0;_<e.length-1;_++){for(var b=e[_],x=e[_+1],w=b.dist(x),z=x.angleTo(b);v+i<y+w;){v+=i;var A=(v-y)/w,T=r(b.x,x.x,A),k=r(b.y,x.y,A);if(T>=0&&T<f&&k>=0&&k<f&&v-d>=0&&v+d<=h){var S=new a(T,k,z,_);S._round(),n&&!s(e,S,u,n,l)||g.push(S)}}y+=w}return p||g.length||c||(g=o(e,y/2,i,n,l,u,c,!0,f)),g}var r=e("../style-spec/util/interpolate").number,a=e("../symbol/anchor"),s=e("./check_max_angle");t.exports=n},{"../style-spec/util/interpolate":154,"../symbol/anchor":205,"./check_max_angle":206}],213:[function(e,t,i){var n=function(e,t,i){var n=this.boxCells=[],o=this.circleCells=[];this.xCellCount=Math.ceil(e/i),this.yCellCount=Math.ceil(t/i);for(var r=0;r<this.xCellCount*this.yCellCount;r++)n.push([]),o.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=e,this.height=t,this.xScale=this.xCellCount/e,this.yScale=this.yCellCount/t,this.boxUid=0,this.circleUid=0};n.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},n.prototype.insert=function(e,t,i,n,o){this._forEachCell(t,i,n,o,this._insertBoxCell,this.boxUid++),this.boxKeys.push(e),this.bboxes.push(t),this.bboxes.push(i),this.bboxes.push(n),this.bboxes.push(o)},n.prototype.insertCircle=function(e,t,i,n){this._forEachCell(t-n,i-n,t+n,i+n,this._insertCircleCell,this.circleUid++),this.circleKeys.push(e),this.circles.push(t),this.circles.push(i),this.circles.push(n)},n.prototype._insertBoxCell=function(e,t,i,n,o,r){this.boxCells[o].push(r)},n.prototype._insertCircleCell=function(e,t,i,n,o,r){this.circleCells[o].push(r)},n.prototype._query=function(e,t,i,n,o){if(i<0||e>this.width||n<0||t>this.height)return!o&&[];var r=[];if(e<=0&&t<=0&&this.width<=i&&this.height<=n)r=Array.prototype.slice.call(this.boxKeys).concat(this.circleKeys);else{var a={hitTest:o,seenUids:{box:{},circle:{}}};this._forEachCell(e,t,i,n,this._queryCell,r,a)}return o?r.length>0:r},n.prototype._queryCircle=function(e,t,i,n){var o=e-i,r=e+i,a=t-i,s=t+i;if(r<0||o>this.width||s<0||a>this.height)return!n&&[];var l=[],u={hitTest:n,circle:{x:e,y:t,radius:i},seenUids:{box:{},circle:{}}};return this._forEachCell(o,a,r,s,this._queryCellCircle,l,u),n?l.length>0:l},n.prototype.query=function(e,t,i,n){return this._query(e,t,i,n,!1)},n.prototype.hitTest=function(e,t,i,n){return this._query(e,t,i,n,!0)},n.prototype.hitTestCircle=function(e,t,i){return this._queryCircle(e,t,i,!0)},n.prototype._queryCell=function(e,t,i,n,o,r,a){var s=this,l=a.seenUids,u=this.boxCells[o];if(null!==u)for(var c=this.bboxes,p=0,f=u;p<f.length;p+=1){var d=f[p];if(!l.box[d]){l.box[d]=!0;var h=4*d;if(e<=c[h+2]&&t<=c[h+3]&&i>=c[h+0]&&n>=c[h+1]){if(a.hitTest)return r.push(!0),!0;r.push(s.boxKeys[d])}}}var m=this.circleCells[o];if(null!==m)for(var y=this.circles,v=0,g=m;v<g.length;v+=1){var _=g[v];if(!l.circle[_]){l.circle[_]=!0;var b=3*_;if(s._circleAndRectCollide(y[b],y[b+1],y[b+2],e,t,i,n)){if(a.hitTest)return r.push(!0),!0;r.push(s.circleKeys[_])}}}},n.prototype._queryCellCircle=function(e,t,i,n,o,r,a){var s=this,l=a.circle,u=a.seenUids,c=this.boxCells[o];if(null!==c)for(var p=this.bboxes,f=0,d=c;f<d.length;f+=1){var h=d[f];if(!u.box[h]){u.box[h]=!0;var m=4*h;if(s._circleAndRectCollide(l.x,l.y,l.radius,p[m+0],p[m+1],p[m+2],p[m+3]))return r.push(!0),!0}}var y=this.circleCells[o];if(null!==y)for(var v=this.circles,g=0,_=y;g<_.length;g+=1){var b=_[g];if(!u.circle[b]){u.circle[b]=!0;var x=3*b;if(s._circlesCollide(v[x],v[x+1],v[x+2],l.x,l.y,l.radius))return r.push(!0),!0}}},n.prototype._forEachCell=function(e,t,i,n,o,r,a){for(var s=this,l=this._convertToXCellCoord(e),u=this._convertToYCellCoord(t),c=this._convertToXCellCoord(i),p=this._convertToYCellCoord(n),f=l;f<=c;f++)for(var d=u;d<=p;d++){var h=s.xCellCount*d+f;if(o.call(s,e,t,i,n,h,r,a))return}},n.prototype._convertToXCellCoord=function(e){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(e*this.xScale)))},n.prototype._convertToYCellCoord=function(e){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(e*this.yScale)))},n.prototype._circlesCollide=function(e,t,i,n,o,r){var a=n-e,s=o-t,l=i+r;return l*l>a*a+s*s},n.prototype._circleAndRectCollide=function(e,t,i,n,o,r,a){var s=(r-n)/2,l=Math.abs(e-(n+s));if(l>s+i)return!1;var u=(a-o)/2,c=Math.abs(t-(o+u));if(c>u+i)return!1;if(l<=s||c<=u)return!0;var p=l-s,f=c-u;return p*p+f*f<=i*i},t.exports=n},{}],214:[function(e,t,i){t.exports=function(e){function t(t){s.push(e[t]),l++}function i(e,t,i){var n=a[e];return delete a[e],a[t]=n,s[n].geometry[0].pop(),s[n].geometry[0]=s[n].geometry[0].concat(i[0]),n}function n(e,t,i){var n=r[t];return delete r[t],r[e]=n,s[n].geometry[0].shift(),s[n].geometry[0]=i[0].concat(s[n].geometry[0]),n}function o(e,t,i){var n=i?t[0][t[0].length-1]:t[0][0];return e+":"+n.x+":"+n.y}for(var r={},a={},s=[],l=0,u=0;u<e.length;u++){var c=e[u],p=c.geometry,f=c.text;if(f){var d=o(f,p),h=o(f,p,!0);if(d in a&&h in r&&a[d]!==r[h]){var m=n(d,h,p),y=i(d,h,s[m].geometry);delete r[d],delete a[h],a[o(f,s[y].geometry,!0)]=y,s[m].geometry=null}else d in a?i(d,h,p):h in r?n(d,h,p):(t(u),r[d]=l-1,a[h]=l-1)}else t(u)}return s.filter(function(e){return e.geometry})}},{}],215:[function(e,t,i){var n=function(){this.opacity=0,this.targetOpacity=0,this.time=0};n.prototype.clone=function(){var e=new n;return e.opacity=this.opacity,e.targetOpacity=this.targetOpacity,e.time=this.time,e},t.exports=n},{}],216:[function(e,t,i){function n(e,t,i,n,o){var r=v.identity(new Float32Array(16));return t?(v.identity(r),v.scale(r,r,[1/o,1/o,1]),i||v.rotateZ(r,r,n.angle)):(v.scale(r,r,[n.width/2,-n.height/2,1]),v.translate(r,r,[1,-1,0]),v.multiply(r,r,e)),r}function o(e,t,i,n,o){var r=v.identity(new Float32Array(16));return t?(v.multiply(r,r,e),v.scale(r,r,[o,o,1]),i||v.rotateZ(r,r,-n.angle)):(v.scale(r,r,[1,-1,1]),v.translate(r,r,[-1,-1,0]),v.scale(r,r,[2/n.width,2/n.height,1])),r}function r(e,t){var i=[e.x,e.y,0,1];h(i,i,t);var n=i[3];return{point:new m(i[0]/n,i[1]/n),signedDistanceFromCamera:n}}function a(e,t){var i=e[0]/e[3],n=e[1]/e[3];return i>=-t[0]&&i<=t[0]&&n>=-t[1]&&n<=t[1]}function s(e,t,i,n,o,s,l,u){var p=n?e.textSizeData:e.iconSizeData,f=_.evaluateSizeForZoom(p,i.transform.zoom,w.properties[n?"text-size":"icon-size"]),h=[256/i.width*2+1,256/i.height*2+1],y=n?e.text.dynamicLayoutVertexArray:e.icon.dynamicLayoutVertexArray;y.clear();for(var v=e.lineVertexArray,b=n?e.placedGlyphArray:e.placedIconArray,x=i.transform.width/i.transform.height,A=!1,T=0;T<b.length;T++){var k=b.get(T);if(k.hidden||k.writingMode===z.vertical&&!A)d(k.numGlyphs,y);else{A=!1;var S=[k.anchorX,k.anchorY,0,1];if(g.transformMat4(S,S,t),a(S,h)){var E=S[3],C=.5+E/i.transform.cameraToCenterDistance*.5,M=_.evaluateSizeForFeature(p,f,k),I=l?M*C:M/C,L=new m(k.anchorX,k.anchorY),R=r(L,o).point,P={},D=c(k,I,!1,u,t,o,s,e.glyphOffsetArray,v,y,R,L,P,x);A=D.useVertical,(D.notEnoughRoom||A||D.needsFlipping&&c(k,I,!0,u,t,o,s,e.glyphOffsetArray,v,y,R,L,P,x).notEnoughRoom)&&d(k.numGlyphs,y)}else d(k.numGlyphs,y)}}n?e.text.dynamicLayoutVertexBuffer.updateData(y.serialize()):e.icon.dynamicLayoutVertexBuffer.updateData(y.serialize())}function l(e,t,i,n,o,r,a,s,l,u,c,p){var d=s.glyphStartIndex+s.numGlyphs,h=s.lineStartIndex,m=s.lineStartIndex+s.lineLength,y=t.getoffsetX(s.glyphStartIndex),v=t.getoffsetX(d-1),g=f(e*y,i,n,o,r,a,s.segment,h,m,l,u,c,p);if(!g)return null;var _=f(e*v,i,n,o,r,a,s.segment,h,m,l,u,c,p);return _?{first:g,last:_}:null}function u(e,t,i,n){return e===z.horizontal&&Math.abs(i.y-t.y)>Math.abs(i.x-t.x)*n?{useVertical:!0}:(e===z.vertical?t.y<i.y:t.x>i.x)?{needsFlipping:!0}:null}function c(e,t,i,n,o,a,s,c,d,h,y,v,g,_){var b,w=t/24,z=e.lineOffsetX*t,A=e.lineOffsetY*t;if(e.numGlyphs>1){var T=e.glyphStartIndex+e.numGlyphs,k=e.lineStartIndex,S=e.lineStartIndex+e.lineLength,E=l(w,c,z,A,i,y,v,e,d,a,g,!1);if(!E)return{notEnoughRoom:!0};var C=r(E.first.point,s).point,M=r(E.last.point,s).point;if(n&&!i){var I=u(e.writingMode,C,M,_);if(I)return I}b=[E.first];for(var L=e.glyphStartIndex+1;L<T-1;L++)b.push(f(w*c.getoffsetX(L),z,A,i,y,v,e.segment,k,S,d,a,g,!1));b.push(E.last)}else{if(n&&!i){var R=r(v,o).point,P=e.lineStartIndex+e.segment+1,D=new m(d.getx(P),d.gety(P)),B=r(D,o),F=B.signedDistanceFromCamera>0?B.point:p(v,D,R,1,o),j=u(e.writingMode,R,F,_);if(j)return j}var O=f(w*c.getoffsetX(e.glyphStartIndex),z,A,i,y,v,e.segment,e.lineStartIndex,e.lineStartIndex+e.lineLength,d,a,g,!1);if(!O)return{notEnoughRoom:!0};b=[O]}for(var N=0,V=b;N<V.length;N+=1){var q=V[N];x(h,q.point,q.angle)}return{}}function p(e,t,i,n,o){var a=r(e.add(e.sub(t)._unit()),o).point,s=i.sub(a);return i.add(s._mult(n/s.mag()))}function f(e,t,i,n,o,a,s,l,u,c,f,d,h){var y=n?e-t:e+t,v=y>0?1:-1,g=0;n&&(v*=-1,g=Math.PI),v<0&&(g+=Math.PI);for(var _=v>0?l+s:l+s+1,b=_,x=o,w=o,z=0,A=0,T=Math.abs(y);z+A<=T;){if((_+=v)<l||_>=u)return null;if(w=x,void 0===(x=d[_])){var k=new m(c.getx(_),c.gety(_)),S=r(k,f);if(S.signedDistanceFromCamera>0)x=d[_]=S.point;else{var E=_-v;x=p(0===z?a:new m(c.getx(E),c.gety(E)),k,w,T-z+1,f)}}z+=A,A=w.dist(x)}var C=(T-z)/A,M=x.sub(w),I=M.mult(C)._add(w);return I._add(M._unit()._perp()._mult(i*v)),{point:I,angle:g+Math.atan2(x.y-w.y,x.x-w.x),tileDistance:h?{prevTileDistance:_-v===b?0:c.gettileUnitDistanceFromAnchor(_-v),lastSegmentViewportDistance:T-z}:null}}function d(e,t){for(var i=0;i<e;i++){var n=t.length;t.resize(n+4),t.float32.set(A,3*n)}}function h(e,t,i){var n=t[0],o=t[1];return e[0]=i[0]*n+i[4]*o+i[12],e[1]=i[1]*n+i[5]*o+i[13],e[3]=i[3]*n+i[7]*o+i[15],e}var m=e("@mapbox/point-geometry"),y=e("@mapbox/gl-matrix"),v=y.mat4,g=y.vec4,_=e("./symbol_size"),b=e("../data/bucket/symbol_bucket"),x=b.addDynamicAttributes,w=e("../style/style_layer/symbol_style_layer_properties").layout,z=e("../symbol/shaping").WritingMode;t.exports={updateLineLabels:s,getLabelPlaneMatrix:n,getGlCoordMatrix:o,project:r,placeFirstAndLastGlyph:l,xyTransformMat4:h};var A=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0])},{"../data/bucket/symbol_bucket":57,"../style/style_layer/symbol_style_layer_properties":202,"../symbol/shaping":218,"./symbol_size":221,"@mapbox/gl-matrix":1,"@mapbox/point-geometry":2}],217:[function(e,t,i){function n(e,t,i,n,o,a,s){var l,u,c,p,f=t.image,d=i.layout,h=t.top-1/f.pixelRatio,m=t.left-1/f.pixelRatio,y=t.bottom+1/f.pixelRatio,v=t.right+1/f.pixelRatio;if("none"!==d.get("icon-text-fit")&&o){var g=v-m,_=y-h,b=d.get("text-size").evaluate(s)/24,x=o.left*b,w=o.right*b,z=o.top*b,A=o.bottom*b,T=w-x,k=A-z,S=d.get("icon-text-fit-padding")[0],E=d.get("icon-text-fit-padding")[1],C=d.get("icon-text-fit-padding")[2],M=d.get("icon-text-fit-padding")[3],I="width"===d.get("icon-text-fit")?.5*(k-_):0,L="height"===d.get("icon-text-fit")?.5*(T-g):0,R="width"===d.get("icon-text-fit")||"both"===d.get("icon-text-fit")?T:g,P="height"===d.get("icon-text-fit")||"both"===d.get("icon-text-fit")?k:_;l=new r(x+L-M,z+I-S),u=new r(x+L+E+R,z+I-S),c=new r(x+L+E+R,z+I+C+P),p=new r(x+L-M,z+I+C+P)}else l=new r(m,h),u=new r(v,h),c=new r(v,y),p=new r(m,y);var D=i.layout.get("icon-rotate").evaluate(s)*Math.PI/180;if(D){var B=Math.sin(D),F=Math.cos(D),j=[F,-B,B,F];l._matMult(j),u._matMult(j),p._matMult(j),c._matMult(j)}return[{tl:l,tr:u,bl:p,br:c,tex:{x:f.textureRect.x-1,y:f.textureRect.y-1,w:f.textureRect.w+2,h:f.textureRect.h+2},writingMode:void 0,glyphOffset:[0,0]}]}function o(e,t,i,n,o,a,l){for(var u=i.layout.get("text-rotate").evaluate(a)*Math.PI/180,c=i.layout.get("text-offset").evaluate(a).map(function(e){return 24*e}),p=t.positionedGlyphs,f=[],d=0;d<p.length;d++){var h=p[d],m=l[h.glyph];if(m){var y=m.rect;if(y){var v=s+1,g=m.metrics.advance/2,_=n?[h.x+g,h.y]:[0,0],b=n?[0,0]:[h.x+g+c[0],h.y+c[1]],x=m.metrics.left-v-g+b[0],w=-m.metrics.top-v+b[1],z=x+y.w,A=w+y.h,T=new r(x,w),k=new r(z,w),S=new r(x,A),E=new r(z,A);if(n&&h.vertical){var C=new r(-g,g),M=-Math.PI/2,I=new r(5,0);T._rotateAround(M,C)._add(I),k._rotateAround(M,C)._add(I),S._rotateAround(M,C)._add(I),E._rotateAround(M,C)._add(I)}if(u){var L=Math.sin(u),R=Math.cos(u),P=[R,-L,L,R];T._matMult(P),k._matMult(P),S._matMult(P),E._matMult(P)}f.push({tl:T,tr:k,bl:S,br:E,tex:y,writingMode:t.writingMode,glyphOffset:_})}}}return f}var r=e("@mapbox/point-geometry"),a=e("../style/parse_glyph_pbf"),s=a.GLYPH_PBF_BORDER;t.exports={getIconQuads:n,getGlyphQuads:o}},{"../style/parse_glyph_pbf":181,"@mapbox/point-geometry":2}],218:[function(e,t,i){function n(e,t){for(var i=[],n=0,o=0,r=t;o<r.length;o+=1){var a=r[o];i.push(e.substring(n,a)),n=a}return n<e.length&&i.push(e.substring(n,e.length)),i}function o(e,t,i,o,r,a,s,l,u,p){var d=e.trim();p===_.vertical&&(d=v(d));var h,m=[],y={positionedGlyphs:m,text:d,top:l[1],bottom:l[1],left:l[0],right:l[0],writingMode:p},b=g.processBidirectionalText;return h=b?b(d,c(d,s,i,t)):n(d,c(d,s,i,t)),f(y,t,h,o,r,a,p,s,u),!!m.length&&y}function r(e,t,i,n){for(var o=0,r=0;r<e.length;r++){var a=n[e.charCodeAt(r)];a&&(o+=a.metrics.advance+t)}return o/Math.max(1,Math.ceil(o/i))}function a(e,t,i,n){var o=Math.pow(e-t,2);return n?e<t?o/2:2*o:o+Math.abs(i)*i}function s(e,t){var i=0;return 10===e&&(i-=1e4),40!==e&&65288!==e||(i+=50),41!==t&&65289!==t||(i+=50),i}function l(e,t,i,n,o,r){for(var s=null,l=a(t,i,o,r),u=0,c=n;u<c.length;u+=1){var p=c[u],f=t-p.x,d=a(f,i,o,r)+p.badness;d<=l&&(s=p,l=d)}return{index:e,x:t,priorBreak:s,badness:l}}function u(e){return e?u(e.priorBreak).concat(e.index):[]}function c(e,t,i,n){if(!i)return[];if(!e)return[];for(var o=[],a=r(e,t,i,n),c=0,p=0;p<e.length;p++){var f=e.charCodeAt(p),d=n[f];d&&!b[f]&&(c+=d.metrics.advance+t),p<e.length-1&&(x[f]||y.charAllowsIdeographicBreaking(f))&&o.push(l(p+1,c,a,o,s(f,e.charCodeAt(p+1)),!1))}return u(l(e.length,c,a,o,0,!0))}function p(e){var t=.5,i=.5;switch(e){case"right":case"top-right":case"bottom-right":t=1;break;case"left":case"top-left":case"bottom-left":t=0}switch(e){case"bottom":case"bottom-right":case"bottom-left":i=1;break;case"top":case"top-right":case"top-left":i=0}return{horizontalAlign:t,verticalAlign:i}}function f(e,t,i,n,o,r,a,s,l){for(var u=0,c=-17,f=0,m=e.positionedGlyphs,v="right"===r?1:"left"===r?0:.5,g=0,b=i;g<b.length;g+=1){var x=b[g];if(x=x.trim(),x.length){for(var w=m.length,z=0;z<x.length;z++){var A=x.charCodeAt(z),T=t[A];T&&(y.charHasUprightVerticalOrientation(A)&&a!==_.horizontal?(m.push({glyph:A,x:u,y:0,vertical:!0}),u+=l+s):(m.push({glyph:A,x:u,y:c,vertical:!1}),u+=T.metrics.advance+s))}if(m.length!==w){var k=u-s;f=Math.max(k,f),d(m,t,w,m.length-1,v)}u=0,c+=n}else c+=n}var S=p(o),E=S.horizontalAlign,C=S.verticalAlign;h(m,v,E,C,f,n,i.length);var M=i.length*n;e.top+=-C*M,e.bottom=e.top+M,e.left+=-E*f,e.right=e.left+f}function d(e,t,i,n,o){if(o){var r=t[e[n].glyph];if(r)for(var a=r.metrics.advance,s=(e[n].x+a)*o,l=i;l<=n;l++)e[l].x-=s}}function h(e,t,i,n,o,r,a){for(var s=(t-i)*o,l=(-n*a+.5)*r,u=0;u<e.length;u++)e[u].x+=s,e[u].y+=l}function m(e,t,i){var n=p(i),o=n.horizontalAlign,r=n.verticalAlign,a=t[0],s=t[1],l=a-e.displaySize[0]*o,u=l+e.displaySize[0],c=s-e.displaySize[1]*r;return{image:e,top:c,bottom:c+e.displaySize[1],left:l,right:u}}var y=e("../util/script_detection"),v=e("../util/verticalize_punctuation"),g=e("../source/rtl_text_plugin"),_={horizontal:1,vertical:2,horizontalOnly:3};t.exports={shapeText:o,shapeIcon:m,WritingMode:_};var b={};b[9]=!0,b[10]=!0,b[11]=!0,b[12]=!0,b[13]=!0,b[32]=!0;var x={};x[10]=!0,x[32]=!0,x[38]=!0,x[40]=!0,x[41]=!0,x[43]=!0,x[45]=!0,x[47]=!0,x[173]=!0,x[183]=!0,x[8203]=!0,x[8208]=!0,x[8211]=!0,x[8231]=!0},{"../source/rtl_text_plugin":107,"../util/script_detection":261,"../util/verticalize_punctuation":268}],219:[function(e,t,i){function n(e,t,i,n,r,a){e.createArrays(),e.symbolInstances=[];var s=512*e.overscaling;e.tilePixelRatio=A/s,e.compareText={},e.iconsNeedLinear=!1;for(var l=e.layers[0].layout,u=24*l.get("text-line-height"),c=l.get("text-font").join(","),p="map"===l.get("text-rotation-alignment")&&"line"===l.get("symbol-placement"),f=l.get("text-keep-upright"),y=t[c]||{},v=i[c]||{},g=0,_=e.features;g<_.length;g+=1){var w=_[g],z={},T=w.text;if(T){var k=x.allowsVerticalWritingMode(T),S=l.get("text-offset").evaluate(w).map(function(e){return 24*e}),E=24*l.get("text-letter-spacing").evaluate(w),C=x.allowsLetterSpacing(T)?E:0,M=l.get("text-anchor").evaluate(w),I=l.get("text-justify").evaluate(w),L="line"!==l.get("symbol-placement")?24*l.get("text-max-width").evaluate(w):0;z.horizontal=d(T,y,L,u,M,I,C,S,24,m.horizontal),k&&p&&f&&(z.vertical=d(T,y,L,u,M,I,C,S,24,m.vertical))}var R=void 0;if(w.icon){var P=n[w.icon];P&&(R=h(r[w.icon],l.get("icon-offset").evaluate(w),l.get("icon-anchor").evaluate(w)),void 0===e.sdfIcons?e.sdfIcons=P.sdf:e.sdfIcons!==P.sdf&&b.warnOnce("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),P.pixelRatio!==e.pixelRatio?e.iconsNeedLinear=!0:0!==l.get("icon-rotate").constantOr(1)&&(e.iconsNeedLinear=!0))}(z.horizontal||R)&&o(e,w,z,R,v)}a&&e.generateCollisionDebugBuffers()}function o(e,t,i,n,o){var r=e.layoutTextSize.evaluate(t),p=e.layoutIconSize.evaluate(t),f=e.textMaxSize.evaluate(t);void 0===f&&(f=r);var d=e.layers[0].layout,h=d.get("text-offset").evaluate(t),m=d.get("icon-offset").evaluate(t),y=r/24,v=e.tilePixelRatio*y,g=e.tilePixelRatio*f/24,_=e.tilePixelRatio*p,b=e.tilePixelRatio*d.get("symbol-spacing"),x=d.get("text-padding")*e.tilePixelRatio,T=d.get("icon-padding")*e.tilePixelRatio,k=d.get("text-max-angle")/180*Math.PI,S="map"===d.get("text-rotation-alignment")&&"line"===d.get("symbol-placement"),E="map"===d.get("icon-rotation-alignment")&&"line"===d.get("symbol-placement"),C=d.get("symbol-placement"),M=b/2,I=function(r,s){s.x<0||s.x>=A||s.y<0||s.y>=A||e.symbolInstances.push(a(e,s,r,i,n,e.layers[0],e.collisionBoxArray,t.index,t.sourceLayerIndex,e.index,v,x,S,h,_,T,E,m,{zoom:e.zoom},t,o))};if("line"===C)for(var L=0,R=c(t.geometry,0,0,A,A);L<R.length;L+=1)for(var P=R[L],D=u(P,b,k,i.vertical||i.horizontal,n,24,g,e.overscaling,A),B=0,F=D;B<F.length;B+=1){var j=F[B],O=i.horizontal;O&&s(e,O.text,M,j)||I(P,j)}else if("Polygon"===t.type)for(var N=0,V=z(t.geometry,0);N<V.length;N+=1){var q=V[N],U=w(q,16);I(q[0],new l(U.x,U.y,0))}else if("LineString"===t.type)for(var Z=0,W=t.geometry;Z<W.length;Z+=1){var G=W[Z];I(G,new l(G[0].x,G[0].y,0))}else if("Point"===t.type)for(var H=0,X=t.geometry;H<X.length;H+=1)for(var K=X[H],J=0,Y=K;J<Y.length;J+=1){var Q=Y[J];I([Q],new l(Q.x,Q.y,0))}}function r(e,t,i,n,o,r,a,s,l,u,c,p){var f=v(t,i,n,o,r,a,p),d=e.textSizeData,h=null;return"source"===d.functionType?h=[10*n.layout.get("text-size").evaluate(a)]:"composite"===d.functionType&&(h=[10*e.compositeTextSizes[0].evaluate(a),10*e.compositeTextSizes[1].evaluate(a)]),e.addSymbols(e.text,f,h,s,o,a,u,t,l.lineStartIndex,l.lineLength,e.placedGlyphArray),c.push(e.placedGlyphArray.length-1),4*f.length}function a(e,t,i,n,o,a,s,l,u,c,f,d,h,y,v,x,w,z,A,k,S){var E,C,M=e.addToLineVertexArray(t,i),I=0,L=0,R=0,P=n.horizontal?n.horizontal.text:"",D=[];n.horizontal&&(E=new _(s,i,t,l,u,c,n.horizontal,f,d,h,e.overscaling),L+=r(e,t,n.horizontal,a,h,A,k,y,M,n.vertical?m.horizontal:m.horizontalOnly,D,S),n.vertical&&(R+=r(e,t,n.vertical,a,h,A,k,y,M,m.vertical,D,S)));var B=E?E.boxStartIndex:e.collisionBoxArray.length,F=E?E.boxEndIndex:e.collisionBoxArray.length;if(o){var j=g(t,o,a,w,n.horizontal,A,k);C=new _(s,i,t,l,u,c,o,v,x,!1,e.overscaling),I=4*j.length;var O=e.iconSizeData,N=null;"source"===O.functionType?N=[10*a.layout.get("icon-size").evaluate(k)]:"composite"===O.functionType&&(N=[10*e.compositeIconSizes[0].evaluate(k),10*e.compositeIconSizes[1].evaluate(k)]),e.addSymbols(e.icon,j,N,z,w,k,!1,t,M.lineStartIndex,M.lineLength,e.placedIconArray)}var V=C?C.boxStartIndex:e.collisionBoxArray.length,q=C?C.boxEndIndex:e.collisionBoxArray.length;return e.glyphOffsetArray.length>=T.MAX_GLYPHS&&b.warnOnce("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),{key:P,textBoxStartIndex:B,textBoxEndIndex:F,iconBoxStartIndex:V,iconBoxEndIndex:q,textOffset:y,iconOffset:z,anchor:t,line:i,featureIndex:l,feature:k,numGlyphVertices:L,numVerticalGlyphVertices:R,numIconVertices:I,textOpacityState:new p,iconOpacityState:new p,isDuplicate:!1,placedTextSymbolIndices:D}}function s(e,t,i,n){var o=e.compareText;if(t in o){for(var r=o[t],a=r.length-1;a>=0;a--)if(n.dist(r[a])<i)return!0}else o[t]=[];return o[t].push(n),!1}var l=e("./anchor"),u=e("./get_anchors"),c=e("./clip_line"),p=e("./opacity_state"),f=e("./shaping"),d=f.shapeText,h=f.shapeIcon,m=f.WritingMode,y=e("./quads"),v=y.getGlyphQuads,g=y.getIconQuads,_=e("./collision_feature"),b=e("../util/util"),x=e("../util/script_detection"),w=e("../util/find_pole_of_inaccessibility"),z=e("../util/classify_rings"),A=e("../data/extent"),T=e("../data/bucket/symbol_bucket");e("@mapbox/point-geometry");t.exports={performSymbolLayout:n}},{"../data/bucket/symbol_bucket":57,"../data/extent":58,"../util/classify_rings":248,"../util/find_pole_of_inaccessibility":254,"../util/script_detection":261,"../util/util":266,"./anchor":205,"./clip_line":207,"./collision_feature":209,"./get_anchors":212,"./opacity_state":215,"./quads":217,"./shaping":218,"@mapbox/point-geometry":2}],220:[function(e,t,i){function n(e,t,i,n,o){if(e.isDuplicate)t.opacity=0,t.targetOpacity=0;else{t.targetOpacity!==i&&(o.latestStart=n);var r=o.duration?(n-t.time)/o.duration:1;t.opacity=Math.max(0,Math.min(1,t.opacity+(1===t.targetOpacity?r:-r))),t.targetOpacity=i,t.time=n}}function o(e){if(0===e.opacity&&0===e.targetOpacity)return 0;if(1===e.opacity&&1===e.targetOpacity)return 4294967295;var t=1===e.targetOpacity?1:0,i=Math.floor(127*e.opacity);return i*p+t*f+i*d+t*h+i*m+t*y+i*v+t}function r(e,t){var i=e.text&&e.text.opacityVertexArray,r=e.icon&&e.icon.opacityVertexArray;i&&i.clear(),r&&r.clear(),e.fadeStartTime=Date.now();for(var a=0,s=e.symbolInstances;a<s.length;a+=1){var l=s[a],u=!(l.textBoxStartIndex===l.textBoxEndIndex),c=!(l.iconBoxStartIndex===l.iconBoxEndIndex);if(u||c){if(u){var p=l.placedText?1:0,f=l.textOpacityState,d=0===f.opacity&&0===f.targetOpacity;n(l,f,p,e.fadeStartTime,t);var h=0===f.opacity&&0===f.targetOpacity;if(d!==h)for(var m=0,y=l.placedTextSymbolIndices;m<y.length;m+=1){var v=y[m],g=e.placedGlyphArray.get(v);g.hidden=h}for(var _=(l.numGlyphVertices+l.numVerticalGlyphVertices)/4,b=o(f),x=0;x<_;x++)i.emplaceBack(b)}if(c){var w=l.placedIcon?1:0,z=l.iconOpacityState;n(l,z,w,e.fadeStartTime,t);for(var A=l.numIconVertices/4,T=o(z),k=0;k<A;k++)r.emplaceBack(T)}}}i&&e.text.opacityVertexBuffer&&e.text.opacityVertexBuffer.updateData(i.serialize()),r&&e.icon.opacityVertexBuffer&&e.icon.opacityVertexBuffer.updateData(r.serialize())}function a(e,t){e.emplaceBack(t?1:0,0),e.emplaceBack(t?1:0,0),e.emplaceBack(t?1:0,0),e.emplaceBack(t?1:0,0)}function s(e,t,i,n){for(var o=0;o<t.length;o+=5){var r=n||0===t[o+4];e.emplaceBack(i?1:0,r?1:0),e.emplaceBack(i?1:0,r?1:0),e.emplaceBack(i?1:0,r?1:0),e.emplaceBack(i?1:0,r?1:0)}}function l(e,t,i,n,o,r,l,p,f,d){var h,m,y=e.layers[0],v=y.layout,g=Math.pow(2,n-e.zoom);i&&(e.collisionBox&&e.collisionBox.collisionVertexArray&&e.collisionBox.collisionVertexArray.length&&(h=e.collisionBox.collisionVertexArray,h.clear()),e.collisionCircle&&e.collisionCircle.collisionVertexArray&&e.collisionCircle.collisionVertexArray.length&&(m=e.collisionCircle.collisionVertexArray,m.clear()));for(var _=u.evaluateSizeForZoom(e.textSizeData,t.transform.zoom,c.properties["text-size"]),b="map"===v.get("text-pitch-alignment"),x=0,w=e.symbolInstances;x<w.length;x+=1){var z=w[x],A=!(z.textBoxStartIndex===z.textBoxEndIndex),T=!(z.iconBoxStartIndex===z.iconBoxEndIndex),k=v.get("text-optional")||!A,S=v.get("icon-optional")||!T;z.collisionArrays||(z.collisionArrays=e.deserializeCollisionBoxes(d,z.textBoxStartIndex,z.textBoxEndIndex,z.iconBoxStartIndex,z.iconBoxEndIndex));var E=[],C=[],M=[],I=!1;if(!z.isDuplicate){z.collisionArrays.textBox&&(E=t.placeCollisionBox(z.collisionArrays.textBox,v.get("text-allow-overlap"),o,r)),z.collisionArrays.iconBox&&(C=t.placeCollisionBox(z.collisionArrays.iconBox,v.get("icon-allow-overlap"),o,r));var L=z.collisionArrays.textCircles;if(L){var R=e.placedGlyphArray.get(z.placedTextSymbolIndices[0]),P=u.evaluateSizeForFeature(e.textSizeData,_,R);M=t.placeCollisionCircles(L,v.get("text-allow-overlap"),g,o,z.key,R,e.lineVertexArray,e.glyphOffsetArray,P,r,l,i,b),I=v.get("text-allow-overlap")||M.length>0}}var D=E.length>0||I,B=C.length>0;k||S?S?k||(B=B&&D):D=B&&D:B=D=B&&D,z.placedText=D,z.placedIcon=B,z.collisionArrays.textBox&&(h&&a(h,D),D&&t.insertCollisionBox(E,v.get("text-ignore-placement"),p,f,z.textBoxStartIndex)),z.collisionArrays.iconBox&&(h&&a(h,B),B&&t.insertCollisionBox(C,v.get("icon-ignore-placement"),p,f,z.iconBoxStartIndex)),z.collisionArrays.textCircles&&(m&&s(m,z.collisionArrays.textCircles,D,z.isDuplicate),D&&t.insertCollisionCircles(M,v.get("text-ignore-placement"),p,f,z.textBoxStartIndex))}h&&e.collisionBox.collisionVertexBuffer&&e.collisionBox.collisionVertexBuffer.updateData(h.serialize()),m&&e.collisionCircle.collisionVertexBuffer&&e.collisionCircle.collisionVertexBuffer.updateData(m.serialize())}var u=e("./symbol_size"),c=e("../style/style_layer/symbol_style_layer_properties").layout;e("@mapbox/gl-matrix").mat4;t.exports={updateOpacities:r,performSymbolPlacement:l};var p=Math.pow(2,25),f=Math.pow(2,24),d=Math.pow(2,17),h=Math.pow(2,16),m=Math.pow(2,9),y=Math.pow(2,8),v=Math.pow(2,1)},{"../style/style_layer/symbol_style_layer_properties":202,"./symbol_size":221,"@mapbox/gl-matrix":1}],221:[function(e,t,i){function n(e,t){var i=t.expression;if("constant"===i.kind)return{functionType:"constant",layoutSize:i.evaluate({zoom:e+1})};if("source"===i.kind)return{functionType:"source"};for(var n=i.zoomStops,o=0;o<n.length&&n[o]<=e;)o++;o=Math.max(0,o-1);for(var r=o;r<n.length&&n[r]<e+1;)r++;r=Math.min(n.length-1,r);var a={min:n[o],max:n[r]};return"composite"===i.kind?{functionType:"composite",zoomRange:a,propertyValue:t.value}:{functionType:"camera",layoutSize:i.evaluate({zoom:e+1}),zoomRange:a,sizeRange:{min:i.evaluate({zoom:a.min}),max:i.evaluate({zoom:a.max})},propertyValue:t.value}}function o(e,t,i){var n=t;return"source"===e.functionType?i.lowerSize/10:"composite"===e.functionType?l.number(i.lowerSize/10,i.upperSize/10,n.uSizeT):n.uSize}function r(e,t,i){if("constant"===e.functionType)return{uSizeT:0,uSize:e.layoutSize};if("source"===e.functionType)return{uSizeT:0,uSize:0};if("camera"===e.functionType){var n=e.propertyValue,o=e.zoomRange,r=e.sizeRange,a=s(n,i.specification),l=u.clamp(a.interpolationFactor(t,o.min,o.max),0,1);return{uSizeT:0,uSize:r.min+l*(r.max-r.min)}}var c=e.propertyValue,p=e.zoomRange,f=s(c,i.specification);return{uSizeT:u.clamp(f.interpolationFactor(t,p.min,p.max),0,1),uSize:0}}var a=e("../style-spec/expression"),s=a.normalizePropertyExpression,l=e("../style-spec/util/interpolate"),u=e("../util/util");t.exports={getSizeData:n,evaluateSizeForFeature:o,evaluateSizeForZoom:r}},{"../style-spec/expression":136,"../style-spec/util/interpolate":154,"../util/util":266}],222:[function(e,t,i){var n=e("../source/rtl_text_plugin");t.exports=function(e,t,i){var o=t.layout.get("text-transform").evaluate(i);return"uppercase"===o?e=e.toLocaleUpperCase():"lowercase"===o&&(e=e.toLocaleLowerCase()),n.applyArabicShaping&&(e=n.applyArabicShaping(e)),e}},{"../source/rtl_text_plugin":107}],223:[function(e,t,i){var n=e("../util/dom"),o=e("@mapbox/point-geometry"),r={scrollZoom:e("./handler/scroll_zoom"),boxZoom:e("./handler/box_zoom"),dragRotate:e("./handler/drag_rotate"),dragPan:e("./handler/drag_pan"),keyboard:e("./handler/keyboard"),doubleClickZoom:e("./handler/dblclick_zoom"),touchZoomRotate:e("./handler/touch_zoom_rotate")};t.exports=function(e,t){function i(e){v("mouseout",e)}function a(t){e.doubleClickZoom.isActive()||e.stop(),w=n.mousePos(_,t),v("mousedown",t),x=!0}function s(t){var i=e.dragRotate&&e.dragRotate.isActive();b&&!i&&v("contextmenu",b),b=null,x=!1,v("mouseup",t)}function l(t){if(!(e.dragPan&&e.dragPan.isActive()||e.dragRotate&&e.dragRotate.isActive())){for(var i=t.toElement||t.target;i&&i!==_;)i=i.parentNode;i===_&&v("mousemove",t)}}function u(t){e.stop(),g("touchstart",t),!t.touches||t.touches.length>1||(z?(clearTimeout(z),z=null,v("dblclick",t)):z=setTimeout(d,300))}function c(e){g("touchmove",e)}function p(e){g("touchend",e)}function f(e){g("touchcancel",e)}function d(){z=null}function h(e){n.mousePos(_,e).equals(w)&&v("click",e)}function m(e){v("dblclick",e),e.preventDefault()}function y(t){var i=e.dragRotate&&e.dragRotate.isActive();x||i?x&&(b=t):v("contextmenu",t),t.preventDefault()}function v(t,i){var o=n.mousePos(_,i);return e.fire(t,{lngLat:e.unproject(o),point:o,originalEvent:i})}function g(t,i){var r=n.touchPos(_,i),a=r.reduce(function(e,t,i,n){return e.add(t.div(n.length))},new o(0,0));return e.fire(t,{lngLat:e.unproject(a),point:a,lngLats:r.map(function(t){return e.unproject(t)},this),points:r,originalEvent:i})}var _=e.getCanvasContainer(),b=null,x=!1,w=null,z=null;for(var A in r)e[A]=new r[A](e,t),t.interactive&&t[A]&&e[A].enable(t[A]);_.addEventListener("mouseout",i,!1),_.addEventListener("mousedown",a,!1),_.addEventListener("mouseup",s,!1),_.addEventListener("mousemove",l,!1),_.addEventListener("touchstart",u,!1),_.addEventListener("touchend",p,!1),_.addEventListener("touchmove",c,!1),_.addEventListener("touchcancel",f,!1),_.addEventListener("click",h,!1),_.addEventListener("dblclick",m,!1),_.addEventListener("contextmenu",y,!1)}},{"../util/dom":252,"./handler/box_zoom":232,"./handler/dblclick_zoom":233,"./handler/drag_pan":234,"./handler/drag_rotate":235,"./handler/keyboard":236,"./handler/scroll_zoom":237,"./handler/touch_zoom_rotate":238,"@mapbox/point-geometry":2}],224:[function(e,t,i){var n=e("../util/util"),o=e("../style-spec/util/interpolate").number,r=e("../util/browser"),a=e("../geo/lng_lat"),s=e("../geo/lng_lat_bounds"),l=e("@mapbox/point-geometry"),u=e("../util/evented"),c=function(e){function t(t,i){e.call(this),this.moving=!1,this.transform=t,this._bearingSnap=i.bearingSnap}return e&&(t.__proto__=e),t.prototype=F()(e&&e.prototype),t.prototype.constructor=t,t.prototype.getCenter=function(){return this.transform.center},t.prototype.setCenter=function(e,t){return this.jumpTo({center:e},t)},t.prototype.panBy=function(e,t,i){return e=l.convert(e).mult(-1),this.panTo(this.transform.center,n.extend({offset:e},t),i)},t.prototype.panTo=function(e,t,i){return this.easeTo(n.extend({center:e},t),i)},t.prototype.getZoom=function(){return this.transform.zoom},t.prototype.setZoom=function(e,t){return this.jumpTo({zoom:e},t),this},t.prototype.zoomTo=function(e,t,i){return this.easeTo(n.extend({zoom:e},t),i)},t.prototype.zoomIn=function(e,t){return this.zoomTo(this.getZoom()+1,e,t),this},t.prototype.zoomOut=function(e,t){return this.zoomTo(this.getZoom()-1,e,t),this},t.prototype.getBearing=function(){return this.transform.bearing},t.prototype.setBearing=function(e,t){return this.jumpTo({bearing:e},t),this},t.prototype.rotateTo=function(e,t,i){return this.easeTo(n.extend({bearing:e},t),i)},t.prototype.resetNorth=function(e,t){return this.rotateTo(0,n.extend({duration:1e3},e),t),this},t.prototype.snapToNorth=function(e,t){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(e,t):this},t.prototype.getPitch=function(){return this.transform.pitch},t.prototype.setPitch=function(e,t){return this.jumpTo({pitch:e},t),this},t.prototype.fitBounds=function(e,t,i){if(t=n.extend({padding:{top:0,bottom:0,right:0,left:0},offset:[0,0],maxZoom:this.transform.maxZoom},t),"number"==typeof t.padding){var o=t.padding;t.padding={top:o,bottom:o,right:o,left:o}}if(!n.deepEqual(R()(t.padding).sort(function(e,t){return e<t?-1:e>t?1:0}),["bottom","left","right","top"]))return n.warnOnce("options.padding must be a positive number, or an Object with keys 'bottom', 'left', 'right', 'top'"),this;e=s.convert(e);var r=[(t.padding.left-t.padding.right)/2,(t.padding.top-t.padding.bottom)/2],a=Math.min(t.padding.right,t.padding.left),u=Math.min(t.padding.top,t.padding.bottom);t.offset=[t.offset[0]+r[0],t.offset[1]+r[1]];var c=l.convert(t.offset),p=this.transform,f=p.project(e.getNorthWest()),d=p.project(e.getSouthEast()),h=d.sub(f),m=(p.width-2*a-2*Math.abs(c.x))/h.x,y=(p.height-2*u-2*Math.abs(c.y))/h.y;return y<0||m<0?(n.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset."),this):(t.center=p.unproject(f.add(d).div(2)),t.zoom=Math.min(p.scaleZoom(p.scale*Math.min(m,y)),t.maxZoom),t.bearing=0,t.linear?this.easeTo(t,i):this.flyTo(t,i))},t.prototype.jumpTo=function(e,t){this.stop();var i=this.transform,n=!1,o=!1,r=!1;return"zoom"in e&&i.zoom!==+e.zoom&&(n=!0,i.zoom=+e.zoom),void 0!==e.center&&(i.center=a.convert(e.center)),"bearing"in e&&i.bearing!==+e.bearing&&(o=!0,i.bearing=+e.bearing),"pitch"in e&&i.pitch!==+e.pitch&&(r=!0,i.pitch=+e.pitch),this.fire("movestart",t).fire("move",t),n&&this.fire("zoomstart",t).fire("zoom",t).fire("zoomend",t),o&&this.fire("rotate",t),r&&this.fire("pitchstart",t).fire("pitch",t).fire("pitchend",t),this.fire("moveend",t)},t.prototype.easeTo=function(e,t){var i=this;this.stop(),e=n.extend({offset:[0,0],duration:500,easing:n.ease},e),!1===e.animate&&(e.duration=0),e.smoothEasing&&0!==e.duration&&(e.easing=this._smoothOutEasing(e.duration));var r=this.transform,s=this.getZoom(),u=this.getBearing(),c=this.getPitch(),p="zoom"in e?+e.zoom:s,f="bearing"in e?this._normalizeBearing(e.bearing,u):u,d="pitch"in e?+e.pitch:c,h=r.centerPoint.add(l.convert(e.offset)),m=r.pointLocation(h),y=a.convert(e.center||m);this._normalizeCenter(y);var v,g,_=r.project(m),b=r.project(y).sub(_),x=r.zoomScale(p-s);return e.around&&(v=a.convert(e.around),g=r.locationPoint(v)),this.zooming=p!==s,this.rotating=u!==f,this.pitching=d!==c,this._prepareEase(t,e.noMoveStart),clearTimeout(this._onEaseEnd),this._ease(function(e){if(this.zooming&&(r.zoom=o(s,p,e)),this.rotating&&(r.bearing=o(u,f,e)),this.pitching&&(r.pitch=o(c,d,e)),v)r.setLocationAtPoint(v,g);else{var i=r.zoomScale(r.zoom-s),n=p>s?Math.min(2,x):Math.max(.5,x),a=Math.pow(n,1-e),l=r.unproject(_.add(b.mult(e*a)).mult(i));r.setLocationAtPoint(r.renderWorldCopies?l.wrap():l,h)}this._fireMoveEvents(t)},function(){e.delayEndEvents?i._onEaseEnd=setTimeout(function(){return i._easeToEnd(t)},e.delayEndEvents):i._easeToEnd(t)},e),this},t.prototype._prepareEase=function(e,t){this.moving=!0,t||this.fire("movestart",e),this.zooming&&this.fire("zoomstart",e),this.pitching&&this.fire("pitchstart",e)},t.prototype._fireMoveEvents=function(e){this.fire("move",e),this.zooming&&this.fire("zoom",e),this.rotating&&this.fire("rotate",e),this.pitching&&this.fire("pitch",e)},t.prototype._easeToEnd=function(e){var t=this.zooming,i=this.pitching;this.moving=!1,this.zooming=!1,this.rotating=!1,this.pitching=!1,t&&this.fire("zoomend",e),i&&this.fire("pitchend",e),this.fire("moveend",e)},t.prototype.flyTo=function(e,t){function i(e){var t=(k*k-T*T+(e?-1:1)*M*M*S*S)/(2*(e?k:T)*M*S);return Math.log(Math.sqrt(t*t+1)-t)}function r(e){return(Math.exp(e)-Math.exp(-e))/2}function s(e){return(Math.exp(e)+Math.exp(-e))/2}function u(e){return r(e)/s(e)}var c=this;this.stop(),e=n.extend({offset:[0,0],speed:1.2,curve:1.42,easing:n.ease},e);var p=this.transform,f=this.getZoom(),d=this.getBearing(),h=this.getPitch(),m="zoom"in e?n.clamp(+e.zoom,p.minZoom,p.maxZoom):f,y="bearing"in e?this._normalizeBearing(e.bearing,d):d,v="pitch"in e?+e.pitch:h,g=p.zoomScale(m-f),_=p.centerPoint.add(l.convert(e.offset)),b=p.pointLocation(_),x=a.convert(e.center||b);this._normalizeCenter(x);var w=p.project(b),z=p.project(x).sub(w),A=e.curve,T=Math.max(p.width,p.height),k=T/g,S=z.mag();if("minZoom"in e){var E=n.clamp(Math.min(e.minZoom,f,m),p.minZoom,p.maxZoom),C=T/p.zoomScale(E-f);A=Math.sqrt(C/S*2)}var M=A*A,I=i(0),L=function(e){return s(I)/s(I+A*e)},R=function(e){return T*((s(I)*u(I+A*e)-r(I))/M)/S},P=(i(1)-I)/A;if(Math.abs(S)<1e-6||!isFinite(P)){if(Math.abs(T-k)<1e-6)return this.easeTo(e,t);var D=k<T?-1:1;P=Math.abs(Math.log(k/T))/A,R=function(){return 0},L=function(e){return Math.exp(D*A*e)}}if("duration"in e)e.duration=+e.duration;else{var B="screenSpeed"in e?+e.screenSpeed/A:+e.speed;e.duration=1e3*P/B}return e.maxDuration&&e.duration>e.maxDuration&&(e.duration=0),this.zooming=!0,this.rotating=d!==y,this.pitching=v!==h,this._prepareEase(t,!1),this._ease(function(e){var i=e*P,n=1/L(i);p.zoom=f+p.scaleZoom(n),this.rotating&&(p.bearing=o(d,y,e)),this.pitching&&(p.pitch=o(h,v,e));var r=p.unproject(w.add(z.mult(R(i))).mult(n));p.setLocationAtPoint(p.renderWorldCopies?r.wrap():r,_),this._fireMoveEvents(t)},function(){return c._easeToEnd(t)},e),this},t.prototype.isEasing=function(){return!!this._abortFn},t.prototype.isMoving=function(){return this.moving},t.prototype.stop=function(){return this._abortFn&&(this._abortFn(),this._finishEase()),this},t.prototype._ease=function(e,t,i){this._finishFn=t,this._abortFn=r.timed(function(t){e.call(this,i.easing(t)),1===t&&this._finishEase()},!1===i.animate?0:i.duration,this)},t.prototype._finishEase=function(){delete this._abortFn;var e=this._finishFn;delete this._finishFn,e.call(this)},t.prototype._normalizeBearing=function(e,t){e=n.wrap(e,-180,180);var i=Math.abs(e-t);return Math.abs(e-360-t)<i&&(e-=360),Math.abs(e+360-t)<i&&(e+=360),e},t.prototype._normalizeCenter=function(e){var t=this.transform;if(t.renderWorldCopies&&!t.lngRange){var i=e.lng-t.center.lng;e.lng+=i>180?-360:i<-180?360:0}},t.prototype._smoothOutEasing=function(e){var t=n.ease;if(this._prevEase){var i=this._prevEase,o=(Date.now()-i.start)/i.duration,r=i.easing(o+.01)-i.easing(o),a=.27/Math.sqrt(r*r+1e-4)*.01,s=Math.sqrt(.0729-a*a);t=n.bezier(a,s,.25,1)}return this._prevEase={start:(new Date).getTime(),duration:e,easing:t},t},t}(u);t.exports=c},{"../geo/lng_lat":68,"../geo/lng_lat_bounds":69,"../style-spec/util/interpolate":154,"../util/browser":245,"../util/evented":253,"../util/util":266,"@mapbox/point-geometry":2}],225:[function(e,t,i){var n=e("../../util/dom"),o=e("../../util/util"),r=e("../../util/config"),a=function(e){this.options=e,o.bindAll(["_updateEditLink","_updateData","_updateCompact"],this)};a.prototype.getDefaultPosition=function(){return"bottom-right"},a.prototype.onAdd=function(e){var t=this.options&&this.options.compact;return this._map=e,this._container=n.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),t&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),void 0===t&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},a.prototype.onRemove=function(){n.remove(this._container),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0},a.prototype._updateEditLink=function(){var e=this._editLink;e||(e=this._editLink=this._container.querySelector(".mapbox-improve-map"));var t=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:r.ACCESS_TOKEN}];if(e){var i=t.reduce(function(e,i,n){return i.value&&(e+=i.key+"="+i.value+(n<t.length-1?"&":"")),e},"?");e.href="https://www.mapbox.com/feedback/"+i+(this._map._hash?this._map._hash.getHashString(!0):"")}},a.prototype._updateData=function(e){e&&"metadata"===e.sourceDataType&&(this._updateAttributions(),this._updateEditLink())},a.prototype._updateAttributions=function(){if(this._map.style){var e=[];if(this._map.style.stylesheet){var t=this._map.style.stylesheet;this.styleOwner=t.owner,this.styleId=t.id}var i=this._map.style.sourceCaches;for(var n in i){var o=i[n].getSource();o.attribution&&e.indexOf(o.attribution)<0&&e.push(o.attribution)}e.sort(function(e,t){return e.length-t.length}),e=e.filter(function(t,i){for(var n=i+1;n<e.length;n++)if(e[n].indexOf(t)>=0)return!1;return!0}),this._container.innerHTML=e.join(" | "),this._editLink=null}},a.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact")},t.exports=a},{"../../util/config":249,"../../util/dom":252,"../../util/util":266}],226:[function(e,t,i){var n=e("../../util/dom"),o=e("../../util/util"),r=e("../../util/window"),a=function(){this._fullscreen=!1,o.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in r.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in r.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in r.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in r.document&&(this._fullscreenchange="MSFullscreenChange"),this._className="mapboxgl-ctrl"};a.prototype.onAdd=function(e){return this._map=e,this._mapContainer=this._map.getContainer(),this._container=n.create("div",this._className+" mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._container.style.display="none",o.warnOnce("This device does not support fullscreen mode.")),this._container},a.prototype.onRemove=function(){n.remove(this._container),this._map=null,r.document.removeEventListener(this._fullscreenchange,this._changeIcon)},a.prototype._checkFullscreenSupport=function(){return!!(r.document.fullscreenEnabled||r.document.mozFullScreenEnabled||r.document.msFullscreenEnabled||r.document.webkitFullscreenEnabled)},a.prototype._setupUI=function(){var e=this._fullscreenButton=n.create("button",this._className+"-icon "+this._className+"-fullscreen",this._container);e.setAttribute("aria-label","Toggle fullscreen"),e.type="button",this._fullscreenButton.addEventListener("click",this._onClickFullscreen),r.document.addEventListener(this._fullscreenchange,this._changeIcon)},a.prototype._isFullscreen=function(){return this._fullscreen},a.prototype._changeIcon=function(){(r.document.fullscreenElement||r.document.mozFullScreenElement||r.document.webkitFullscreenElement||r.document.msFullscreenElement)===this._mapContainer!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle(this._className+"-shrink"),this._fullscreenButton.classList.toggle(this._className+"-fullscreen"))},a.prototype._onClickFullscreen=function(){this._isFullscreen()?r.document.exitFullscreen?r.document.exitFullscreen():r.document.mozCancelFullScreen?r.document.mozCancelFullScreen():r.document.msExitFullscreen?r.document.msExitFullscreen():r.document.webkitCancelFullScreen&&r.document.webkitCancelFullScreen():this._mapContainer.requestFullscreen?this._mapContainer.requestFullscreen():this._mapContainer.mozRequestFullScreen?this._mapContainer.mozRequestFullScreen():this._mapContainer.msRequestFullscreen?this._mapContainer.msRequestFullscreen():this._mapContainer.webkitRequestFullscreen&&this._mapContainer.webkitRequestFullscreen()},t.exports=a},{"../../util/dom":252,"../../util/util":266,"../../util/window":247}],227:[function(e,t,i){function n(e){void 0!==o?e(o):void 0!==s.navigator.permissions?s.navigator.permissions.query({name:"geolocation"}).then(function(t){o="denied"!==t.state,e(o)}):(o=!!s.navigator.geolocation,e(o))}var o,r=e("../../util/evented"),a=e("../../util/dom"),s=e("../../util/window"),l=e("../../util/util"),u=e("../../geo/lng_lat"),c=e("../marker"),p={positionOptions:{enableHighAccuracy:!1,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showUserLocation:!0},f=function(e){function t(t){e.call(this),this.options=l.extend({},p,t),l.bindAll(["_onSuccess","_onError","_finish","_setupUI","_updateCamera","_updateMarker","_onClickGeolocate"],this)}return e&&(t.__proto__=e),t.prototype=F()(e&&e.prototype),t.prototype.constructor=t,t.prototype.onAdd=function(e){return this._map=e,this._container=a.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),n(this._setupUI),this._container},t.prototype.onRemove=function(){void 0!==this._geolocationWatchID&&(s.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker.remove(),a.remove(this._container),this._map=void 0},t.prototype._onSuccess=function(e){if(this.options.trackUserLocation)switch(this._lastKnownPosition=e,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&"OFF"!==this._watchState&&this._updateMarker(e),this.options.trackUserLocation&&"ACTIVE_LOCK"!==this._watchState||this._updateCamera(e),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire("geolocate",e),this._finish()},t.prototype._updateCamera=function(e){var t=new u(e.coords.longitude,e.coords.latitude),i=e.coords.accuracy;this._map.fitBounds(t.toBounds(i),this.options.fitBoundsOptions,{geolocateSource:!0})},t.prototype._updateMarker=function(e){e?this._userLocationDotMarker.setLngLat([e.coords.longitude,e.coords.latitude]).addTo(this._map):this._userLocationDotMarker.remove()},t.prototype._onError=function(e){if(this.options.trackUserLocation)if(1===e.code)this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),void 0!==this._geolocationWatchID&&this._clearWatch();else switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}"OFF"!==this._watchState&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire("error",e),this._finish()},t.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},t.prototype._setupUI=function(e){var t=this;!1!==e&&(this._container.addEventListener("contextmenu",function(e){return e.preventDefault()}),this._geolocateButton=a.create("button","mapboxgl-ctrl-icon mapboxgl-ctrl-geolocate",this._container),this._geolocateButton.type="button",this._geolocateButton.setAttribute("aria-label","Geolocate"),this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=a.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new c(this._dotElement),this.options.trackUserLocation&&(this._watchState="OFF")),this._geolocateButton.addEventListener("click",this._onClickGeolocate.bind(this)),this.options.trackUserLocation&&this._map.on("movestart",function(e){e.geolocateSource||"ACTIVE_LOCK"!==t._watchState||(t._watchState="BACKGROUND",t._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),t._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),t.fire("trackuserlocationend"))}))},t.prototype._onClickGeolocate=function(){if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire("trackuserlocationstart");break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire("trackuserlocationend");break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire("trackuserlocationstart")}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}"OFF"===this._watchState&&void 0!==this._geolocationWatchID?this._clearWatch():void 0===this._geolocationWatchID&&(this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),this._geolocationWatchID=s.navigator.geolocation.watchPosition(this._onSuccess,this._onError,this.options.positionOptions))}else s.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4)},t.prototype._clearWatch=function(){s.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},t}(r);t.exports=f},{"../../geo/lng_lat":68,"../../util/dom":252,"../../util/evented":253,"../../util/util":266,"../../util/window":247,"../marker":241}],228:[function(e,t,i){var n=e("../../util/dom"),o=e("../../util/util"),r=function(){o.bindAll(["_updateLogo"],this)};r.prototype.onAdd=function(e){this._map=e,this._container=n.create("div","mapboxgl-ctrl");var t=n.create("a","mapboxgl-ctrl-logo");return t.target="_blank",t.href="https://www.mapbox.com/",t.setAttribute("aria-label","Mapbox logo"),this._container.appendChild(t),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._container},r.prototype.onRemove=function(){n.remove(this._container),this._map.off("sourcedata",this._updateLogo)},r.prototype.getDefaultPosition=function(){return"bottom-left"},r.prototype._updateLogo=function(e){e&&"metadata"!==e.sourceDataType||(this._container.style.display=this._logoRequired()?"block":"none")},r.prototype._logoRequired=function(){if(this._map.style){var e=this._map.style.sourceCaches;for(var t in e)if(e[t].getSource().mapbox_logo)return!0;return!1}},t.exports=r},{"../../util/dom":252,"../../util/util":266}],229:[function(e,t,i){var n=e("../../util/dom"),o=e("../../util/util"),r=e("../handler/drag_rotate"),a=function(){var e=this;o.bindAll(["_rotateCompassArrow"],this),this._container=n.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",function(e){return e.preventDefault()}),this._zoomInButton=this._createButton("mapboxgl-ctrl-icon mapboxgl-ctrl-zoom-in","Zoom In",function(){return e._map.zoomIn()}),this._zoomOutButton=this._createButton("mapboxgl-ctrl-icon mapboxgl-ctrl-zoom-out","Zoom Out",function(){return e._map.zoomOut()}),this._compass=this._createButton("mapboxgl-ctrl-icon mapboxgl-ctrl-compass","Reset North",function(){return e._map.resetNorth()}),this._compassArrow=n.create("span","mapboxgl-ctrl-compass-arrow",this._compass)};a.prototype._rotateCompassArrow=function(){var e="rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassArrow.style.transform=e},a.prototype.onAdd=function(e){return this._map=e,this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new r(e,{button:"left",element:this._compass}),this._handler.enable(),this._container},a.prototype.onRemove=function(){n.remove(this._container),this._map.off("rotate",this._rotateCompassArrow),delete this._map,this._handler.disable(),delete this._handler},a.prototype._createButton=function(e,t,i){var o=n.create("button",e,this._container);return o.type="button",o.setAttribute("aria-label",t),o.addEventListener("click",i),o},t.exports=a},{"../../util/dom":252,"../../util/util":266,"../handler/drag_rotate":235}],230:[function(e,t,i){function n(e,t,i){var n=i&&i.maxWidth||100,a=e._container.clientHeight/2,s=r(e.unproject([0,a]),e.unproject([n,a]));if(i&&"imperial"===i.unit){var l=3.2808*s;l>5280?o(t,n,l/5280,"mi"):o(t,n,l,"ft")}else if(i&&"nautical"===i.unit){var u=s/1852;o(t,n,u,"nm")}else o(t,n,s,"m")}function o(e,t,i,n){var o=a(i),r=o/i;"m"===n&&o>=1e3&&(o/=1e3,n="km"),e.style.width=t*r+"px",e.innerHTML=o+n}function r(e,t){var i=Math.PI/180,n=e.lat*i,o=t.lat*i,r=Math.sin(n)*Math.sin(o)+Math.cos(n)*Math.cos(o)*Math.cos((t.lng-e.lng)*i);return 6371e3*Math.acos(Math.min(r,1))}function a(e){var t=Math.pow(10,(""+Math.floor(e)).length-1),i=e/t;return i=i>=10?10:i>=5?5:i>=3?3:i>=2?2:1,t*i}var s=e("../../util/dom"),l=e("../../util/util"),u=function(e){this.options=e,l.bindAll(["_onMove"],this)};u.prototype.getDefaultPosition=function(){return"bottom-left"},u.prototype._onMove=function(){n(this._map,this._container,this.options)},u.prototype.onAdd=function(e){return this._map=e,this._container=s.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",e.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},u.prototype.onRemove=function(){s.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},t.exports=u},{"../../util/dom":252,"../../util/util":266}],231:[function(e,t,i){},{}],232:[function(e,t,i){var n=e("../../util/dom"),o=e("../../geo/lng_lat_bounds"),r=e("../../util/util"),a=e("../../util/window"),s=function(e){this._map=e,this._el=e.getCanvasContainer(),this._container=e.getContainer(),r.bindAll(["_onMouseDown","_onMouseMove","_onMouseUp","_onKeyDown"],this)};s.prototype.isEnabled=function(){return!!this._enabled},s.prototype.isActive=function(){return!!this._active},s.prototype.enable=function(){this.isEnabled()||(this._map.dragPan&&this._map.dragPan.disable(),this._el.addEventListener("mousedown",this._onMouseDown,!1),this._map.dragPan&&this._map.dragPan.enable(),this._enabled=!0)},s.prototype.disable=function(){this.isEnabled()&&(this._el.removeEventListener("mousedown",this._onMouseDown),this._enabled=!1)},s.prototype._onMouseDown=function(e){e.shiftKey&&0===e.button&&(a.document.addEventListener("mousemove",this._onMouseMove,!1),a.document.addEventListener("keydown",this._onKeyDown,!1),a.document.addEventListener("mouseup",this._onMouseUp,!1),n.disableDrag(),this._startPos=n.mousePos(this._el,e),this._active=!0)},s.prototype._onMouseMove=function(e){var t=this._startPos,i=n.mousePos(this._el,e);this._box||(this._box=n.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",e));var o=Math.min(t.x,i.x),r=Math.max(t.x,i.x),a=Math.min(t.y,i.y),s=Math.max(t.y,i.y);n.setTransform(this._box,"translate("+o+"px,"+a+"px)"),this._box.style.width=r-o+"px",this._box.style.height=s-a+"px"},s.prototype._onMouseUp=function(e){if(0===e.button){var t=this._startPos,i=n.mousePos(this._el,e),r=(new o).extend(this._map.unproject(t)).extend(this._map.unproject(i));this._finish(),t.x===i.x&&t.y===i.y?this._fireEvent("boxzoomcancel",e):this._map.fitBounds(r,{linear:!0}).fire("boxzoomend",{originalEvent:e,boxZoomBounds:r})}},s.prototype._onKeyDown=function(e){27===e.keyCode&&(this._finish(),this._fireEvent("boxzoomcancel",e))},s.prototype._finish=function(){this._active=!1,a.document.removeEventListener("mousemove",this._onMouseMove,!1),a.document.removeEventListener("keydown",this._onKeyDown,!1),a.document.removeEventListener("mouseup",this._onMouseUp,!1),this._container.classList.remove("mapboxgl-crosshair"),this._box&&(n.remove(this._box),this._box=null),n.enableDrag()},s.prototype._fireEvent=function(e,t){return this._map.fire(e,{originalEvent:t})},t.exports=s},{"../../geo/lng_lat_bounds":69,"../../util/dom":252,"../../util/util":266,"../../util/window":247}],233:[function(e,t,i){var n=e("../../util/util"),o=function(e){this._map=e,n.bindAll(["_onDblClick","_onZoomEnd"],this)};o.prototype.isEnabled=function(){return!!this._enabled},o.prototype.isActive=function(){return!!this._active},o.prototype.enable=function(){this.isEnabled()||(this._map.on("dblclick",this._onDblClick),this._enabled=!0)},o.prototype.disable=function(){this.isEnabled()&&(this._map.off("dblclick",this._onDblClick),this._enabled=!1)},o.prototype._onDblClick=function(e){this._active=!0,this._map.on("zoomend",this._onZoomEnd),this._map.zoomTo(this._map.getZoom()+(e.originalEvent.shiftKey?-1:1),{around:e.lngLat},e)},o.prototype._onZoomEnd=function(){this._active=!1,this._map.off("zoomend",this._onZoomEnd)},t.exports=o},{"../../util/util":266}],234:[function(e,t,i){var n=e("../../util/dom"),o=e("../../util/util"),r=e("../../util/window"),a=o.bezier(0,0,.3,1),s=function(e){this._map=e,this._el=e.getCanvasContainer(),o.bindAll(["_onDown","_onMove","_onUp","_onTouchEnd","_onMouseUp"],this)};s.prototype.isEnabled=function(){return!!this._enabled},s.prototype.isActive=function(){return!!this._active},s.prototype.enable=function(){this.isEnabled()||(this._el.classList.add("mapboxgl-touch-drag-pan"),this._el.addEventListener("mousedown",this._onDown),this._el.addEventListener("touchstart",this._onDown),this._enabled=!0)},s.prototype.disable=function(){this.isEnabled()&&(this._el.classList.remove("mapboxgl-touch-drag-pan"),this._el.removeEventListener("mousedown",this._onDown),this._el.removeEventListener("touchstart",this._onDown),this._enabled=!1)},s.prototype._onDown=function(e){this._ignoreEvent(e)||this.isActive()||(e.touches?(r.document.addEventListener("touchmove",this._onMove),r.document.addEventListener("touchend",this._onTouchEnd)):(r.document.addEventListener("mousemove",this._onMove),r.document.addEventListener("mouseup",this._onMouseUp)),r.addEventListener("blur",this._onMouseUp),this._active=!1,this._startPos=this._pos=n.mousePos(this._el,e),this._inertia=[[Date.now(),this._pos]])},s.prototype._onMove=function(e){if(!this._ignoreEvent(e)){this.isActive()||(this._active=!0,this._map.moving=!0,this._fireEvent("dragstart",e),this._fireEvent("movestart",e));var t=n.mousePos(this._el,e),i=this._map;i.stop(),this._drainInertiaBuffer(),this._inertia.push([Date.now(),t]),i.transform.setLocationAtPoint(i.transform.pointLocation(this._pos),t),this._fireEvent("drag",e),this._fireEvent("move",e),this._pos=t,e.preventDefault()}},s.prototype._onUp=function(e){var t=this;if(this.isActive()){this._active=!1,this._fireEvent("dragend",e),this._drainInertiaBuffer();var i=function(){t._map.moving=!1,t._fireEvent("moveend",e)},n=this._inertia;if(n.length<2)return void i();var o=n[n.length-1],r=n[0],s=o[1].sub(r[1]),l=(o[0]-r[0])/1e3;if(0===l||o[1].equals(r[1]))return void i();var u=s.mult(.3/l),c=u.mag();c>1400&&(c=1400,u._unit()._mult(c));var p=c/750,f=u.mult(-p/2);this._map.panBy(f,{duration:1e3*p,easing:a,noMoveStart:!0},{originalEvent:e})}},s.prototype._onMouseUp=function(e){this._ignoreEvent(e)||(this._onUp(e),r.document.removeEventListener("mousemove",this._onMove),r.document.removeEventListener("mouseup",this._onMouseUp),r.removeEventListener("blur",this._onMouseUp))},s.prototype._onTouchEnd=function(e){this._ignoreEvent(e)||(this._onUp(e),r.document.removeEventListener("touchmove",this._onMove),r.document.removeEventListener("touchend",this._onTouchEnd))},s.prototype._fireEvent=function(e,t){return this._map.fire(e,{originalEvent:t})},s.prototype._ignoreEvent=function(e){var t=this._map;return!(!t.boxZoom||!t.boxZoom.isActive())||!(!t.dragRotate||!t.dragRotate.isActive())||(e.touches?e.touches.length>1:!!e.ctrlKey||"mousemove"!==e.type&&e.button&&0!==e.button)},s.prototype._drainInertiaBuffer=function(){for(var e=this._inertia,t=Date.now();e.length>0&&t-e[0][0]>160;)e.shift()},t.exports=s},{"../../util/dom":252,"../../util/util":266,"../../util/window":247}],235:[function(e,t,i){var n=e("../../util/dom"),o=e("../../util/util"),r=e("../../util/window"),a=o.bezier(0,0,.25,1),s=function(e,t){this._map=e,this._el=t.element||e.getCanvasContainer(),this._button=t.button||"right",this._bearingSnap=t.bearingSnap||0,this._pitchWithRotate=!1!==t.pitchWithRotate,o.bindAll(["_onDown","_onMove","_onUp"],this)};s.prototype.isEnabled=function(){return!!this._enabled},s.prototype.isActive=function(){return!!this._active},s.prototype.enable=function(){this.isEnabled()||(this._el.addEventListener("mousedown",this._onDown),this._enabled=!0)},s.prototype.disable=function(){this.isEnabled()&&(this._el.removeEventListener("mousedown",this._onDown),this._enabled=!1)},s.prototype._onDown=function(e){if(!(this._map.boxZoom&&this._map.boxZoom.isActive()||this._map.dragPan&&this._map.dragPan.isActive()||this.isActive())){if("right"===this._button){var t=e.ctrlKey?0:2,i=e.button;if(void 0!==r.InstallTrigger&&2===e.button&&e.ctrlKey&&r.navigator.platform.toUpperCase().indexOf("MAC")>=0&&(i=0),i!==t)return}else if(e.ctrlKey||0!==e.button)return;n.disableDrag(),r.document.addEventListener("mousemove",this._onMove,{capture:!0}),r.document.addEventListener("mouseup",this._onUp),r.addEventListener("blur",this._onUp),this._active=!1,this._inertia=[[Date.now(),this._map.getBearing()]],this._startPos=this._pos=n.mousePos(this._el,e),this._center=this._map.transform.centerPoint,e.preventDefault()}},s.prototype._onMove=function(e){this.isActive()||(this._active=!0,this._map.moving=!0,this._fireEvent("rotatestart",e),this._fireEvent("movestart",e),this._pitchWithRotate&&this._fireEvent("pitchstart",e));var t=this._map;t.stop();var i=this._pos,o=n.mousePos(this._el,e),r=.8*(i.x-o.x),a=-.5*(i.y-o.y),s=t.getBearing()-r,l=t.getPitch()-a,u=this._inertia,c=u[u.length-1];this._drainInertiaBuffer(),u.push([Date.now(),t._normalizeBearing(s,c[1])]),t.transform.bearing=s,this._pitchWithRotate&&(this._fireEvent("pitch",e),t.transform.pitch=l),this._fireEvent("rotate",e),this._fireEvent("move",e),this._pos=o},s.prototype._onUp=function(e){var t=this;if(r.document.removeEventListener("mousemove",this._onMove,{capture:!0}),r.document.removeEventListener("mouseup",this._onUp),r.removeEventListener("blur",this._onUp),n.enableDrag(),this.isActive()){this._active=!1,this._fireEvent("rotateend",e),this._drainInertiaBuffer();var i=this._map,o=i.getBearing(),s=this._inertia,l=function(){Math.abs(o)<t._bearingSnap?i.resetNorth({noMoveStart:!0},{originalEvent:e}):(t._map.moving=!1,t._fireEvent("moveend",e)),t._pitchWithRotate&&t._fireEvent("pitchend",e)};if(s.length<2)return void l();var u=s[0],c=s[s.length-1],p=s[s.length-2],f=i._normalizeBearing(o,p[1]),d=c[1]-u[1],h=d<0?-1:1,m=(c[0]-u[0])/1e3;if(0===d||0===m)return void l();var y=Math.abs(d*(.25/m));y>180&&(y=180);var v=y/180;f+=h*y*(v/2),Math.abs(i._normalizeBearing(f,0))<this._bearingSnap&&(f=i._normalizeBearing(0,f)),i.rotateTo(f,{duration:1e3*v,easing:a,noMoveStart:!0},{originalEvent:e})}},s.prototype._fireEvent=function(e,t){return this._map.fire(e,{originalEvent:t})},s.prototype._drainInertiaBuffer=function(){for(var e=this._inertia,t=Date.now();e.length>0&&t-e[0][0]>160;)e.shift()},t.exports=s},{"../../util/dom":252,"../../util/util":266,"../../util/window":247}],236:[function(e,t,i){function n(e){return e*(2-e)}var o=e("../../util/util"),r=function(e){this._map=e,this._el=e.getCanvasContainer(),o.bindAll(["_onKeyDown"],this)};r.prototype.isEnabled=function(){return!!this._enabled},r.prototype.enable=function(){this.isEnabled()||(this._el.addEventListener("keydown",this._onKeyDown,!1),this._enabled=!0)},r.prototype.disable=function(){this.isEnabled()&&(this._el.removeEventListener("keydown",this._onKeyDown),this._enabled=!1)},r.prototype._onKeyDown=function(e){if(!(e.altKey||e.ctrlKey||e.metaKey)){var t=0,i=0,o=0,r=0,a=0;switch(e.keyCode){case 61:case 107:case 171:case 187:t=1;break;case 189:case 109:case 173:t=-1;break;case 37:e.shiftKey?i=-1:(e.preventDefault(),r=-1);break;case 39:e.shiftKey?i=1:(e.preventDefault(),r=1);break;case 38:e.shiftKey?o=1:(e.preventDefault(),a=-1);break;case 40:e.shiftKey?o=-1:(a=1,e.preventDefault());break;default:return}var s=this._map,l=s.getZoom(),u={duration:300,delayEndEvents:500,easing:n,zoom:t?Math.round(l)+t*(e.shiftKey?2:1):l,bearing:s.getBearing()+15*i,pitch:s.getPitch()+10*o,offset:[100*-r,100*-a],center:s.getCenter()};s.easeTo(u,{originalEvent:e})}},t.exports=r},{"../../util/util":266}],237:[function(e,t,i){var n=e("../../util/dom"),o=e("../../util/util"),r=e("../../util/browser"),a=e("../../util/window"),s=a.navigator.userAgent.toLowerCase(),l=-1!==s.indexOf("firefox"),u=-1!==s.indexOf("safari")&&-1===s.indexOf("chrom"),c=function(e){this._map=e,this._el=e.getCanvasContainer(),o.bindAll(["_onWheel","_onTimeout"],this)};c.prototype.isEnabled=function(){return!!this._enabled},c.prototype.enable=function(e){this.isEnabled()||(this._el.addEventListener("wheel",this._onWheel,!1),this._el.addEventListener("mousewheel",this._onWheel,!1),this._enabled=!0,this._aroundCenter=e&&"center"===e.around)},c.prototype.disable=function(){this.isEnabled()&&(this._el.removeEventListener("wheel",this._onWheel),this._el.removeEventListener("mousewheel",this._onWheel),this._enabled=!1)},c.prototype._onWheel=function(e){var t=0;"wheel"===e.type?(t=e.deltaY,l&&e.deltaMode===a.WheelEvent.DOM_DELTA_PIXEL&&(t/=r.devicePixelRatio),e.deltaMode===a.WheelEvent.DOM_DELTA_LINE&&(t*=40)):"mousewheel"===e.type&&(t=-e.wheelDeltaY,u&&(t/=3));var i=r.now(),o=i-(this._time||0);this._pos=n.mousePos(this._el,e),this._time=i,0!==t&&t%4.000244140625==0?this._type="wheel":0!==t&&Math.abs(t)<4?this._type="trackpad":o>400?(this._type=null,this._lastValue=t,this._timeout=setTimeout(this._onTimeout,40)):this._type||(this._type=Math.abs(o*t)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,t+=this._lastValue)),e.shiftKey&&t&&(t/=4),this._type&&this._zoom(-t,e),e.preventDefault()},c.prototype._onTimeout=function(){this._type="wheel",this._zoom(-this._lastValue)},c.prototype._zoom=function(e,t){if(0!==e){var i=this._map,n=2/(1+Math.exp(-Math.abs(e/100)));e<0&&0!==n&&(n=1/n);var o=i.ease?i.ease.to:i.transform.scale,r=i.transform.scaleZoom(o*n);i.zoomTo(r,{duration:"wheel"===this._type?200:0,around:this._aroundCenter?i.getCenter():i.unproject(this._pos),delayEndEvents:200,smoothEasing:!0},{originalEvent:t})}},t.exports=c},{"../../util/browser":245,"../../util/dom":252,"../../util/util":266,"../../util/window":247}],238:[function(e,t,i){var n=e("../../util/dom"),o=e("../../util/util"),r=e("../../util/window"),a=o.bezier(0,0,.15,1),s=function(e){this._map=e,this._el=e.getCanvasContainer(),o.bindAll(["_onStart","_onMove","_onEnd"],this)};s.prototype.isEnabled=function(){return!!this._enabled},s.prototype.enable=function(e){this.isEnabled()||(this._el.classList.add("mapboxgl-touch-zoom-rotate"),this._el.addEventListener("touchstart",this._onStart,!1),this._enabled=!0,this._aroundCenter=e&&"center"===e.around)},s.prototype.disable=function(){this.isEnabled()&&(this._el.classList.remove("mapboxgl-touch-zoom-rotate"),this._el.removeEventListener("touchstart",this._onStart),this._enabled=!1)},s.prototype.disableRotation=function(){this._rotationDisabled=!0},s.prototype.enableRotation=function(){this._rotationDisabled=!1},s.prototype._onStart=function(e){if(2===e.touches.length){var t=n.mousePos(this._el,e.touches[0]),i=n.mousePos(this._el,e.touches[1]);this._startVec=t.sub(i),this._startScale=this._map.transform.scale,this._startBearing=this._map.transform.bearing,this._gestureIntent=void 0,this._inertia=[],r.document.addEventListener("touchmove",this._onMove,!1),r.document.addEventListener("touchend",this._onEnd,!1)}},s.prototype._onMove=function(e){if(2===e.touches.length){var t=n.mousePos(this._el,e.touches[0]),i=n.mousePos(this._el,e.touches[1]),o=t.add(i).div(2),r=t.sub(i),a=r.mag()/this._startVec.mag(),s=this._rotationDisabled?0:180*r.angleWith(this._startVec)/Math.PI,l=this._map;if(this._gestureIntent){var u={duration:0,around:l.unproject(o)};"rotate"===this._gestureIntent&&(u.bearing=this._startBearing+s),"zoom"!==this._gestureIntent&&"rotate"!==this._gestureIntent||(u.zoom=l.transform.scaleZoom(this._startScale*a)),l.stop(),this._drainInertiaBuffer(),this._inertia.push([Date.now(),a,o]),l.easeTo(u,{originalEvent:e})}else{var c=Math.abs(1-a)>.15;Math.abs(s)>10?this._gestureIntent="rotate":c&&(this._gestureIntent="zoom"),this._gestureIntent&&(this._startVec=r,this._startScale=l.transform.scale,this._startBearing=l.transform.bearing)}e.preventDefault()}},s.prototype._onEnd=function(e){r.document.removeEventListener("touchmove",this._onMove),r.document.removeEventListener("touchend",this._onEnd),this._drainInertiaBuffer();var t=this._inertia,i=this._map;if(t.length<2)return void i.snapToNorth({},{originalEvent:e});var n=t[t.length-1],o=t[0],s=i.transform.scaleZoom(this._startScale*n[1]),l=i.transform.scaleZoom(this._startScale*o[1]),u=s-l,c=(n[0]-o[0])/1e3,p=n[2];if(0===c||s===l)return void i.snapToNorth({},{originalEvent:e});var f=.15*u/c;Math.abs(f)>2.5&&(f=f>0?2.5:-2.5);var d=1e3*Math.abs(f/(12*.15)),h=s+f*d/2e3;h<0&&(h=0),i.easeTo({zoom:h,duration:d,easing:a,around:this._aroundCenter?i.getCenter():i.unproject(p)},{originalEvent:e})},s.prototype._drainInertiaBuffer=function(){for(var e=this._inertia,t=Date.now();e.length>2&&t-e[0][0]>160;)e.shift()},t.exports=s},{"../../util/dom":252,"../../util/util":266,"../../util/window":247}],239:[function(e,t,i){var n=e("../util/util"),o=e("../util/window"),r=e("../util/throttle"),a=function(){n.bindAll(["_onHashChange","_updateHash"],this),this._updateHash=r(this._updateHashUnthrottled.bind(this),300)};a.prototype.addTo=function(e){return this._map=e,o.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},a.prototype.remove=function(){return o.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),delete this._map,this},a.prototype.getHashString=function(e){var t=this._map.getCenter(),i=Math.round(100*this._map.getZoom())/100,n=Math.max(0,Math.ceil(Math.log(i)/Math.LN2)),o=Math.round(t.lng*Math.pow(10,n))/Math.pow(10,n),r=Math.round(t.lat*Math.pow(10,n))/Math.pow(10,n),a=this._map.getBearing(),s=this._map.getPitch(),l="";return l+=e?"#/"+o+"/"+r+"/"+i:"#"+i+"/"+r+"/"+o,(a||s)&&(l+="/"+Math.round(10*a)/10),s&&(l+="/"+Math.round(s)),l},a.prototype._onHashChange=function(){var e=o.location.hash.replace("#","").split("/");return e.length>=3&&(this._map.jumpTo({center:[+e[2],+e[1]],zoom:+e[0],bearing:+(e[3]||0),pitch:+(e[4]||0)}),!0)},a.prototype._updateHashUnthrottled=function(){var e=this.getHashString();o.history.replaceState("","",e)},t.exports=a},{"../util/throttle":264,"../util/util":266,"../util/window":247}],240:[function(e,t,i){function n(e){e.parentNode&&e.parentNode.removeChild(e)}var o=e("../util/util"),r=e("../util/browser"),a=e("../util/window"),s=e("../util/window"),l=s.HTMLImageElement,u=s.HTMLElement,c=e("../util/dom"),p=e("../util/ajax"),f=e("../style/style"),d=e("../render/painter"),h=e("../geo/transform"),m=e("./hash"),y=e("./bind_handlers"),g=e("./camera"),_=e("../geo/lng_lat"),b=e("../geo/lng_lat_bounds"),x=e("@mapbox/point-geometry"),w=e("./control/attribution_control"),z=e("./control/logo_control"),A=e("mapbox-gl-supported");e("./events");var T={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:0,maxZoom:22,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,bearingSnap:7,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,transformRequest:null,collisionFadeDuration:300},k=function(e){function t(t){var i=this;if(t=o.extend({},T,t),null!=t.minZoom&&null!=t.maxZoom&&t.minZoom>t.maxZoom)throw new Error("maxZoom must be greater than minZoom");var n=new h(t.minZoom,t.maxZoom,t.renderWorldCopies);e.call(this,n,t),this._interactive=t.interactive,this._maxTileCacheSize=t.maxTileCacheSize,this._failIfMajorPerformanceCaveat=t.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=t.preserveDrawingBuffer,this._trackResize=t.trackResize,this._bearingSnap=t.bearingSnap,this._refreshExpiredTiles=t.refreshExpiredTiles,this._collisionFadeDuration=t.collisionFadeDuration;var r=t.transformRequest;if(this._transformRequest=r?function(e,t){return r(e,t)||{url:e}}:function(e){return{url:e}},"string"==typeof t.container){var s=a.document.getElementById(t.container);if(!s)throw new Error("Container '"+t.container+"' not found.");this._container=s}else{if(!(t.container instanceof u))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=t.container}t.maxBounds&&this.setMaxBounds(t.maxBounds),o.bindAll(["_onWindowOnline","_onWindowResize","_contextLost","_contextRestored","_update","_render","_onData","_onDataLoading"],this),this._setupContainer(),this._setupPainter(),this.on("move",this._update.bind(this,!1)),this.on("zoom",this._update.bind(this,!0)),this.on("move",function(){i._rerender()}),void 0!==a&&(a.addEventListener("online",this._onWindowOnline,!1),a.addEventListener("resize",this._onWindowResize,!1)),y(this,t),this._hash=t.hash&&(new m).addTo(this),this._hash&&this._hash._onHashChange()||this.jumpTo({center:t.center,zoom:t.zoom,bearing:t.bearing,pitch:t.pitch}),this.resize(),t.style&&this.setStyle(t.style,{localIdeographFontFamily:t.localIdeographFontFamily}),t.attributionControl&&this.addControl(new w),this.addControl(new z,t.logoPosition),this.on("style.load",function(){this.transform.unmodified&&this.jumpTo(this.style.stylesheet),this.style.update({transition:!1})}),this.on("data",this._onData),this.on("dataloading",this._onDataLoading)}e&&(t.__proto__=e),t.prototype=F()(e&&e.prototype),t.prototype.constructor=t;var i={showTileBoundaries:{},showCollisionBoxes:{},showOverdrawInspector:{},repaint:{},vertices:{}};return t.prototype.addControl=function(e,t){void 0===t&&e.getDefaultPosition&&(t=e.getDefaultPosition()),void 0===t&&(t="top-right");var i=e.onAdd(this),n=this._controlPositions[t];return-1!==t.indexOf("bottom")?n.insertBefore(i,n.firstChild):n.appendChild(i),this},t.prototype.removeControl=function(e){return e.onRemove(this),this},t.prototype.resize=function(){var e=this._containerDimensions(),t=e[0],i=e[1];return this._resizeCanvas(t,i),this.transform.resize(t,i),this.painter.resize(t,i),this.fire("movestart").fire("move").fire("resize").fire("moveend")},t.prototype.getBounds=function(){var e=new b(this.transform.pointLocation(new x(0,this.transform.height)),this.transform.pointLocation(new x(this.transform.width,0)));return(this.transform.angle||this.transform.pitch)&&(e.extend(this.transform.pointLocation(new x(this.transform.size.x,0))),e.extend(this.transform.pointLocation(new x(0,this.transform.size.y)))),e},t.prototype.getMaxBounds=function(){return this.transform.latRange&&2===this.transform.latRange.length&&this.transform.lngRange&&2===this.transform.lngRange.length?new b([this.transform.lngRange[0],this.transform.latRange[0]],[this.transform.lngRange[1],this.transform.latRange[1]]):null},t.prototype.setMaxBounds=function(e){if(e){var t=b.convert(e);this.transform.lngRange=[t.getWest(),t.getEast()],this.transform.latRange=[t.getSouth(),t.getNorth()],this.transform._constrain(),this._update()}else null!==e&&void 0!==e||(this.transform.lngRange=null,this.transform.latRange=null,this._update());return this},t.prototype.setMinZoom=function(e){if((e=null===e||void 0===e?0:e)>=0&&e<=this.transform.maxZoom)return this.transform.minZoom=e,this._update(),this.getZoom()<e&&this.setZoom(e),this;throw new Error("minZoom must be between 0 and the current maxZoom, inclusive")},t.prototype.getMinZoom=function(){return this.transform.minZoom},t.prototype.setMaxZoom=function(e){if((e=null===e||void 0===e?22:e)>=this.transform.minZoom)return this.transform.maxZoom=e,this._update(),this.getZoom()>e&&this.setZoom(e),this;throw new Error("maxZoom must be greater than the current minZoom")},t.prototype.getMaxZoom=function(){return this.transform.maxZoom},t.prototype.project=function(e){return this.transform.locationPoint(_.convert(e))},t.prototype.unproject=function(e){return this.transform.pointLocation(x.convert(e))},t.prototype.on=function(t,i,n){var r=this;if(void 0===n)return e.prototype.on.call(this,t,i);var a=function(){if("mouseenter"===t||"mouseover"===t){var e=!1;return{layer:i,listener:n,delegates:{mousemove:function(a){var s=r.getLayer(i)?r.queryRenderedFeatures(a.point,{layers:[i]}):[];s.length?e||(e=!0,n.call(r,o.extend({features:s},a,{type:t}))):e=!1},mouseout:function(){e=!1}}}}if("mouseleave"===t||"mouseout"===t){var a=!1;return{layer:i,listener:n,delegates:{mousemove:function(e){(r.getLayer(i)?r.queryRenderedFeatures(e.point,{layers:[i]}):[]).length?a=!0:a&&(a=!1,n.call(r,o.extend({},e,{type:t})))},mouseout:function(e){a&&(a=!1,n.call(r,o.extend({},e,{type:t})))}}}}var s=function(e){var t=r.getLayer(i)?r.queryRenderedFeatures(e.point,{layers:[i]}):[];t.length&&n.call(r,o.extend({features:t},e))};return{layer:i,listener:n,delegates:(l={},l[t]=s,l)};var l}();this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[t]=this._delegatedListeners[t]||[],this._delegatedListeners[t].push(a);for(var s in a.delegates)r.on(s,a.delegates[s]);return this},t.prototype.off=function(t,i,n){var o=this;if(void 0===n)return e.prototype.off.call(this,t,i);if(this._delegatedListeners&&this._delegatedListeners[t])for(var r=this._delegatedListeners[t],a=0;a<r.length;a++){var s=r[a];if(s.layer===i&&s.listener===n){for(var l in s.delegates)o.off(l,s.delegates[l]);return r.splice(a,1),o}}return this},t.prototype.queryRenderedFeatures=function(e,t){return 2===arguments.length?(e=arguments[0],t=arguments[1]):1===arguments.length&&function(e){return e instanceof x||Array.isArray(e)}(arguments[0])?(e=arguments[0],t={}):1===arguments.length?(e=void 0,t=arguments[0]):(e=void 0,t={}),this.style?this.style.queryRenderedFeatures(this._makeQueryGeometry(e),t,this.transform.zoom,this.transform.angle):[]},t.prototype._makeQueryGeometry=function(e){var t=this;void 0===e&&(e=[x.convert([0,0]),x.convert([this.transform.width,this.transform.height])]);var i;if(e instanceof x||"number"==typeof e[0])i=[x.convert(e)];else{var n=[x.convert(e[0]),x.convert(e[1])];i=[n[0],new x(n[1].x,n[0].y),n[1],new x(n[0].x,n[1].y),n[0]]}return i=i.map(function(e){return t.transform.pointCoordinate(e)})},t.prototype.querySourceFeatures=function(e,t){return this.style.querySourceFeatures(e,t)},t.prototype.setStyle=function(e,t){if((!t||!1!==t.diff&&!t.localIdeographFontFamily)&&this.style&&e&&"object"==(void 0===e?"undefined":O()(e)))try{return this.style.setState(e)&&this._update(!0),this}catch(e){o.warnOnce("Unable to perform style diff: "+(e.message||e.error||e)+".  Rebuilding the style from scratch.")}return this.style&&(this.style.setEventedParent(null),this.style._remove()),e?(this.style=new f(this,t||{}),this.style.setEventedParent(this,{style:this.style}),"string"==typeof e?this.style.loadURL(e):this.style.loadJSON(e),this):(delete this.style,this)},t.prototype.getStyle=function(){if(this.style)return this.style.serialize()},t.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():o.warnOnce("There is no style added to the map.")},t.prototype.addSource=function(e,t){return this.style.addSource(e,t),this._update(!0),this},t.prototype.isSourceLoaded=function(e){var t=this.style&&this.style.sourceCaches[e];return void 0===t?void this.fire("error",{error:new Error("There is no source with ID '"+e+"'")}):t.loaded()},t.prototype.areTilesLoaded=function(){var e=this.style&&this.style.sourceCaches;for(var t in e){var i=e[t],n=i._tiles;for(var o in n){var r=n[o];if("loaded"!==r.state&&"errored"!==r.state)return!1}}return!0},t.prototype.addSourceType=function(e,t,i){return this.style.addSourceType(e,t,i)},t.prototype.removeSource=function(e){return this.style.removeSource(e),this._update(!0),this},t.prototype.getSource=function(e){return this.style.getSource(e)},t.prototype.addImage=function(e,t,i){void 0===i&&(i={});var n=i.pixelRatio;void 0===n&&(n=1);var o=i.sdf;if(void 0===o&&(o=!1),t instanceof l)t=r.getImageData(t);else if(void 0===t.width||void 0===t.height)return this.fire("error",{error:new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")});this.style.addImage(e,{data:t,pixelRatio:n,sdf:o})},t.prototype.removeImage=function(e){this.style.removeImage(e)},t.prototype.loadImage=function(e,t){p.getImage(this._transformRequest(e,p.ResourceType.Image),t)},t.prototype.addLayer=function(e,t){return this.style.addLayer(e,t),this._update(!0),this},t.prototype.moveLayer=function(e,t){return this.style.moveLayer(e,t),this._update(!0),this},t.prototype.removeLayer=function(e){return this.style.removeLayer(e),this._update(!0),this},t.prototype.getLayer=function(e){return this.style.getLayer(e)},t.prototype.setFilter=function(e,t){return this.style.setFilter(e,t),this._update(!0),this},t.prototype.setLayerZoomRange=function(e,t,i){return this.style.setLayerZoomRange(e,t,i),this._update(!0),this},t.prototype.getFilter=function(e){return this.style.getFilter(e)},t.prototype.setPaintProperty=function(e,t,i){return this.style.setPaintProperty(e,t,i),this._update(!0),this},t.prototype.getPaintProperty=function(e,t){return this.style.getPaintProperty(e,t)},t.prototype.setLayoutProperty=function(e,t,i){return this.style.setLayoutProperty(e,t,i),this._update(!0),this},t.prototype.getLayoutProperty=function(e,t){return this.style.getLayoutProperty(e,t)},t.prototype.setLight=function(e){return this.style.setLight(e),this._update(!0),this},t.prototype.getLight=function(){return this.style.getLight()},t.prototype.getContainer=function(){return this._container},t.prototype.getCanvasContainer=function(){return this._canvasContainer},t.prototype.getCanvas=function(){return this._canvas},t.prototype._containerDimensions=function(){var e=0,t=0;return this._container&&(e=this._container.offsetWidth||400,t=this._container.offsetHeight||300),[e,t]},t.prototype._setupContainer=function(){var e=this._container;e.classList.add("mapboxgl-map"),(this._missingCSSContainer=c.create("div","mapboxgl-missing-css",e)).innerHTML="Missing Mapbox GL JS CSS";var t=this._canvasContainer=c.create("div","mapboxgl-canvas-container",e);this._interactive&&t.classList.add("mapboxgl-interactive"),this._canvas=c.create("canvas","mapboxgl-canvas",t),this._canvas.style.position="absolute",this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map");var i=this._containerDimensions();this._resizeCanvas(i[0],i[1]);var n=this._controlContainer=c.create("div","mapboxgl-control-container",e),o=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(function(e){o[e]=c.create("div","mapboxgl-ctrl-"+e,n)})},t.prototype._resizeCanvas=function(e,t){var i=a.devicePixelRatio||1;this._canvas.width=i*e,this._canvas.height=i*t,this._canvas.style.width=e+"px",this._canvas.style.height=t+"px"},t.prototype._setupPainter=function(){var e=o.extend({failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer},A.webGLContextAttributes),t=this._canvas.getContext("webgl",e)||this._canvas.getContext("experimental-webgl",e);if(!t)return void this.fire("error",{error:new Error("Failed to initialize WebGL")});this.painter=new d(t,this.transform)},t.prototype._contextLost=function(e){e.preventDefault(),this._frameId&&(r.cancelFrame(this._frameId),this._frameId=null),this.fire("webglcontextlost",{originalEvent:e})},t.prototype._contextRestored=function(e){this._setupPainter(),this.resize(),this._update(),this.fire("webglcontextrestored",{originalEvent:e})},t.prototype.loaded=function(){return!(this._styleDirty||this._sourcesDirty||this._placementDirty||!this.style||!this.style.loaded())},t.prototype._update=function(e){return this.style?(this._styleDirty=this._styleDirty||e,this._sourcesDirty=!0,this._rerender(),this):this},t.prototype._render=function(){return this.style&&this._styleDirty&&(this._styleDirty=!1,this.style.update(),this.style._recalculate(this.transform.zoom)),this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._collisionFadeDuration),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.rotating,zooming:this.zooming,collisionFadeDuration:this._collisionFadeDuration}),this.fire("render"),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire("load")),this._frameId=null,this.style&&this.style.hasTransitions()&&(this._styleDirty=!0),(this._sourcesDirty||this._repaint||this._styleDirty||this._placementDirty)&&this._rerender(),this},t.prototype.remove=function(){this._hash&&this._hash.remove(),r.cancelFrame(this._frameId),this._frameId=null,this.setStyle(null),void 0!==a&&(a.removeEventListener("resize",this._onWindowResize,!1),a.removeEventListener("online",this._onWindowOnline,!1));var e=this.painter.gl.getExtension("WEBGL_lose_context");e&&e.loseContext(),n(this._canvasContainer),n(this._controlContainer),n(this._missingCSSContainer),this._container.classList.remove("mapboxgl-map"),this.fire("remove")},t.prototype._rerender=function(){this.style&&!this._frameId&&(this._frameId=r.frame(this._render))},t.prototype._onWindowOnline=function(){this._update()},t.prototype._onWindowResize=function(){this._trackResize&&this.stop().resize()._update()},i.showTileBoundaries.get=function(){return!!this._showTileBoundaries},i.showTileBoundaries.set=function(e){this._showTileBoundaries!==e&&(this._showTileBoundaries=e,this._update())},i.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},i.showCollisionBoxes.set=function(e){this._showCollisionBoxes!==e&&(this._showCollisionBoxes=e,e?this.style._generateCollisionBoxes():this._update())},i.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},i.showOverdrawInspector.set=function(e){this._showOverdrawInspector!==e&&(this._showOverdrawInspector=e,this._update())},i.repaint.get=function(){return!!this._repaint},i.repaint.set=function(e){this._repaint=e,this._update()},i.vertices.get=function(){return!!this._vertices},i.vertices.set=function(e){this._vertices=e,this._update()},t.prototype._onData=function(e){this._update("style"===e.dataType),this.fire(e.dataType+"data",e)},t.prototype._onDataLoading=function(e){this.fire(e.dataType+"dataloading",e)},v()(t.prototype,i),t}(g);t.exports=k},{"../geo/lng_lat":68,"../geo/lng_lat_bounds":69,"../geo/transform":70,"../render/painter":89,"../style/style":185,"../util/ajax":244,"../util/browser":245,"../util/dom":252,"../util/util":266,"../util/window":247,"./bind_handlers":223,"./camera":224,"./control/attribution_control":225,"./control/logo_control":228,"./events":231,"./hash":239,"@mapbox/point-geometry":2,"mapbox-gl-supported":37}],241:[function(e,t,i){var n=e("../util/dom"),o=e("../geo/lng_lat"),r=e("@mapbox/point-geometry"),a=e("../util/smart_wrap"),s=e("../util/util"),l=s.bindAll,u=function(e,t){if(this._offset=r.convert(t&&t.offset||[0,0]),l(["_update","_onMapClick"],this),!e){e=n.create("div");var i=n.createNS("http://www.w3.org/2000/svg","svg");i.setAttributeNS(null,"height","41px"),i.setAttributeNS(null,"width","27px"),i.setAttributeNS(null,"viewBox","0 0 27 41");var o=n.createNS("http://www.w3.org/2000/svg","g");o.setAttributeNS(null,"stroke","none"),o.setAttributeNS(null,"stroke-width","1"),o.setAttributeNS(null,"fill","none"),o.setAttributeNS(null,"fill-rule","evenodd");var a=n.createNS("http://www.w3.org/2000/svg","g");a.setAttributeNS(null,"fill-rule","nonzero");var s=n.createNS("http://www.w3.org/2000/svg","g");s.setAttributeNS(null,"transform","translate(3.0, 29.0)"),s.setAttributeNS(null,"fill","#000000");for(var u=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}],c=0,p=u;c<p.length;c+=1){var f=p[c],d=n.createNS("http://www.w3.org/2000/svg","ellipse");d.setAttributeNS(null,"opacity","0.04"),d.setAttributeNS(null,"cx","10.5"),d.setAttributeNS(null,"cy","5.80029008"),d.setAttributeNS(null,"rx",f.rx),d.setAttributeNS(null,"ry",f.ry),s.appendChild(d)}var h=n.createNS("http://www.w3.org/2000/svg","g");h.setAttributeNS(null,"fill","#3FB1CE");var m=n.createNS("http://www.w3.org/2000/svg","path");m.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),h.appendChild(m);var y=n.createNS("http://www.w3.org/2000/svg","g");y.setAttributeNS(null,"opacity","0.25"),y.setAttributeNS(null,"fill","#000000");var v=n.createNS("http://www.w3.org/2000/svg","path");v.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),y.appendChild(v);var g=n.createNS("http://www.w3.org/2000/svg","g");g.setAttributeNS(null,"transform","translate(6.0, 7.0)"),g.setAttributeNS(null,"fill","#FFFFFF");var _=n.createNS("http://www.w3.org/2000/svg","g");_.setAttributeNS(null,"transform","translate(8.0, 8.0)");var b=n.createNS("http://www.w3.org/2000/svg","circle");b.setAttributeNS(null,"fill","#000000"),b.setAttributeNS(null,"opacity","0.25"),b.setAttributeNS(null,"cx","5.5"),b.setAttributeNS(null,"cy","5.5"),b.setAttributeNS(null,"r","5.4999962");var x=n.createNS("http://www.w3.org/2000/svg","circle");x.setAttributeNS(null,"fill","#FFFFFF"),x.setAttributeNS(null,"cx","5.5"),x.setAttributeNS(null,"cy","5.5"),x.setAttributeNS(null,"r","5.4999962"),_.appendChild(b),_.appendChild(x),a.appendChild(s),a.appendChild(h),a.appendChild(y),a.appendChild(g),a.appendChild(_),i.appendChild(a),e.appendChild(i)}e.classList.add("mapboxgl-marker"),this._element=e,this._popup=null};u.prototype.addTo=function(e){return this.remove(),this._map=e,e.getCanvasContainer().appendChild(this._element),e.on("move",this._update),e.on("moveend",this._update),this._update(),this._map.on("click",this._onMapClick),this},u.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),delete this._map),n.remove(this._element),this._popup&&this._popup.remove(),this},u.prototype.getLngLat=function(){return this._lngLat},u.prototype.setLngLat=function(e){return this._lngLat=o.convert(e),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},u.prototype.getElement=function(){return this._element},u.prototype.setPopup=function(e){return this._popup&&(this._popup.remove(),this._popup=null),e&&("offset"in e.options||(e.options.offset=this._offset),this._popup=e,this._popup.setLngLat(this._lngLat)),this},u.prototype._onMapClick=function(e){var t=e.originalEvent.target,i=this._element;this._popup&&(t===i||i.contains(t))&&this.togglePopup()},u.prototype.getPopup=function(){return this._popup},u.prototype.togglePopup=function(){var e=this._popup;return e?(e.isOpen()?e.remove():e.addTo(this._map),this):this},u.prototype._update=function(e){this._map&&(this._map.transform.renderWorldCopies&&(this._lngLat=a(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset),e&&"moveend"!==e.type||(this._pos=this._pos.round()),n.setTransform(this._element,"translate(-50%, -50%) translate("+this._pos.x+"px, "+this._pos.y+"px)"))},t.exports=u},{"../geo/lng_lat":68,"../util/dom":252,"../util/smart_wrap":262,"../util/util":266,"@mapbox/point-geometry":2}],242:[function(e,t,i){function n(e){if(e){if("number"==typeof e){var t=Math.round(Math.sqrt(.5*Math.pow(e,2)));return{top:new l(0,e),"top-left":new l(t,t),"top-right":new l(-t,t),bottom:new l(0,-e),"bottom-left":new l(t,-t),"bottom-right":new l(-t,-t),left:new l(e,0),right:new l(-e,0)}}if(e instanceof l||Array.isArray(e)){var i=l.convert(e);return{top:i,"top-left":i,"top-right":i,bottom:i,"bottom-left":i,"bottom-right":i,left:i,right:i}}return{top:l.convert(e.top||[0,0]),"top-left":l.convert(e["top-left"]||[0,0]),"top-right":l.convert(e["top-right"]||[0,0]),bottom:l.convert(e.bottom||[0,0]),"bottom-left":l.convert(e["bottom-left"]||[0,0]),"bottom-right":l.convert(e["bottom-right"]||[0,0]),left:l.convert(e.left||[0,0]),right:l.convert(e.right||[0,0])}}return n(new l(0,0))}var o=e("../util/util"),r=e("../util/evented"),a=e("../util/dom"),s=e("../geo/lng_lat"),l=e("@mapbox/point-geometry"),u=e("../util/window"),c=e("../util/smart_wrap"),p={closeButton:!0,closeOnClick:!0},f=function(e){function t(t){e.call(this),this.options=o.extend(F()(p),t),o.bindAll(["_update","_onClickClose"],this)}return e&&(t.__proto__=e),t.prototype=F()(e&&e.prototype),t.prototype.constructor=t,t.prototype.addTo=function(e){return this._map=e,this._map.on("move",this._update),this.options.closeOnClick&&this._map.on("click",this._onClickClose),this._update(),this},t.prototype.isOpen=function(){return!!this._map},t.prototype.remove=function(){return this._content&&a.remove(this._content),this._container&&(a.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("click",this._onClickClose),delete this._map),this.fire("close"),this},t.prototype.getLngLat=function(){return this._lngLat},t.prototype.setLngLat=function(e){return this._lngLat=s.convert(e),this._pos=null,this._update(),this},t.prototype.setText=function(e){return this.setDOMContent(u.document.createTextNode(e))},t.prototype.setHTML=function(e){var t,i=u.document.createDocumentFragment(),n=u.document.createElement("body");for(n.innerHTML=e;t=n.firstChild;)i.appendChild(t);return this.setDOMContent(i)},t.prototype.setDOMContent=function(e){return this._createContent(),this._content.appendChild(e),this._update(),this},t.prototype._createContent=function(){this._content&&a.remove(this._content),this._content=a.create("div","mapboxgl-popup-content",this._container),this.options.closeButton&&(this._closeButton=a.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClickClose))},t.prototype._update=function(){if(this._map&&this._lngLat&&this._content){this._container||(this._container=a.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=a.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content)),this._map.transform.renderWorldCopies&&(this._lngLat=c(this._lngLat,this._pos,this._map.transform));var e=this._pos=this._map.project(this._lngLat),t=this.options.anchor,i=n(this.options.offset);if(!t){var o=this._container.offsetWidth,r=this._container.offsetHeight;t=e.y+i.bottom.y<r?["top"]:e.y>this._map.transform.height-r?["bottom"]:[],e.x<o/2?t.push("left"):e.x>this._map.transform.width-o/2&&t.push("right"),t=0===t.length?"bottom":t.join("-")}var s=e.add(i[t]).round(),l={top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"},u=this._container.classList;for(var p in l)u.remove("mapboxgl-popup-anchor-"+p);u.add("mapboxgl-popup-anchor-"+t),a.setTransform(this._container,l[t]+" translate("+s.x+"px,"+s.y+"px)")}},t.prototype._onClickClose=function(){this.remove()},t}(r);t.exports=f},{"../geo/lng_lat":68,"../util/dom":252,"../util/evented":253,"../util/smart_wrap":262,"../util/util":266,"../util/window":247,"@mapbox/point-geometry":2}],243:[function(e,t,i){var n=e("./util"),o=function(e,t,i){this.target=e,this.parent=t,this.mapId=i,this.callbacks={},this.callbackID=0,n.bindAll(["receive"],this),this.target.addEventListener("message",this.receive,!1)};o.prototype.send=function(e,t,i,n,o){var r=i?this.mapId+":"+this.callbackID++:null;i&&(this.callbacks[r]=i),this.target.postMessage({targetMapId:o,sourceMapId:this.mapId,type:e,id:String(r),data:t},n)},o.prototype.receive=function(e){var t,i=this,n=e.data,o=n.id;if(!n.targetMapId||this.mapId===n.targetMapId){var r=function(e,t,n){i.target.postMessage({sourceMapId:i.mapId,type:"<response>",id:String(o),error:e?String(e):null,data:t},n)};if("<response>"===n.type)t=this.callbacks[n.id],delete this.callbacks[n.id],t&&n.error?t(new Error(n.error)):t&&t(null,n.data);else if(void 0!==n.id&&this.parent[n.type])this.parent[n.type](n.sourceMapId,n.data,r);else if(void 0!==n.id&&this.parent.getWorkerSource){var a=n.type.split("."),s=this.parent.getWorkerSource(n.sourceMapId,a[0]);s[a[1]](n.data,r)}else this.parent[n.type](n.data)}},o.prototype.remove=function(){this.target.removeEventListener("message",this.receive,!1)},t.exports=o},{"./util":266}],244:[function(e,t,i){function n(e){var t=new r.XMLHttpRequest;t.open("GET",e.url,!0);for(var i in e.headers)t.setRequestHeader(i,e.headers[i]);return t.withCredentials="include"===e.credentials,t}function o(e){var t=r.document.createElement("a");return t.href=e,t.protocol===r.document.location.protocol&&t.host===r.document.location.host}var r=e("./window"),a={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};i.ResourceType=a,"function"==typeof d.a&&d()(a);var s=function(e){function t(t,i){e.call(this,t),this.status=i}return e&&(t.__proto__=e),t.prototype=F()(e&&e.prototype),t.prototype.constructor=t,t}(Error);i.getJSON=function(e,t){var i=n(e);return i.setRequestHeader("Accept","application/json"),i.onerror=function(){t(new Error(i.statusText))},i.onload=function(){if(i.status>=200&&i.status<300&&i.response){var e;try{e=JSON.parse(i.response)}catch(e){return t(e)}t(null,e)}else t(new s(i.statusText,i.status))},i.send(),i},i.getArrayBuffer=function(e,t){var i=n(e);return i.responseType="arraybuffer",i.onerror=function(){t(new Error(i.statusText))},i.onload=function(){var e=i.response;if(0===e.byteLength&&200===i.status)return t(new Error("http status 200 returned without content."));i.status>=200&&i.status<300&&i.response?t(null,{data:e,cacheControl:i.getResponseHeader("Cache-Control"),expires:i.getResponseHeader("Expires")}):t(new s(i.statusText,i.status))},i.send(),i};i.getImage=function(e,t){return i.getArrayBuffer(e,function(e,i){if(e)t(e);else if(i){var n=new r.Image,o=r.URL||r.webkitURL;n.onload=function(){t(null,n),o.revokeObjectURL(n.src)};var a=new r.Blob([new Uint8Array(i.data)],{type:"image/png"});n.cacheControl=i.cacheControl,n.expires=i.expires,n.src=i.data.byteLength?o.createObjectURL(a):"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII="}})},i.getVideo=function(e,t){var i=r.document.createElement("video");i.onloadstart=function(){t(null,i)};for(var n=0;n<e.length;n++){var a=r.document.createElement("source");o(e[n])||(i.crossOrigin="Anonymous"),a.src=e[n],i.appendChild(a)}return i}},{"./window":247}],245:[function(e,t,i){var n=e("./window"),o=n.performance&&n.performance.now?n.performance.now.bind(n.performance):Date.now.bind(Date),r=n.requestAnimationFrame||n.mozRequestAnimationFrame||n.webkitRequestAnimationFrame||n.msRequestAnimationFrame,a=n.cancelAnimationFrame||n.mozCancelAnimationFrame||n.webkitCancelAnimationFrame||n.msCancelAnimationFrame;t.exports={now:o,frame:function(e){return r(e)},cancelFrame:function(e){return a(e)},timed:function(e,t,i){function n(){if(!a){var l=o();l>=s+t?e.call(i,1):(e.call(i,(l-s)/t),r(n))}}if(!t)return e.call(i,1),null;var a=!1,s=o();return r(n),function(){a=!0}},getImageData:function(e){var t=n.document.createElement("canvas"),i=t.getContext("2d");if(!i)throw new Error("failed to create canvas 2d context");return t.width=e.width,t.height=e.height,i.drawImage(e,0,0,e.width,e.height),i.getImageData(0,0,e.width,e.height)},hardwareConcurrency:n.navigator.hardwareConcurrency||4,get devicePixelRatio(){return n.devicePixelRatio},supportsWebp:!1};var s=n.document.createElement("img");s.onload=function(){t.exports.supportsWebp=!0},s.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="},{"./window":247}],246:[function(e,t,i){var n=e("webworkify"),o=e("../window"),r=o.URL.createObjectURL(new n(e("../../source/worker"),{bare:!0}));t.exports=function(){return new o.Worker(r)}},{"../../source/worker":116,"../window":247,webworkify:48}],247:[function(e,t,i){t.exports=self},{}],248:[function(e,t,i){function n(e,t){return t.area-e.area}var o=e("quickselect"),r=e("./util").calculateSignedArea;t.exports=function(e,t){var i=e.length;if(i<=1)return[e];for(var a,s,l=[],u=0;u<i;u++){var c=r(e[u]);0!==c&&(e[u].area=Math.abs(c),void 0===s&&(s=c<0),s===c<0?(a&&l.push(a),a=[e[u]]):a.push(e[u]))}if(a&&l.push(a),t>1)for(var p=0;p<l.length;p++)l[p].length<=t||(o(l[p],t,1,l[p].length-1,n),l[p]=l[p].slice(0,t));return l}},{"./util":266,quickselect:40}],249:[function(e,t,i){var n={API_URL:"https://api.mapbox.com",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null};t.exports=n},{}],250:[function(e,t,i){var n=function(e){var t=this;this._stringToNumber={},this._numberToString=[];for(var i=0;i<e.length;i++){var n=e[i];t._stringToNumber[n]=i,t._numberToString[i]=n}};n.prototype.encode=function(e){return this._stringToNumber[e]},n.prototype.decode=function(e){return this._numberToString[e]},t.exports=n},{}],251:[function(e,t,i){var n=e("./util"),o=e("./actor"),r=function(e,t){var i=this;this.workerPool=e,this.actors=[],this.currentActor=0,this.id=n.uniqueId();for(var r=this.workerPool.acquire(this.id),a=0;a<r.length;a++){var s=r[a],l=new o(s,t,i.id);l.name="Worker "+a,i.actors.push(l)}};r.prototype.broadcast=function(e,t,i){i=i||function(){},n.asyncAll(this.actors,function(i,n){i.send(e,t,n)},i)},r.prototype.send=function(e,t,i,n,o){return("number"!=typeof n||isNaN(n))&&(n=this.currentActor=(this.currentActor+1)%this.actors.length),this.actors[n].send(e,t,i,o),n},r.prototype.remove=function(){this.actors.forEach(function(e){e.remove()}),this.actors=[],this.workerPool.release(this.id)},t.exports=r},{"./actor":243,"./util":266}],252:[function(e,t,i){function n(e){for(var t=0;t<e.length;t++)if(e[t]in s)return e[t];return e[0]}var o=e("@mapbox/point-geometry"),r=e("./window");i.create=function(e,t,i){var n=r.document.createElement(e);return t&&(n.className=t),i&&i.appendChild(n),n},i.createNS=function(e,t){return r.document.createElementNS(e,t)};var a,s=r.document.documentElement.style,l=n(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);i.disableDrag=function(){l&&(a=s[l],s[l]="none")},i.enableDrag=function(){l&&(s[l]=a)};var u=n(["transform","WebkitTransform"]);i.setTransform=function(e,t){e.style[u]=t};var c=function e(t){t.preventDefault(),t.stopPropagation(),r.removeEventListener("click",e,!0)};i.suppressClick=function(){r.addEventListener("click",c,!0),r.setTimeout(function(){r.removeEventListener("click",c,!0)},0)},i.mousePos=function(e,t){var i=e.getBoundingClientRect();return t=t.touches?t.touches[0]:t,new o(t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop)},i.touchPos=function(e,t){for(var i=e.getBoundingClientRect(),n=[],r="touchend"===t.type?t.changedTouches:t.touches,a=0;a<r.length;a++)n.push(new o(r[a].clientX-i.left-e.clientLeft,r[a].clientY-i.top-e.clientTop));return n},i.remove=function(e){e.parentNode&&e.parentNode.removeChild(e)}},{"./window":247,"@mapbox/point-geometry":2}],253:[function(e,t,i){function n(e,t,i){i[e]=i[e]||[],i[e].push(t)}function o(e,t,i){if(i&&i[e]){var n=i[e].indexOf(t);-1!==n&&i[e].splice(n,1)}}var r=e("./util"),a=function(){};a.prototype.on=function(e,t){return this._listeners=this._listeners||{},n(e,t,this._listeners),this},a.prototype.off=function(e,t){return o(e,t,this._listeners),o(e,t,this._oneTimeListeners),this},a.prototype.once=function(e,t){return this._oneTimeListeners=this._oneTimeListeners||{},n(e,t,this._oneTimeListeners),this},a.prototype.fire=function(e,t){var i=this;if(this.listens(e)){t=r.extend({},t,{type:e,target:this});for(var n=this._listeners&&this._listeners[e]?this._listeners[e].slice():[],a=0;a<n.length;a++)n[a].call(i,t);for(var s=this._oneTimeListeners&&this._oneTimeListeners[e]?this._oneTimeListeners[e].slice():[],l=0;l<s.length;l++)s[l].call(i,t),o(e,s[l],i._oneTimeListeners);this._eventedParent&&this._eventedParent.fire(e,r.extend({},t,"function"==typeof this._eventedParentData?this._eventedParentData():this._eventedParentData))}else r.endsWith(e,"error")&&console.error(t&&t.error||t||"Empty error event");return this},a.prototype.listens=function(e){return this._listeners&&this._listeners[e]&&this._listeners[e].length>0||this._oneTimeListeners&&this._oneTimeListeners[e]&&this._oneTimeListeners[e].length>0||this._eventedParent&&this._eventedParent.listens(e)},a.prototype.setEventedParent=function(e,t){return this._eventedParent=e,this._eventedParentData=t,this},t.exports=a},{"./util":266}],254:[function(e,t,i){function n(e,t){return t.max-e.max}function o(e,t,i,n){this.p=new l(e,t),this.h=i,this.d=r(this.p,n),this.max=this.d+this.h*Math.SQRT2}function r(e,t){for(var i=!1,n=1/0,o=0;o<t.length;o++)for(var r=t[o],a=0,s=r.length,l=s-1;a<s;l=a++){var c=r[a],p=r[l];c.y>e.y!=p.y>e.y&&e.x<(p.x-c.x)*(e.y-c.y)/(p.y-c.y)+c.x&&(i=!i),n=Math.min(n,u(e,c,p))}return(i?1:-1)*Math.sqrt(n)}function a(e){for(var t=0,i=0,n=0,r=e[0],a=0,s=r.length,l=s-1;a<s;l=a++){var u=r[a],c=r[l],p=u.x*c.y-c.x*u.y;i+=(u.x+c.x)*p,n+=(u.y+c.y)*p,t+=3*p}return new o(i/t,n/t,0,e)}var s=e("tinyqueue"),l=e("@mapbox/point-geometry"),u=e("./intersection_tests").distToSegmentSquared;t.exports=function(e,t,i){void 0===t&&(t=1),void 0===i&&(i=!1);for(var r=1/0,u=1/0,c=-1/0,p=-1/0,f=e[0],d=0;d<f.length;d++){var h=f[d];(!d||h.x<r)&&(r=h.x),(!d||h.y<u)&&(u=h.y),(!d||h.x>c)&&(c=h.x),(!d||h.y>p)&&(p=h.y)}var m=c-r,y=p-u,v=Math.min(m,y),g=v/2,_=new s(null,n);if(0===v)return new l(r,u);for(var b=r;b<c;b+=v)for(var x=u;x<p;x+=v)_.push(new o(b+g,x+g,g,e));for(var w=a(e),z=_.length;_.length;){var A=_.pop();(A.d>w.d||!w.d)&&(w=A,i&&console.log("found best %d after %d probes",Math.round(1e4*A.d)/1e4,z)),A.max-w.d<=t||(g=A.h/2,_.push(new o(A.p.x-g,A.p.y-g,g,e)),_.push(new o(A.p.x+g,A.p.y-g,g,e)),_.push(new o(A.p.x-g,A.p.y+g,g,e)),_.push(new o(A.p.x+g,A.p.y+g,g,e)),z+=4)}return i&&(console.log("num probes: "+z),console.log("best distance: "+w.d)),w.p}},{"./intersection_tests":257,"@mapbox/point-geometry":2,tinyqueue:42}],255:[function(e,t,i){var n,o=e("./worker_pool");t.exports=function(){return n||(n=new o),n}},{"./worker_pool":269}],256:[function(e,t,i){function n(e,t,i){var n=e.width,o=e.height;if(i){if(i.length!==n*o*t)throw new RangeError("mismatched image size")}else i=new Uint8Array(n*o*t);return{width:n,height:o,data:i}}function o(e,t,i){var o=t.width,a=t.height;if(o===e.width&&a===e.height)return e;var s=n({width:o,height:a},i);r(e,s,{x:0,y:0},{x:0,y:0},{width:Math.min(e.width,o),height:Math.min(e.height,a)},i),e.width=o,e.height=a,e.data=s.data}function r(e,t,i,n,o,r){if(0===o.width||0===o.height)return t;if(o.width>e.width||o.height>e.height||i.x>e.width-o.width||i.y>e.height-o.height)throw new RangeError("out of range source coordinates for image copy");if(o.width>t.width||o.height>t.height||n.x>t.width-o.width||n.y>t.height-o.height)throw new RangeError("out of range destination coordinates for image copy");for(var a=e.data,s=t.data,l=0;l<o.height;l++)for(var u=((i.y+l)*e.width+i.x)*r,c=((n.y+l)*t.width+n.x)*r,p=0;p<o.width*r;p++)s[c+p]=a[u+p];return t}var a=function(){};a.create=function(e,t){return n(e,1,t)},a.resize=function(e,t){o(e,t,1)},a.copy=function(e,t,i,n,o){r(e,t,i,n,o,1)};var s=function(){};s.create=function(e,t){return n(e,4,t)},s.resize=function(e,t){o(e,t,4)},s.copy=function(e,t,i,n,o){r(e,t,i,n,o,4)},t.exports={AlphaImage:a,RGBAImage:s}},{}],257:[function(e,t,i){function n(e,t){for(var i=0;i<e.length;i++)if(d(t,e[i]))return!0;for(var n=0;n<t.length;n++)if(d(e,t[n]))return!0;return!!l(e,t)}function o(e,t,i){for(var n=0;n<e.length;n++)for(var o=e[n],r=0;r<t.length;r++)for(var a=t[r],s=0;s<a.length;s++){var l=a[s];if(d(o,l))return!0;if(c(l,o,i))return!0}return!1}function r(e,t){if(1===e.length&&1===e[0].length)return f(t,e[0][0]);for(var i=0;i<t.length;i++)for(var n=t[i],o=0;o<n.length;o++)if(f(e,n[o]))return!0;for(var r=0;r<e.length;r++){for(var a=e[r],s=0;s<a.length;s++)if(f(t,a[s]))return!0;for(var u=0;u<t.length;u++)if(l(a,t[u]))return!0}return!1}function a(e,t,i){for(var n=0;n<t.length;n++)for(var o=t[n],r=0;r<e.length;r++){var a=e[r];if(a.length>=3)for(var l=0;l<o.length;l++)if(d(a,o[l]))return!0;if(s(a,o,i))return!0}return!1}function s(e,t,i){if(e.length>1){if(l(e,t))return!0;for(var n=0;n<t.length;n++)if(c(t[n],e,i))return!0}for(var o=0;o<e.length;o++)if(c(e[o],t,i))return!0;return!1}function l(e,t){if(0===e.length||0===t.length)return!1;for(var i=0;i<e.length-1;i++)for(var n=e[i],o=e[i+1],r=0;r<t.length-1;r++){var a=t[r],s=t[r+1];if(u(n,o,a,s))return!0}return!1}function u(e,t,i,n){return m(e,i,n)!==m(t,i,n)&&m(e,t,i)!==m(e,t,n)}function c(e,t,i){var n=i*i;if(1===t.length)return e.distSqr(t[0])<n;for(var o=1;o<t.length;o++)if(p(e,t[o-1],t[o])<n)return!0;return!1}function p(e,t,i){var n=t.distSqr(i);if(0===n)return e.distSqr(t);var o=((e.x-t.x)*(i.x-t.x)+(e.y-t.y)*(i.y-t.y))/n;return o<0?e.distSqr(t):o>1?e.distSqr(i):e.distSqr(i.sub(t)._mult(o)._add(t))}function f(e,t){for(var i,n,o,r=!1,a=0;a<e.length;a++){i=e[a];for(var s=0,l=i.length-1;s<i.length;l=s++)n=i[s],o=i[l],n.y>t.y!=o.y>t.y&&t.x<(o.x-n.x)*(t.y-n.y)/(o.y-n.y)+n.x&&(r=!r)}return r}function d(e,t){for(var i=!1,n=0,o=e.length-1;n<e.length;o=n++){var r=e[n],a=e[o];r.y>t.y!=a.y>t.y&&t.x<(a.x-r.x)*(t.y-r.y)/(a.y-r.y)+r.x&&(i=!i)}return i}var h=e("./util"),m=h.isCounterClockwise;t.exports={multiPolygonIntersectsBufferedMultiPoint:o,multiPolygonIntersectsMultiPolygon:r,multiPolygonIntersectsBufferedMultiLine:a,polygonIntersectsPolygon:n,distToSegmentSquared:p}},{"./util":266}],258:[function(e,t,i){var n={"Latin-1 Supplement":function(e){return e>=128&&e<=255},Arabic:function(e){return e>=1536&&e<=1791},"Arabic Supplement":function(e){return e>=1872&&e<=1919},"Arabic Extended-A":function(e){return e>=2208&&e<=2303},"Hangul Jamo":function(e){return e>=4352&&e<=4607},"Unified Canadian Aboriginal Syllabics":function(e){return e>=5120&&e<=5759},"Unified Canadian Aboriginal Syllabics Extended":function(e){return e>=6320&&e<=6399},"General Punctuation":function(e){return e>=8192&&e<=8303},"Letterlike Symbols":function(e){return e>=8448&&e<=8527},"Number Forms":function(e){return e>=8528&&e<=8591},"Miscellaneous Technical":function(e){return e>=8960&&e<=9215},"Control Pictures":function(e){return e>=9216&&e<=9279},"Optical Character Recognition":function(e){return e>=9280&&e<=9311},"Enclosed Alphanumerics":function(e){return e>=9312&&e<=9471},"Geometric Shapes":function(e){return e>=9632&&e<=9727},"Miscellaneous Symbols":function(e){return e>=9728&&e<=9983},"Miscellaneous Symbols and Arrows":function(e){return e>=11008&&e<=11263},"CJK Radicals Supplement":function(e){return e>=11904&&e<=12031},"Kangxi Radicals":function(e){return e>=12032&&e<=12255},"Ideographic Description Characters":function(e){return e>=12272&&e<=12287},"CJK Symbols and Punctuation":function(e){return e>=12288&&e<=12351},Hiragana:function(e){return e>=12352&&e<=12447},Katakana:function(e){return e>=12448&&e<=12543},Bopomofo:function(e){return e>=12544&&e<=12591},"Hangul Compatibility Jamo":function(e){return e>=12592&&e<=12687},Kanbun:function(e){return e>=12688&&e<=12703},"Bopomofo Extended":function(e){return e>=12704&&e<=12735},"CJK Strokes":function(e){return e>=12736&&e<=12783},"Katakana Phonetic Extensions":function(e){return e>=12784&&e<=12799},"Enclosed CJK Letters and Months":function(e){return e>=12800&&e<=13055},"CJK Compatibility":function(e){return e>=13056&&e<=13311},"CJK Unified Ideographs Extension A":function(e){return e>=13312&&e<=19903},"Yijing Hexagram Symbols":function(e){return e>=19904&&e<=19967},"CJK Unified Ideographs":function(e){return e>=19968&&e<=40959},"Yi Syllables":function(e){return e>=40960&&e<=42127},"Yi Radicals":function(e){return e>=42128&&e<=42191},"Hangul Jamo Extended-A":function(e){return e>=43360&&e<=43391},"Hangul Syllables":function(e){return e>=44032&&e<=55215},"Hangul Jamo Extended-B":function(e){return e>=55216&&e<=55295},"Private Use Area":function(e){return e>=57344&&e<=63743},"CJK Compatibility Ideographs":function(e){return e>=63744&&e<=64255},"Arabic Presentation Forms-A":function(e){return e>=64336&&e<=65023},"Vertical Forms":function(e){return e>=65040&&e<=65055},"CJK Compatibility Forms":function(e){return e>=65072&&e<=65103},"Small Form Variants":function(e){return e>=65104&&e<=65135},"Arabic Presentation Forms-B":function(e){return e>=65136&&e<=65279},"Halfwidth and Fullwidth Forms":function(e){return e>=65280&&e<=65519}};t.exports=n},{}],259:[function(e,t,i){var n=function(e,t){this.max=e,this.onRemove=t,this.reset()};n.prototype.reset=function(){var e=this;for(var t in e.data)e.onRemove(e.data[t]);return this.data={},this.order=[],this},n.prototype.add=function(e,t){if(this.has(e))this.order.splice(this.order.indexOf(e),1),this.data[e]=t,this.order.push(e);else if(this.data[e]=t,this.order.push(e),this.order.length>this.max){var i=this.getAndRemove(this.order[0]);i&&this.onRemove(i)}return this},n.prototype.has=function(e){return e in this.data},n.prototype.keys=function(){return this.order},n.prototype.getAndRemove=function(e){if(!this.has(e))return null;var t=this.data[e];return delete this.data[e],this.order.splice(this.order.indexOf(e),1),t},n.prototype.get=function(e){return this.has(e)?this.data[e]:null},n.prototype.remove=function(e){if(!this.has(e))return this;var t=this.data[e];return delete this.data[e],this.onRemove(t),this.order.splice(this.order.indexOf(e),1),this},n.prototype.setMaxSize=function(e){var t=this;for(this.max=e;this.order.length>this.max;){var i=t.getAndRemove(t.order[0]);i&&t.onRemove(i)}return this},t.exports=n},{}],260:[function(e,t,i){function n(e,t){var i=a(l.API_URL);if(e.protocol=i.protocol,e.authority=i.authority,"/"!==i.path&&(e.path=""+i.path+e.path),!l.REQUIRE_ACCESS_TOKEN)return s(e);if(!(t=t||l.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+c);if("s"===t[0])throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+c);return e.params.push("access_token="+t),s(e)}function o(e){return 0===e.indexOf("mapbox:")}function r(e){for(var t=0;t<e.length;t++)0===e[t].indexOf("access_token=tk.")&&(e[t]="access_token="+(l.ACCESS_TOKEN||""))}function a(e){var t=e.match(f);if(!t)throw new Error("Unable to parse URL object");return{protocol:t[1],authority:t[2],path:t[3]||"/",params:t[4]?t[4].split("&"):[]}}function s(e){var t=e.params.length?"?"+e.params.join("&"):"";return e.protocol+"://"+e.authority+e.path+t}var l=e("./config"),u=e("./browser"),c="See https://www.mapbox.com/api-documentation/#access-tokens";i.isMapboxURL=o,i.normalizeStyleURL=function(e,t){if(!o(e))return e;var i=a(e);return i.path="/styles/v1"+i.path,n(i,t)},i.normalizeGlyphsURL=function(e,t){if(!o(e))return e;var i=a(e);return i.path="/fonts/v1"+i.path,n(i,t)},i.normalizeSourceURL=function(e,t){if(!o(e))return e;var i=a(e);return i.path="/v4/"+i.authority+".json",i.params.push("secure"),n(i,t)},i.normalizeSpriteURL=function(e,t,i,r){var l=a(e);return o(e)?(l.path="/styles/v1"+l.path+"/sprite"+t+i,n(l,r)):(l.path+=""+t+i,s(l))};var p=/(\.(png|jpg)\d*)(?=$)/;i.normalizeTileURL=function(e,t,i){if(!t||!o(t))return e;var n=a(e),l=u.devicePixelRatio>=2||512===i?"@2x":"",c=u.supportsWebp?".webp":"$1";return n.path=n.path.replace(p,""+l+c),r(n.params),s(n)};var f=/^(\w+):\/\/([^\/?]*)(\/[^?]+)?\??(.+)?/},{"./browser":245,"./config":249}],261:[function(e,t,i){var n=e("./is_char_in_unicode_block");t.exports.allowsIdeographicBreaking=function(e){for(var t=0,n=e;t<n.length;t+=1){var o=n[t];if(!i.charAllowsIdeographicBreaking(o.charCodeAt(0)))return!1}return!0},t.exports.allowsVerticalWritingMode=function(e){for(var t=0,n=e;t<n.length;t+=1){var o=n[t];if(i.charHasUprightVerticalOrientation(o.charCodeAt(0)))return!0}return!1},t.exports.allowsLetterSpacing=function(e){for(var t=0,n=e;t<n.length;t+=1){var o=n[t];if(!i.charAllowsLetterSpacing(o.charCodeAt(0)))return!1}return!0},t.exports.charAllowsLetterSpacing=function(e){return!(n.Arabic(e)||n["Arabic Supplement"](e)||n["Arabic Extended-A"](e)||n["Arabic Presentation Forms-A"](e)||n["Arabic Presentation Forms-B"](e))},t.exports.charAllowsIdeographicBreaking=function(e){return!!(!(e<11904)&&(n["Bopomofo Extended"](e)||n.Bopomofo(e)||n["CJK Compatibility Forms"](e)||n["CJK Compatibility Ideographs"](e)||n["CJK Compatibility"](e)||n["CJK Radicals Supplement"](e)||n["CJK Strokes"](e)||n["CJK Symbols and Punctuation"](e)||n["CJK Unified Ideographs Extension A"](e)||n["CJK Unified Ideographs"](e)||n["Enclosed CJK Letters and Months"](e)||n["Halfwidth and Fullwidth Forms"](e)||n.Hiragana(e)||n["Ideographic Description Characters"](e)||n["Kangxi Radicals"](e)||n["Katakana Phonetic Extensions"](e)||n.Katakana(e)||n["Vertical Forms"](e)||n["Yi Radicals"](e)||n["Yi Syllables"](e)))},i.charHasUprightVerticalOrientation=function(e){return!!(746===e||747===e||!(e<4352)&&(n["Bopomofo Extended"](e)||n.Bopomofo(e)||n["CJK Compatibility Forms"](e)&&!(e>=65097&&e<=65103)||n["CJK Compatibility Ideographs"](e)||n["CJK Compatibility"](e)||n["CJK Radicals Supplement"](e)||n["CJK Strokes"](e)||!(!n["CJK Symbols and Punctuation"](e)||e>=12296&&e<=12305||e>=12308&&e<=12319||12336===e)||n["CJK Unified Ideographs Extension A"](e)||n["CJK Unified Ideographs"](e)||n["Enclosed CJK Letters and Months"](e)||n["Hangul Compatibility Jamo"](e)||n["Hangul Jamo Extended-A"](e)||n["Hangul Jamo Extended-B"](e)||n["Hangul Jamo"](e)||n["Hangul Syllables"](e)||n.Hiragana(e)||n["Ideographic Description Characters"](e)||n.Kanbun(e)||n["Kangxi Radicals"](e)||n["Katakana Phonetic Extensions"](e)||n.Katakana(e)&&12540!==e||!(!n["Halfwidth and Fullwidth Forms"](e)||65288===e||65289===e||65293===e||e>=65306&&e<=65310||65339===e||65341===e||65343===e||e>=65371&&e<=65503||65507===e||e>=65512&&e<=65519)||!(!n["Small Form Variants"](e)||e>=65112&&e<=65118||e>=65123&&e<=65126)||n["Unified Canadian Aboriginal Syllabics"](e)||n["Unified Canadian Aboriginal Syllabics Extended"](e)||n["Vertical Forms"](e)||n["Yijing Hexagram Symbols"](e)||n["Yi Syllables"](e)||n["Yi Radicals"](e)))},i.charHasNeutralVerticalOrientation=function(e){return!!(n["Latin-1 Supplement"](e)&&(167===e||169===e||174===e||177===e||188===e||189===e||190===e||215===e||247===e)||n["General Punctuation"](e)&&(8214===e||8224===e||8225===e||8240===e||8241===e||8251===e||8252===e||8258===e||8263===e||8264===e||8265===e||8273===e)||n["Letterlike Symbols"](e)||n["Number Forms"](e)||n["Miscellaneous Technical"](e)&&(e>=8960&&e<=8967||e>=8972&&e<=8991||e>=8996&&e<=9e3||9003===e||e>=9085&&e<=9114||e>=9150&&e<=9165||9167===e||e>=9169&&e<=9179||e>=9186&&e<=9215)||n["Control Pictures"](e)&&9251!==e||n["Optical Character Recognition"](e)||n["Enclosed Alphanumerics"](e)||n["Geometric Shapes"](e)||n["Miscellaneous Symbols"](e)&&!(e>=9754&&e<=9759)||n["Miscellaneous Symbols and Arrows"](e)&&(e>=11026&&e<=11055||e>=11088&&e<=11097||e>=11192&&e<=11243)||n["CJK Symbols and Punctuation"](e)||n.Katakana(e)||n["Private Use Area"](e)||n["CJK Compatibility Forms"](e)||n["Small Form Variants"](e)||n["Halfwidth and Fullwidth Forms"](e)||8734===e||8756===e||8757===e||e>=9984&&e<=10087||e>=10102&&e<=10131||65532===e||65533===e)},i.charHasRotatedVerticalOrientation=function(e){return!(i.charHasUprightVerticalOrientation(e)||i.charHasNeutralVerticalOrientation(e))}},{"./is_char_in_unicode_block":258}],262:[function(e,t,i){var n=e("../geo/lng_lat");t.exports=function(e,t,i){if(e=new n(e.lng,e.lat),t){var o=new n(e.lng-360,e.lat),r=new n(e.lng+360,e.lat),a=i.locationPoint(e).distSqr(t);i.locationPoint(o).distSqr(t)<a?e=o:i.locationPoint(r).distSqr(t)<a&&(e=r)}for(;Math.abs(e.lng-i.center.lng)>180;){var s=i.locationPoint(e);if(s.x>=0&&s.y>=0&&s.x<=i.width&&s.y<=i.height)break;e.lng>i.center.lng?e.lng-=360:e.lng+=360}return e}},{"../geo/lng_lat":68}],263:[function(e,t,i){function n(e){var t=D()(e);if(h[t])return h[t];var i=void 0===e.alignment?1:e.alignment,n=0,a=0,l=["Uint8"],p=e.members.map(function(e){l.indexOf(e.type)<0&&l.push(e.type);var t=r(e.type),s=n=o(n,Math.max(i,t)),u=e.components||1;return a=Math.max(a,t),n+=t*u,{name:e.name,type:e.type,components:u,offset:s}}),m=o(n,Math.max(a,i)),y=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=F()(e&&e.prototype),t.prototype.constructor=t,t}(f);y.prototype.alignment=i,y.prototype.size=m;for(var v=0,g=p;v<g.length;v+=1)for(var b=g[v],x=0;x<b.components;x++){var w=b.name;if(b.components>1&&(w+=x),w in y.prototype)throw new Error(w+" is a reserved name and cannot be used as a member name.");_()(y.prototype,w,c(b,x))}var z=function(e){function t(){e.apply(this,arguments)}return e&&(t.__proto__=e),t.prototype=F()(e&&e.prototype),t.prototype.constructor=t,t}(d);z.prototype.members=p,z.prototype.StructType=y,z.prototype.bytesPerElement=m,z.prototype.emplaceBack=s(p,m),z.prototype._usedTypes=l,h[t]=z;for(var A=0,T=p;A<T.length;A+=1)for(var k=T[A],S=0;S<k.components;S++){var E="get"+k.name;if(k.components>1&&(E+=S),E in z.prototype)throw new Error(E+" is a reserved name and cannot be used as a member name.");z.prototype[E]=u(k,S,m)}return z}function o(e,t){return Math.ceil(e/t)*t}function r(e){return p[e].BYTES_PER_ELEMENT}function a(e){return e.toLowerCase()}function s(e,t){for(var i=[],n=[],o="var i = this.length;\nthis.resize(this.length + 1);\n",s=0,l=e;s<l.length;s+=1){var u=l[s],c=r(u.type);i.indexOf(c)<0&&(i.push(c),o+="var o"+c.toFixed(0)+" = i * "+(t/c).toFixed(0)+";\n");for(var p=0;p<u.components;p++){var f="v"+n.length,d="o"+c.toFixed(0)+" + "+(u.offset/c+p).toFixed(0);o+="this."+a(u.type)+"["+d+"] = "+f+";\n",n.push(f)}}return o+="return i;",new Function(n.toString(),o)}function l(e,t){var i="this._pos"+r(e.type).toFixed(0),n=(e.offset/r(e.type)+t).toFixed(0),o=i+" + "+n;return"this._structArray."+a(e.type)+"["+o+"]"}function u(e,t,i){var n=(e.offset/r(e.type)+t).toFixed(0),o=i/r(e.type);return new Function("index","return this."+a(e.type)+"[index * "+o+" + "+n+"];")}function c(e,t){var i=l(e,t);return{get:new Function("return "+i+";"),set:new Function("x",i+" = x;")}}t.exports=n;var p={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},f=function(e,t){this._structArray=e,this._pos1=t*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},d=function(e){this.isTransferred=!1,void 0!==e?(this.arrayBuffer=e.arrayBuffer,this.length=e.length,this.capacity=this.arrayBuffer.byteLength/this.bytesPerElement,this._refreshViews()):(this.capacity=-1,this.resize(0))};d.serialize=function(){return{members:this.prototype.members,alignment:this.prototype.StructType.prototype.alignment}},d.prototype.serialize=function(e){return this._trim(),e&&(this.isTransferred=!0,e.push(this.arrayBuffer)),{length:this.length,arrayBuffer:this.arrayBuffer}},d.prototype.get=function(e){return new this.StructType(this,e)},d.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},d.prototype.clear=function(){this.length=0},d.prototype.resize=function(e){if(this.length=e,e>this.capacity){this.capacity=Math.max(e,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var t=this.uint8;this._refreshViews(),t&&this.uint8.set(t)}},d.prototype._refreshViews=function(){for(var e=this,t=0,i=e._usedTypes;t<i.length;t+=1){var n=i[t];e[a(n)]=new p[n](e.arrayBuffer)}},d.prototype.toArray=function(e,t){for(var i=this,n=[],o=e;o<t;o++){var r=i.get(o);n.push(r)}return n};var h={}},{}],264:[function(e,t,i){t.exports=function(e,t){var i=!1,n=0,o=function o(){n=0,i&&(e(),n=setTimeout(o,t),i=!1)};return function(){return i=!0,n||o(),n}}},{}],265:[function(e,t,i){function n(e,t){return t.replace(/{([^{}]+)}/g,function(t,i){return i in e?String(e[i]):""})}t.exports=n},{}],266:[function(e,t,i){var n=e("@mapbox/unitbezier"),o=e("../geo/coordinate");e("@mapbox/point-geometry");i.easeCubicInOut=function(e){if(e<=0)return 0;if(e>=1)return 1;var t=e*e,i=t*e;return 4*(e<.5?i:3*(e-t)+i-.75)},i.bezier=function(e,t,i,o){var r=new n(e,t,i,o);return function(e){return r.solve(e)}},i.ease=i.bezier(.25,.1,.25,1),i.clamp=function(e,t,i){return Math.min(i,Math.max(t,e))},i.wrap=function(e,t,i){var n=i-t,o=((e-t)%n+n)%n+t;return o===t?i:o},i.asyncAll=function(e,t,i){if(!e.length)return i(null,[]);var n=e.length,o=new Array(e.length),r=null;e.forEach(function(e,a){t(e,function(e,t){e&&(r=e),o[a]=t,0==--n&&i(r,o)})})},i.values=function(e){var t=[];for(var i in e)t.push(e[i]);return t},i.keysDifference=function(e,t){var i=[];for(var n in e)n in t||i.push(n);return i},i.extend=function(e){for(var t=[],i=arguments.length-1;i-- >0;)t[i]=arguments[i+1];for(var n=0,o=t;n<o.length;n+=1){var r=o[n];for(var a in r)e[a]=r[a]}return e},i.pick=function(e,t){for(var i={},n=0;n<t.length;n++){var o=t[n];o in e&&(i[o]=e[o])}return i};var r=1;i.uniqueId=function(){return r++},i.bindAll=function(e,t){e.forEach(function(e){t[e]&&(t[e]=t[e].bind(t))})},i.getCoordinatesCenter=function(e){for(var t=1/0,i=1/0,n=-1/0,r=-1/0,a=0;a<e.length;a++)t=Math.min(t,e[a].column),i=Math.min(i,e[a].row),n=Math.max(n,e[a].column),r=Math.max(r,e[a].row);var s=n-t,l=r-i,u=Math.max(s,l),c=Math.max(0,Math.floor(-Math.log(u)/Math.LN2));return new o((t+n)/2,(i+r)/2,0).zoomTo(c)},i.endsWith=function(e,t){return-1!==e.indexOf(t,e.length-t.length)},i.mapObject=function(e,t,i){var n=this,o={};for(var r in e)o[r]=t.call(i||n,e[r],r,e);return o},i.filterObject=function(e,t,i){var n=this,o={};for(var r in e)t.call(i||n,e[r],r,e)&&(o[r]=e[r]);return o},i.deepEqual=function(e,t){if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(!i.deepEqual(e[n],t[n]))return!1;return!0}if("object"==(void 0===e?"undefined":O()(e))&&null!==e&&null!==t){if("object"!=(void 0===t?"undefined":O()(t)))return!1;if(R()(e).length!==R()(t).length)return!1;for(var o in e)if(!i.deepEqual(e[o],t[o]))return!1;return!0}return e===t},i.clone=function(e){return Array.isArray(e)?e.map(i.clone):"object"==(void 0===e?"undefined":O()(e))&&e?i.mapObject(e,i.clone):e},i.arraysIntersect=function(e,t){for(var i=0;i<e.length;i++)if(t.indexOf(e[i])>=0)return!0;return!1};var a={};i.warnOnce=function(e){a[e]||("undefined"!=typeof console&&console.warn(e),a[e]=!0)},i.isCounterClockwise=function(e,t,i){return(i.y-e.y)*(t.x-e.x)>(t.y-e.y)*(i.x-e.x)},i.calculateSignedArea=function(e){for(var t=0,i=0,n=e.length,o=n-1,r=void 0,a=void 0;i<n;o=i++)r=e[i],a=e[o],t+=(a.x-r.x)*(r.y+a.y);return t},i.isClosedPolygon=function(e){if(e.length<4)return!1;var t=e[0],n=e[e.length-1];return!(Math.abs(t.x-n.x)>0||Math.abs(t.y-n.y)>0)&&Math.abs(i.calculateSignedArea(e))>.01},i.sphericalToCartesian=function(e){var t=e[0],i=e[1],n=e[2];return i+=90,i*=Math.PI/180,n*=Math.PI/180,{x:t*Math.cos(i)*Math.sin(n),y:t*Math.sin(i)*Math.sin(n),z:t*Math.cos(n)}},i.parseCacheControl=function(e){var t=/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,i={};if(e.replace(t,function(e,t,n,o){var r=n||o;return i[t]=!r||r.toLowerCase(),""}),i["max-age"]){var n=parseInt(i["max-age"],10);isNaN(n)?delete i["max-age"]:i["max-age"]=n}return i}},{"../geo/coordinate":67,"@mapbox/point-geometry":2,"@mapbox/unitbezier":5}],267:[function(e,t,i){var n=function(e,t,i,n){this.type="Feature",this._vectorTileFeature=e,e._z=t,e._x=i,e._y=n,this.properties=e.properties,null!=e.id&&(this.id=e.id)},o={geometry:{}};o.geometry.get=function(){return void 0===this._geometry&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},o.geometry.set=function(e){this._geometry=e},n.prototype.toJSON=function(){var e=this,t={geometry:this.geometry};for(var i in e)"_geometry"!==i&&"_vectorTileFeature"!==i&&(t[i]=e[i]);return t},v()(n.prototype,o),t.exports=n},{}],268:[function(e,t,i){var n=e("./script_detection");t.exports=function(e){for(var i="",o=0;o<e.length;o++){var r=e.charCodeAt(o+1)||null,a=e.charCodeAt(o-1)||null;r&&n.charHasRotatedVerticalOrientation(r)&&!t.exports.lookup[e[o+1]]||a&&n.charHasRotatedVerticalOrientation(a)&&!t.exports.lookup[e[o-1]]||!t.exports.lookup[e[o]]?i+=e[o]:i+=t.exports.lookup[e[o]]}return i},t.exports.lookup={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂"}},{"./script_detection":261}],269:[function(e,t,i){var n=e("./web_worker"),o=function(){this.active={}};o.prototype.acquire=function(t){var i=this;if(!this.workers){var o=e("../").workerCount;for(this.workers=[];this.workers.length<o;)i.workers.push(new n)}return this.active[t]=!0,this.workers.slice()},o.prototype.release=function(e){delete this.active[e],0===R()(this.active).length&&(this.workers.forEach(function(e){e.terminate()}),this.workers=null)},t.exports=o},{"../":73,"./web_worker":246}]},{},[73])(73)})}).call(t,i("DuR2"),i("f1Eh")(e))},Rge8:function(e,t){},SMzI:function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"flexItem",on:{click:function(t){e.enterOperate(e.option)}}},[e._m(0),e._v(" "),i("div",{staticClass:"words"},[e._v("\n    "+e._s(e.taskTitle)+"\n  ")])])},o=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"pic"},[n("img",{attrs:{src:i("TC7S"),alt:""}})])}],r={render:n,staticRenderFns:o};t.a=r},SjLz:function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"header clear"},[i("div",{staticClass:"wrapper",staticStyle:{width:"1160px"}},[i("div",{staticClass:"fl",staticStyle:{color:"#1478ff","font-size":"22px","font-weight":"600"}},[e._v("\n      自动化出品管理\n    ")]),e._v(" "),i("div",{staticClass:"fr"},[i("router-link",{staticClass:"btnbg",attrs:{to:"/monitor"}},[e._v("监控页")]),e._v(" "),i("router-link",{staticClass:"btnbg",attrs:{to:"/login"}},[e._v("退出登录")])],1)])])},o=[],r={render:n,staticRenderFns:o};t.a=r},TC7S:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAMAAACahl6sAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAVFBMVEUAAAA4z/c1zvcwz/81y/Q2zPM2y/Q0y/M1z/Q3zPQ3zfQ2zPU2y/M2y/M3y/U2zfU3zPQ2zPQ2zPM1zfQ3zPQ3zPQ2zPQ3zPM2zPM2zPQ3zPT///+sVwW4AAAAGnRSTlMAID8Qj+/PQDDfcFDAgE9/v1+vYJDg0LDwoDEop7IAAAABYktHRBsCYNSkAAAAB3RJTUUH4QwCDQYZRNzbGAAAA9pJREFUeNrtne26qiAQRjUs1DTbalbc/4We/Zx98huMcbI5u3f9joElKogOBQEAAAAAAAAAALCGcPeauLtwSwsV7Y0xB80dVx++w+4jtZVHnJgfUt640b+wh6165WAeHDnDHtuwh2080rZCs+eMu+/iMne1hayr0DBeJroXNttEpHfkOA9dr6N5e9pKr0KT84XN+3EhAhGIQORZTsV5huirmwDNi8RFefamLOIFEfUVzRUsTgsa4dlYSGKXiIoMkcgpohNbubNzaqn2jipjh8jZkCkdItpRLnGZlOaJkjMiKd2jnR3MiKjEVa60e4TuGiurSGJWkFhFKndB+2z/6C5Y20TUGg9jlE2kdpezP0Tk7oKZTUSbVWibSOYul1NFpPUIWcR+jVzWeFyo1whVpHnRXauy37XcB4gq4hpHrnSPa2AVCeIXiDTOkX3pdH6iNbMje3x5pqhbJOtTV4tzrfyaeXPNF+daVT0oQRCx/uq5WN5wVg4RiEAEIhCBCEQgApF3i7z1jRWnSP/Rg/FNcv/Bv95ERN3a37C+tOxqv9iPD6dIoB8m14CVx/PyzXHCsooEccPfH139jet7AV6Rb5Uq1y/40kLpvIqdv+AWeRsQkQZEpAERaUBEGhCRxieLyAci0oCINCAiDYhIAyLS+DSRXCQEkUAkEJEGRKQBEWlARBoQkQZEpAERaUBEGhDpmM99tdJPim2xJKxamWayrhax575aSSafx2j/fMVxJutaEWfuq5WRCSnLb5TJulak9Kt9thGKlj9acoqEfnW3VP0gFTFIyChy9Ku6ZfCRJTWf7MgoQl2CHHz2mhGD5Iwiv6ZHfs01Qsz8bIZ3LVpG7z3gFKE1YjSOxJQYF95xJFD+l2ozGdlj/8NxZR7ZvznmXtmr/aTY7nCMElaXyCebCDCIyAAi0oCINCAiDYhIAyLSgIg0ICINiEgDIh1qV/hwms24DU9eQXaTx+X1IoXxpZy0QvmvhRfcIge/+v8y3tsypLybKHlFaIu/52F42j6hOacIdf/CwWoOdQFZMYpQd5TMrdE90Iwiv+a1AnUhfbAAfScGqRhFSMvPZrQrREoMEjOKBA2pCbfBoBjeSEGagFMkJjVitARNOkGHB2P9gKj9TW6T7UZSf4/LaI+U1SKBqv3uOs19Zl+Q+O53jmb1eJqzXkQIEJEGRKQBEWlARBoQkQZEpAERaUBEGhCRBkSk8cki8oGINOwi6bub5od9B+iVf3W2NY6ts2kL/2/i5ri5Ud9XvgXn5vvpu1v3PAt7pGvau6nNadybmf+4/AcsWwAAAAAAAAAA+FT+AE1srJTejliBAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDE3LTEyLTAyVDEzOjA2OjI1KzA4OjAwcaGEkQAAACV0RVh0ZGF0ZTptb2RpZnkAMjAxNy0xMi0wMlQxMzowNjoyNSswODowMAD8PC0AAABOdEVYdHNvZnR3YXJlAEltYWdlTWFnaWNrIDYuOS4xLTEwIFExNiB4ODZfNjQgMjAxNy0xMS0yOSBodHRwOi8vd3d3LmltYWdlbWFnaWNrLm9yZyJ2r6IAAAAYdEVYdFRodW1iOjpEb2N1bWVudDo6UGFnZXMAMaf/uy8AAAAYdEVYdFRodW1iOjpJbWFnZTo6SGVpZ2h0ADIwMH3XFWkAAAAXdEVYdFRodW1iOjpJbWFnZTo6V2lkdGgAMjAw7iZFNAAAABl0RVh0VGh1bWI6Ok1pbWV0eXBlAGltYWdlL3BuZz+yVk4AAAAXdEVYdFRodW1iOjpNVGltZQAxNTEyMTkxMTg1pzaQEAAAABN0RVh0VGh1bWI6OlNpemUAMy41OUtCQlYWUWIAAABHdEVYdFRodW1iOjpVUkkAZmlsZTovLy93b3Jrc3BhY2UvdG1wL2ltZ3ZpZXcyXzlfMzViOTRjNzg5Zjk5NTNfYzE0Y2ZfMjQ3WzBdQS8alwAAAABJRU5ErkJggg=="},TlR8:function(e,t,i){"use strict";var n=i("VHFQ"),o=i("xyVL");t.a={name:"menuList",data:function(){return{value5:"",value:"",options:[{value:"选项1",label:"17SPR"},{value:"选项2",label:"17SUM"},{value:"选项3",label:"17AUT"},{value:"选项4",label:"17WIN"}],tableData3:[{date:"2016-05-03",name:"王小虎",address:"上海市普陀区金沙江路 1518 弄"},{date:"2016-05-02",name:"王小虎",address:"上海市普陀区金沙江路 1518 弄"},{date:"2016-05-04",name:"王小虎",address:"上海市普陀区金沙江路 1518 弄"},{date:"2016-05-01",name:"王小虎",address:"上海市普陀区金沙江路 1518 弄"},{date:"2016-05-08",name:"王小虎",address:"上海市普陀区金沙江路 1518 弄"},{date:"2016-05-06",name:"王小虎",address:"上海市普陀区金沙江路 1518 弄"},{date:"2016-05-07",name:"王小虎",address:"上海市普陀区金沙江路 1518 弄"}],multipleSelection:[]}},components:{headerCom:n.a,singleModule:o.a},methods:{handleSelectionChange:function(e){this.multipleSelection=e}}}},Tn7N:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAMAAACahl6sAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAWlBMVEUAAAAAtv8Atf8Atf8AtP8AtP8As/8Ar/8Atf8As/8As/8AtP8At/8AtP8As/8AtP8As/8As/8AtP8Atf8As/8As/8AtP8AtP8AtP8AtP8As/8AtP8AtP/////GU9k4AAAAHHRSTlMAP09/n7/vEDBvr98gj0Bf0JDgYMBQ8KCwz4BwuOrC2AAAAAFiS0dEHesDcZEAAAAHdElNRQfhDAIMOjUENaQzAAAOIklEQVR42u1d6ZqyOgxGkUVlUATB7f6v87gl3dI2URid83z5NaOl5E2zdbFJkmloNk/TRZZl+eVJ+fWfRZrOZxO9cHQqZlcAlyBdAc2KT/MZpHK5Wl+YtF4ty0/zS1K1XOVcEKhuq2X1ab5NKn/YI+GMzM/XDMwbKL4IS7F8E8UTy/Kz1j9fjYHiQYv6YzA28cHYNvBXs40Py+YTKIo06qR27VVf4J/rE+0u9kSe/raGMWB0D1VRQK60774LCgmjHw76f+2zrQEkSdpea3QY+o9C2bgwdk2ZtNr/AzJjAUmKQWvWJnXj6lv+O7ZSH92xuMWBPTEcBJDEALy//l+643Kc3oNVjsPtHlyXaph6Pb65QJJSMZ4/mraO7awm1q+lrVXDM1mq1BdbI04TQJJSqVP+ZLgarI7z5ZTDYeXnfYM5n9K3rSlLCkhSqKCSYeeNpWHZZAmlNRz9SbHc+HDQQHQkjfrwZEKZaFCKlReGZug2Dg+QpFDatdc+taBMYSl7czh0GJqB9E4e6wGiWXyuq1DRGK/JR3dfqdF/Z/KrTGfvPOgDoo3iykRoerB0VBiFYeV6mDBZOruPeoEkJx98I/qPql6lkeY2Vs8FKtZAPOsHkqDHze0eDf1ajzbtMsxj63SL/Owo2QWAKIN3JFDqSf9YhqKnFJqzBKrxO/J9ASChR81BaZMR6Ee3DteYVShsyMdDQFT4Obrf7XVL+Xkfx0JXKyLW4njtaKMMAlHKRci80tVrMSYOUuToBzyKHASilGtNfduMh0TDQamV5kMPnh7CQBKcjJ2pb3X1eguJjoN0gsr1+jK8CJDK54IfVI6DRMOxpRnFAWl8fUSAKOd9Ir/W/fDLSHQctCXjgPTe8BsDUoDMc88r3kei4eg8fJ7C4uQAifbxNpKzen7wtYEB2fnzoSgQdMFrXwtt8nhOxNQycLSM/qNA1JB447eGRBzjSwYODOp9IEGNA0ErOXqbaEiEGaS2luDHgdHsFOgpDkTFPX9yqJDkopl8ceQ8iL2H+mYAqeIy0xabjpL5iZ6YXDKPoBjv5wFREvHwWBvzOoHrMhJ3LxR0a0G15QBBgySdRm1vErMNvrw4dCSWYyFd7IKdcYAkME13PXCxObrcMA2+IB692sqPZQlo6mEBsYC0HharBbl7wTST5uKhbKN3AIrdh3tjAUEPrJtbsfEePGgSBqk1EWKDaTXHdjnx7leBoFRyhYLYniQX9bzCwcHcJjWxwZQv5oWBN7IywANSGxwWc0qlujrBtCuPKxcq1n0CUpN7ZbcDCyDDXaQ/HpAEhD0k5ZLUqPtOnpqeRJVLLWw8bZiGclmDyE6RDplAQH45vVP83JDUMtmIIhTYj5q6VtROH1IsY2ACqQKv6Af1Epwar8P9YSZq5IGhjeUs3bwfEDep/2TUfZNbsYJCDaqCyhVtt1APlwAdF+nMAycMpJyli2Oo58FWIXQywewRuSXWRIr2cAlTni3S+cw6IkcCKWazTbrIYnv1h5ZwTmizAb+Plt7TaItz/BzGQ9+yVXqjzWwGH81my/tHWZbx+tieaSYqVC6/veMr/DO+qj30PEbeokPrVxy048zXAgdkmwRp30QPlbxDuyYSt/HtviHJYg1cyFMQ/+1Z5Psu1hOO7qhaBp3FQqxm7zRm/oBgT+ekbJvufThd09Yonbgcw0OC3w7RjtCnPiFX+9PQvWQ3fTec9pXFQPz9g8UAPSDxZYqSfmVZn06HLnok60bbrjudaiuGwpfxCWAFTQ+B7xgDAqmbTwmKur5iulKjYHVdc/9oX9c+SSmF5Q9J5f+KMSGGEB83S3bSeKOGL8rSK/biEpGyTpAiM+ZpEiCQRq0ZbWH0nBkWTv8ZW8GohZw1AAEQFCZjMdG79AEp6JbxwlbQVgIEQzZnpCHrsxaMSx9AisDhM3RZBgTslGN7nhWk2KKlQZ0AtAhIzBvqhHpoipO5tvMgsHXWyQoJEFB8jrW7K0g3wmkXRztFvIkaF5LGJM/ctR1DbqzGMtSQtbEWd9UKkiLQLNZSJJgZR5OFQDpCyF7CFST1ETpl1m7QSYJaBgR447gt5Wlr5/mtSGy8HVYREHBbB1brrSPRo0QQMqclAwKqcWS1buzW1eUl1nibFCIgIrflWgRYb896vBS1lgGRuS3sGyIzOF+eZoIceE5LCATsj6cbMJ0ABwxKz7PeVgT7RSAs/4u+4ZkJoInwtuLB+/I8gxCIrHN0wA9zhVjPi9TfBMTK+wUzzBvJRl8IBITKNECw7sbgjHmESGaPQiBCT2IuheUyzqA583CLDAhoPSuRV7jv6RYGIeZhFRln0zY3eAdUzAAnC74vA2FKFQLoTZv4S653EmqxFIjQAnX7FqXO3wZEZ160lPBtQPRJ3lH2KHh6ZoYiBXKQcaOLFd7EdKfC2CsFIuy+0rqf9k2/171ge+WbgZQIZPs3gUDaWIu9ELyJe7h7YiDKy8lWqcT+UQoE5Mp1iip4yFapfg0IV64qIgKQLOURzIsXzPYAhNkcjk6vme0zB8gfp39Avo3+Afk2+gfk20gB6U48wg0vZnt8E49wE5DZvnOAyJObr4jsin3J3vYXAlG51qvJzddlv7Ldrq+bjxwdIH98hlj/f+bs0kXK7wJSad1v1eBwCGaUzN2UV9e1mLsv+oqDcOPme1ca//Tarz5R/1+sxp8S4WkvZV45r/nE+yP6cZLqxVd9Q3PzXKoWUzjU68+OzRlIlbl9Zu62/eFdXTPjBbfFXKKbFIhwn91kHXwx09qF7loGRBjYwdYfu21o7X/uLIrNeW/gitGkp4MOL7Gys57mpU9feF4LZAq2z4txwgAqAyI7LwmnScDfoqrJDuBNAUTUGo9roXHvLGRh2omkJmJNdsj75LR2zp0GSXbCQAREtn0G83UVAPfOGHEEwXORIiCirtEitJkUOGCWbv3C2XjWYOPPU7XPYKGS5YlkbksEROS0oLEeNVC3WH5LxNtkjdFnGXN06qYYL4ncloQ3kdOib8ohf+fjo8l+YyWyPvrXVMwbjR4k2pqXAJEk1r4fToK6ZII+WGFHAuQokCZssNtqyLv160GlhDlB25d+GWpHDIwuHHPXz3aOCERy3tX/w0nWzXhPmujX02B7jJlOQO6SCwbia3rlbPa8CAW6vf29vH3q191Xfs9e+7thXF1lnOQ22E/TnyyLlu5ZZ9nPFZUNKcCcRcEfraM/E9z5AKyU8yuAF+pAra+A5tgJXwtxQMiVd7x9Im4lmhLMlrEadXHKFsuZ5CfHaCF0CiAYEohc61GqcVl9xV0IXk/nCTjRq2yQ9mI2BRTdqEG/5MvJcEgi4b1avq1MIcpiJfnw7d4MAIckIJTZuyXqOHT8CRSyVDfVxzXG54LnC2bNw13XPS9CgU+e16R03Btt8sWc5kHdvxiwALyOhUpsy58YitsFOqe6jhcbut3/MkTvHMrJ8oLoekPercJObLRVWKOu0q9pAVFAkK6AmuAVPevUthd1I1bQkvC6SXNCXvvLBe4OeIuRHMhTSPvTwa9wK0NA6v7F8GyoIK6mDNdu/IV7GtfaZbDqYs9IJqUixNNzVRH7jmV4TCDn4EvyReVhz0+osnfPVS2ofm+3xEEqH5smMoHAoB+S/UCq2R2K8ljxVF/dHpjRMLbnuy/x3TX8GhBzbackr1FcFCoU9oxZkxrkjEIBPaA1RZYgeEBA9XFyWBFYcuVyWEui3gsyd40uB+YKEg8ItbZT+m9R5O2WFXSgOljmxbzdhgXE19eeFmrMYwERtzD2J1cpqZtiXgQC/LrZk1OT70bsclD29d67NtgqaHgcIBU0Iqcizh293DNvieaD/TAmucnfIxITCvdc0o20In+9f9mPtVzBAILRwc+iVltgJ6mtoF/m7weCJvpmtQtM9f1uQwHphXU7Wg4SGLeQB2YAwboy73HjoTPj2TOj9ziQeF0ZDccLtW20S7B9ldYw4gR24eJAIM3yRget2hz3bKtBWjDylfyIl9eJA0Fx+yxNS/i4P7M0yai75CkyBd/7HVcMSKwUVhGvpiVC4qmUMcTEGQWCg0prjV5D5FUcHCRVpC5YvNYbDggZDMfBYSKhS3dGBBoFEh5SvVjpOzhMJBeq8LBKlV+7yR++Ji1keRkLh4WEqgyLQ+KZ84aBoOYQ8cEorfwuDqswPKVemJbR9h4EglIggrpRA/el+GGTUR7CVS8VdknlCgFRGZ2bZelqxf6xfYSMslauemHOTypXCAgqlpP2mhW7R6lGeyOjMqxTbLwK1psJAFGLbbbrNQqo98xftnDIKDx8OVpTzXNIdH4gaqAtS6+NiiRb1mk4LhVmHRUrY1HFjFwz8QJRdehMxSrMxbRh7BLt5pqmqV/KaN0A7wOiFg3NqZKhVZf+hbQ9RqZ6XdZ69TeF0jF4DxAt99D1cWOul29HKwRuvNtaXNGhqJTfzsloIBoOLURYMMbyui7VOx8ULQGwkJBANBwqZNswdiNVM+cMymWdPvnQShKbSCggGg4wkCK1N2Gasa3cpNJeW84XD1a0qGkgIYDoufnDQEpnE2Ya6zCoddYw18vCRKKXuHeB1LmJg9gR60eL5SEqiGsiVpvKuD0i9QNJtWbnpKLKBZ6m1SpFFVVm7LjUtQ6jvwXEiNrbJVVVbBg1lL8CxaTntp8BhN7J+xwMJpT7xrIGJLDJ/TEYdyinaLmkfLGBPzfx0x/UJszvELv2G4e2598ycZLKYZSiXP0wfdyIDku0vGCUyHKBfw7L16B40ksl+baxQnufoWrfCIz/CuJTTopF9bmJFknrmvOEKfqYVNT7+7k/i//b6cB9/V0mIUL1G7z/B7QYccsqV22AAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDE3LTEyLTAyVDEyOjU4OjUzKzA4OjAwqrz9xgAAACV0RVh0ZGF0ZTptb2RpZnkAMjAxNy0xMi0wMlQxMjo1ODo1MyswODowMNvhRXoAAABOdEVYdHNvZnR3YXJlAEltYWdlTWFnaWNrIDYuOS4xLTEwIFExNiB4ODZfNjQgMjAxNy0xMS0yOSBodHRwOi8vd3d3LmltYWdlbWFnaWNrLm9yZyJ2r6IAAAAYdEVYdFRodW1iOjpEb2N1bWVudDo6UGFnZXMAMaf/uy8AAAAYdEVYdFRodW1iOjpJbWFnZTo6SGVpZ2h0ADIwMH3XFWkAAAAXdEVYdFRodW1iOjpJbWFnZTo6V2lkdGgAMjAw7iZFNAAAABl0RVh0VGh1bWI6Ok1pbWV0eXBlAGltYWdlL3BuZz+yVk4AAAAXdEVYdFRodW1iOjpNVGltZQAxNTEyMTkwNzMzEZD3OQAAABN0RVh0VGh1bWI6OlNpemUAOC4xN0tCQkFO1GsAAABHdEVYdFRodW1iOjpVUkkAZmlsZTovLy93b3Jrc3BhY2UvdG1wL2ltZ3ZpZXcyXzlfMzViOTRiNmFmYTIxZjhfZWY0YTVfMjZiWzBdwxVzYQAAAABJRU5ErkJggg=="},U5CQ:function(e,t){},VHFQ:function(e,t,i){"use strict";function n(e){i("HgWG")}var o=i("eNlQ"),r=i("SjLz"),a=i("VU/8"),s=n,l=a(o.a,r.a,!1,s,"data-v-8a022c02",null);t.a=l.exports},"Vir/":function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"flexItem",on:{click:function(t){e.enterOperate(e.option)}}},[e._m(0),e._v(" "),i("div",{staticClass:"words"},[e._v("\n    "+e._s(e.blockname)+"\n  ")])])},o=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"pic"},[n("img",{attrs:{src:i("Tn7N"),alt:""}})])}],r={render:n,staticRenderFns:o};t.a=r},Vok3:function(e,t,i){"use strict";function n(e){i("8KGq")}var o=i("TlR8"),r=i("Yrxi"),a=i("VU/8"),s=n,l=a(o.a,r.a,!1,s,"data-v-64a9de2a",null);t.a=l.exports},WSFg:function(e,t,i){"use strict";function n(e){i("1MB3")}var o=i("Z2GM"),r=i("Vir/"),a=i("VU/8"),s=n,l=a(o.a,r.a,!1,s,"data-v-8d887360",null);t.a=l.exports},"X+ky":function(e,t){},XPMo:function(e,t){},YaEn:function(e,t,i){"use strict";var n=i("7+uW"),o=i("/ocq"),r=i("cGul"),a=i("FHSc"),s=i("pNE5"),l=i("Vok3"),u=i("msf5");n.default.use(o.a),t.a=new o.a({mode:"history",routes:[{path:"/monitor",component:s.a},{path:"/",redirect:"/menu"},{path:"/login",component:r.a},{path:"/menu",component:a.a},{path:"/recode",component:l.a},{path:"/retask",component:u.a}]})},Yrxi:function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("header-com"),e._v(" "),i("div",{staticClass:"content wrapper"},[e._m(0),e._v(" "),i("div",{staticClass:"Main"},[i("div",{staticClass:"selectOption"},[i("span",{staticClass:"demonstration"},[e._v("年份")]),e._v(" "),i("el-date-picker",{attrs:{align:"left",type:"year",placeholder:"选择年",size:"small"},model:{value:e.value5,callback:function(t){e.value5=t},expression:"value5"}}),e._v(" "),i("span",{staticClass:"demonstration"},[e._v("作业季")]),e._v(" "),i("el-select",{attrs:{placeholder:"请选择",size:"small"},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},e._l(e.options,function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),e._v(" "),i("span",{staticClass:"demonstration"},[e._v("任务类型")]),e._v(" "),i("el-select",{attrs:{placeholder:"请选择",size:"small"},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},e._l(e.options,function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),e._v(" "),i("span",{staticClass:"demonstration"},[e._v("细分类型")]),e._v(" "),i("el-select",{attrs:{placeholder:"请选择",size:"small"},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},e._l(e.options,function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),e._v(" "),i("el-button",{staticStyle:{"margin-left":"20px"},attrs:{type:"primary",size:"small"}},[e._v("重转"),i("i",{staticClass:"el-icon-upload el-icon--right"})])],1),e._v(" "),i("div",{staticStyle:{"margin-top":"20px"}},[i("el-table",{ref:"multipleTable",staticStyle:{width:"100%","background-color":"#F5F5F5"},attrs:{data:e.tableData3,"tooltip-effect":"dark"},on:{"selection-change":e.handleSelectionChange}},[i("el-table-column",{attrs:{type:"selection",width:"55"}}),e._v(" "),i("el-table-column",{attrs:{label:"日期",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(t.row.date))]}}])}),e._v(" "),i("el-table-column",{attrs:{prop:"name",label:"姓名",width:"120"}}),e._v(" "),i("el-table-column",{attrs:{prop:"address",label:"地址","show-overflow-tooltip":""}})],1)],1)]),e._v(" "),i("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:200}})],1)],1)},o=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("ul",{staticClass:"indexNav"},[i("li",[i("a",{attrs:{href:""}},[e._v("功能模块")])]),e._v(" "),i("li",[i("a",{staticStyle:{color:"#777"},attrs:{href:"javascript:void(0);"}},[e._v("代码重载")])])])}],r={render:n,staticRenderFns:o};t.a=r},Z2GM:function(e,t,i){"use strict";i("7+uW");t.a={props:{blockname:{type:[String],default:"代码重载"},option:{type:[String]}},methods:{enterOperate:function(e){console.log(e),this.$router.push(e)}}}},aGth:function(e,t,i){"use strict";var n=i("pFYg"),o=i.n(n);/*! jQuery v1.8.3 jquery.com | jquery.org/license */
!function(e,t){function n(e){var t=ye[e]={};return ee.each(e.split(ne),function(e,i){t[i]=!0}),t}function r(e,i,n){if(n===t&&1===e.nodeType){var o="data-"+i.replace(ge,"-$1").toLowerCase();if("string"==typeof(n=e.getAttribute(o))){try{n="true"===n||"false"!==n&&("null"===n?null:+n+""===n?+n:ve.test(n)?ee.parseJSON(n):n)}catch(e){}ee.data(e,i,n)}else n=t}return n}function a(e){var t;for(t in e)if(("data"!==t||!ee.isEmptyObject(e[t]))&&"toJSON"!==t)return!1;return!0}function s(){return!1}function l(){return!0}function u(e){return!e||!e.parentNode||11===e.parentNode.nodeType}function c(e,t){do{e=e[t]}while(e&&1!==e.nodeType);return e}function p(e,t,i){if(t=t||0,ee.isFunction(t))return ee.grep(e,function(e,n){return!!t.call(e,n,e)===i});if(t.nodeType)return ee.grep(e,function(e,n){return e===t===i});if("string"==typeof t){var n=ee.grep(e,function(e){return 1===e.nodeType});if(je.test(t))return ee.filter(t,n,!i);t=ee.filter(t,n)}return ee.grep(e,function(e,n){return ee.inArray(e,t)>=0===i})}function f(e){var t=Ve.split("|"),i=e.createDocumentFragment();if(i.createElement)for(;t.length;)i.createElement(t.pop());return i}function d(e,t){return e.getElementsByTagName(t)[0]||e.appendChild(e.ownerDocument.createElement(t))}function h(e,t){if(1===t.nodeType&&ee.hasData(e)){var i,n,o,r=ee._data(e),a=ee._data(t,r),s=r.events;if(s){delete a.handle,a.events={};for(i in s)for(n=0,o=s[i].length;n<o;n++)ee.event.add(t,i,s[i][n])}a.data&&(a.data=ee.extend({},a.data))}}function m(e,t){var i;1===t.nodeType&&(t.clearAttributes&&t.clearAttributes(),t.mergeAttributes&&t.mergeAttributes(e),i=t.nodeName.toLowerCase(),"object"===i?(t.parentNode&&(t.outerHTML=e.outerHTML),ee.support.html5Clone&&e.innerHTML&&!ee.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML)):"input"===i&&Ye.test(e.type)?(t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value)):"option"===i?t.selected=e.defaultSelected:"input"===i||"textarea"===i?t.defaultValue=e.defaultValue:"script"===i&&t.text!==e.text&&(t.text=e.text),t.removeAttribute(ee.expando))}function y(e){return void 0!==e.getElementsByTagName?e.getElementsByTagName("*"):void 0!==e.querySelectorAll?e.querySelectorAll("*"):[]}function v(e){Ye.test(e.type)&&(e.defaultChecked=e.checked)}function g(e,t){if(t in e)return t;for(var i=t.charAt(0).toUpperCase()+t.slice(1),n=t,o=_t.length;o--;)if((t=_t[o]+i)in e)return t;return n}function _(e,t){return e=t||e,"none"===ee.css(e,"display")||!ee.contains(e.ownerDocument,e)}function b(e,t){for(var i,n,o=[],r=0,a=e.length;r<a;r++)i=e[r],i.style&&(o[r]=ee._data(i,"olddisplay"),t?(!o[r]&&"none"===i.style.display&&(i.style.display=""),""===i.style.display&&_(i)&&(o[r]=ee._data(i,"olddisplay",A(i.nodeName)))):(n=ot(i,"display"),!o[r]&&"none"!==n&&ee._data(i,"olddisplay",n)));for(r=0;r<a;r++)i=e[r],i.style&&(t&&"none"!==i.style.display&&""!==i.style.display||(i.style.display=t?o[r]||"":"none"));return e}function x(e,t,i){var n=ft.exec(t);return n?Math.max(0,n[1]-(i||0))+(n[2]||"px"):t}function w(e,t,i,n){for(var o=i===(n?"border":"content")?4:"width"===t?1:0,r=0;o<4;o+=2)"margin"===i&&(r+=ee.css(e,i+gt[o],!0)),n?("content"===i&&(r-=parseFloat(ot(e,"padding"+gt[o]))||0),"margin"!==i&&(r-=parseFloat(ot(e,"border"+gt[o]+"Width"))||0)):(r+=parseFloat(ot(e,"padding"+gt[o]))||0,"padding"!==i&&(r+=parseFloat(ot(e,"border"+gt[o]+"Width"))||0));return r}function z(e,t,i){var n="width"===t?e.offsetWidth:e.offsetHeight,o=!0,r=ee.support.boxSizing&&"border-box"===ee.css(e,"boxSizing");if(n<=0||null==n){if(n=ot(e,t),(n<0||null==n)&&(n=e.style[t]),dt.test(n))return n;o=r&&(ee.support.boxSizingReliable||n===e.style[t]),n=parseFloat(n)||0}return n+w(e,t,i||(r?"border":"content"),o)+"px"}function A(e){if(mt[e])return mt[e];var t=ee("<"+e+">").appendTo(U.body),i=t.css("display");return t.remove(),"none"!==i&&""!==i||(rt=U.body.appendChild(rt||ee.extend(U.createElement("iframe"),{frameBorder:0,width:0,height:0})),at&&rt.createElement||(at=(rt.contentWindow||rt.contentDocument).document,at.write("<!doctype html><html><body>"),at.close()),t=at.body.appendChild(at.createElement(e)),i=ot(t,"display"),U.body.removeChild(rt)),mt[e]=i,i}function T(e,t,i,n){var r;if(ee.isArray(t))ee.each(t,function(t,r){i||wt.test(e)?n(e,r):T(e+"["+("object"==(void 0===r?"undefined":o()(r))?t:"")+"]",r,i,n)});else if(i||"object"!==ee.type(t))n(e,t);else for(r in t)T(e+"["+r+"]",t[r],i,n)}function k(e){return function(t,i){"string"!=typeof t&&(i=t,t="*");var n,o,r,a=t.toLowerCase().split(ne),s=0,l=a.length;if(ee.isFunction(i))for(;s<l;s++)n=a[s],r=/^\+/.test(n),r&&(n=n.substr(1)||"*"),o=e[n]=e[n]||[],o[r?"unshift":"push"](i)}}function S(e,i,n,o,r,a){r=r||i.dataTypes[0],a=a||{},a[r]=!0;for(var s,l=e[r],u=0,c=l?l.length:0,p=e===jt;u<c&&(p||!s);u++)"string"==typeof(s=l[u](i,n,o))&&(!p||a[s]?s=t:(i.dataTypes.unshift(s),s=S(e,i,n,o,s,a)));return(p||!s)&&!a["*"]&&(s=S(e,i,n,o,"*",a)),s}function E(e,i){var n,o,r=ee.ajaxSettings.flatOptions||{};for(n in i)i[n]!==t&&((r[n]?e:o||(o={}))[n]=i[n]);o&&ee.extend(!0,e,o)}function C(e,i,n){var o,r,a,s,l=e.contents,u=e.dataTypes,c=e.responseFields;for(r in c)r in n&&(i[c[r]]=n[r]);for(;"*"===u[0];)u.shift(),o===t&&(o=e.mimeType||i.getResponseHeader("content-type"));if(o)for(r in l)if(l[r]&&l[r].test(o)){u.unshift(r);break}if(u[0]in n)a=u[0];else{for(r in n){if(!u[0]||e.converters[r+" "+u[0]]){a=r;break}s||(s=r)}a=a||s}if(a)return a!==u[0]&&u.unshift(a),n[a]}function M(e,t){var i,n,o,r,a=e.dataTypes.slice(),s=a[0],l={},u=0;if(e.dataFilter&&(t=e.dataFilter(t,e.dataType)),a[1])for(i in e.converters)l[i.toLowerCase()]=e.converters[i];for(;o=a[++u];)if("*"!==o){if("*"!==s&&s!==o){if(!(i=l[s+" "+o]||l["* "+o]))for(n in l)if(r=n.split(" "),r[1]===o&&(i=l[s+" "+r[0]]||l["* "+r[0]])){!0===i?i=l[n]:!0!==l[n]&&(o=r[0],a.splice(u--,0,o));break}if(!0!==i)if(i&&e.throws)t=i(t);else try{t=i(t)}catch(e){return{state:"parsererror",error:i?e:"No conversion from "+s+" to "+o}}}s=o}return{state:"success",data:t}}function I(){try{return new e.XMLHttpRequest}catch(e){}}function L(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(e){}}function R(){return setTimeout(function(){Xt=t},0),Xt=ee.now()}function P(e,t){ee.each(t,function(t,i){for(var n=(ei[t]||[]).concat(ei["*"]),o=0,r=n.length;o<r;o++)if(n[o].call(e,t,i))return})}function D(e,t,i){var n,o=0,r=$t.length,a=ee.Deferred().always(function(){delete s.elem}),s=function(){for(var t=Xt||R(),i=Math.max(0,l.startTime+l.duration-t),n=i/l.duration||0,o=1-n,r=0,s=l.tweens.length;r<s;r++)l.tweens[r].run(o);return a.notifyWith(e,[l,o,i]),o<1&&s?i:(a.resolveWith(e,[l]),!1)},l=a.promise({elem:e,props:ee.extend({},t),opts:ee.extend(!0,{specialEasing:{}},i),originalProperties:t,originalOptions:i,startTime:Xt||R(),duration:i.duration,tweens:[],createTween:function(t,i,n){var o=ee.Tween(e,l.opts,t,i,l.opts.specialEasing[t]||l.opts.easing);return l.tweens.push(o),o},stop:function(t){for(var i=0,n=t?l.tweens.length:0;i<n;i++)l.tweens[i].run(1);return t?a.resolveWith(e,[l,t]):a.rejectWith(e,[l,t]),this}}),u=l.props;for(B(u,l.opts.specialEasing);o<r;o++)if(n=$t[o].call(l,e,u,l.opts))return n;return P(l,u),ee.isFunction(l.opts.start)&&l.opts.start.call(e,l),ee.fx.timer(ee.extend(s,{anim:l,queue:l.opts.queue,elem:e})),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always)}function B(e,t){var i,n,o,r,a;for(i in e)if(n=ee.camelCase(i),o=t[n],r=e[i],ee.isArray(r)&&(o=r[1],r=e[i]=r[0]),i!==n&&(e[n]=r,delete e[i]),a=ee.cssHooks[n],a&&"expand"in a){r=a.expand(r),delete e[n];for(i in r)i in e||(e[i]=r[i],t[i]=o)}else t[n]=o}function F(e,t,i){var n,o,r,a,s,l,u,c,p,f=this,d=e.style,h={},m=[],y=e.nodeType&&_(e);i.queue||(c=ee._queueHooks(e,"fx"),null==c.unqueued&&(c.unqueued=0,p=c.empty.fire,c.empty.fire=function(){c.unqueued||p()}),c.unqueued++,f.always(function(){f.always(function(){c.unqueued--,ee.queue(e,"fx").length||c.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(i.overflow=[d.overflow,d.overflowX,d.overflowY],"inline"===ee.css(e,"display")&&"none"===ee.css(e,"float")&&(ee.support.inlineBlockNeedsLayout&&"inline"!==A(e.nodeName)?d.zoom=1:d.display="inline-block")),i.overflow&&(d.overflow="hidden",ee.support.shrinkWrapBlocks||f.done(function(){d.overflow=i.overflow[0],d.overflowX=i.overflow[1],d.overflowY=i.overflow[2]}));for(n in t)if(r=t[n],Jt.exec(r)){if(delete t[n],l=l||"toggle"===r,r===(y?"hide":"show"))continue;m.push(n)}if(a=m.length){s=ee._data(e,"fxshow")||ee._data(e,"fxshow",{}),"hidden"in s&&(y=s.hidden),l&&(s.hidden=!y),y?ee(e).show():f.done(function(){ee(e).hide()}),f.done(function(){var t;ee.removeData(e,"fxshow",!0);for(t in h)ee.style(e,t,h[t])});for(n=0;n<a;n++)o=m[n],u=f.createTween(o,y?s[o]:0),h[o]=s[o]||ee.style(e,o),o in s||(s[o]=u.start,y&&(u.end=u.start,u.start="width"===o||"height"===o?1:0))}}function j(e,t,i,n,o){return new j.prototype.init(e,t,i,n,o)}function O(e,t){var i,n={height:e},o=0;for(t=t?1:0;o<4;o+=2-t)i=gt[o],n["margin"+i]=n["padding"+i]=e;return t&&(n.opacity=n.width=e),n}function N(e){return ee.isWindow(e)?e:9===e.nodeType&&(e.defaultView||e.parentWindow)}var V,q,U=e.document,Z=e.location,W=e.navigator,G=e.jQuery,H=e.$,X=Array.prototype.push,K=Array.prototype.slice,J=Array.prototype.indexOf,Y=Object.prototype.toString,Q=Object.prototype.hasOwnProperty,$=String.prototype.trim,ee=function e(t,i){return new e.fn.init(t,i,V)},te=/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source,ie=/\S/,ne=/\s+/,oe=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,re=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,ae=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,se=/^[\],:{}\s]*$/,le=/(?:^|:|,)(?:\s*\[)+/g,ue=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,ce=/"[^"\\\r\n]*"|true|false|null|-?(?:\d\d*\.|)\d+(?:[eE][\-+]?\d+|)/g,pe=/^-ms-/,fe=/-([\da-z])/gi,de=function(e,t){return(t+"").toUpperCase()},he=function e(){U.addEventListener?(U.removeEventListener("DOMContentLoaded",e,!1),ee.ready()):"complete"===U.readyState&&(U.detachEvent("onreadystatechange",e),ee.ready())},me={};ee.fn=ee.prototype={constructor:ee,init:function(e,i,n){var o,r,a;if(!e)return this;if(e.nodeType)return this.context=this[0]=e,this.length=1,this;if("string"==typeof e){if((o="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:re.exec(e))&&(o[1]||!i)){if(o[1])return i=i instanceof ee?i[0]:i,a=i&&i.nodeType?i.ownerDocument||i:U,e=ee.parseHTML(o[1],a,!0),ae.test(o[1])&&ee.isPlainObject(i)&&this.attr.call(e,i,!0),ee.merge(this,e);if((r=U.getElementById(o[2]))&&r.parentNode){if(r.id!==o[2])return n.find(e);this.length=1,this[0]=r}return this.context=U,this.selector=e,this}return!i||i.jquery?(i||n).find(e):this.constructor(i).find(e)}return ee.isFunction(e)?n.ready(e):(e.selector!==t&&(this.selector=e.selector,this.context=e.context),ee.makeArray(e,this))},selector:"",jquery:"1.8.3",length:0,size:function(){return this.length},toArray:function(){return K.call(this)},get:function(e){return null==e?this.toArray():e<0?this[this.length+e]:this[e]},pushStack:function(e,t,i){var n=ee.merge(this.constructor(),e);return n.prevObject=this,n.context=this.context,"find"===t?n.selector=this.selector+(this.selector?" ":"")+i:t&&(n.selector=this.selector+"."+t+"("+i+")"),n},each:function(e,t){return ee.each(this,e,t)},ready:function(e){return ee.ready.promise().done(e),this},eq:function(e){return e=+e,-1===e?this.slice(e):this.slice(e,e+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(K.apply(this,arguments),"slice",K.call(arguments).join(","))},map:function(e){return this.pushStack(ee.map(this,function(t,i){return e.call(t,i,t)}))},end:function(){return this.prevObject||this.constructor(null)},push:X,sort:[].sort,splice:[].splice},ee.fn.init.prototype=ee.fn,ee.extend=ee.fn.extend=function(){var e,i,n,r,a,s,l=arguments[0]||{},u=1,c=arguments.length,p=!1;for("boolean"==typeof l&&(p=l,l=arguments[1]||{},u=2),"object"!=(void 0===l?"undefined":o()(l))&&!ee.isFunction(l)&&(l={}),c===u&&(l=this,--u);u<c;u++)if(null!=(e=arguments[u]))for(i in e)n=l[i],r=e[i],l!==r&&(p&&r&&(ee.isPlainObject(r)||(a=ee.isArray(r)))?(a?(a=!1,s=n&&ee.isArray(n)?n:[]):s=n&&ee.isPlainObject(n)?n:{},l[i]=ee.extend(p,s,r)):r!==t&&(l[i]=r));return l},ee.extend({noConflict:function(t){return e.$===ee&&(e.$=H),t&&e.jQuery===ee&&(e.jQuery=G),ee},isReady:!1,readyWait:1,holdReady:function(e){e?ee.readyWait++:ee.ready(!0)},ready:function(e){if(!0===e?!--ee.readyWait:!ee.isReady){if(!U.body)return setTimeout(ee.ready,1);ee.isReady=!0,!0!==e&&--ee.readyWait>0||(q.resolveWith(U,[ee]),ee.fn.trigger&&ee(U).trigger("ready").off("ready"))}},isFunction:function(e){return"function"===ee.type(e)},isArray:Array.isArray||function(e){return"array"===ee.type(e)},isWindow:function(e){return null!=e&&e==e.window},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},type:function(e){return null==e?String(e):me[Y.call(e)]||"object"},isPlainObject:function(e){if(!e||"object"!==ee.type(e)||e.nodeType||ee.isWindow(e))return!1;try{if(e.constructor&&!Q.call(e,"constructor")&&!Q.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(e){return!1}var i;for(i in e);return i===t||Q.call(e,i)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},error:function(e){throw new Error(e)},parseHTML:function(e,t,i){var n;return e&&"string"==typeof e?("boolean"==typeof t&&(i=t,t=0),t=t||U,(n=ae.exec(e))?[t.createElement(n[1])]:(n=ee.buildFragment([e],t,i?null:[]),ee.merge([],(n.cacheable?ee.clone(n.fragment):n.fragment).childNodes))):null},parseJSON:function(t){return t&&"string"==typeof t?(t=ee.trim(t),e.JSON&&e.JSON.parse?e.JSON.parse(t):se.test(t.replace(ue,"@").replace(ce,"]").replace(le,""))?new Function("return "+t)():void ee.error("Invalid JSON: "+t)):null},parseXML:function(i){var n,o;if(!i||"string"!=typeof i)return null;try{e.DOMParser?(o=new DOMParser,n=o.parseFromString(i,"text/xml")):(n=new ActiveXObject("Microsoft.XMLDOM"),n.async="false",n.loadXML(i))}catch(e){n=t}return(!n||!n.documentElement||n.getElementsByTagName("parsererror").length)&&ee.error("Invalid XML: "+i),n},noop:function(){},globalEval:function(t){t&&ie.test(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(pe,"ms-").replace(fe,de)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,i,n){var o,r=0,a=e.length,s=a===t||ee.isFunction(e);if(n)if(s){for(o in e)if(!1===i.apply(e[o],n))break}else for(;r<a&&!1!==i.apply(e[r++],n););else if(s){for(o in e)if(!1===i.call(e[o],o,e[o]))break}else for(;r<a&&!1!==i.call(e[r],r,e[r++]););return e},trim:$&&!$.call("\ufeff ")?function(e){return null==e?"":$.call(e)}:function(e){return null==e?"":(e+"").replace(oe,"")},makeArray:function(e,t){var i,n=t||[];return null!=e&&(i=ee.type(e),null==e.length||"string"===i||"function"===i||"regexp"===i||ee.isWindow(e)?X.call(n,e):ee.merge(n,e)),n},inArray:function(e,t,i){var n;if(t){if(J)return J.call(t,e,i);for(n=t.length,i=i?i<0?Math.max(0,n+i):i:0;i<n;i++)if(i in t&&t[i]===e)return i}return-1},merge:function(e,i){var n=i.length,o=e.length,r=0;if("number"==typeof n)for(;r<n;r++)e[o++]=i[r];else for(;i[r]!==t;)e[o++]=i[r++];return e.length=o,e},grep:function(e,t,i){var n,o=[],r=0,a=e.length;for(i=!!i;r<a;r++)n=!!t(e[r],r),i!==n&&o.push(e[r]);return o},map:function(e,i,n){var o,r,a=[],s=0,l=e.length;if(e instanceof ee||l!==t&&"number"==typeof l&&(l>0&&e[0]&&e[l-1]||0===l||ee.isArray(e)))for(;s<l;s++)null!=(o=i(e[s],s,n))&&(a[a.length]=o);else for(r in e)null!=(o=i(e[r],r,n))&&(a[a.length]=o);return a.concat.apply([],a)},guid:1,proxy:function(e,i){var n,o,r;return"string"==typeof i&&(n=e[i],i=e,e=n),ee.isFunction(e)?(o=K.call(arguments,2),r=function(){return e.apply(i,o.concat(K.call(arguments)))},r.guid=e.guid=e.guid||ee.guid++,r):t},access:function(e,i,n,r,a,s,l){var u,c=null==n,p=0,f=e.length;if(n&&"object"==(void 0===n?"undefined":o()(n))){for(p in n)ee.access(e,i,p,n[p],1,s,r);a=1}else if(r!==t){if(u=l===t&&ee.isFunction(r),c&&(u?(u=i,i=function(e,t,i){return u.call(ee(e),i)}):(i.call(e,r),i=null)),i)for(;p<f;p++)i(e[p],n,u?r.call(e[p],p,i(e[p],n)):r,l);a=1}return a?e:c?i.call(e):f?i(e[0],n):s},now:function(){return(new Date).getTime()}}),ee.ready.promise=function(t){if(!q)if(q=ee.Deferred(),"complete"===U.readyState)setTimeout(ee.ready,1);else if(U.addEventListener)U.addEventListener("DOMContentLoaded",he,!1),e.addEventListener("load",ee.ready,!1);else{U.attachEvent("onreadystatechange",he),e.attachEvent("onload",ee.ready);var i=!1;try{i=null==e.frameElement&&U.documentElement}catch(e){}i&&i.doScroll&&function e(){if(!ee.isReady){try{i.doScroll("left")}catch(t){return setTimeout(e,50)}ee.ready()}}()}return q.promise(t)},ee.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(e,t){me["[object "+t+"]"]=t.toLowerCase()}),V=ee(U);var ye={};ee.Callbacks=function(e){e="string"==typeof e?ye[e]||n(e):ee.extend({},e);var i,o,r,a,s,l,u=[],c=!e.once&&[],p=function t(n){for(i=e.memory&&n,o=!0,l=a||0,a=0,s=u.length,r=!0;u&&l<s;l++)if(!1===u[l].apply(n[0],n[1])&&e.stopOnFalse){i=!1;break}r=!1,u&&(c?c.length&&t(c.shift()):i?u=[]:f.disable())},f={add:function(){if(u){var t=u.length;(function t(i){ee.each(i,function(i,n){var o=ee.type(n);"function"===o?(!e.unique||!f.has(n))&&u.push(n):n&&n.length&&"string"!==o&&t(n)})})(arguments),r?s=u.length:i&&(a=t,p(i))}return this},remove:function(){return u&&ee.each(arguments,function(e,t){for(var i;(i=ee.inArray(t,u,i))>-1;)u.splice(i,1),r&&(i<=s&&s--,i<=l&&l--)}),this},has:function(e){return ee.inArray(e,u)>-1},empty:function(){return u=[],this},disable:function(){return u=c=i=t,this},disabled:function(){return!u},lock:function(){return c=t,i||f.disable(),this},locked:function(){return!c},fireWith:function(e,t){return t=t||[],t=[e,t.slice?t.slice():t],u&&(!o||c)&&(r?c.push(t):p(t)),this},fire:function(){return f.fireWith(this,arguments),this},fired:function(){return!!o}};return f},ee.extend({Deferred:function(e){var t=[["resolve","done",ee.Callbacks("once memory"),"resolved"],["reject","fail",ee.Callbacks("once memory"),"rejected"],["notify","progress",ee.Callbacks("memory")]],i="pending",n={state:function(){return i},always:function(){return o.done(arguments).fail(arguments),this},then:function(){var e=arguments;return ee.Deferred(function(i){ee.each(t,function(t,n){var r=n[0],a=e[t];o[n[1]](ee.isFunction(a)?function(){var e=a.apply(this,arguments);e&&ee.isFunction(e.promise)?e.promise().done(i.resolve).fail(i.reject).progress(i.notify):i[r+"With"](this===o?i:this,[e])}:i[r])}),e=null}).promise()},promise:function(e){return null!=e?ee.extend(e,n):n}},o={};return n.pipe=n.then,ee.each(t,function(e,r){var a=r[2],s=r[3];n[r[1]]=a.add,s&&a.add(function(){i=s},t[1^e][2].disable,t[2][2].lock),o[r[0]]=a.fire,o[r[0]+"With"]=a.fireWith}),n.promise(o),e&&e.call(o,o),o},when:function(e){var t,i,n,o=0,r=K.call(arguments),a=r.length,s=1!==a||e&&ee.isFunction(e.promise)?a:0,l=1===s?e:ee.Deferred(),u=function(e,i,n){return function(o){i[e]=this,n[e]=arguments.length>1?K.call(arguments):o,n===t?l.notifyWith(i,n):--s||l.resolveWith(i,n)}};if(a>1)for(t=new Array(a),i=new Array(a),n=new Array(a);o<a;o++)r[o]&&ee.isFunction(r[o].promise)?r[o].promise().done(u(o,n,r)).fail(l.reject).progress(u(o,i,t)):--s;return s||l.resolveWith(n,r),l.promise()}}),ee.support=function(){var t,i,n,o,r,a,s,l,u,c,p,f=U.createElement("div");if(f.setAttribute("className","t"),f.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",i=f.getElementsByTagName("*"),n=f.getElementsByTagName("a")[0],!i||!n||!i.length)return{};o=U.createElement("select"),r=o.appendChild(U.createElement("option")),a=f.getElementsByTagName("input")[0],n.style.cssText="top:1px;float:left;opacity:.5",t={leadingWhitespace:3===f.firstChild.nodeType,tbody:!f.getElementsByTagName("tbody").length,htmlSerialize:!!f.getElementsByTagName("link").length,style:/top/.test(n.getAttribute("style")),hrefNormalized:"/a"===n.getAttribute("href"),opacity:/^0.5/.test(n.style.opacity),cssFloat:!!n.style.cssFloat,checkOn:"on"===a.value,optSelected:r.selected,getSetAttribute:"t"!==f.className,enctype:!!U.createElement("form").enctype,html5Clone:"<:nav></:nav>"!==U.createElement("nav").cloneNode(!0).outerHTML,boxModel:"CSS1Compat"===U.compatMode,submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,boxSizingReliable:!0,pixelPosition:!1},a.checked=!0,t.noCloneChecked=a.cloneNode(!0).checked,o.disabled=!0,t.optDisabled=!r.disabled;try{delete f.test}catch(e){t.deleteExpando=!1}if(!f.addEventListener&&f.attachEvent&&f.fireEvent&&(f.attachEvent("onclick",p=function(){t.noCloneEvent=!1}),f.cloneNode(!0).fireEvent("onclick"),f.detachEvent("onclick",p)),a=U.createElement("input"),a.value="t",a.setAttribute("type","radio"),t.radioValue="t"===a.value,a.setAttribute("checked","checked"),a.setAttribute("name","t"),f.appendChild(a),s=U.createDocumentFragment(),s.appendChild(f.lastChild),t.checkClone=s.cloneNode(!0).cloneNode(!0).lastChild.checked,t.appendChecked=a.checked,s.removeChild(a),s.appendChild(f),f.attachEvent)for(u in{submit:!0,change:!0,focusin:!0})l="on"+u,c=l in f,c||(f.setAttribute(l,"return;"),c="function"==typeof f[l]),t[u+"Bubbles"]=c;return ee(function(){var i,n,o,r,a="padding:0;margin:0;border:0;display:block;overflow:hidden;",s=U.getElementsByTagName("body")[0];s&&(i=U.createElement("div"),i.style.cssText="visibility:hidden;border:0;width:0;height:0;position:static;top:0;margin-top:1px",s.insertBefore(i,s.firstChild),n=U.createElement("div"),i.appendChild(n),n.innerHTML="<table><tr><td></td><td>t</td></tr></table>",o=n.getElementsByTagName("td"),o[0].style.cssText="padding:0;margin:0;border:0;display:none",c=0===o[0].offsetHeight,o[0].style.display="",o[1].style.display="none",t.reliableHiddenOffsets=c&&0===o[0].offsetHeight,n.innerHTML="",n.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",t.boxSizing=4===n.offsetWidth,t.doesNotIncludeMarginInBodyOffset=1!==s.offsetTop,e.getComputedStyle&&(t.pixelPosition="1%"!==(e.getComputedStyle(n,null)||{}).top,t.boxSizingReliable="4px"===(e.getComputedStyle(n,null)||{width:"4px"}).width,r=U.createElement("div"),r.style.cssText=n.style.cssText=a,r.style.marginRight=r.style.width="0",n.style.width="1px",n.appendChild(r),t.reliableMarginRight=!parseFloat((e.getComputedStyle(r,null)||{}).marginRight)),void 0!==n.style.zoom&&(n.innerHTML="",n.style.cssText=a+"width:1px;padding:1px;display:inline;zoom:1",t.inlineBlockNeedsLayout=3===n.offsetWidth,n.style.display="block",n.style.overflow="visible",n.innerHTML="<div></div>",n.firstChild.style.width="5px",t.shrinkWrapBlocks=3!==n.offsetWidth,i.style.zoom=1),s.removeChild(i),i=n=o=r=null)}),s.removeChild(f),i=n=o=r=a=s=f=null,t}();var ve=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,ge=/([A-Z])/g;ee.extend({cache:{},deletedIds:[],uuid:0,expando:"jQuery"+(ee.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(e){return!!(e=e.nodeType?ee.cache[e[ee.expando]]:e[ee.expando])&&!a(e)},data:function(e,i,n,r){if(ee.acceptData(e)){var a,s,l=ee.expando,u="string"==typeof i,c=e.nodeType,p=c?ee.cache:e,f=c?e[l]:e[l]&&l;if(f&&p[f]&&(r||p[f].data)||!u||n!==t)return f||(c?e[l]=f=ee.deletedIds.pop()||ee.guid++:f=l),p[f]||(p[f]={},c||(p[f].toJSON=ee.noop)),"object"!=(void 0===i?"undefined":o()(i))&&"function"!=typeof i||(r?p[f]=ee.extend(p[f],i):p[f].data=ee.extend(p[f].data,i)),a=p[f],r||(a.data||(a.data={}),a=a.data),n!==t&&(a[ee.camelCase(i)]=n),u?null==(s=a[i])&&(s=a[ee.camelCase(i)]):s=a,s}},removeData:function(e,t,i){if(ee.acceptData(e)){var n,o,r,s=e.nodeType,l=s?ee.cache:e,u=s?e[ee.expando]:ee.expando;if(l[u]){if(t&&(n=i?l[u]:l[u].data)){ee.isArray(t)||(t in n?t=[t]:(t=ee.camelCase(t),t=t in n?[t]:t.split(" ")));for(o=0,r=t.length;o<r;o++)delete n[t[o]];if(!(i?a:ee.isEmptyObject)(n))return}(i||(delete l[u].data,a(l[u])))&&(s?ee.cleanData([e],!0):ee.support.deleteExpando||l!=l.window?delete l[u]:l[u]=null)}}},_data:function(e,t,i){return ee.data(e,t,i,!0)},acceptData:function(e){var t=e.nodeName&&ee.noData[e.nodeName.toLowerCase()];return!t||!0!==t&&e.getAttribute("classid")===t}}),ee.fn.extend({data:function(e,i){var n,a,s,l,u,c=this[0],p=0,f=null;if(e===t){if(this.length&&(f=ee.data(c),1===c.nodeType&&!ee._data(c,"parsedAttrs"))){for(s=c.attributes,u=s.length;p<u;p++)l=s[p].name,l.indexOf("data-")||(l=ee.camelCase(l.substring(5)),r(c,l,f[l]));ee._data(c,"parsedAttrs",!0)}return f}return"object"==(void 0===e?"undefined":o()(e))?this.each(function(){ee.data(this,e)}):(n=e.split(".",2),n[1]=n[1]?"."+n[1]:"",a=n[1]+"!",ee.access(this,function(i){if(i===t)return f=this.triggerHandler("getData"+a,[n[0]]),f===t&&c&&(f=ee.data(c,e),f=r(c,e,f)),f===t&&n[1]?this.data(n[0]):f;n[1]=i,this.each(function(){var t=ee(this);t.triggerHandler("setData"+a,n),ee.data(this,e,i),t.triggerHandler("changeData"+a,n)})},null,i,arguments.length>1,null,!1))},removeData:function(e){return this.each(function(){ee.removeData(this,e)})}}),ee.extend({queue:function(e,t,i){var n;if(e)return t=(t||"fx")+"queue",n=ee._data(e,t),i&&(!n||ee.isArray(i)?n=ee._data(e,t,ee.makeArray(i)):n.push(i)),n||[]},dequeue:function(e,t){t=t||"fx";var i=ee.queue(e,t),n=i.length,o=i.shift(),r=ee._queueHooks(e,t),a=function(){ee.dequeue(e,t)};"inprogress"===o&&(o=i.shift(),n--),o&&("fx"===t&&i.unshift("inprogress"),delete r.stop,o.call(e,a,r)),!n&&r&&r.empty.fire()},_queueHooks:function(e,t){var i=t+"queueHooks";return ee._data(e,i)||ee._data(e,i,{empty:ee.Callbacks("once memory").add(function(){ee.removeData(e,t+"queue",!0),ee.removeData(e,i,!0)})})}}),ee.fn.extend({queue:function(e,i){var n=2;return"string"!=typeof e&&(i=e,e="fx",n--),arguments.length<n?ee.queue(this[0],e):i===t?this:this.each(function(){var t=ee.queue(this,e,i);ee._queueHooks(this,e),"fx"===e&&"inprogress"!==t[0]&&ee.dequeue(this,e)})},dequeue:function(e){return this.each(function(){ee.dequeue(this,e)})},delay:function(e,t){return e=ee.fx?ee.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,i){var n=setTimeout(t,e);i.stop=function(){clearTimeout(n)}})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,i){var n,o=1,r=ee.Deferred(),a=this,s=this.length,l=function(){--o||r.resolveWith(a,[a])};for("string"!=typeof e&&(i=e,e=t),e=e||"fx";s--;)(n=ee._data(a[s],e+"queueHooks"))&&n.empty&&(o++,n.empty.add(l));return l(),r.promise(i)}});var _e,be,xe,we=/[\t\r\n]/g,ze=/\r/g,Ae=/^(?:button|input)$/i,Te=/^(?:button|input|object|select|textarea)$/i,ke=/^a(?:rea|)$/i,Se=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,Ee=ee.support.getSetAttribute;ee.fn.extend({attr:function(e,t){return ee.access(this,ee.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){ee.removeAttr(this,e)})},prop:function(e,t){return ee.access(this,ee.prop,e,t,arguments.length>1)},removeProp:function(e){return e=ee.propFix[e]||e,this.each(function(){try{this[e]=t,delete this[e]}catch(e){}})},addClass:function(e){var t,i,n,o,r,a,s;if(ee.isFunction(e))return this.each(function(t){ee(this).addClass(e.call(this,t,this.className))});if(e&&"string"==typeof e)for(t=e.split(ne),i=0,n=this.length;i<n;i++)if(o=this[i],1===o.nodeType)if(o.className||1!==t.length){for(r=" "+o.className+" ",a=0,s=t.length;a<s;a++)r.indexOf(" "+t[a]+" ")<0&&(r+=t[a]+" ");o.className=ee.trim(r)}else o.className=e;return this},removeClass:function(e){var i,n,o,r,a,s,l;if(ee.isFunction(e))return this.each(function(t){ee(this).removeClass(e.call(this,t,this.className))});if(e&&"string"==typeof e||e===t)for(i=(e||"").split(ne),s=0,l=this.length;s<l;s++)if(o=this[s],1===o.nodeType&&o.className){for(n=(" "+o.className+" ").replace(we," "),r=0,a=i.length;r<a;r++)for(;n.indexOf(" "+i[r]+" ")>=0;)n=n.replace(" "+i[r]+" "," ");o.className=e?ee.trim(n):""}return this},toggleClass:function(e,t){var i=void 0===e?"undefined":o()(e),n="boolean"==typeof t;return ee.isFunction(e)?this.each(function(i){ee(this).toggleClass(e.call(this,i,this.className,t),t)}):this.each(function(){if("string"===i)for(var o,r=0,a=ee(this),s=t,l=e.split(ne);o=l[r++];)s=n?s:!a.hasClass(o),a[s?"addClass":"removeClass"](o);else"undefined"!==i&&"boolean"!==i||(this.className&&ee._data(this,"__className__",this.className),this.className=this.className||!1===e?"":ee._data(this,"__className__")||"")})},hasClass:function(e){for(var t=" "+e+" ",i=0,n=this.length;i<n;i++)if(1===this[i].nodeType&&(" "+this[i].className+" ").replace(we," ").indexOf(t)>=0)return!0;return!1},val:function(e){var i,n,o,r=this[0];{if(arguments.length)return o=ee.isFunction(e),this.each(function(n){var r,a=ee(this);1===this.nodeType&&(r=o?e.call(this,n,a.val()):e,null==r?r="":"number"==typeof r?r+="":ee.isArray(r)&&(r=ee.map(r,function(e){return null==e?"":e+""})),i=ee.valHooks[this.type]||ee.valHooks[this.nodeName.toLowerCase()],i&&"set"in i&&i.set(this,r,"value")!==t||(this.value=r))});if(r)return i=ee.valHooks[r.type]||ee.valHooks[r.nodeName.toLowerCase()],i&&"get"in i&&(n=i.get(r,"value"))!==t?n:(n=r.value,"string"==typeof n?n.replace(ze,""):null==n?"":n)}}}),ee.extend({valHooks:{option:{get:function(e){var t=e.attributes.value;return!t||t.specified?e.value:e.text}},select:{get:function(e){for(var t,i,n=e.options,o=e.selectedIndex,r="select-one"===e.type||o<0,a=r?null:[],s=r?o+1:n.length,l=o<0?s:r?o:0;l<s;l++)if(i=n[l],(i.selected||l===o)&&(ee.support.optDisabled?!i.disabled:null===i.getAttribute("disabled"))&&(!i.parentNode.disabled||!ee.nodeName(i.parentNode,"optgroup"))){if(t=ee(i).val(),r)return t;a.push(t)}return a},set:function(e,t){var i=ee.makeArray(t);return ee(e).find("option").each(function(){this.selected=ee.inArray(ee(this).val(),i)>=0}),i.length||(e.selectedIndex=-1),i}}},attrFn:{},attr:function(e,i,n,o){var r,a,s,l=e.nodeType;if(e&&3!==l&&8!==l&&2!==l)return o&&ee.isFunction(ee.fn[i])?ee(e)[i](n):void 0===e.getAttribute?ee.prop(e,i,n):((s=1!==l||!ee.isXMLDoc(e))&&(i=i.toLowerCase(),a=ee.attrHooks[i]||(Se.test(i)?be:_e)),n!==t?null===n?void ee.removeAttr(e,i):a&&"set"in a&&s&&(r=a.set(e,n,i))!==t?r:(e.setAttribute(i,n+""),n):a&&"get"in a&&s&&null!==(r=a.get(e,i))?r:(r=e.getAttribute(i),null===r?t:r))},removeAttr:function(e,t){var i,n,o,r,a=0;if(t&&1===e.nodeType)for(n=t.split(ne);a<n.length;a++)(o=n[a])&&(i=ee.propFix[o]||o,r=Se.test(o),r||ee.attr(e,o,""),e.removeAttribute(Ee?o:i),r&&i in e&&(e[i]=!1))},attrHooks:{type:{set:function(e,t){if(Ae.test(e.nodeName)&&e.parentNode)ee.error("type property can't be changed");else if(!ee.support.radioValue&&"radio"===t&&ee.nodeName(e,"input")){var i=e.value;return e.setAttribute("type",t),i&&(e.value=i),t}}},value:{get:function(e,t){return _e&&ee.nodeName(e,"button")?_e.get(e,t):t in e?e.value:null},set:function(e,t,i){if(_e&&ee.nodeName(e,"button"))return _e.set(e,t,i);e.value=t}}},propFix:{tabindex:"tabIndex",readonly:"readOnly",for:"htmlFor",class:"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(e,i,n){var o,r,a,s=e.nodeType;if(e&&3!==s&&8!==s&&2!==s)return a=1!==s||!ee.isXMLDoc(e),a&&(i=ee.propFix[i]||i,r=ee.propHooks[i]),n!==t?r&&"set"in r&&(o=r.set(e,n,i))!==t?o:e[i]=n:r&&"get"in r&&null!==(o=r.get(e,i))?o:e[i]},propHooks:{tabIndex:{get:function(e){var i=e.getAttributeNode("tabindex");return i&&i.specified?parseInt(i.value,10):Te.test(e.nodeName)||ke.test(e.nodeName)&&e.href?0:t}}}}),be={get:function(e,i){var n,o=ee.prop(e,i);return!0===o||"boolean"!=typeof o&&(n=e.getAttributeNode(i))&&!1!==n.nodeValue?i.toLowerCase():t},set:function(e,t,i){var n;return!1===t?ee.removeAttr(e,i):(n=ee.propFix[i]||i,n in e&&(e[n]=!0),e.setAttribute(i,i.toLowerCase())),i}},Ee||(xe={name:!0,id:!0,coords:!0},_e=ee.valHooks.button={get:function(e,i){var n;return n=e.getAttributeNode(i),n&&(xe[i]?""!==n.value:n.specified)?n.value:t},set:function(e,t,i){var n=e.getAttributeNode(i);return n||(n=U.createAttribute(i),e.setAttributeNode(n)),n.value=t+""}},ee.each(["width","height"],function(e,t){ee.attrHooks[t]=ee.extend(ee.attrHooks[t],{set:function(e,i){if(""===i)return e.setAttribute(t,"auto"),i}})}),ee.attrHooks.contenteditable={get:_e.get,set:function(e,t,i){""===t&&(t="false"),_e.set(e,t,i)}}),ee.support.hrefNormalized||ee.each(["href","src","width","height"],function(e,i){ee.attrHooks[i]=ee.extend(ee.attrHooks[i],{get:function(e){var n=e.getAttribute(i,2);return null===n?t:n}})}),ee.support.style||(ee.attrHooks.style={get:function(e){return e.style.cssText.toLowerCase()||t},set:function(e,t){return e.style.cssText=t+""}}),ee.support.optSelected||(ee.propHooks.selected=ee.extend(ee.propHooks.selected,{get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}})),ee.support.enctype||(ee.propFix.enctype="encoding"),ee.support.checkOn||ee.each(["radio","checkbox"],function(){ee.valHooks[this]={get:function(e){return null===e.getAttribute("value")?"on":e.value}}}),ee.each(["radio","checkbox"],function(){ee.valHooks[this]=ee.extend(ee.valHooks[this],{set:function(e,t){if(ee.isArray(t))return e.checked=ee.inArray(ee(e).val(),t)>=0}})});var Ce=/^(?:textarea|input|select)$/i,Me=/^([^\.]*|)(?:\.(.+)|)$/,Ie=/(?:^|\s)hover(\.\S+|)\b/,Le=/^key/,Re=/^(?:mouse|contextmenu)|click/,Pe=/^(?:focusinfocus|focusoutblur)$/,De=function(e){return ee.event.special.hover?e:e.replace(Ie,"mouseenter$1 mouseleave$1")};ee.event={add:function(e,i,n,o,r){var a,s,l,u,c,p,f,d,h,m,y;if(3!==e.nodeType&&8!==e.nodeType&&i&&n&&(a=ee._data(e))){for(n.handler&&(h=n,n=h.handler,r=h.selector),n.guid||(n.guid=ee.guid++),l=a.events,l||(a.events=l={}),s=a.handle,s||(a.handle=s=function(e){return void 0===ee||e&&ee.event.triggered===e.type?t:ee.event.dispatch.apply(s.elem,arguments)},s.elem=e),i=ee.trim(De(i)).split(" "),u=0;u<i.length;u++)c=Me.exec(i[u])||[],p=c[1],f=(c[2]||"").split(".").sort(),y=ee.event.special[p]||{},p=(r?y.delegateType:y.bindType)||p,y=ee.event.special[p]||{},d=ee.extend({type:p,origType:c[1],data:o,handler:n,guid:n.guid,selector:r,needsContext:r&&ee.expr.match.needsContext.test(r),namespace:f.join(".")},h),m=l[p],m||(m=l[p]=[],m.delegateCount=0,y.setup&&!1!==y.setup.call(e,o,f,s)||(e.addEventListener?e.addEventListener(p,s,!1):e.attachEvent&&e.attachEvent("on"+p,s))),y.add&&(y.add.call(e,d),d.handler.guid||(d.handler.guid=n.guid)),r?m.splice(m.delegateCount++,0,d):m.push(d),ee.event.global[p]=!0;e=null}},global:{},remove:function(e,t,i,n,o){var r,a,s,l,u,c,p,f,d,h,m,y=ee.hasData(e)&&ee._data(e);if(y&&(f=y.events)){for(t=ee.trim(De(t||"")).split(" "),r=0;r<t.length;r++)if(a=Me.exec(t[r])||[],s=l=a[1],u=a[2],s){for(d=ee.event.special[s]||{},s=(n?d.delegateType:d.bindType)||s,h=f[s]||[],c=h.length,u=u?new RegExp("(^|\\.)"+u.split(".").sort().join("\\.(?:.*\\.|)")+"(\\.|$)"):null,p=0;p<h.length;p++)m=h[p],(o||l===m.origType)&&(!i||i.guid===m.guid)&&(!u||u.test(m.namespace))&&(!n||n===m.selector||"**"===n&&m.selector)&&(h.splice(p--,1),m.selector&&h.delegateCount--,d.remove&&d.remove.call(e,m));0===h.length&&c!==h.length&&((!d.teardown||!1===d.teardown.call(e,u,y.handle))&&ee.removeEvent(e,s,y.handle),delete f[s])}else for(s in f)ee.event.remove(e,s+t[r],i,n,!0);ee.isEmptyObject(f)&&(delete y.handle,ee.removeData(e,"events",!0))}},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(i,n,r,a){if(!r||3!==r.nodeType&&8!==r.nodeType){var s,l,u,c,p,f,d,h,m,y,v=i.type||i,g=[];if(Pe.test(v+ee.event.triggered))return;if(v.indexOf("!")>=0&&(v=v.slice(0,-1),l=!0),v.indexOf(".")>=0&&(g=v.split("."),v=g.shift(),g.sort()),(!r||ee.event.customEvent[v])&&!ee.event.global[v])return;if(i="object"==(void 0===i?"undefined":o()(i))?i[ee.expando]?i:new ee.Event(v,i):new ee.Event(v),i.type=v,i.isTrigger=!0,i.exclusive=l,i.namespace=g.join("."),i.namespace_re=i.namespace?new RegExp("(^|\\.)"+g.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,f=v.indexOf(":")<0?"on"+v:"",!r){s=ee.cache;for(u in s)s[u].events&&s[u].events[v]&&ee.event.trigger(i,n,s[u].handle.elem,!0);return}if(i.result=t,i.target||(i.target=r),n=null!=n?ee.makeArray(n):[],n.unshift(i),d=ee.event.special[v]||{},d.trigger&&!1===d.trigger.apply(r,n))return;if(m=[[r,d.bindType||v]],!a&&!d.noBubble&&!ee.isWindow(r)){for(y=d.delegateType||v,c=Pe.test(y+v)?r:r.parentNode,p=r;c;c=c.parentNode)m.push([c,y]),p=c;p===(r.ownerDocument||U)&&m.push([p.defaultView||p.parentWindow||e,y])}for(u=0;u<m.length&&!i.isPropagationStopped();u++)c=m[u][0],i.type=m[u][1],h=(ee._data(c,"events")||{})[i.type]&&ee._data(c,"handle"),h&&h.apply(c,n),(h=f&&c[f])&&ee.acceptData(c)&&h.apply&&!1===h.apply(c,n)&&i.preventDefault();return i.type=v,!a&&!i.isDefaultPrevented()&&(!d._default||!1===d._default.apply(r.ownerDocument,n))&&("click"!==v||!ee.nodeName(r,"a"))&&ee.acceptData(r)&&f&&r[v]&&("focus"!==v&&"blur"!==v||0!==i.target.offsetWidth)&&!ee.isWindow(r)&&(p=r[f],p&&(r[f]=null),ee.event.triggered=v,r[v](),ee.event.triggered=t,p&&(r[f]=p)),i.result}},dispatch:function(i){i=ee.event.fix(i||e.event);var n,o,r,a,s,l,u,c,p,f=(ee._data(this,"events")||{})[i.type]||[],d=f.delegateCount,h=K.call(arguments),m=!i.exclusive&&!i.namespace,y=ee.event.special[i.type]||{},v=[];if(h[0]=i,i.delegateTarget=this,!y.preDispatch||!1!==y.preDispatch.call(this,i)){if(d&&(!i.button||"click"!==i.type))for(r=i.target;r!=this;r=r.parentNode||this)if(!0!==r.disabled||"click"!==i.type){for(s={},u=[],n=0;n<d;n++)c=f[n],p=c.selector,s[p]===t&&(s[p]=c.needsContext?ee(p,this).index(r)>=0:ee.find(p,this,null,[r]).length),s[p]&&u.push(c);u.length&&v.push({elem:r,matches:u})}for(f.length>d&&v.push({elem:this,matches:f.slice(d)}),n=0;n<v.length&&!i.isPropagationStopped();n++)for(l=v[n],i.currentTarget=l.elem,o=0;o<l.matches.length&&!i.isImmediatePropagationStopped();o++)c=l.matches[o],(m||!i.namespace&&!c.namespace||i.namespace_re&&i.namespace_re.test(c.namespace))&&(i.data=c.data,i.handleObj=c,(a=((ee.event.special[c.origType]||{}).handle||c.handler).apply(l.elem,h))!==t&&(i.result=a,!1===a&&(i.preventDefault(),i.stopPropagation())));return y.postDispatch&&y.postDispatch.call(this,i),i.result}},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,i){var n,o,r,a=i.button,s=i.fromElement;return null==e.pageX&&null!=i.clientX&&(n=e.target.ownerDocument||U,o=n.documentElement,r=n.body,e.pageX=i.clientX+(o&&o.scrollLeft||r&&r.scrollLeft||0)-(o&&o.clientLeft||r&&r.clientLeft||0),e.pageY=i.clientY+(o&&o.scrollTop||r&&r.scrollTop||0)-(o&&o.clientTop||r&&r.clientTop||0)),!e.relatedTarget&&s&&(e.relatedTarget=s===e.target?i.toElement:s),!e.which&&a!==t&&(e.which=1&a?1:2&a?3:4&a?2:0),e}},fix:function(e){if(e[ee.expando])return e;var t,i,n=e,o=ee.event.fixHooks[e.type]||{},r=o.props?this.props.concat(o.props):this.props;for(e=ee.Event(n),t=r.length;t;)i=r[--t],e[i]=n[i];return e.target||(e.target=n.srcElement||U),3===e.target.nodeType&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,o.filter?o.filter(e,n):e},special:{load:{noBubble:!0},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(e,t,i){ee.isWindow(this)&&(this.onbeforeunload=i)},teardown:function(e,t){this.onbeforeunload===t&&(this.onbeforeunload=null)}}},simulate:function(e,t,i,n){var o=ee.extend(new ee.Event,i,{type:e,isSimulated:!0,originalEvent:{}});n?ee.event.trigger(o,null,t):ee.event.dispatch.call(t,o),o.isDefaultPrevented()&&i.preventDefault()}},ee.event.handle=ee.event.dispatch,ee.removeEvent=U.removeEventListener?function(e,t,i){e.removeEventListener&&e.removeEventListener(t,i,!1)}:function(e,t,i){var n="on"+t;e.detachEvent&&(void 0===e[n]&&(e[n]=null),e.detachEvent(n,i))},ee.Event=function(e,t){if(!(this instanceof ee.Event))return new ee.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||!1===e.returnValue||e.getPreventDefault&&e.getPreventDefault()?l:s):this.type=e,t&&ee.extend(this,t),this.timeStamp=e&&e.timeStamp||ee.now(),this[ee.expando]=!0},ee.Event.prototype={preventDefault:function(){this.isDefaultPrevented=l;var e=this.originalEvent;e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){this.isPropagationStopped=l;var e=this.originalEvent;e&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=l,this.stopPropagation()},isDefaultPrevented:s,isPropagationStopped:s,isImmediatePropagationStopped:s},ee.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,t){ee.event.special[e]={delegateType:t,bindType:t,handle:function(e){var i,n=this,o=e.relatedTarget,r=e.handleObj;r.selector;return o&&(o===n||ee.contains(n,o))||(e.type=r.origType,i=r.handler.apply(this,arguments),e.type=t),i}}}),ee.support.submitBubbles||(ee.event.special.submit={setup:function(){if(ee.nodeName(this,"form"))return!1;ee.event.add(this,"click._submit keypress._submit",function(e){var i=e.target,n=ee.nodeName(i,"input")||ee.nodeName(i,"button")?i.form:t;n&&!ee._data(n,"_submit_attached")&&(ee.event.add(n,"submit._submit",function(e){e._submit_bubble=!0}),ee._data(n,"_submit_attached",!0))})},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&ee.event.simulate("submit",this.parentNode,e,!0))},teardown:function(){if(ee.nodeName(this,"form"))return!1;ee.event.remove(this,"._submit")}}),ee.support.changeBubbles||(ee.event.special.change={setup:function(){if(Ce.test(this.nodeName))return"checkbox"!==this.type&&"radio"!==this.type||(ee.event.add(this,"propertychange._change",function(e){"checked"===e.originalEvent.propertyName&&(this._just_changed=!0)}),ee.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1),ee.event.simulate("change",this,e,!0)})),!1;ee.event.add(this,"beforeactivate._change",function(e){var t=e.target;Ce.test(t.nodeName)&&!ee._data(t,"_change_attached")&&(ee.event.add(t,"change._change",function(e){this.parentNode&&!e.isSimulated&&!e.isTrigger&&ee.event.simulate("change",this.parentNode,e,!0)}),ee._data(t,"_change_attached",!0))})},handle:function(e){var t=e.target;if(this!==t||e.isSimulated||e.isTrigger||"radio"!==t.type&&"checkbox"!==t.type)return e.handleObj.handler.apply(this,arguments)},teardown:function(){return ee.event.remove(this,"._change"),!Ce.test(this.nodeName)}}),ee.support.focusinBubbles||ee.each({focus:"focusin",blur:"focusout"},function(e,t){var i=0,n=function(e){ee.event.simulate(t,e.target,ee.event.fix(e),!0)};ee.event.special[t]={setup:function(){0==i++&&U.addEventListener(e,n,!0)},teardown:function(){0==--i&&U.removeEventListener(e,n,!0)}}}),ee.fn.extend({on:function(e,i,n,r,a){var l,u;if("object"==(void 0===e?"undefined":o()(e))){"string"!=typeof i&&(n=n||i,i=t);for(u in e)this.on(u,i,n,e[u],a);return this}if(null==n&&null==r?(r=i,n=i=t):null==r&&("string"==typeof i?(r=n,n=t):(r=n,n=i,i=t)),!1===r)r=s;else if(!r)return this;return 1===a&&(l=r,r=function(e){return ee().off(e),l.apply(this,arguments)},r.guid=l.guid||(l.guid=ee.guid++)),this.each(function(){ee.event.add(this,e,r,n,i)})},one:function(e,t,i,n){return this.on(e,t,i,n,1)},off:function(e,i,n){var r,a;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,ee(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==(void 0===e?"undefined":o()(e))){for(a in e)this.off(a,i,e[a]);return this}return!1!==i&&"function"!=typeof i||(n=i,i=t),!1===n&&(n=s),this.each(function(){ee.event.remove(this,e,n,i)})},bind:function(e,t,i){return this.on(e,null,t,i)},unbind:function(e,t){return this.off(e,null,t)},live:function(e,t,i){return ee(this.context).on(e,this.selector,t,i),this},die:function(e,t){return ee(this.context).off(e,this.selector||"**",t),this},delegate:function(e,t,i,n){return this.on(t,e,i,n)},undelegate:function(e,t,i){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",i)},trigger:function(e,t){return this.each(function(){ee.event.trigger(e,t,this)})},triggerHandler:function(e,t){if(this[0])return ee.event.trigger(e,t,this[0],!0)},toggle:function(e){var t=arguments,i=e.guid||ee.guid++,n=0,o=function(i){var o=(ee._data(this,"lastToggle"+e.guid)||0)%n;return ee._data(this,"lastToggle"+e.guid,o+1),i.preventDefault(),t[o].apply(this,arguments)||!1};for(o.guid=i;n<t.length;)t[n++].guid=i;return this.click(o)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),ee.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){ee.fn[t]=function(e,i){return null==i&&(i=e,e=null),arguments.length>0?this.on(t,null,e,i):this.trigger(t)},Le.test(t)&&(ee.event.fixHooks[t]=ee.event.keyHooks),Re.test(t)&&(ee.event.fixHooks[t]=ee.event.mouseHooks)}),function(e,t){function i(e,t,i,n){i=i||[],t=t||L;var o,r,a,s,l=t.nodeType;if(!e||"string"!=typeof e)return i;if(1!==l&&9!==l)return[];if(!(a=w(t))&&!n&&(o=ie.exec(e)))if(s=o[1]){if(9===l){if(!(r=t.getElementById(s))||!r.parentNode)return i;if(r.id===s)return i.push(r),i}else if(t.ownerDocument&&(r=t.ownerDocument.getElementById(s))&&z(t,r)&&r.id===s)return i.push(r),i}else{if(o[2])return F.apply(i,j.call(t.getElementsByTagName(e),0)),i;if((s=o[3])&&fe&&t.getElementsByClassName)return F.apply(i,j.call(t.getElementsByClassName(s),0)),i}return y(e.replace(Y,"$1"),t,i,n,a)}function n(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function r(e){return function(t){var i=t.nodeName.toLowerCase();return("input"===i||"button"===i)&&t.type===e}}function a(e){return N(function(t){return t=+t,N(function(i,n){for(var o,r=e([],i.length,t),a=r.length;a--;)i[o=r[a]]&&(i[o]=!(n[o]=i[o]))})})}function s(e,t,i){if(e===t)return i;for(var n=e.nextSibling;n;){if(n===t)return-1;n=n.nextSibling}return 1}function l(e,t){var n,o,r,a,s,l,u,c=U[M][e+" "];if(c)return t?0:c.slice(0);for(s=e,l=[],u=b.preFilter;s;){n&&!(o=Q.exec(s))||(o&&(s=s.slice(o[0].length)||s),l.push(r=[])),n=!1,(o=$.exec(s))&&(r.push(n=new I(o.shift())),s=s.slice(n.length),n.type=o[0].replace(Y," "));for(a in b.filter)(o=se[a].exec(s))&&(!u[a]||(o=u[a](o)))&&(r.push(n=new I(o.shift())),s=s.slice(n.length),n.type=a,n.matches=o);if(!n)break}return t?s.length:s?i.error(e):U(e,l).slice(0)}function u(e,t,i){var n=t.dir,o=i&&"parentNode"===t.dir,r=D++;return t.first?function(t,i,r){for(;t=t[n];)if(o||1===t.nodeType)return e(t,i,r)}:function(t,i,a){if(a){for(;t=t[n];)if((o||1===t.nodeType)&&e(t,i,a))return t}else for(var s,l=P+" "+r+" ",u=l+g;t=t[n];)if(o||1===t.nodeType){if((s=t[M])===u)return t.sizset;if("string"==typeof s&&0===s.indexOf(l)){if(t.sizset)return t}else{if(t[M]=u,e(t,i,a))return t.sizset=!0,t;t.sizset=!1}}}}function c(e){return e.length>1?function(t,i,n){for(var o=e.length;o--;)if(!e[o](t,i,n))return!1;return!0}:e[0]}function p(e,t,i,n,o){for(var r,a=[],s=0,l=e.length,u=null!=t;s<l;s++)(r=e[s])&&(i&&!i(r,n,o)||(a.push(r),u&&t.push(s)));return a}function f(e,t,i,n,o,r){return n&&!n[M]&&(n=f(n)),o&&!o[M]&&(o=f(o,r)),N(function(r,a,s,l){var u,c,f,d=[],h=[],y=a.length,v=r||m(t||"*",s.nodeType?[s]:s,[]),g=!e||!r&&t?v:p(v,d,e,s,l),_=i?o||(r?e:y||n)?[]:a:g;if(i&&i(g,_,s,l),n)for(u=p(_,h),n(u,[],s,l),c=u.length;c--;)(f=u[c])&&(_[h[c]]=!(g[h[c]]=f));if(r){if(o||e){if(o){for(u=[],c=_.length;c--;)(f=_[c])&&u.push(g[c]=f);o(null,_=[],u,l)}for(c=_.length;c--;)(f=_[c])&&(u=o?O.call(r,f):d[c])>-1&&(r[u]=!(a[u]=f))}}else _=p(_===a?_.splice(y,_.length):_),o?o(null,a,_,l):F.apply(a,_)})}function d(e){for(var t,i,n,o=e.length,r=b.relative[e[0].type],a=r||b.relative[" "],s=r?1:0,l=u(function(e){return e===t},a,!0),p=u(function(e){return O.call(t,e)>-1},a,!0),h=[function(e,i,n){return!r&&(n||i!==S)||((t=i).nodeType?l(e,i,n):p(e,i,n))}];s<o;s++)if(i=b.relative[e[s].type])h=[u(c(h),i)];else{if(i=b.filter[e[s].type].apply(null,e[s].matches),i[M]){for(n=++s;n<o&&!b.relative[e[n].type];n++);return f(s>1&&c(h),s>1&&e.slice(0,s-1).join("").replace(Y,"$1"),i,s<n&&d(e.slice(s,n)),n<o&&d(e=e.slice(n)),n<o&&e.join(""))}h.push(i)}return c(h)}function h(e,t){var n=t.length>0,o=e.length>0,r=function r(a,s,l,u,c){var f,d,h,m=[],y=0,v="0",_=a&&[],x=null!=c,w=S,z=a||o&&b.find.TAG("*",c&&s.parentNode||s),A=P+=null==w?1:Math.E;for(x&&(S=s!==L&&s,g=r.el);null!=(f=z[v]);v++){if(o&&f){for(d=0;h=e[d];d++)if(h(f,s,l)){u.push(f);break}x&&(P=A,g=++r.el)}n&&((f=!h&&f)&&y--,a&&_.push(f))}if(y+=v,n&&v!==y){for(d=0;h=t[d];d++)h(_,m,s,l);if(a){if(y>0)for(;v--;)!_[v]&&!m[v]&&(m[v]=B.call(u));m=p(m)}F.apply(u,m),x&&!a&&m.length>0&&y+t.length>1&&i.uniqueSort(u)}return x&&(P=A,S=w),_};return r.el=0,n?N(r):r}function m(e,t,n){for(var o=0,r=t.length;o<r;o++)i(e,t[o],n);return n}function y(e,t,i,n,o){var r,a,s,u,c,p=l(e);p.length;if(!n&&1===p.length){if(a=p[0]=p[0].slice(0),a.length>2&&"ID"===(s=a[0]).type&&9===t.nodeType&&!o&&b.relative[a[1].type]){if(!(t=b.find.ID(s.matches[0].replace(ae,""),t,o)[0]))return i;e=e.slice(a.shift().length)}for(r=se.POS.test(e)?-1:a.length-1;r>=0&&(s=a[r],!b.relative[u=s.type]);r--)if((c=b.find[u])&&(n=c(s.matches[0].replace(ae,""),ne.test(a[0].type)&&t.parentNode||t,o))){if(a.splice(r,1),!(e=n.length&&a.join("")))return F.apply(i,j.call(n,0)),i;break}}return A(e,p)(n,t,o,i,ne.test(e)),i}function v(){}var g,_,b,x,w,z,A,T,k,S,E=!0,C="undefined",M=("sizcache"+Math.random()).replace(".",""),I=String,L=e.document,R=L.documentElement,P=0,D=0,B=[].pop,F=[].push,j=[].slice,O=[].indexOf||function(e){for(var t=0,i=this.length;t<i;t++)if(this[t]===e)return t;return-1},N=function(e,t){return e[M]=null==t||t,e},V=function(){var e={},t=[];return N(function(i,n){return t.push(i)>b.cacheLength&&delete e[t.shift()],e[i+" "]=n},e)},q=V(),U=V(),Z=V(),W="[\\x20\\t\\r\\n\\f]",G="(?:\\\\.|[-\\w]|[^\\x00-\\xa0])+",H=G.replace("w","w#"),X="\\["+W+"*("+G+")"+W+"*(?:([*^$|!~]?=)"+W+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+H+")|)|)"+W+"*\\]",K=":("+G+")(?:\\((?:(['\"])((?:\\\\.|[^\\\\])*?)\\2|([^()[\\]]*|(?:(?:"+X+")|[^:]|\\\\.)*|.*))\\)|)",J=":(even|odd|eq|gt|lt|nth|first|last)(?:\\("+W+"*((?:-\\d)?\\d*)"+W+"*\\)|)(?=[^-]|$)",Y=new RegExp("^"+W+"+|((?:^|[^\\\\])(?:\\\\.)*)"+W+"+$","g"),Q=new RegExp("^"+W+"*,"+W+"*"),$=new RegExp("^"+W+"*([\\x20\\t\\r\\n\\f>+~])"+W+"*"),te=new RegExp(K),ie=/^(?:#([\w\-]+)|(\w+)|\.([\w\-]+))$/,ne=/[\x20\t\r\n\f]*[+~]/,oe=/h\d/i,re=/input|select|textarea|button/i,ae=/\\(?!\\)/g,se={ID:new RegExp("^#("+G+")"),CLASS:new RegExp("^\\.("+G+")"),NAME:new RegExp("^\\[name=['\"]?("+G+")['\"]?\\]"),TAG:new RegExp("^("+G.replace("w","w*")+")"),ATTR:new RegExp("^"+X),PSEUDO:new RegExp("^"+K),POS:new RegExp(J,"i"),CHILD:new RegExp("^:(only|nth|first|last)-child(?:\\("+W+"*(even|odd|(([+-]|)(\\d*)n|)"+W+"*(?:([+-]|)"+W+"*(\\d+)|))"+W+"*\\)|)","i"),needsContext:new RegExp("^"+W+"*[>+~]|"+J,"i")},le=function(e){var t=L.createElement("div");try{return e(t)}catch(e){return!1}finally{t=null}},ue=le(function(e){return e.appendChild(L.createComment("")),!e.getElementsByTagName("*").length}),ce=le(function(e){return e.innerHTML="<a href='#'></a>",e.firstChild&&o()(e.firstChild.getAttribute)!==C&&"#"===e.firstChild.getAttribute("href")}),pe=le(function(e){e.innerHTML="<select></select>";var t=o()(e.lastChild.getAttribute("multiple"));return"boolean"!==t&&"string"!==t}),fe=le(function(e){return e.innerHTML="<div class='hidden e'></div><div class='hidden'></div>",!(!e.getElementsByClassName||!e.getElementsByClassName("e").length)&&(e.lastChild.className="e",2===e.getElementsByClassName("e").length)}),de=le(function(e){e.id=M+0,e.innerHTML="<a name='"+M+"'></a><div name='"+M+"'></div>",R.insertBefore(e,R.firstChild);var t=L.getElementsByName&&L.getElementsByName(M).length===2+L.getElementsByName(M+0).length;return _=!L.getElementById(M),R.removeChild(e),t});try{j.call(R.childNodes,0)[0].nodeType}catch(e){j=function(e){for(var t,i=[];t=this[e];e++)i.push(t);return i}}i.matches=function(e,t){return i(e,null,null,t)},i.matchesSelector=function(e,t){return i(t,null,null,[e]).length>0},x=i.getText=function(e){var t,i="",n=0,o=e.nodeType;if(o){if(1===o||9===o||11===o){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)i+=x(e)}else if(3===o||4===o)return e.nodeValue}else for(;t=e[n];n++)i+=x(t);return i},w=i.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},z=i.contains=R.contains?function(e,t){var i=9===e.nodeType?e.documentElement:e,n=t&&t.parentNode;return e===n||!!(n&&1===n.nodeType&&i.contains&&i.contains(n))}:R.compareDocumentPosition?function(e,t){return t&&!!(16&e.compareDocumentPosition(t))}:function(e,t){for(;t=t.parentNode;)if(t===e)return!0;return!1},i.attr=function(e,t){var i,n=w(e);return n||(t=t.toLowerCase()),(i=b.attrHandle[t])?i(e):n||pe?e.getAttribute(t):(i=e.getAttributeNode(t),i?"boolean"==typeof e[t]?e[t]?t:null:i.specified?i.value:null:null)},b=i.selectors={cacheLength:50,createPseudo:N,match:se,attrHandle:ce?{}:{href:function(e){return e.getAttribute("href",2)},type:function(e){return e.getAttribute("type")}},find:{ID:_?function(e,t,i){if(o()(t.getElementById)!==C&&!i){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}}:function(e,t,i){if(o()(t.getElementById)!==C&&!i){var n=t.getElementById(e);return n?n.id===e||o()(n.getAttributeNode)!==C&&n.getAttributeNode("id").value===e?[n]:void 0:[]}},TAG:ue?function(e,t){if(o()(t.getElementsByTagName)!==C)return t.getElementsByTagName(e)}:function(e,t){var i=t.getElementsByTagName(e);if("*"===e){for(var n,o=[],r=0;n=i[r];r++)1===n.nodeType&&o.push(n);return o}return i},NAME:de&&function(e,t){if(o()(t.getElementsByName)!==C)return t.getElementsByName(name)},CLASS:fe&&function(e,t,i){if(o()(t.getElementsByClassName)!==C&&!i)return t.getElementsByClassName(e)}},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(ae,""),e[3]=(e[4]||e[5]||"").replace(ae,""),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1]?(e[2]||i.error(e[0]),e[3]=+(e[3]?e[4]+(e[5]||1):2*("even"===e[2]||"odd"===e[2])),e[4]=+(e[6]+e[7]||"odd"===e[2])):e[2]&&i.error(e[0]),e},PSEUDO:function(e){var t,i;return se.CHILD.test(e[0])?null:(e[3]?e[2]=e[3]:(t=e[4])&&(te.test(t)&&(i=l(t,!0))&&(i=t.indexOf(")",t.length-i)-t.length)&&(t=t.slice(0,i),e[0]=e[0].slice(0,i)),e[2]=t),e.slice(0,3))}},filter:{ID:_?function(e){return e=e.replace(ae,""),function(t){return t.getAttribute("id")===e}}:function(e){return e=e.replace(ae,""),function(t){var i=o()(t.getAttributeNode)!==C&&t.getAttributeNode("id");return i&&i.value===e}},TAG:function(e){return"*"===e?function(){return!0}:(e=e.replace(ae,"").toLowerCase(),function(t){return t.nodeName&&t.nodeName.toLowerCase()===e})},CLASS:function(e){var t=q[M][e+" "];return t||(t=new RegExp("(^|"+W+")"+e+"("+W+"|$)"))&&q(e,function(e){return t.test(e.className||o()(e.getAttribute)!==C&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(o,r){var a=i.attr(o,e);return null==a?"!="===t:!t||(a+="","="===t?a===n:"!="===t?a!==n:"^="===t?n&&0===a.indexOf(n):"*="===t?n&&a.indexOf(n)>-1:"$="===t?n&&a.substr(a.length-n.length)===n:"~="===t?(" "+a+" ").indexOf(n)>-1:"|="===t&&(a===n||a.substr(0,n.length+1)===n+"-"))}},CHILD:function(e,t,i,n){return"nth"===e?function(e){var t,o,r=e.parentNode;if(1===i&&0===n)return!0;if(r)for(o=0,t=r.firstChild;t&&(1!==t.nodeType||(o++,e!==t));t=t.nextSibling);return(o-=n)===i||o%i==0&&o/i>=0}:function(t){var i=t;switch(e){case"only":case"first":for(;i=i.previousSibling;)if(1===i.nodeType)return!1;if("first"===e)return!0;i=t;case"last":for(;i=i.nextSibling;)if(1===i.nodeType)return!1;return!0}}},PSEUDO:function(e,t){var n,o=b.pseudos[e]||b.setFilters[e.toLowerCase()]||i.error("unsupported pseudo: "+e);return o[M]?o(t):o.length>1?(n=[e,e,"",t],b.setFilters.hasOwnProperty(e.toLowerCase())?N(function(e,i){for(var n,r=o(e,t),a=r.length;a--;)n=O.call(e,r[a]),e[n]=!(i[n]=r[a])}):function(e){return o(e,0,n)}):o}},pseudos:{not:N(function(e){var t=[],i=[],n=A(e.replace(Y,"$1"));return n[M]?N(function(e,t,i,o){for(var r,a=n(e,null,o,[]),s=e.length;s--;)(r=a[s])&&(e[s]=!(t[s]=r))}):function(e,o,r){return t[0]=e,n(t,null,r,i),!i.pop()}}),has:N(function(e){return function(t){return i(e,t).length>0}}),contains:N(function(e){return function(t){return(t.textContent||t.innerText||x(t)).indexOf(e)>-1}}),enabled:function(e){return!1===e.disabled},disabled:function(e){return!0===e.disabled},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},parent:function(e){return!b.pseudos.empty(e)},empty:function(e){var t;for(e=e.firstChild;e;){if(e.nodeName>"@"||3===(t=e.nodeType)||4===t)return!1;e=e.nextSibling}return!0},header:function(e){return oe.test(e.nodeName)},text:function(e){var t,i;return"input"===e.nodeName.toLowerCase()&&"text"===(t=e.type)&&(null==(i=e.getAttribute("type"))||i.toLowerCase()===t)},radio:n("radio"),checkbox:n("checkbox"),file:n("file"),password:n("password"),image:n("image"),submit:r("submit"),reset:r("reset"),button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},input:function(e){return re.test(e.nodeName)},focus:function(e){var t=e.ownerDocument;return e===t.activeElement&&(!t.hasFocus||t.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},active:function(e){return e===e.ownerDocument.activeElement},first:a(function(){return[0]}),last:a(function(e,t){return[t-1]}),eq:a(function(e,t,i){return[i<0?i+t:i]}),even:a(function(e,t){for(var i=0;i<t;i+=2)e.push(i);return e}),odd:a(function(e,t){for(var i=1;i<t;i+=2)e.push(i);return e}),lt:a(function(e,t,i){for(var n=i<0?i+t:i;--n>=0;)e.push(n);return e}),gt:a(function(e,t,i){for(var n=i<0?i+t:i;++n<t;)e.push(n);return e})}},T=R.compareDocumentPosition?function(e,t){return e===t?(k=!0,0):(e.compareDocumentPosition&&t.compareDocumentPosition?4&e.compareDocumentPosition(t):e.compareDocumentPosition)?-1:1}:function(e,t){if(e===t)return k=!0,0;if(e.sourceIndex&&t.sourceIndex)return e.sourceIndex-t.sourceIndex;var i,n,o=[],r=[],a=e.parentNode,l=t.parentNode,u=a;if(a===l)return s(e,t);if(!a)return-1;if(!l)return 1;for(;u;)o.unshift(u),u=u.parentNode;for(u=l;u;)r.unshift(u),u=u.parentNode;i=o.length,n=r.length;for(var c=0;c<i&&c<n;c++)if(o[c]!==r[c])return s(o[c],r[c]);return c===i?s(e,r[c],-1):s(o[c],t,1)},[0,0].sort(T),E=!k,i.uniqueSort=function(e){var t,i=[],n=1,o=0;if(k=E,e.sort(T),k){for(;t=e[n];n++)t===e[n-1]&&(o=i.push(n));for(;o--;)e.splice(i[o],1)}return e},i.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},A=i.compile=function(e,t){var i,n=[],o=[],r=Z[M][e+" "];if(!r){for(t||(t=l(e)),i=t.length;i--;)r=d(t[i]),r[M]?n.push(r):o.push(r);r=Z(e,h(o,n))}return r},L.querySelectorAll&&function(){var e,t=y,n=/'|\\/g,o=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,r=[":focus"],a=[":active"],s=R.matchesSelector||R.mozMatchesSelector||R.webkitMatchesSelector||R.oMatchesSelector||R.msMatchesSelector;le(function(e){e.innerHTML="<select><option selected=''></option></select>",e.querySelectorAll("[selected]").length||r.push("\\["+W+"*(?:checked|disabled|ismap|multiple|readonly|selected|value)"),e.querySelectorAll(":checked").length||r.push(":checked")}),le(function(e){e.innerHTML="<p test=''></p>",e.querySelectorAll("[test^='']").length&&r.push("[*^$]="+W+"*(?:\"\"|'')"),e.innerHTML="<input type='hidden'/>",e.querySelectorAll(":enabled").length||r.push(":enabled",":disabled")}),r=new RegExp(r.join("|")),y=function(e,i,o,a,s){if(!a&&!s&&!r.test(e)){var u,c,p=!0,f=M,d=i,h=9===i.nodeType&&e;if(1===i.nodeType&&"object"!==i.nodeName.toLowerCase()){for(u=l(e),(p=i.getAttribute("id"))?f=p.replace(n,"\\$&"):i.setAttribute("id",f),f="[id='"+f+"'] ",c=u.length;c--;)u[c]=f+u[c].join("");d=ne.test(e)&&i.parentNode||i,h=u.join(",")}if(h)try{return F.apply(o,j.call(d.querySelectorAll(h),0)),o}catch(e){}finally{p||i.removeAttribute("id")}}return t(e,i,o,a,s)},s&&(le(function(t){e=s.call(t,"div");try{s.call(t,"[test!='']:sizzle"),a.push("!=",K)}catch(e){}}),a=new RegExp(a.join("|")),i.matchesSelector=function(t,n){if(n=n.replace(o,"='$1']"),!w(t)&&!a.test(n)&&!r.test(n))try{var l=s.call(t,n);if(l||e||t.document&&11!==t.document.nodeType)return l}catch(e){}return i(n,null,null,[t]).length>0})}(),b.pseudos.nth=b.pseudos.eq,b.filters=v.prototype=b.pseudos,b.setFilters=new v,i.attr=ee.attr,ee.find=i,ee.expr=i.selectors,ee.expr[":"]=ee.expr.pseudos,ee.unique=i.uniqueSort,ee.text=i.getText,ee.isXMLDoc=i.isXML,ee.contains=i.contains}(e);var Be=/Until$/,Fe=/^(?:parents|prev(?:Until|All))/,je=/^.[^:#\[\.,]*$/,Oe=ee.expr.match.needsContext,Ne={children:!0,contents:!0,next:!0,prev:!0};ee.fn.extend({find:function(e){var t,i,n,o,r,a,s=this;if("string"!=typeof e)return ee(e).filter(function(){for(t=0,i=s.length;t<i;t++)if(ee.contains(s[t],this))return!0});for(a=this.pushStack("","find",e),t=0,i=this.length;t<i;t++)if(n=a.length,ee.find(e,this[t],a),t>0)for(o=n;o<a.length;o++)for(r=0;r<n;r++)if(a[r]===a[o]){a.splice(o--,1);break}return a},has:function(e){var t,i=ee(e,this),n=i.length;return this.filter(function(){for(t=0;t<n;t++)if(ee.contains(this,i[t]))return!0})},not:function(e){return this.pushStack(p(this,e,!1),"not",e)},filter:function(e){return this.pushStack(p(this,e,!0),"filter",e)},is:function(e){return!!e&&("string"==typeof e?Oe.test(e)?ee(e,this.context).index(this[0])>=0:ee.filter(e,this).length>0:this.filter(e).length>0)},closest:function(e,t){for(var i,n=0,o=this.length,r=[],a=Oe.test(e)||"string"!=typeof e?ee(e,t||this.context):0;n<o;n++)for(i=this[n];i&&i.ownerDocument&&i!==t&&11!==i.nodeType;){if(a?a.index(i)>-1:ee.find.matchesSelector(i,e)){r.push(i);break}i=i.parentNode}return r=r.length>1?ee.unique(r):r,this.pushStack(r,"closest",e)},index:function(e){return e?"string"==typeof e?ee.inArray(this[0],ee(e)):ee.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.prevAll().length:-1},add:function(e,t){var i="string"==typeof e?ee(e,t):ee.makeArray(e&&e.nodeType?[e]:e),n=ee.merge(this.get(),i);return this.pushStack(u(i[0])||u(n[0])?n:ee.unique(n))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),ee.fn.andSelf=ee.fn.addBack,ee.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return ee.dir(e,"parentNode")},parentsUntil:function(e,t,i){return ee.dir(e,"parentNode",i)},next:function(e){return c(e,"nextSibling")},prev:function(e){return c(e,"previousSibling")},nextAll:function(e){return ee.dir(e,"nextSibling")},prevAll:function(e){return ee.dir(e,"previousSibling")},nextUntil:function(e,t,i){return ee.dir(e,"nextSibling",i)},prevUntil:function(e,t,i){return ee.dir(e,"previousSibling",i)},siblings:function(e){return ee.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return ee.sibling(e.firstChild)},contents:function(e){return ee.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:ee.merge([],e.childNodes)}},function(e,t){ee.fn[e]=function(i,n){var o=ee.map(this,t,i);return Be.test(e)||(n=i),n&&"string"==typeof n&&(o=ee.filter(n,o)),o=this.length>1&&!Ne[e]?ee.unique(o):o,this.length>1&&Fe.test(e)&&(o=o.reverse()),this.pushStack(o,e,K.call(arguments).join(","))}}),ee.extend({filter:function(e,t,i){return i&&(e=":not("+e+")"),1===t.length?ee.find.matchesSelector(t[0],e)?[t[0]]:[]:ee.find.matches(e,t)},dir:function(e,i,n){for(var o=[],r=e[i];r&&9!==r.nodeType&&(n===t||1!==r.nodeType||!ee(r).is(n));)1===r.nodeType&&o.push(r),r=r[i];return o},sibling:function(e,t){for(var i=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&i.push(e);return i}});var Ve="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",qe=/ jQuery\d+="(?:null|\d+)"/g,Ue=/^\s+/,Ze=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,We=/<([\w:]+)/,Ge=/<tbody/i,He=/<|&#?\w+;/,Xe=/<(?:script|style|link)/i,Ke=/<(?:script|object|embed|option|style)/i,Je=new RegExp("<(?:"+Ve+")[\\s/>]","i"),Ye=/^(?:checkbox|radio)$/,Qe=/checked\s*(?:[^=]|=\s*.checked.)/i,$e=/\/(java|ecma)script/i,et=/^\s*<!(?:\[CDATA\[|\-\-)|[\]\-]{2}>\s*$/g,tt={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},it=f(U),nt=it.appendChild(U.createElement("div"));tt.optgroup=tt.option,tt.tbody=tt.tfoot=tt.colgroup=tt.caption=tt.thead,tt.th=tt.td,ee.support.htmlSerialize||(tt._default=[1,"X<div>","</div>"]),ee.fn.extend({text:function(e){return ee.access(this,function(e){return e===t?ee.text(this):this.empty().append((this[0]&&this[0].ownerDocument||U).createTextNode(e))},null,e,arguments.length)},wrapAll:function(e){if(ee.isFunction(e))return this.each(function(t){ee(this).wrapAll(e.call(this,t))});if(this[0]){var t=ee(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstChild&&1===e.firstChild.nodeType;)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return ee.isFunction(e)?this.each(function(t){ee(this).wrapInner(e.call(this,t))}):this.each(function(){var t=ee(this),i=t.contents();i.length?i.wrapAll(e):t.append(e)})},wrap:function(e){var t=ee.isFunction(e);return this.each(function(i){ee(this).wrapAll(t?e.call(this,i):e)})},unwrap:function(){return this.parent().each(function(){ee.nodeName(this,"body")||ee(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(e){(1===this.nodeType||11===this.nodeType)&&this.appendChild(e)})},prepend:function(){return this.domManip(arguments,!0,function(e){(1===this.nodeType||11===this.nodeType)&&this.insertBefore(e,this.firstChild)})},before:function(){if(!u(this[0]))return this.domManip(arguments,!1,function(e){this.parentNode.insertBefore(e,this)});if(arguments.length){var e=ee.clean(arguments);return this.pushStack(ee.merge(e,this),"before",this.selector)}},after:function(){if(!u(this[0]))return this.domManip(arguments,!1,function(e){this.parentNode.insertBefore(e,this.nextSibling)});if(arguments.length){var e=ee.clean(arguments);return this.pushStack(ee.merge(this,e),"after",this.selector)}},remove:function(e,t){for(var i,n=0;null!=(i=this[n]);n++)e&&!ee.filter(e,[i]).length||(!t&&1===i.nodeType&&(ee.cleanData(i.getElementsByTagName("*")),ee.cleanData([i])),i.parentNode&&i.parentNode.removeChild(i));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)for(1===e.nodeType&&ee.cleanData(e.getElementsByTagName("*"));e.firstChild;)e.removeChild(e.firstChild);return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return ee.clone(this,e,t)})},html:function(e){return ee.access(this,function(e){var i=this[0]||{},n=0,o=this.length;if(e===t)return 1===i.nodeType?i.innerHTML.replace(qe,""):t;if("string"==typeof e&&!Xe.test(e)&&(ee.support.htmlSerialize||!Je.test(e))&&(ee.support.leadingWhitespace||!Ue.test(e))&&!tt[(We.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(Ze,"<$1></$2>");try{for(;n<o;n++)i=this[n]||{},1===i.nodeType&&(ee.cleanData(i.getElementsByTagName("*")),i.innerHTML=e);i=0}catch(e){}}i&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(e){return u(this[0])?this.length?this.pushStack(ee(ee.isFunction(e)?e():e),"replaceWith",e):this:ee.isFunction(e)?this.each(function(t){var i=ee(this),n=i.html();i.replaceWith(e.call(this,t,n))}):("string"!=typeof e&&(e=ee(e).detach()),this.each(function(){var t=this.nextSibling,i=this.parentNode;ee(this).remove(),t?ee(t).before(e):ee(i).append(e)}))},detach:function(e){return this.remove(e,!0)},domManip:function(e,i,n){e=[].concat.apply([],e);var o,r,a,s,l=0,u=e[0],c=[],p=this.length;if(!ee.support.checkClone&&p>1&&"string"==typeof u&&Qe.test(u))return this.each(function(){ee(this).domManip(e,i,n)});if(ee.isFunction(u))return this.each(function(o){var r=ee(this);e[0]=u.call(this,o,i?r.html():t),r.domManip(e,i,n)});if(this[0]){if(o=ee.buildFragment(e,this,c),a=o.fragment,r=a.firstChild,1===a.childNodes.length&&(a=r),r)for(i=i&&ee.nodeName(r,"tr"),s=o.cacheable||p-1;l<p;l++)n.call(i&&ee.nodeName(this[l],"table")?d(this[l],"tbody"):this[l],l===s?a:ee.clone(a,!0,!0));a=r=null,c.length&&ee.each(c,function(e,t){t.src?ee.ajax?ee.ajax({url:t.src,type:"GET",dataType:"script",async:!1,global:!1,throws:!0}):ee.error("no ajax"):ee.globalEval((t.text||t.textContent||t.innerHTML||"").replace(et,"")),t.parentNode&&t.parentNode.removeChild(t)})}return this}}),ee.buildFragment=function(e,i,n){var o,r,a,s=e[0];return i=i||U,i=!i.nodeType&&i[0]||i,i=i.ownerDocument||i,1===e.length&&"string"==typeof s&&s.length<512&&i===U&&"<"===s.charAt(0)&&!Ke.test(s)&&(ee.support.checkClone||!Qe.test(s))&&(ee.support.html5Clone||!Je.test(s))&&(r=!0,o=ee.fragments[s],a=o!==t),o||(o=i.createDocumentFragment(),ee.clean(e,i,o,n),r&&(ee.fragments[s]=a&&o)),{fragment:o,cacheable:r}},ee.fragments={},ee.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){ee.fn[e]=function(i){var n,o=0,r=[],a=ee(i),s=a.length,l=1===this.length&&this[0].parentNode;if((null==l||l&&11===l.nodeType&&1===l.childNodes.length)&&1===s)return a[t](this[0]),this;for(;o<s;o++)n=(o>0?this.clone(!0):this).get(),ee(a[o])[t](n),r=r.concat(n);return this.pushStack(r,e,a.selector)}}),ee.extend({clone:function(e,t,i){var n,o,r,a;if(ee.support.html5Clone||ee.isXMLDoc(e)||!Je.test("<"+e.nodeName+">")?a=e.cloneNode(!0):(nt.innerHTML=e.outerHTML,nt.removeChild(a=nt.firstChild)),!(ee.support.noCloneEvent&&ee.support.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||ee.isXMLDoc(e)))for(m(e,a),n=y(e),o=y(a),r=0;n[r];++r)o[r]&&m(n[r],o[r]);if(t&&(h(e,a),i))for(n=y(e),o=y(a),r=0;n[r];++r)h(n[r],o[r]);return n=o=null,a},clean:function(e,t,i,n){var o,r,a,s,l,u,c,p,d,h,m,y=t===U&&it,g=[];for(t&&void 0!==t.createDocumentFragment||(t=U),o=0;null!=(a=e[o]);o++)if("number"==typeof a&&(a+=""),a){if("string"==typeof a)if(He.test(a)){for(y=y||f(t),c=t.createElement("div"),y.appendChild(c),a=a.replace(Ze,"<$1></$2>"),s=(We.exec(a)||["",""])[1].toLowerCase(),l=tt[s]||tt._default,u=l[0],c.innerHTML=l[1]+a+l[2];u--;)c=c.lastChild;if(!ee.support.tbody)for(p=Ge.test(a),d="table"!==s||p?"<table>"!==l[1]||p?[]:c.childNodes:c.firstChild&&c.firstChild.childNodes,r=d.length-1;r>=0;--r)ee.nodeName(d[r],"tbody")&&!d[r].childNodes.length&&d[r].parentNode.removeChild(d[r]);!ee.support.leadingWhitespace&&Ue.test(a)&&c.insertBefore(t.createTextNode(Ue.exec(a)[0]),c.firstChild),a=c.childNodes,c.parentNode.removeChild(c)}else a=t.createTextNode(a);a.nodeType?g.push(a):ee.merge(g,a)}if(c&&(a=c=y=null),!ee.support.appendChecked)for(o=0;null!=(a=g[o]);o++)ee.nodeName(a,"input")?v(a):void 0!==a.getElementsByTagName&&ee.grep(a.getElementsByTagName("input"),v);if(i)for(h=function(e){if(!e.type||$e.test(e.type))return n?n.push(e.parentNode?e.parentNode.removeChild(e):e):i.appendChild(e)},o=0;null!=(a=g[o]);o++)ee.nodeName(a,"script")&&h(a)||(i.appendChild(a),void 0!==a.getElementsByTagName&&(m=ee.grep(ee.merge([],a.getElementsByTagName("script")),h),g.splice.apply(g,[o+1,0].concat(m)),o+=m.length));return g},cleanData:function(e,t){for(var i,n,o,r,a=0,s=ee.expando,l=ee.cache,u=ee.support.deleteExpando,c=ee.event.special;null!=(o=e[a]);a++)if((t||ee.acceptData(o))&&(n=o[s],i=n&&l[n])){if(i.events)for(r in i.events)c[r]?ee.event.remove(o,r):ee.removeEvent(o,r,i.handle);l[n]&&(delete l[n],u?delete o[s]:o.removeAttribute?o.removeAttribute(s):o[s]=null,ee.deletedIds.push(n))}}}),function(){var e,t;ee.uaMatch=function(e){e=e.toLowerCase();var t=/(chrome)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[];return{browser:t[1]||"",version:t[2]||"0"}},e=ee.uaMatch(W.userAgent),t={},e.browser&&(t[e.browser]=!0,t.version=e.version),t.chrome?t.webkit=!0:t.webkit&&(t.safari=!0),ee.browser=t,ee.sub=function(){function e(t,i){return new e.fn.init(t,i)}ee.extend(!0,e,this),e.superclass=this,e.fn=e.prototype=this(),e.fn.constructor=e,e.sub=this.sub,e.fn.init=function(i,n){return n&&n instanceof ee&&!(n instanceof e)&&(n=e(n)),ee.fn.init.call(this,i,n,t)},e.fn.init.prototype=e.fn;var t=e(U);return e}}();var ot,rt,at,st=/alpha\([^)]*\)/i,lt=/opacity=([^)]*)/,ut=/^(top|right|bottom|left)$/,ct=/^(none|table(?!-c[ea]).+)/,pt=/^margin/,ft=new RegExp("^("+te+")(.*)$","i"),dt=new RegExp("^("+te+")(?!px)[a-z%]+$","i"),ht=new RegExp("^([-+])=("+te+")","i"),mt={BODY:"block"},yt={position:"absolute",visibility:"hidden",display:"block"},vt={letterSpacing:0,fontWeight:400},gt=["Top","Right","Bottom","Left"],_t=["Webkit","O","Moz","ms"],bt=ee.fn.toggle;ee.fn.extend({css:function(e,i){return ee.access(this,function(e,i,n){return n!==t?ee.style(e,i,n):ee.css(e,i)},e,i,arguments.length>1)},show:function(){return b(this,!0)},hide:function(){return b(this)},toggle:function(e,t){var i="boolean"==typeof e;return ee.isFunction(e)&&ee.isFunction(t)?bt.apply(this,arguments):this.each(function(){(i?e:_(this))?ee(this).show():ee(this).hide()})}}),ee.extend({cssHooks:{opacity:{get:function(e,t){if(t){var i=ot(e,"opacity");return""===i?"1":i}}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:ee.support.cssFloat?"cssFloat":"styleFloat"},style:function(e,i,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var a,s,l,u=ee.camelCase(i),c=e.style;if(i=ee.cssProps[u]||(ee.cssProps[u]=g(c,u)),l=ee.cssHooks[i]||ee.cssHooks[u],n===t)return l&&"get"in l&&(a=l.get(e,!1,r))!==t?a:c[i];if("string"===(s=void 0===n?"undefined":o()(n))&&(a=ht.exec(n))&&(n=(a[1]+1)*a[2]+parseFloat(ee.css(e,i)),s="number"),!(null==n||"number"===s&&isNaN(n)||("number"===s&&!ee.cssNumber[u]&&(n+="px"),l&&"set"in l&&(n=l.set(e,n,r))===t)))try{c[i]=n}catch(e){}}},css:function(e,i,n,o){var r,a,s,l=ee.camelCase(i);return i=ee.cssProps[l]||(ee.cssProps[l]=g(e.style,l)),s=ee.cssHooks[i]||ee.cssHooks[l],s&&"get"in s&&(r=s.get(e,!0,o)),r===t&&(r=ot(e,i)),"normal"===r&&i in vt&&(r=vt[i]),n||o!==t?(a=parseFloat(r),n||ee.isNumeric(a)?a||0:r):r},swap:function(e,t,i){var n,o,r={};for(o in t)r[o]=e.style[o],e.style[o]=t[o];n=i.call(e);for(o in t)e.style[o]=r[o];return n}}),e.getComputedStyle?ot=function(t,i){var n,o,r,a,s=e.getComputedStyle(t,null),l=t.style;return s&&(n=s.getPropertyValue(i)||s[i],""===n&&!ee.contains(t.ownerDocument,t)&&(n=ee.style(t,i)),dt.test(n)&&pt.test(i)&&(o=l.width,r=l.minWidth,a=l.maxWidth,l.minWidth=l.maxWidth=l.width=n,n=s.width,l.width=o,l.minWidth=r,l.maxWidth=a)),n}:U.documentElement.currentStyle&&(ot=function(e,t){var i,n,o=e.currentStyle&&e.currentStyle[t],r=e.style;return null==o&&r&&r[t]&&(o=r[t]),dt.test(o)&&!ut.test(t)&&(i=r.left,n=e.runtimeStyle&&e.runtimeStyle.left,n&&(e.runtimeStyle.left=e.currentStyle.left),r.left="fontSize"===t?"1em":o,o=r.pixelLeft+"px",r.left=i,n&&(e.runtimeStyle.left=n)),""===o?"auto":o}),ee.each(["height","width"],function(e,t){ee.cssHooks[t]={get:function(e,i,n){if(i)return 0===e.offsetWidth&&ct.test(ot(e,"display"))?ee.swap(e,yt,function(){return z(e,t,n)}):z(e,t,n)},set:function(e,i,n){return x(e,i,n?w(e,t,n,ee.support.boxSizing&&"border-box"===ee.css(e,"boxSizing")):0)}}}),ee.support.opacity||(ee.cssHooks.opacity={get:function(e,t){return lt.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(e,t){var i=e.style,n=e.currentStyle,o=ee.isNumeric(t)?"alpha(opacity="+100*t+")":"",r=n&&n.filter||i.filter||"";i.zoom=1,t>=1&&""===ee.trim(r.replace(st,""))&&i.removeAttribute&&(i.removeAttribute("filter"),n&&!n.filter)||(i.filter=st.test(r)?r.replace(st,o):r+" "+o)}}),ee(function(){ee.support.reliableMarginRight||(ee.cssHooks.marginRight={get:function(e,t){return ee.swap(e,{display:"inline-block"},function(){if(t)return ot(e,"marginRight")})}}),!ee.support.pixelPosition&&ee.fn.position&&ee.each(["top","left"],function(e,t){ee.cssHooks[t]={get:function(e,i){if(i){var n=ot(e,t);return dt.test(n)?ee(e).position()[t]+"px":n}}}})}),ee.expr&&ee.expr.filters&&(ee.expr.filters.hidden=function(e){return 0===e.offsetWidth&&0===e.offsetHeight||!ee.support.reliableHiddenOffsets&&"none"===(e.style&&e.style.display||ot(e,"display"))},ee.expr.filters.visible=function(e){return!ee.expr.filters.hidden(e)}),ee.each({margin:"",padding:"",border:"Width"},function(e,t){ee.cssHooks[e+t]={expand:function(i){var n,o="string"==typeof i?i.split(" "):[i],r={};for(n=0;n<4;n++)r[e+gt[n]+t]=o[n]||o[n-2]||o[0];return r}},pt.test(e)||(ee.cssHooks[e+t].set=x)});var xt=/%20/g,wt=/\[\]$/,zt=/\r?\n/g,At=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,Tt=/^(?:select|textarea)/i;ee.fn.extend({serialize:function(){return ee.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?ee.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||Tt.test(this.nodeName)||At.test(this.type))}).map(function(e,t){var i=ee(this).val();return null==i?null:ee.isArray(i)?ee.map(i,function(e,i){return{name:t.name,value:e.replace(zt,"\r\n")}}):{name:t.name,value:i.replace(zt,"\r\n")}}).get()}}),ee.param=function(e,i){var n,o=[],r=function(e,t){t=ee.isFunction(t)?t():null==t?"":t,o[o.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(i===t&&(i=ee.ajaxSettings&&ee.ajaxSettings.traditional),ee.isArray(e)||e.jquery&&!ee.isPlainObject(e))ee.each(e,function(){r(this.name,this.value)});else for(n in e)T(n,e[n],i,r);return o.join("&").replace(xt,"+")};var kt,St,Et=/#.*$/,Ct=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Mt=/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/,It=/^(?:GET|HEAD)$/,Lt=/^\/\//,Rt=/\?/,Pt=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,Dt=/([?&])_=[^&]*/,Bt=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,Ft=ee.fn.load,jt={},Ot={},Nt=["*/"]+["*"];try{St=Z.href}catch(e){St=U.createElement("a"),St.href="",St=St.href}kt=Bt.exec(St.toLowerCase())||[],ee.fn.load=function(e,i,n){if("string"!=typeof e&&Ft)return Ft.apply(this,arguments);if(!this.length)return this;var r,a,s,l=this,u=e.indexOf(" ");return u>=0&&(r=e.slice(u,e.length),e=e.slice(0,u)),ee.isFunction(i)?(n=i,i=t):i&&"object"==(void 0===i?"undefined":o()(i))&&(a="POST"),ee.ajax({url:e,type:a,dataType:"html",data:i,complete:function(e,t){n&&l.each(n,s||[e.responseText,t,e])}}).done(function(e){s=arguments,l.html(r?ee("<div>").append(e.replace(Pt,"")).find(r):e)}),this},ee.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(e,t){ee.fn[t]=function(e){return this.on(t,e)}}),ee.each(["get","post"],function(e,i){ee[i]=function(e,n,o,r){return ee.isFunction(n)&&(r=r||o,o=n,n=t),ee.ajax({type:i,url:e,data:n,success:o,dataType:r})}}),ee.extend({getScript:function(e,i){return ee.get(e,t,i,"script")},getJSON:function(e,t,i){return ee.get(e,t,i,"json")},ajaxSetup:function(e,t){return t?E(e,ee.ajaxSettings):(t=e,e=ee.ajaxSettings),E(e,t),e},ajaxSettings:{url:St,isLocal:Mt.test(kt[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":Nt},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":e.String,"text html":!0,"text json":ee.parseJSON,"text xml":ee.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:k(jt),ajaxTransport:k(Ot),ajax:function(e,i){function n(e,i,n,o){var s,c,f,_,b,w=i;2!==x&&(x=2,u&&clearTimeout(u),l=t,a=o||"",z.readyState=e>0?4:0,n&&(_=C(d,z,n)),e>=200&&e<300||304===e?(d.ifModified&&(b=z.getResponseHeader("Last-Modified"),b&&(ee.lastModified[r]=b),(b=z.getResponseHeader("Etag"))&&(ee.etag[r]=b)),304===e?(w="notmodified",s=!0):(s=M(d,_),w=s.state,c=s.data,f=s.error,s=!f)):(f=w,w&&!e||(w="error",e<0&&(e=0))),z.status=e,z.statusText=(i||w)+"",s?y.resolveWith(h,[c,w,z]):y.rejectWith(h,[z,w,f]),z.statusCode(g),g=t,p&&m.trigger("ajax"+(s?"Success":"Error"),[z,d,s?c:f]),v.fireWith(h,[z,w]),p&&(m.trigger("ajaxComplete",[z,d]),--ee.active||ee.event.trigger("ajaxStop")))}"object"==(void 0===e?"undefined":o()(e))&&(i=e,e=t),i=i||{};var r,a,s,l,u,c,p,f,d=ee.ajaxSetup({},i),h=d.context||d,m=h!==d&&(h.nodeType||h instanceof ee)?ee(h):ee.event,y=ee.Deferred(),v=ee.Callbacks("once memory"),g=d.statusCode||{},_={},b={},x=0,w="canceled",z={readyState:0,setRequestHeader:function(e,t){if(!x){var i=e.toLowerCase();e=b[i]=b[i]||e,_[e]=t}return this},getAllResponseHeaders:function(){return 2===x?a:null},getResponseHeader:function(e){var i;if(2===x){if(!s)for(s={};i=Ct.exec(a);)s[i[1].toLowerCase()]=i[2];i=s[e.toLowerCase()]}return i===t?null:i},overrideMimeType:function(e){return x||(d.mimeType=e),this},abort:function(e){return e=e||w,l&&l.abort(e),n(0,e),this}};if(y.promise(z),z.success=z.done,z.error=z.fail,z.complete=v.add,z.statusCode=function(e){if(e){var t;if(x<2)for(t in e)g[t]=[g[t],e[t]];else t=e[z.status],z.always(t)}return this},d.url=((e||d.url)+"").replace(Et,"").replace(Lt,kt[1]+"//"),d.dataTypes=ee.trim(d.dataType||"*").toLowerCase().split(ne),null==d.crossDomain&&(c=Bt.exec(d.url.toLowerCase()),d.crossDomain=!(!c||c[1]===kt[1]&&c[2]===kt[2]&&(c[3]||("http:"===c[1]?80:443))==(kt[3]||("http:"===kt[1]?80:443)))),d.data&&d.processData&&"string"!=typeof d.data&&(d.data=ee.param(d.data,d.traditional)),S(jt,d,i,z),2===x)return z;if(p=d.global,d.type=d.type.toUpperCase(),d.hasContent=!It.test(d.type),p&&0==ee.active++&&ee.event.trigger("ajaxStart"),!d.hasContent&&(d.data&&(d.url+=(Rt.test(d.url)?"&":"?")+d.data,delete d.data),r=d.url,!1===d.cache)){var A=ee.now(),T=d.url.replace(Dt,"$1_="+A);d.url=T+(T===d.url?(Rt.test(d.url)?"&":"?")+"_="+A:"")}(d.data&&d.hasContent&&!1!==d.contentType||i.contentType)&&z.setRequestHeader("Content-Type",d.contentType),d.ifModified&&(r=r||d.url,ee.lastModified[r]&&z.setRequestHeader("If-Modified-Since",ee.lastModified[r]),ee.etag[r]&&z.setRequestHeader("If-None-Match",ee.etag[r])),z.setRequestHeader("Accept",d.dataTypes[0]&&d.accepts[d.dataTypes[0]]?d.accepts[d.dataTypes[0]]+("*"!==d.dataTypes[0]?", "+Nt+"; q=0.01":""):d.accepts["*"]);for(f in d.headers)z.setRequestHeader(f,d.headers[f]);if(!d.beforeSend||!1!==d.beforeSend.call(h,z,d)&&2!==x){w="abort";for(f in{success:1,error:1,complete:1})z[f](d[f]);if(l=S(Ot,d,i,z)){z.readyState=1,p&&m.trigger("ajaxSend",[z,d]),d.async&&d.timeout>0&&(u=setTimeout(function(){z.abort("timeout")},d.timeout));try{x=1,l.send(_,n)}catch(e){if(!(x<2))throw e;n(-1,e)}}else n(-1,"No Transport");return z}return z.abort()},active:0,lastModified:{},etag:{}});var Vt=[],qt=/\?/,Ut=/(=)\?(?=&|$)|\?\?/,Zt=ee.now();ee.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Vt.pop()||ee.expando+"_"+Zt++;return this[e]=!0,e}}),ee.ajaxPrefilter("json jsonp",function(i,n,o){var r,a,s,l=i.data,u=i.url,c=!1!==i.jsonp,p=c&&Ut.test(u),f=c&&!p&&"string"==typeof l&&!(i.contentType||"").indexOf("application/x-www-form-urlencoded")&&Ut.test(l);if("jsonp"===i.dataTypes[0]||p||f)return r=i.jsonpCallback=ee.isFunction(i.jsonpCallback)?i.jsonpCallback():i.jsonpCallback,a=e[r],p?i.url=u.replace(Ut,"$1"+r):f?i.data=l.replace(Ut,"$1"+r):c&&(i.url+=(qt.test(u)?"&":"?")+i.jsonp+"="+r),i.converters["script json"]=function(){return s||ee.error(r+" was not called"),s[0]},i.dataTypes[0]="json",e[r]=function(){s=arguments},o.always(function(){e[r]=a,i[r]&&(i.jsonpCallback=n.jsonpCallback,Vt.push(r)),s&&ee.isFunction(a)&&a(s[0]),s=a=t}),"script"}),ee.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(e){return ee.globalEval(e),e}}}),ee.ajaxPrefilter("script",function(e){e.cache===t&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),ee.ajaxTransport("script",function(e){if(e.crossDomain){var i,n=U.head||U.getElementsByTagName("head")[0]||U.documentElement;return{send:function(o,r){i=U.createElement("script"),i.async="async",e.scriptCharset&&(i.charset=e.scriptCharset),i.src=e.url,i.onload=i.onreadystatechange=function(e,o){(o||!i.readyState||/loaded|complete/.test(i.readyState))&&(i.onload=i.onreadystatechange=null,n&&i.parentNode&&n.removeChild(i),i=t,o||r(200,"success"))},n.insertBefore(i,n.firstChild)},abort:function(){i&&i.onload(0,1)}}}});var Wt,Gt=!!e.ActiveXObject&&function(){for(var e in Wt)Wt[e](0,1)},Ht=0;ee.ajaxSettings.xhr=e.ActiveXObject?function(){return!this.isLocal&&I()||L()}:I,function(e){ee.extend(ee.support,{ajax:!!e,cors:!!e&&"withCredentials"in e})}(ee.ajaxSettings.xhr()),ee.support.ajax&&ee.ajaxTransport(function(i){if(!i.crossDomain||ee.support.cors){var n;return{send:function(o,r){var a,s,l=i.xhr();if(i.username?l.open(i.type,i.url,i.async,i.username,i.password):l.open(i.type,i.url,i.async),i.xhrFields)for(s in i.xhrFields)l[s]=i.xhrFields[s];i.mimeType&&l.overrideMimeType&&l.overrideMimeType(i.mimeType),!i.crossDomain&&!o["X-Requested-With"]&&(o["X-Requested-With"]="XMLHttpRequest");try{for(s in o)l.setRequestHeader(s,o[s])}catch(e){}l.send(i.hasContent&&i.data||null),n=function(e,o){var s,u,c,p,f;try{if(n&&(o||4===l.readyState))if(n=t,a&&(l.onreadystatechange=ee.noop,Gt&&delete Wt[a]),o)4!==l.readyState&&l.abort();else{s=l.status,c=l.getAllResponseHeaders(),p={},(f=l.responseXML)&&f.documentElement&&(p.xml=f);try{p.text=l.responseText}catch(e){}try{u=l.statusText}catch(e){u=""}s||!i.isLocal||i.crossDomain?1223===s&&(s=204):s=p.text?200:404}}catch(e){o||r(-1,e)}p&&r(s,u,p,c)},i.async?4===l.readyState?setTimeout(n,0):(a=++Ht,Gt&&(Wt||(Wt={},ee(e).unload(Gt)),Wt[a]=n),l.onreadystatechange=n):n()},abort:function(){n&&n(0,1)}}}});var Xt,Kt,Jt=/^(?:toggle|show|hide)$/,Yt=new RegExp("^(?:([-+])=|)("+te+")([a-z%]*)$","i"),Qt=/queueHooks$/,$t=[F],ei={"*":[function(e,t){var i,n,o=this.createTween(e,t),r=Yt.exec(t),a=o.cur(),s=+a||0,l=1,u=20;if(r){if(i=+r[2],"px"!==(n=r[3]||(ee.cssNumber[e]?"":"px"))&&s){s=ee.css(o.elem,e,!0)||i||1;do{l=l||".5",s/=l,ee.style(o.elem,e,s+n)}while(l!==(l=o.cur()/a)&&1!==l&&--u)}o.unit=n,o.start=s,o.end=r[1]?s+(r[1]+1)*i:i}return o}]};ee.Animation=ee.extend(D,{tweener:function(e,t){ee.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");for(var i,n=0,o=e.length;n<o;n++)i=e[n],ei[i]=ei[i]||[],ei[i].unshift(t)},prefilter:function(e,t){t?$t.unshift(e):$t.push(e)}}),ee.Tween=j,j.prototype={constructor:j,init:function(e,t,i,n,o,r){this.elem=e,this.prop=i,this.easing=o||"swing",this.options=t,this.start=this.now=this.cur(),this.end=n,this.unit=r||(ee.cssNumber[i]?"":"px")},cur:function(){var e=j.propHooks[this.prop];return e&&e.get?e.get(this):j.propHooks._default.get(this)},run:function(e){var t,i=j.propHooks[this.prop];return this.options.duration?this.pos=t=ee.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),i&&i.set?i.set(this):j.propHooks._default.set(this),this}},j.prototype.init.prototype=j.prototype,j.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=ee.css(e.elem,e.prop,!1,""),t&&"auto"!==t?t:0):e.elem[e.prop]},set:function(e){ee.fx.step[e.prop]?ee.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[ee.cssProps[e.prop]]||ee.cssHooks[e.prop])?ee.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},j.propHooks.scrollTop=j.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},ee.each(["toggle","show","hide"],function(e,t){var i=ee.fn[t];ee.fn[t]=function(n,o,r){return null==n||"boolean"==typeof n||!e&&ee.isFunction(n)&&ee.isFunction(o)?i.apply(this,arguments):this.animate(O(t,!0),n,o,r)}}),ee.fn.extend({fadeTo:function(e,t,i,n){return this.filter(_).css("opacity",0).show().end().animate({opacity:t},e,i,n)},animate:function(e,t,i,n){var o=ee.isEmptyObject(e),r=ee.speed(t,i,n),a=function(){var t=D(this,ee.extend({},e),r);o&&t.stop(!0)};return o||!1===r.queue?this.each(a):this.queue(r.queue,a)},stop:function(e,i,n){var o=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=i,i=e,e=t),i&&!1!==e&&this.queue(e||"fx",[]),this.each(function(){var t=!0,i=null!=e&&e+"queueHooks",r=ee.timers,a=ee._data(this);if(i)a[i]&&a[i].stop&&o(a[i]);else for(i in a)a[i]&&a[i].stop&&Qt.test(i)&&o(a[i]);for(i=r.length;i--;)r[i].elem===this&&(null==e||r[i].queue===e)&&(r[i].anim.stop(n),t=!1,r.splice(i,1));(t||!n)&&ee.dequeue(this,e)})}}),ee.each({slideDown:O("show"),slideUp:O("hide"),slideToggle:O("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){ee.fn[e]=function(e,i,n){return this.animate(t,e,i,n)}}),ee.speed=function(e,t,i){var n=e&&"object"==(void 0===e?"undefined":o()(e))?ee.extend({},e):{complete:i||!i&&t||ee.isFunction(e)&&e,duration:e,easing:i&&t||t&&!ee.isFunction(t)&&t};return n.duration=ee.fx.off?0:"number"==typeof n.duration?n.duration:n.duration in ee.fx.speeds?ee.fx.speeds[n.duration]:ee.fx.speeds._default,null!=n.queue&&!0!==n.queue||(n.queue="fx"),n.old=n.complete,n.complete=function(){ee.isFunction(n.old)&&n.old.call(this),n.queue&&ee.dequeue(this,n.queue)},n},ee.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},ee.timers=[],ee.fx=j.prototype.init,ee.fx.tick=function(){var e,i=ee.timers,n=0;for(Xt=ee.now();n<i.length;n++)!(e=i[n])()&&i[n]===e&&i.splice(n--,1);i.length||ee.fx.stop(),Xt=t},ee.fx.timer=function(e){e()&&ee.timers.push(e)&&!Kt&&(Kt=setInterval(ee.fx.tick,ee.fx.interval))},ee.fx.interval=13,ee.fx.stop=function(){clearInterval(Kt),Kt=null},ee.fx.speeds={slow:600,fast:200,_default:400},ee.fx.step={},ee.expr&&ee.expr.filters&&(ee.expr.filters.animated=function(e){return ee.grep(ee.timers,function(t){return e===t.elem}).length});var ti=/^(?:body|html)$/i;ee.fn.offset=function(e){if(arguments.length)return e===t?this:this.each(function(t){ee.offset.setOffset(this,e,t)});var i,n,o,r,a,s,l,u={top:0,left:0},c=this[0],p=c&&c.ownerDocument;if(p)return(n=p.body)===c?ee.offset.bodyOffset(c):(i=p.documentElement,ee.contains(i,c)?(void 0!==c.getBoundingClientRect&&(u=c.getBoundingClientRect()),o=N(p),r=i.clientTop||n.clientTop||0,a=i.clientLeft||n.clientLeft||0,s=o.pageYOffset||i.scrollTop,l=o.pageXOffset||i.scrollLeft,{top:u.top+s-r,left:u.left+l-a}):u)},ee.offset={bodyOffset:function(e){var t=e.offsetTop,i=e.offsetLeft;return ee.support.doesNotIncludeMarginInBodyOffset&&(t+=parseFloat(ee.css(e,"marginTop"))||0,i+=parseFloat(ee.css(e,"marginLeft"))||0),{top:t,left:i}},setOffset:function(e,t,i){var n=ee.css(e,"position");"static"===n&&(e.style.position="relative");var o,r,a=ee(e),s=a.offset(),l=ee.css(e,"top"),u=ee.css(e,"left"),c=("absolute"===n||"fixed"===n)&&ee.inArray("auto",[l,u])>-1,p={},f={};c?(f=a.position(),o=f.top,r=f.left):(o=parseFloat(l)||0,r=parseFloat(u)||0),ee.isFunction(t)&&(t=t.call(e,i,s)),null!=t.top&&(p.top=t.top-s.top+o),null!=t.left&&(p.left=t.left-s.left+r),"using"in t?t.using.call(e,p):a.css(p)}},ee.fn.extend({position:function(){if(this[0]){var e=this[0],t=this.offsetParent(),i=this.offset(),n=ti.test(t[0].nodeName)?{top:0,left:0}:t.offset();return i.top-=parseFloat(ee.css(e,"marginTop"))||0,i.left-=parseFloat(ee.css(e,"marginLeft"))||0,n.top+=parseFloat(ee.css(t[0],"borderTopWidth"))||0,n.left+=parseFloat(ee.css(t[0],"borderLeftWidth"))||0,{top:i.top-n.top,left:i.left-n.left}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||U.body;e&&!ti.test(e.nodeName)&&"static"===ee.css(e,"position");)e=e.offsetParent;return e||U.body})}}),ee.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,i){var n=/Y/.test(i);ee.fn[e]=function(o){return ee.access(this,function(e,o,r){var a=N(e);if(r===t)return a?i in a?a[i]:a.document.documentElement[o]:e[o];a?a.scrollTo(n?ee(a).scrollLeft():r,n?r:ee(a).scrollTop()):e[o]=r},e,o,arguments.length,null)}}),ee.each({Height:"height",Width:"width"},function(e,i){ee.each({padding:"inner"+e,content:i,"":"outer"+e},function(n,o){ee.fn[o]=function(o,r){var a=arguments.length&&(n||"boolean"!=typeof o),s=n||(!0===o||!0===r?"margin":"border");return ee.access(this,function(i,n,o){var r;return ee.isWindow(i)?i.document.documentElement["client"+e]:9===i.nodeType?(r=i.documentElement,Math.max(i.body["scroll"+e],r["scroll"+e],i.body["offset"+e],r["offset"+e],r["client"+e])):o===t?ee.css(i,n,o,s):ee.style(i,n,o,s)},i,a?o:t,a,null)}})}),e.jQuery=e.$=ee,"function"==typeof define&&i("nErl")&&i("nErl").jQuery&&define("jquery",[],function(){return ee})}(window)},bwiK:function(e,t){},cDSy:function(e,t){},cGul:function(e,t,i){"use strict";function n(e){i("Mjzp")}var o=i("+2f+"),r=i("1Fey"),a=i("VU/8"),s=n,l=a(o.a,r.a,!1,s,"data-v-9676f20e",null);t.a=l.exports},d7TW:function(e,t){},dmRH:function(e,t){},eNlQ:function(e,t,i){"use strict";t.a={name:"header"}},h3by:function(e,t,i){"use strict";function n(e){i("40Hq")}var o=i("IzUT"),r=i("M2GV"),a=i("VU/8"),s=n,l=a(o.a,r.a,!1,s,"data-v-6b82c2b2",null);t.a=l.exports},i626:function(e,t,i){"use strict";i.d(t,"a",function(){return n});var n={simple:{version:8,name:"Bright",sources:{Zlevel:{tiles:["http://minedata.cn/data/Zlevel/{z}/{x}/{y}?token=fa502cb69dfc4b7bb8a99ac6f092ab47&solu=3994"],type:"vector"},Landuse:{tiles:["http://minedata.cn/data/Landuse/{z}/{x}/{y}?token=fa502cb69dfc4b7bb8a99ac6f092ab47&solu=3994"],type:"vector"},Merge_1:{tiles:["http://minedata.cn/mergeddata/Villtown,Road,Adminflag,Annotation,Worldannotation/{z}/{x}/{y}?token=fa502cb69dfc4b7bb8a99ac6f092ab47&solu=3994"],type:"vector"},Buildingmore:{tiles:["http://minedata.cn/data/Buildingmore/{z}/{x}/{y}?token=fa502cb69dfc4b7bb8a99ac6f092ab47&solu=3994"],type:"vector"},Greenface:{tiles:["http://minedata.cn/data/Greenface/{z}/{x}/{y}?token=fa502cb69dfc4b7bb8a99ac6f092ab47&solu=3994"],type:"vector"},Waterline:{tiles:["http://minedata.cn/data/Waterface/{z}/{x}/{y}?token=fa502cb69dfc4b7bb8a99ac6f092ab47&solu=3994"],type:"vector"},Worldwaterface:{tiles:["http://minedata.cn/data/Worldwaterface/{z}/{x}/{y}?token=fa502cb69dfc4b7bb8a99ac6f092ab47&solu=3994"],type:"vector"},Worldcountries:{tiles:["http://minedata.cn/data/Worldcountries/{z}/{x}/{y}?token=fa502cb69dfc4b7bb8a99ac6f092ab47&solu=3994"],type:"vector"},Waterface:{tiles:["http://minedata.cn/data/Waterface/{z}/{x}/{y}?token=fa502cb69dfc4b7bb8a99ac6f092ab47&solu=3994"],type:"vector"},Adminbound:{tiles:["http://minedata.cn/data/Adminbound/{z}/{x}/{y}?token=fa502cb69dfc4b7bb8a99ac6f092ab47&solu=3994"],type:"vector"}},glyphs:"http://minedata.cn/minemapapi/v1.3/fonts/{fontstack}/{range}.pbf",sprite:"",layers:[{id:"305e7db2535044feb87d3045a268898b",maxzoom:18,source:"",layout:{visibility:"visible"},paint:{"background-color":"#112138"},"source-layer":"",minzoom:3,type:"background"},{id:"415474f1b13243118fb428c340b2e1fd",maxzoom:5,source:"Worldwaterface",layout:{visibility:"visible"},"source-layer":"Worldwaterface",paint:{"fill-color":"#041023"},minzoom:3,type:"fill"},{id:"b0d99c3385ac400287b766c6674b1bd0",maxzoom:8.5,source:"Worldcountries",layout:{visibility:"visible"},paint:{"fill-color":"#17305b","fill-opacity":.6},"source-layer":"Worldcountries",minzoom:3,type:"fill"},{id:"04076cfa3b38492fa9ba71a556a72aa0",maxzoom:17.5,source:"Waterface",layout:{visibility:"visible"},paint:{"fill-color":"#041023"},"source-layer":"Waterface",minzoom:5,type:"fill",filter:["all",["==","kind",1]]},{id:"c539caf5078d4d18be842d5d6143e0b6",maxzoom:17.5,source:"Landuse",layout:{visibility:"visible"},paint:{"fill-color":"#042235"},"source-layer":"Landuse",minzoom:12,type:"fill",filter:["all",["==","kind",11]]},{id:"fafd24c4496c44bc9f1a7fa1bb952936",maxzoom:17.5,source:"Landuse",layout:{visibility:"visible"},paint:{"fill-color":"#0a2b3a"},"source-layer":"Landuse",minzoom:12,type:"fill",filter:["all",["==","kind",12]]},{id:"82cb514a94f644e7b5ed4bab591a70c4",maxzoom:17.5,source:"Landuse",layout:{visibility:"visible"},paint:{"fill-color":"#052442"},"source-layer":"Landuse",minzoom:12,type:"fill",filter:["all",["==","kind",7]]},{id:"4648517cc9d242ba8be100c6d6f95882",maxzoom:17.5,source:"Landuse",layout:{visibility:"visible"},paint:{"fill-color":"#072d45"},"source-layer":"Landuse",minzoom:12,type:"fill",filter:["all",["in","kind",30,36,35,2]]},{id:"f400d0d8a8dd4b0b89adf11aa8897b4c",maxzoom:17.5,source:"Landuse",layout:{visibility:"visible"},paint:{"fill-color":"#032033"},"source-layer":"Landuse",minzoom:12,type:"fill",filter:["all",["in","kind",32,34,33,39]]},{id:"ef8954911a4d4a979ff94c5e2f20cc34",maxzoom:17.5,source:"Landuse",layout:{visibility:"visible"},paint:{"fill-color":"#052337"},"source-layer":"Landuse",minzoom:12,type:"fill",filter:["all",["==","kind",3]]},{id:"b7772d48b6dc4429961c793789e4ea7c",maxzoom:17.5,source:"Landuse",layout:{visibility:"visible"},paint:{"fill-color":"#032439"},"source-layer":"Landuse",minzoom:12,type:"fill",filter:["all",["==","kind",1]]},{id:"87e30f334ff240ac897ca098f9e0c803",maxzoom:17.5,source:"Landuse",layout:{visibility:"visible"},"source-layer":"Landuse",paint:{"fill-color":"#0c3149","fill-opacity":.25},minzoom:12,type:"fill",filter:["all",["in","kind",6,40]]},{id:"f9a7763dd2bf4ca193755ec78202841a",maxzoom:17.5,source:"Greenface",layout:{visibility:"visible"},"source-layer":"Greenface",paint:{"fill-color":"#0f486d"},minzoom:8,type:"fill",filter:["all",["==","kind","1"]]},{id:"c4e84c22f63546688ef8d808227d523e",maxzoom:8,source:"Greenface",layout:{visibility:"visible"},paint:{"fill-color":"#0f486d"},"source-layer":"Greenface",minzoom:5,type:"fill",filter:["all",[">=","area_level",75],["==","kind","1"]]},{id:"9fecd8d3b2274f2b9acd02619839b492",maxzoom:9,source:"Greenface",layout:{visibility:"visible"},paint:{"fill-color":"#0f486d"},"source-layer":"Greenface",minzoom:8,type:"fill",filter:["all",["in","kind","7","9","6","8"],[">=","area_level",98]]},{id:"bf5d9a51a5ca444d9eca72a33cc30fba",maxzoom:10,source:"Greenface",layout:{visibility:"visible"},"source-layer":"Greenface",paint:{"fill-color":"#0f486d"},minzoom:9,type:"fill",filter:["all",["in","kind","7","9","6","8"],[">=","area_level",97]]},{id:"06fca40f8cd14195be8dbf06b36e479f",maxzoom:12,source:"Greenface",layout:{visibility:"visible"},"source-layer":"Greenface",paint:{"fill-color":"#0f486d"},minzoom:10,type:"fill",filter:["all",["in","kind","7","9","6","8"],[">=","area_level",90]]},{id:"499979d1cd4745418b5dbbe412ea3d49",maxzoom:14,source:"Greenface",layout:{visibility:"visible"},paint:{"fill-color":"#0f486d"},"source-layer":"Greenface",minzoom:12,type:"fill",filter:["all",["in","kind","7","9","6","8"],[">=","area_level",75]]},{id:"e16353324b6048a9ac6c115bd653a8af",maxzoom:17.5,source:"Greenface",layout:{visibility:"visible"},"source-layer":"Greenface",paint:{"fill-color":"#0f486d"},minzoom:14,type:"fill",filter:["all",["in","kind","7","9","6","8"]]},{id:"32c908d172f1452195a7881459877cd6",maxzoom:7,source:"Waterline",layout:{"line-join":"round",visibility:"visible","line-cap":"round"},paint:{"line-color":"#022440","line-width":{stops:[[5,.7],[6,.8],[7,1.6],[9,1.6],[20,10]],base:1}},"source-layer":"Waterline",minzoom:4,type:"line"},{id:"354d4d880ecd431d8ffc3588546923bb",maxzoom:17.5,source:"Waterface",layout:{visibility:"visible"},"source-layer":"Waterface",paint:{"fill-color":"#022440"},minzoom:3,type:"fill",filter:["all",["==","kind",5],["==","display_class",8]]},{id:"a1d5deecbf0545389b235850bbdfb893",maxzoom:17.5,source:"Waterface",layout:{visibility:"visible"},"source-layer":"Waterface",paint:{"fill-color":"#022440"},minzoom:13,type:"fill",filter:["all",["==","kind",3]]},{id:"9e30b8e1ded743e4a8b5d1da77982144",maxzoom:13,source:"Waterface",layout:{visibility:"visible"},paint:{"fill-color":"#022440"},"source-layer":"Waterface",minzoom:10,type:"fill",filter:["all",[">=","display_class",1],[">=","area_level",72],["==","kind",3]]},{id:"04cadb0e4c824773aa22cb42d9a87ae4",maxzoom:14,source:"Waterface",layout:{visibility:"visible"},paint:{"fill-color":"#022440"},"source-layer":"Waterface",minzoom:12,type:"fill",filter:["all",[">=","display_class",2],["==","kind",3]]},{id:"0f3183087ca04d5da748c22b7dd10151",maxzoom:12,source:"Waterface",layout:{visibility:"visible"},paint:{"fill-color":"#022440"},"source-layer":"Waterface",minzoom:10,type:"fill",filter:["all",[">=","display_class",3],["==","kind",3]]},{id:"b9f6b778a8294f58823d9d6f8733845c",maxzoom:10,source:"Waterface",layout:{visibility:"visible"},paint:{"fill-color":"#022440"},"source-layer":"Waterface",minzoom:9,type:"fill",filter:["all",[">=","display_class",5],["==","kind",3]]},{id:"796462bfe80a4b11ac9c9be2d5d61ed0",maxzoom:10,source:"Waterface",layout:{visibility:"visible"},"source-layer":"Waterface",paint:{"fill-color":"#022440"},minzoom:7,type:"fill",filter:["all",[">=","display_class",7],["==","kind",3]]},{id:"5ef9a598eedb4aea99044f74791d3890",maxzoom:7,source:"Waterface",layout:{visibility:"visible"},paint:{"fill-color":"#022440"},"source-layer":"Waterface",minzoom:3,type:"fill",filter:["all",["==","kind",3],["==","display_class",8]]},{id:"ed8c7937ad114305ab51ffafc56ac568",maxzoom:10,source:"Waterface",layout:{visibility:"visible"},"source-layer":"Waterface",paint:{"fill-color":"#022440"},minzoom:7,type:"fill",filter:["all",["==","display_class",-2]]},{id:"33ed503501c2460e8b25be5b37034d1d",maxzoom:17.5,source:"Waterface",layout:{visibility:"visible"},paint:{"fill-color":"#022440"},"source-layer":"Waterface",minzoom:14,type:"fill",filter:["all",["==","kind",2],[">=","display_class",1]]},{id:"866b61fe7d8b4a8c9fbb5b428647fb0e",maxzoom:14,source:"Waterface",layout:{visibility:"visible"},paint:{"fill-color":"#022440"},"source-layer":"Waterface",minzoom:11,type:"fill",filter:["all",["==","kind",2],[">=","display_class",1],[">=","area_level",10]]},{id:"2b0e62904cff48e4987d088007b94332",maxzoom:11,source:"Waterface",layout:{visibility:"visible"},"source-layer":"Waterface",paint:{"fill-color":"#022440"},minzoom:10,type:"fill",filter:["all",["==","kind",2],[">=","display_class",1],[">=","area_level",20]]},{id:"a939939493ed4f98943859eae4aaf5c5",maxzoom:10,source:"Waterface",layout:{visibility:"visible"},"source-layer":"Waterface",paint:{"fill-color":"#022440"},minzoom:9,type:"fill",filter:["all",["==","kind",2],[">=","display_class",1],[">=","area_level",40]]},{id:"1b88392b7a5448b49d1b47a27ae7812e",maxzoom:9,source:"Waterface",layout:{visibility:"visible"},"source-layer":"Waterface",paint:{"fill-color":"#022440"},minzoom:8,type:"fill",filter:["all",["==","kind",2],[">=","display_class",1],[">=","area_level",85]]},{id:"84c925ac22204c0891920aeb0d795e5a",maxzoom:8,source:"Waterface",layout:{visibility:"visible"},paint:{"fill-color":"#022440"},"source-layer":"Waterface",minzoom:6,type:"fill",filter:["all",["==","kind",2],[">=","display_class",4],[">=","area_level",50]]},{id:"46fb33bcb55547538cd9f992e42ac148",maxzoom:6,source:"Waterface",layout:{visibility:"visible"},paint:{"fill-color":"#022440"},"source-layer":"Waterface",minzoom:5,type:"fill",filter:["all",["==","kind",2],[">=","display_class",7]]},{id:"b010de99209b4a3694727c9ae079691d",maxzoom:17.5,source:"Waterface",layout:{visibility:"visible"},"source-layer":"Waterface",paint:{"fill-color":"#022440"},minzoom:7,type:"fill",filter:["all",["==","display_class",-1]]},{id:"54c7701f61e64ceab95de07c097ed1f0",maxzoom:8.5,source:"Adminbound",layout:{"line-join":"round",visibility:"visible","line-cap":"round"},"source-layer":"Adminbound",paint:{"line-dasharray":[6,3,3,4],"line-color":"#09263b","line-opacity":1,"line-width":1},minzoom:3,type:"line",filter:["all",["==","kind",6]]},{id:"ab41fc8efb614630bd1cf86f53139f93",maxzoom:8.5,source:"Adminbound",layout:{"line-join":"round",visibility:"visible","line-cap":"round"},paint:{"line-dasharray":[5,3],"line-color":"#09263b","line-opacity":1,"line-width":1},"source-layer":"Adminbound",minzoom:3,type:"line",filter:["all",["==","kind",5]]},{id:"d939d049aed9410d8141a8576a35b3cf",maxzoom:7,source:"Adminbound",layout:{"line-join":"round",visibility:"visible","line-cap":"round"},paint:{"line-dasharray":[3,3,5,5],"line-color":"#262121","line-width":{stops:[[3,1],[8,3]],base:1.2}},"source-layer":"Adminbound",minzoom:3,type:"line",filter:["all",["==","kind",2]]},{id:"71748dc24f564815861e024bc96e2ce6",maxzoom:7,source:"Adminbound",layout:{"line-join":"round",visibility:"visible","line-cap":"round"},"source-layer":"Adminbound",paint:{"line-color":"#6991a0","line-width":{stops:[[3,.5],[8,1]],base:1.2}},minzoom:3,type:"line",filter:["all",["in","kind",3,1]]},{id:"1d1c41c6b12f4bdfb4213cad65514af7",maxzoom:17.5,source:"Merge_1",layout:{"line-join":"round",visibility:"visible","line-cap":"round"},"source-layer":"Road",paint:{"line-color":"#9b9b9b","line-width":2},minzoom:14,type:"line",filter:["all",["==","functionclass",5],["in","kind",13,10,8,9],["in","const_st",3,4]]},{id:"03775a9cd410427eac18bb56ca7c3b18",maxzoom:17.5,source:"Merge_1",layout:{"text-size":14,visibility:"visible","text-field":"{name_zh}","symbol-placement":"line"},paint:{"text-halo-color":"#ffffff","text-color":"#09091d","text-halo-width":1,"icon-color":"#ff0000"},"source-layer":"Road",minzoom:12,type:"symbol",filter:["all",["in","functionclass",5],["in","const_st",3,4],["in","kind",2,1,3,4]]},{id:"35cd6acc6a664ed5bf84df7ac845e532",maxzoom:17.5,source:"Merge_1",layout:{"line-join":"round",visibility:"visible","line-cap":"round"},paint:{"line-color":"#9b9b9b","line-width":2},"source-layer":"Road",minzoom:12,type:"line",filter:["all",["==","functionclass",5],["in","kind",2,1,3,4],["in","const_st",3,4]]},{id:"a8aa7d41434444f28d5512068a06b7b9",maxzoom:17.5,source:"Merge_1",layout:{"text-size":14,visibility:"visible","text-field":"{name_zh}","symbol-placement":"line"},"source-layer":"Road",paint:{"text-halo-color":"#ffffff","text-halo-width":1,"text-color":"#09091d","icon-color":"#ff0000"},minzoom:11,type:"symbol",filter:["all",["in","functionclass",1,4,2,3],["in","const_st",3,4]]},{id:"568dc9764f914848bacaf15a12c16dde",maxzoom:17.5,source:"Merge_1",layout:{"line-join":"round",visibility:"visible","line-cap":"round"},paint:{"line-color":"#9b9b9b","line-width":2},"source-layer":"Road",minzoom:11,type:"line",filter:["all",["in","functionclass",1,4,2,3],["in","const_st",3,4]]},{id:"5cc0ff6188ad46eea69da977cd0e5fb8",maxzoom:17.5,source:"Merge_1",layout:{"line-join":"round",visibility:"visible","line-cap":"square"},paint:{"line-gap-width":{stops:[[5,1],[18,12]],base:1.2},"line-color":"#346778","line-width":{stops:[[5,.5],[14,1.2]],base:1}},"source-layer":"Road",minzoom:12,type:"line",filter:["all",["==","kind",6],["==","functionclass",5]]},{id:"07d28f7ab6e84331aa0f6ff699cc10e6",maxzoom:17.5,source:"Merge_1",layout:{"line-join":"round",visibility:"visible","line-cap":"square"},paint:{"line-gap-width":{stops:[[5,1],[18,32]],base:1.5},"line-color":"#346778","line-width":{stops:[[5,.1],[18,1]],base:1.2}},"source-layer":"Road",minzoom:12,type:"line",filter:["all",["==","kind",2],["==","functionclass",5]]},{id:"0dd2fdba998f4d2eb5a01174bf414e40",maxzoom:17.5,source:"Merge_1",layout:{"line-join":"round",visibility:"visible","line-cap":"square"},"source-layer":"Road",paint:{"line-gap-width":{stops:[[5,1],[18,32]],base:1.5},"line-color":"#346778","line-width":{stops:[[5,.1],[18,1]],base:1.2}},minzoom:12,type:"line",filter:["all",["==","kind",1],["==","functionclass",5]]},{id:"011e4778adb9435fa28ceda0bab664ee",maxzoom:17.5,source:"Merge_1",layout:{"line-join":"round",visibility:"visible","line-cap":"square"},paint:{"line-gap-width":{stops:[[5,1],[18,32]],base:1.5},"line-color":"#346778","line-width":{stops:[[5,.1],[18,1]],base:1.2}},"source-layer":"Road",minzoom:9,type:"line",filter:["all",["==","kind",4],["==","functionclass",4]]},{id:"d783b1fe232c4b6db93fe68fe6cf8ea8",maxzoom:17.5,source:"Merge_1",layout:{"line-join":"round",visibility:"visible","line-cap":"square"},paint:{"line-gap-width":{stops:[[5,1],[18,32]],base:1.5},"line-color":"#346778","line-width":{stops:[[5,.1],[18,1]],base:1.2}},"source-layer":"Road",minzoom:9,type:"line",filter:["all",["==","kind",3],["==","functionclass",4]]},{id:"b85e83b82c484019b1ca3318fdc893b0",maxzoom:17.5,source:"Merge_1",layout:{"line-join":"round",visibility:"visible","line-cap":"square"},paint:{"line-gap-width":{stops:[[5,1],[18,32]],base:1.5},"line-color":"#346778","line-width":{stops:[[5,.1],[18,1]],base:1.2}},"source-layer":"Road",minzoom:9,type:"line",filter:["all",["==","kind",2],["==","functionclass",4]]},{id:"f0e58b6f0d314e42a5212e1b78651c48",maxzoom:17.5,source:"Merge_1",layout:{"line-join":"round",visibility:"visible","line-cap":"square"},"source-layer":"Road",paint:{"line-gap-width":{stops:[[5,1],[18,32]],base:1.5},"line-color":"#346778","line-width":{stops:[[5,.1],[18,1]],base:1.2}},minzoom:9,type:"line",filter:["all",["==","kind",1],["==","functionclass",4]]},{id:"8126ff5f576b49109c5a241cb67e5333",maxzoom:17.5,source:"Merge_1",layout:{"line-join":"round",visibility:"visible","line-cap":"square"},"source-layer":"Road",paint:{"line-gap-width":{stops:[[5,1],[18,12]],base:1.2},"line-color":"#346778","line-width":{stops:[[5,.1],[18,1]],base:1.2}},minzoom:10,type:"line",filter:["all",["==","kind",6],["==","functionclass",3]]},{id:"9f242c5f6dc24660b890b445b89a9005",maxzoom:17.5,source:"Merge_1",layout:{"line-join":"round",visibility:"visible","line-cap":"square"},"source-layer":"Road",paint:{"line-gap-width":{stops:[[5,1],[18,24]],base:1.5},"line-color":"#346778","line-width":{stops:[[5,.1],[18,1]],base:1.2}},minzoom:8,type:"line",filter:["all",["==","kind",4],["==","functionclass",3]]},{id:"96304ea4f99f4fada20b3c7486a93075",maxzoom:17.5,source:"Merge_1",layout:{"line-join":"round",visibility:"visible","line-cap":"square"},paint:{"line-gap-width":{stops:[[5,1],[18,24]],base:1.5},"line-color":"#346778","line-width":{stops:[[5,.1],[18,1]],base:1.2}},"source-layer":"Road",minzoom:8,type:"line",filter:["all",["==","kind",3],["==","functionclass",3]]},{id:"69c371712a344cb4bf28642fc3e86b3e",maxzoom:17.5,source:"Merge_1",layout:{"line-join":"round",visibility:"visible","line-cap":"square"},paint:{"line-gap-width":{stops:[[5,1],[18,24]],base:1.5},"line-color":"#346778","line-width":{stops:[[5,.1],[18,1]],base:1.2}},"source-layer":"Road",minzoom:8,type:"line",filter:["all",["==","kind",2],["==","functionclass",3]]},{id:"349dfa716f1d49fdacb91a5d51461458",maxzoom:17.5,source:"Merge_1",layout:{"line-join":"round",visibility:"visible","line-cap":"square"},"source-layer":"Road",paint:{"line-gap-width":{stops:[[5,1],[18,24]],base:1.5},"line-color":"#346778","line-width":{stops:[[5,.1],[18,1]],base:1.2}},minzoom:8,type:"line",filter:["all",["==","kind",1],["==","functionclass",3]]},{id:"e66a4ae07e0f4e46ba4cf0c3096af22f",maxzoom:17.5,source:"Merge_1",layout:{"line-join":"round",visibility:"visible","line-cap":"square"},paint:{"line-gap-width":{stops:[[5,1],[18,24]],base:1.5},"line-color":"#346778","line-width":{stops:[[5,.1],[18,1]],base:1.2}},"source-layer":"Road",minzoom:7,type:"line",filter:["all",["==","kind",4],["==","functionclass",2],["==","const_st",1]]},{id:"e983f969b6b04c6faff54f6de21e6aa6",maxzoom:17.5,source:"Merge_1",layout:{"line-join":"round",visibility:"visible","line-cap":"square"},paint:{"line-gap-width":{stops:[[5,1],[18,24]],base:1.5},"line-color":"#346778","line-width":{stops:[[5,.1],[18,1]],base:1.2}},"source-layer":"Road",minzoom:7,type:"line",filter:["all",["==","kind",3],["==","functionclass",2]]},{id:"ba30e53f37ba46f4a56e6ab596dc67f4",maxzoom:17.5,source:"Merge_1",layout:{"line-join":"round",visibility:"visible","line-cap":"square"},paint:{"line-gap-width":{stops:[[5,1],[18,24]],base:1.5},"line-color":"#346778","line-width":{stops:[[5,.1],[18,1]],base:1.2}},"source-layer":"Road",minzoom:7,type:"line",filter:["all",["==","kind",2],["==","functionclass",2]]},{id:"ef7209bd1b3046a2b4162cd955413ef9",maxzoom:17.5,source:"Merge_1",layout:{"line-join":"round",visibility:"visible","line-cap":"square"},paint:{"line-gap-width":{stops:[[5,1],[18,24]],base:1.5},"line-color":"#346778","line-width":{stops:[[5,.1],[18,1]],base:1.2}},"source-layer":"Road",minzoom:7,type:"line",filter:["all",["==","kind",1],["==","functionclass",2]]},{id:"d2d3840ac2c34b0ba17ff7fe814c4554",maxzoom:17.5,source:"Merge_1",layout:{"line-join":"round",visibility:"visible","line-cap":"square"},"source-layer":"Road",paint:{"line-gap-width":{stops:[[5,1],[18,24]],base:1.5},"line-color":"#346778","line-width":{stops:[[5,.1],[18,1]],base:1.2}},minzoom:7,type:"line",filter:["all",["==","kind",2],["==","functionclass",1]]},{id:"31a442351a88407388352e7ee905cd41",maxzoom:17.5,source:"Merge_1",layout:{"line-join":"round",visibility:"visible","line-cap":"square"},"source-layer":"Road",paint:{"line-gap-width":{stops:[[5,1],[18,24]],base:1.5},"line-color":"#346778","line-width":{stops:[[5,.1],[18,3]],base:1.2}},minzoom:7,type:"line",filter:["all",["==","kind",1],["==","functionclass",1]]},{id:"7b32bc2b26514bef908592f29b965ff8",maxzoom:17.5,source:"Merge_1",layout:{"line-join":"round",visibility:"visible","line-cap":"square"},"source-layer":"Road",paint:{"line-color":"#040d17","line-width":{stops:[[5,1],[18,12]],base:1.2}},minzoom:12,type:"line",filter:["all",["==","kind",6],["==","functionclass",5]]},{id:"e7ea48552e7e4b68ad27278bf38c3f52",maxzoom:17.5,source:"Merge_1",layout:{"line-join":"round",visibility:"visible","line-cap":"square"},"source-layer":"Road",paint:{"line-color":"#040d17","line-width":{stops:[[5,1],[18,32]],base:1.5}},minzoom:12,type:"line",filter:["all",["==","kind",1],["==","functionclass",5]]},{id:"812a98b2d3c54c7fbe99f03db2c277e6",maxzoom:17.5,source:"Merge_1",layout:{"line-join":"round",visibility:"visible","line-cap":"square"},"source-layer":"Road",paint:{"line-color":"#040d17","line-width":{stops:[[5,1],[18,32]],base:1.5}},minzoom:9,type:"line",filter:["all",["==","kind",4],["==","functionclass",4]]},{id:"86c4e81832b54abcb436fa3f028aceb3",maxzoom:17.5,source:"Merge_1",layout:{"line-join":"round",visibility:"visible","line-cap":"square"},paint:{"line-color":"#040d17","line-width":{stops:[[5,1],[18,32]],base:1.5}},"source-layer":"Road",minzoom:9,type:"line",filter:["all",["==","kind",3],["==","functionclass",4]]},{id:"a03e61446d2e4fc4a9ff78f816de8700",maxzoom:17.5,source:"Merge_1",layout:{"line-join":"round",visibility:"visible","line-cap":"square"},"source-layer":"Road",paint:{"line-color":"#040d17","line-width":{stops:[[5,1],[18,32]],base:1.5}},minzoom:9,type:"line",filter:["all",["==","kind",2],["==","functionclass",4]]},{id:"a8945779aae546f9a5e946d83415d8d1",maxzoom:17.5,source:"Merge_1",layout:{"line-join":"round",visibility:"visible","line-cap":"square"},"source-layer":"Road",paint:{"line-color":"#040d17","line-width":{stops:[[5,1],[18,32]],base:1.5}},minzoom:9,type:"line",filter:["all",["==","kind",1],["==","functionclass",4]]},{id:"b890926d76014ae9a5223b7319dd221b",maxzoom:17.5,source:"Merge_1",layout:{"line-join":"round",visibility:"visible","line-cap":"square"},"source-layer":"Road",paint:{"line-color":"#040d17","line-width":{stops:[[5,1],[18,12]],base:1.2}},minzoom:8,type:"line",filter:["all",["==","kind",6],["==","functionclass",3]]},{id:"b59a1f05e2274feea7897a093c01d826",maxzoom:17.5,source:"Merge_1",layout:{"line-join":"round",visibility:"visible","line-cap":"square"},paint:{"line-color":"#040d17","line-width":{stops:[[5,1],[18,24]],base:1.5}},"source-layer":"Road",minzoom:8,type:"line",filter:["all",["==","kind",4],["==","functionclass",3]]},{id:"629f80b7374b4503a5d03def956ea3c8",maxzoom:17.5,source:"Merge_1",layout:{"line-join":"round",visibility:"visible","line-cap":"square"},paint:{"line-color":"#040d17","line-width":{stops:[[5,1],[18,24]],base:1.5}},"source-layer":"Road",minzoom:8,type:"line",filter:["all",["==","kind",3],["==","functionclass",3]]},{id:"70765f986dc4497da00f2481ef208a29",maxzoom:17.5,source:"Merge_1",layout:{"line-join":"round",visibility:"visible","line-cap":"square"},paint:{"line-color":"#040d17","line-width":{stops:[[5,1],[18,24]],base:1.5}},"source-layer":"Road",minzoom:8,type:"line",filter:["all",["==","kind",2],["==","functionclass",3]]},{id:"c836e4cc6e314fbba8601efb56985792",maxzoom:17.5,source:"Merge_1",layout:{"line-join":"round",visibility:"visible","line-cap":"square"},paint:{"line-color":"#040d17","line-width":{stops:[[5,1],[18,24]],base:1.5}},"source-layer":"Road",minzoom:8,type:"line",filter:["all",["==","kind",1],["==","functionclass",3]]},{id:"73415403237b4a00ade435375ab11670",maxzoom:17.5,source:"Merge_1",layout:{"line-join":"round",visibility:"visible","line-cap":"round"},paint:{"line-color":"#6f8aa9","line-width":{stops:[[5,1],[18,4]],base:1.2}},"source-layer":"Road",minzoom:12,type:"line",filter:["all",["==","kind",13],["==","functionclass",5]]},{id:"9fdb62426f4a495b9f20bd6044d52ae5",maxzoom:17.5,source:"Merge_1",layout:{"line-join":"round",visibility:"visible","line-cap":"round"},paint:{"line-color":"#6f8aa9","line-width":{stops:[[5,1],[18,4]],base:1.2}},"source-layer":"Road",minzoom:9,type:"line",filter:["all",["==","kind",13],["==","functionclass",4],["==","const_st",1]]},{id:"bf34f7731add4bdc969002dcb7426ab8",maxzoom:17.5,source:"Merge_1",layout:{"line-join":"round",visibility:"visible","line-cap":"round"},paint:{"line-color":"#6f8aa9","line-width":{stops:[[5,1],[18,4]],base:1.2}},"source-layer":"Road",minzoom:9,type:"line",filter:["all",["==","kind",13],["==","functionclass",3],["==","const_st",1]]},{id:"63824cd78cb9490ebef97c0509faf24f",maxzoom:17.5,source:"Merge_1",layout:{"line-join":"round",visibility:"visible","line-cap":"round"},"source-layer":"Road",paint:{"line-color":"#6f8aa9","line-width":{stops:[[5,1],[18,4]],base:1.2}},minzoom:9,type:"line",filter:["all",["==","kind",13],["==","functionclass",2],["==","const_st",1]]},{id:"23f90d1aa6f348fcae668ddacfc39ad8",maxzoom:17.5,source:"Merge_1",layout:{"line-join":"round",visibility:"visible","line-cap":"round"},"source-layer":"Road",paint:{"line-color":"#7090b5","line-width":{stops:[[5,1],[18,4]],base:1.2}},minzoom:9,type:"line",filter:["all",["==","kind",13],["==","functionclass",1],["==","const_st",1]]},{id:"b28ab61dd5b04497abf6dcd10d60ae34",maxzoom:17.5,source:"Merge_1",layout:{"line-join":"round",visibility:"visible","line-cap":"butt"},"source-layer":"Road",paint:{"line-gap-width":{stops:[[14,1],[18,4]],base:1.2},"line-color":"#040d17","line-width":{stops:[[12,.5],[14,.8],[18,1.2]],base:1}},minzoom:14,type:"line",filter:["all",["==","kind",10]]},{id:"dd07d96a7d40450c88c5b17f651ed8cc",maxzoom:17.5,source:"Merge_1",layout:{"line-join":"round",visibility:"visible","line-cap":"round"},"source-layer":"Road",paint:{"line-color":"#040d17","line-width":{stops:[[14,1],[18,6]],base:1.2}},minzoom:14,type:"line",filter:["all",["==","kind",10]]},{id:"eb7e007e7e404faea713705919f23bc2",maxzoom:17.5,source:"Merge_1",layout:{"line-join":"round",visibility:"visible","line-cap":"butt"},paint:{"line-gap-width":{stops:[[5,1],[18,8]],base:1.2},"line-color":"#040d17","line-width":{stops:[[5,.5],[14,1.2]],base:1}},"source-layer":"Road",minzoom:14,type:"line",filter:["all",["==","kind",9]]},{id:"5d6e5ec4c612405ead58a2c28db24370",maxzoom:17.5,source:"Merge_1",layout:{"line-join":"round",visibility:"visible","line-cap":"round"},paint:{"line-color":"#040d17","line-width":{stops:[[5,1],[18,8]],base:1.2}},"source-layer":"Road",minzoom:14,type:"line",filter:["all",["==","kind",9]]},{id:"fd4eb47f5a9c4ce49833b1c87a56308e",maxzoom:17.5,source:"Merge_1",layout:{"line-join":"round",visibility:"visible","line-cap":"butt"},"source-layer":"Road",paint:{"line-gap-width":{stops:[[5,1],[18,4]],base:1.2},"line-color":"#346778","line-width":{stops:[[5,.5],[14,1.2]],base:1}},minzoom:14,type:"line",filter:["all",["==","kind",8],["==","functionclass",5]]},{id:"1a62692598be4fbda7380e9cc7964df8",maxzoom:17.5,source:"Merge_1",layout:{"line-join":"round",visibility:"visible","line-cap":"butt"},"source-layer":"Road",paint:{"line-gap-width":{stops:[[5,1],[18,4]],base:1.2},"line-color":"#346778","line-width":{stops:[[5,.5],[14,1.2]],base:1}},minzoom:9,type:"line",filter:["all",["==","kind",8],["==","functionclass",4]]},{id:"7a9e0cbfc50c4ecbad518c1f44b1e274",maxzoom:17.5,source:"Merge_1",layout:{"line-join":"round",visibility:"visible","line-cap":"butt"},"source-layer":"Road",paint:{"line-gap-width":{stops:[[5,1],[18,4]],base:1.2},"line-color":"#346778","line-width":{stops:[[5,.5],[14,1.2]],base:1}},minzoom:8,type:"line",filter:["all",["==","kind",8],["==","functionclass",3]]},{id:"6e9ab5f68e784005b86f8052063a3722",maxzoom:17.5,source:"Merge_1",layout:{"line-join":"round",visibility:"visible","line-cap":"butt"},paint:{"line-gap-width":{stops:[[5,1],[18,4]],base:1.2},"line-color":"#346778","line-width":{stops:[[5,.5],[14,1.2]],base:1}},"source-layer":"Road",minzoom:7,type:"line",filter:["all",["==","kind",8],["==","functionclass",2]]},{id:"782e22a61899465f9867819fa5fb4f48",maxzoom:17.5,source:"Merge_1",layout:{"line-join":"round",visibility:"visible","line-cap":"butt"},paint:{"line-gap-width":{stops:[[5,1],[18,4]],base:1.2},"line-color":"#346778","line-width":{stops:[[5,.5],[14,1.2]],base:1}},"source-layer":"Road",minzoom:7,type:"line",filter:["all",["==","kind",8],["==","functionclass",1]]},{id:"05b507d90988442ca13186d9c323e865",maxzoom:17.5,source:"Merge_1",layout:{"line-join":"round",visibility:"visible","line-cap":"round"},paint:{"line-color":"#040d17","line-width":{stops:[[5,1],[18,4]],base:1.2}},"source-layer":"Road",minzoom:14,type:"line",filter:["all",["==","kind",8],["==","functionclass",5]]},{id:"6d7470a667df455a820b81fd311f0ed6",maxzoom:17.5,source:"Merge_1",layout:{"line-join":"round",visibility:"visible","line-cap":"round"},"source-layer":"Road",paint:{"line-color":"#040d17","line-width":{stops:[[5,1],[18,4]],base:1.2}},minzoom:9,type:"line",filter:["all",["==","kind",8],["==","functionclass",4]]},{id:"d41a9bb39824451fb80f7c4bcd628b7d",maxzoom:17.5,source:"Merge_1",layout:{"line-join":"round",visibility:"visible","line-cap":"round"},"source-layer":"Road",paint:{"line-color":"#040d17","line-width":{stops:[[5,1],[18,4]],base:1.2}},minzoom:8,type:"line",filter:["all",["==","kind",8],["==","functionclass",3]]},{id:"ebfeebc6c90c4bc18106a69282aef067",maxzoom:17.5,source:"Merge_1",layout:{"line-join":"round",visibility:"visible","line-cap":"butt"},"source-layer":"Road",paint:{"line-gap-width":{stops:[[5,1],[12,1],[13,4],[18,12]],base:1.5},"line-color":"#6991a0","line-width":{stops:[[5,.5],[14,1.2]],base:1}},minzoom:13,type:"line",filter:["all",["==","kind",7],["==","functionclass",5]]},{id:"492974b189104dc88b922c34c1a40f44",maxzoom:17.5,source:"Merge_1",layout:{"line-join":"round",visibility:"visible","line-cap":"butt"},"source-layer":"Road",paint:{"line-gap-width":{stops:[[5,1],[9,1],[12,4],[18,12]],base:1.2},"line-color":"#6991a0","line-width":{stops:[[12,.2],[18,1.2]],base:1.2}},minzoom:12,type:"line",filter:["all",["==","kind",7],["==","functionclass",4],["==","const_st",1]]},{id:"54d8d01e57904acf8066e44305b8c7be",maxzoom:17.5,source:"Merge_1",layout:{"line-join":"round",visibility:"visible","line-cap":"butt"},paint:{"line-gap-width":{stops:[[5,1],[9,1],[18,12]],base:1.2},"line-color":"#6991a0","line-width":{stops:[[5,.5],[14,1.2]],base:1}},"source-layer":"Road",minzoom:11,type:"line",filter:["all",["==","kind",7],["==","functionclass",3],["==","const_st",1]]},{id:"9f0d0ffcec6746a29d464af46242e0ae",maxzoom:17.5,source:"Merge_1",layout:{"line-join":"round",visibility:"visible","line-cap":"butt"},paint:{"line-gap-width":{stops:[[5,1],[9,1],[18,12]],base:1.2},"line-color":"#6991a0","line-width":{stops:[[5,.1],[18,1]],base:1.2}},"source-layer":"Road",minzoom:7,type:"line",filter:["all",["==","kind",7],["==","functionclass",2],["==","const_st",1]]},{id:"d07882c8d7f2491ca321c4ec6f5f345d",maxzoom:17.5,source:"Merge_1",layout:{"line-join":"round",visibility:"visible","line-cap":"butt"},paint:{"line-gap-width":{stops:[[5,1],[9,1],[18,12]],base:1.2},"line-color":"#6991a0","line-width":{stops:[[5,.1],[18,1]],base:1.2}},"source-layer":"Road",minzoom:7,type:"line",filter:["all",["==","kind",7],["==","functionclass",1],["==","const_st",1]]},{id:"72abde0213734561a690aa0746170e9f",maxzoom:17.5,source:"Merge_1",layout:{"line-join":"round",visibility:"visible","line-cap":"round"},paint:{"line-gap-width":{stops:[[5,1],[12,1],[13,4],[18,12]],base:1.5},"line-color":"#021f3c","line-width":{stops:[[5,.5],[14,1.2]],base:1}},"source-layer":"Road",minzoom:13,type:"line",filter:["all",["==","kind",7],["==","functionclass",5]]},{id:"93b0725ce70a44b0bd84a696cafe6446",maxzoom:17.5,source:"Merge_1",layout:{"line-join":"round",visibility:"visible","line-cap":"round"},paint:{"line-gap-width":{stops:[[5,1],[12,1],[13,4],[18,12]],base:1.2},"line-color":"#021f3c","line-width":{stops:[[5,.5],[14,1.2]],base:1}},"source-layer":"Road",minzoom:12,type:"line",filter:["all",["==","kind",7],["==","functionclass",4]]},{id:"cecd8b054672451b8b0af8e03c216cd7",maxzoom:17.5,source:"Merge_1",layout:{"line-join":"round",visibility:"visible","line-cap":"round"},"source-layer":"Road",paint:{"line-gap-width":{stops:[[5,1],[9,1],[18,12]],base:1.2},"line-color":"#021f3c","line-width":{stops:[[5,.5],[14,1.2]],base:1}},minzoom:11,type:"line",filter:["all",["==","kind",7],["==","functionclass",3],["==","const_st",1]]},{id:"91c8a86755014a8e963a741f27779a1b",maxzoom:17.5,source:"Merge_1",layout:{"line-join":"round",visibility:"visible","line-cap":"round"},paint:{"line-gap-width":{stops:[[5,1],[9,1],[18,12]],base:1.2},"line-color":"#021f3c","line-width":{stops:[[5,.1],[18,1]],base:1.2}},"source-layer":"Road",minzoom:7,type:"line",filter:["all",["==","kind",7],["==","functionclass",2],["==","const_st",1]]},{id:"c8b4c3b912f8463fb384848d63d37718",maxzoom:17.5,source:"Merge_1",layout:{"line-join":"round",visibility:"visible","line-cap":"round"},paint:{"line-gap-width":{stops:[[5,1],[9,1],[18,12]],base:1.2},"line-color":"#021f3c","line-width":{stops:[[5,.1],[18,1]],base:1.2}},"source-layer":"Road",minzoom:7,type:"line",filter:["all",["==","kind",7],["==","functionclass",1],["==","const_st",1]]},{id:"7a54ad2f279b4244b7da9322dfa4cca7",maxzoom:17.5,source:"Merge_1",layout:{"line-join":"round",visibility:"visible","line-cap":"round"},paint:{"line-color":"#021f3c","line-width":{stops:[[5,1],[12,1],[13,4],[18,12]],base:1.2}},"source-layer":"Road",minzoom:12,type:"line",filter:["all",["==","kind",7],["==","functionclass",5]]},{id:"5eda36c9671846abae940354d198ea00",maxzoom:17.5,source:"Merge_1",layout:{"line-join":"round",visibility:"visible","line-cap":"round"},paint:{"line-color":"#021f3c","line-width":{stops:[[5,1],[12,1],[13,3],[18,12]],base:1.2}},"source-layer":"Road",minzoom:9,type:"line",filter:["all",["==","kind",7],["==","functionclass",4],["==","const_st",1]]},{id:"7d33864f20d64c8cb6b63113fef1ff52",maxzoom:17.5,source:"Merge_1",layout:{"line-join":"round",visibility:"visible","line-cap":"round"},paint:{"line-color":"#021f3c","line-width":{stops:[[5,1],[9,1],[18,12]],base:1.2}},"source-layer":"Road",minzoom:8,type:"line",filter:["all",["==","kind",7],["==","functionclass",3],["==","const_st",1]]},{id:"e35be00d035f43beb96cc0d0857df995",maxzoom:17.5,source:"Merge_1",layout:{"line-join":"round",visibility:"visible","line-cap":"round"},paint:{"line-color":"#021f3c","line-width":{stops:[[5,1],[9,1],[18,12]],base:1.2}},"source-layer":"Road",minzoom:5,type:"line",filter:["all",["==","kind",7],["==","functionclass",2],["==","const_st",1]]},{id:"73401d57cc8b44a985934829e70cecd6",maxzoom:17.5,source:"Merge_1",layout:{"line-join":"round",visibility:"visible","line-cap":"round"},"source-layer":"Road",paint:{"line-color":"#021f3c","line-width":{stops:[[5,1],[9,1],[18,12]],base:1.2}},minzoom:5,type:"line",filter:["all",["==","kind",7],["==","functionclass",1],["==","const_st",1]]},{id:"d181060ab6e54a1cb39f8f928dcdfb7e",maxzoom:17.5,source:"Merge_1",layout:{"line-join":"round",visibility:"visible","line-cap":"butt"},paint:{"line-gap-width":{stops:[[5,1],[11,1],[13,4],[18,12]],base:1.2},"line-color":"#6991a0","line-width":{stops:[[5,.5],[14,1.2]],base:1}},"source-layer":"Road",minzoom:12,type:"line",filter:["all",["==","kind",6],["==","functionclass",5]]},{id:"0e1af11a86f64accb9df167ffb363030",maxzoom:17.5,source:"Merge_1",layout:{"line-join":"round",visibility:"visible","line-cap":"butt"},"source-layer":"Road",paint:{"line-gap-width":{stops:[[5,1],[12,1],[13,4],[18,12]],base:1.2},"line-color":"#6991a0","line-width":{stops:[[5,.5],[14,1.2]],base:1}},minzoom:12,type:"line",filter:["all",["==","kind",6],["==","functionclass",4],["==","const_st",1]]},{id:"407cf077aa544459bafe355c786f3708",maxzoom:17.5,source:"Merge_1",layout:{"line-join":"round",visibility:"visible","line-cap":"butt"},"source-layer":"Road",paint:{"line-gap-width":{stops:[[5,1],[12,1],[13,4],[18,12]],base:1.2},"line-color":"#6991a0","line-width":{stops:[[5,.5],[14,1.2]],base:1}},minzoom:10,type:"line",filter:["all",["==","kind",6],["==","functionclass",3],["==","const_st",1]]},{id:"4f921c048b304c18a9ce796e790224ff",maxzoom:17.5,source:"Merge_1",layout:{"line-join":"round",visibility:"visible","line-cap":"butt"},"source-layer":"Road",paint:{"line-gap-width":{stops:[[5,1],[18,32]],base:1.5},"line-color":"#6991a0","line-width":{stops:[[5,.1],[18,1]],base:1.2}},minzoom:7,type:"line",filter:["all",["==","kind",6],["==","functionclass",2],["==","const_st",1]]},{id:"6348969e60ce49c0a4a3d99b9e8963b8",maxzoom:17.5,source:"Merge_1",layout:{"line-join":"round",visibility:"visible","line-cap":"butt"},paint:{"line-gap-width":{stops:[[5,1],[18,32]],base:1.5},"line-color":"#6991a0","line-width":{stops:[[5,.1],[18,1]],base:1.2}},"source-layer":"Road",minzoom:7,type:"line",filter:["all",["==","kind",6],["==","functionclass",1],["==","const_st",1]]},{id:"f972ff4fe43d42fd82e9cd20591813f1",maxzoom:17.5,source:"Merge_1",layout:{"line-join":"round",visibility:"visible","line-cap":"round"},paint:{"line-gap-width":{stops:[[5,1],[12,1],[13,4],[18,12]],base:1.2},"line-color":"#021f3c","line-width":{stops:[[5,.5],[18,1.2]],base:1}},"source-layer":"Road",minzoom:12,type:"line",filter:["all",["==","kind",6],["==","functionclass",5]]},{id:"ac83a1da2430470388e71a04fd795248",maxzoom:17.5,source:"Merge_1",layout:{"line-join":"round",visibility:"visible","line-cap":"round"},"source-layer":"Road",paint:{"line-gap-width":{stops:[[5,1],[12,1],[13,4],[18,12]],base:1.2},"line-color":"#021f3c","line-width":{stops:[[5,.5],[14,1.2]],base:1}},minzoom:12,type:"line",filter:["all",["==","kind",6],["==","functionclass",4],["==","const_st",1]]},{id:"4cecc80a7cfc4000a2599f34c7309fae",maxzoom:17.5,source:"Merge_1",layout:{"line-join":"round",visibility:"visible","line-cap":"round"},paint:{"line-gap-width":{stops:[[5,1],[12,1],[13,4],[18,12]],base:1.2},"line-color":"#021f3c","line-width":{stops:[[5,.5],[14,1.2]],base:1}},"source-layer":"Road",minzoom:11,type:"line",filter:["all",["==","kind",6],["==","functionclass",3],["==","const_st",1]]},{id:"a5b0205a8e434a64aeda5b3a1b88d73c",maxzoom:17.5,source:"Merge_1",layout:{"line-join":"round",visibility:"visible","line-cap":"round"},paint:{"line-gap-width":{stops:[[5,1],[18,32]],base:1.5},"line-color":"#021f3c","line-width":{stops:[[5,.1],[18,1]],base:1.2}},"source-layer":"Road",minzoom:7,type:"line",filter:["all",["==","kind",6],["==","functionclass",2],["==","const_st",1]]},{id:"15f4cc3d85cb439abde82a7f27358786",maxzoom:17.5,source:"Merge_1",layout:{"line-join":"round",visibility:"visible","line-cap":"round"},"source-layer":"Road",paint:{"line-gap-width":{stops:[[5,1],[18,32]],base:1.5},"line-color":"#021f3c","line-width":{stops:[[5,.1],[18,1]],base:1.2}},minzoom:7,type:"line",filter:["all",["==","kind",6],["==","functionclass",1],["==","const_st",1]]},{id:"8c35b137c86a4e8c90b6c09b6564d516",maxzoom:17.5,source:"Merge_1",layout:{"line-join":"round",visibility:"visible","line-cap":"round"},paint:{"line-color":"#021f3c","line-width":{stops:[[5,1],[12,1],[13,4],[18,12]],base:1.2}},"source-layer":"Road",minzoom:12,type:"line",filter:["all",["==","kind",6],["==","functionclass",5]]},{id:"85bb2e435b624c699ff3ae2564c42cd2",maxzoom:17.5,source:"Merge_1",layout:{"line-join":"round",visibility:"visible","line-cap":"round"},"source-layer":"Road",paint:{"line-color":"#021f3c","line-width":{stops:[[5,1],[12,1],[13,4],[18,12]],base:1.2}},minzoom:9,type:"line",filter:["all",["==","kind",6],["==","functionclass",4],["==","const_st",1]]},{id:"c2df7d8dfa1a48f2ba042a09d77e7979",maxzoom:17.5,source:"Merge_1",layout:{"line-join":"round",visibility:"visible","line-cap":"round"},paint:{"line-color":"#021f3c","line-width":{stops:[[5,1],[12,1],[13,4],[18,12]],base:1.2}},"source-layer":"Road",minzoom:8,type:"line",filter:["all",["==","kind",6],["==","functionclass",3],["==","const_st",1]]},{id:"bd9e81bd980242b39a876e89631a19fe",maxzoom:17.5,source:"Merge_1",layout:{"line-join":"round",visibility:"visible","line-cap":"round"},"source-layer":"Road",paint:{"line-color":"#021f3c","line-width":{stops:[[5,1],[18,24]],base:1.5}},minzoom:5,type:"line",filter:["all",["==","kind",6],["==","functionclass",2],["==","const_st",1]]},{id:"abed30b81cd84d0fa1be3bf3db673382",maxzoom:17.5,source:"Merge_1",layout:{"line-join":"round",visibility:"visible","line-cap":"round"},"source-layer":"Road",paint:{"line-color":"#021f3c","line-width":{stops:[[5,1],[18,24]],base:1.5}},minzoom:5,type:"line",filter:["all",["==","kind",6],["==","functionclass",1],["==","const_st",1]]},{id:"2306c7d10df44dad9dd43a4a597778de",maxzoom:17.5,source:"Merge_1",layout:{"line-join":"round",visibility:"visible","line-cap":"butt"},paint:{"line-gap-width":{stops:[[5,1],[18,24]],base:1.5},"line-color":"#6991a0","line-width":{stops:[[5,.5],[14,1.2]],base:1}},"source-layer":"Road",minzoom:12,type:"line",filter:["all",["==","kind",4],["==","functionclass",5],["==","const_st",1]]},{id:"1c64507e26b94603b7f756895e79bb8e",maxzoom:17.5,source:"Merge_1",layout:{"line-join":"round",visibility:"visible","line-cap":"round"},"source-layer":"Road",paint:{"line-gap-width":{stops:[[5,1],[18,24]],base:1.5},"line-color":"#021f3c","line-width":{stops:[[5,.5],[14,1.2]],base:1}},minzoom:12,type:"line",filter:["all",["==","kind",4],["==","functionclass",5],["==","const_st",1]]},{id:"ef3e624a5d8b4f60acb71e2c8fff0a63",maxzoom:17.5,source:"Merge_1",layout:{"line-join":"round",visibility:"visible","line-cap":"butt"},paint:{"line-gap-width":{stops:[[5,1],[18,24]],base:1.5},"line-color":"#6991a0","line-width":{stops:[[5,.5],[14,1.2]],base:1}},"source-layer":"Road",minzoom:9,type:"line",filter:["all",["==","kind",4],["==","functionclass",4],["==","const_st",1]]},{id:"5009035ea541436a8ec58bab57cbffa7",maxzoom:17.5,source:"Merge_1",layout:{"line-join":"round",visibility:"visible","line-cap":"round"},paint:{"line-gap-width":{stops:[[5,1],[18,24]],base:1.5},"line-color":"#021f3c","line-width":{stops:[[5,.5],[14,1.2]],base:1}},"source-layer":"Road",minzoom:9,type:"line",filter:["all",["==","kind",4],["==","functionclass",4],["==","const_st",1]]},{id:"66f2845d366943db89446d04873a1c7a",maxzoom:17.5,source:"Merge_1",layout:{"line-join":"round",visibility:"visible","line-cap":"butt"},"source-layer":"Road",paint:{"line-gap-width":{stops:[[5,1],[18,24]],base:1.5},"line-color":"#6991a0","line-width":{stops:[[5,.5],[14,1.2]],base:1}},minzoom:9,type:"line",filter:["all",["==","kind",4],["==","functionclass",3],["==","const_st",1]]},{id:"c0fbf04150634b1f81851b24c58568ea",maxzoom:17.5,source:"Merge_1",layout:{"line-join":"round",visibility:"visible","line-cap":"round"},"source-layer":"Road",paint:{"line-gap-width":{stops:[[5,1],[18,24]],base:1.5},"line-color":"#021f3c","line-width":{stops:[[5,.5],[14,1.2]],base:1}},minzoom:9,type:"line",filter:["all",["==","kind",4],["==","functionclass",3],["==","const_st",1]]},{id:"7f473707cba14bf8ac41d146a27f1c72",maxzoom:17.5,source:"Merge_1",layout:{"line-join":"round",visibility:"visible","line-cap":"butt"},"source-layer":"Road",paint:{"line-gap-width":{stops:[[5,1],[18,24]],base:1.5},"line-color":"#6991a0","line-width":{stops:[[5,.1],[18,1]],base:1.2}},minzoom:7,type:"line",filter:["all",["==","kind",4],["==","functionclass",2],["==","const_st",1]]},{id:"20b2c0c9c5ac4be5874f7d2c2679e27c",maxzoom:17.5,source:"Merge_1",layout:{"line-join":"round",visibility:"visible","line-cap":"round"},"source-layer":"Road",paint:{"line-gap-width":{stops:[[5,1],[18,24]],base:1.5},"line-color":"#021f3c","line-width":{stops:[[5,.1],[18,1]],base:1.2}},minzoom:7,type:"line",filter:["all",["==","kind",4],["==","functionclass",2],["==","const_st",1]]},{id:"1da1c4f9e4a74d72ae367849de388cd0",maxzoom:17.5,source:"Merge_1",layout:{"line-join":"round",visibility:"visible","line-cap":"butt"},"source-layer":"Road",paint:{"line-gap-width":{stops:[[5,1],[18,24]],base:1.5},"line-color":"#6991a0","line-width":{stops:[[5,.1],[18,1]],base:1.2}},minzoom:7,type:"line",filter:["all",["==","kind",4],["==","functionclass",1],["==","const_st",1]]},{id:"c517382d37ef4d8d9de6eb27d6945f75",maxzoom:17.5,source:"Merge_1",layout:{"line-join":"round",visibility:"visible","line-cap":"round"},"source-layer":"Road",paint:{"line-gap-width":{stops:[[5,1],[18,24]],base:1.5},"line-color":"#021f3c","line-width":{stops:[[5,.1],[18,1]],base:1.2}},minzoom:7,type:"line",filter:["all",["==","kind",4],["==","functionclass",1],["==","const_st",1]]},{id:"c6db375c52cd4f78bc4f667fd0b8499a",maxzoom:17.5,source:"Merge_1",layout:{"line-join":"round",visibility:"visible","line-cap":"round"},"source-layer":"Road",paint:{"line-color":"#021f3c","line-width":{stops:[[5,1],[18,24]],base:1.5}},minzoom:12,type:"line",filter:["all",["==","kind",4],["==","functionclass",5],["==","const_st",1]]},{id:"82d61d915df742ec9d5eae40254f5413",maxzoom:17.5,source:"Merge_1",layout:{"line-join":"round",visibility:"visible","line-cap":"round"},paint:{"line-color":"#021f3c","line-width":{stops:[[5,1],[18,24]],base:1.5}},"source-layer":"Road",minzoom:9,type:"line",filter:["all",["==","kind",4],["==","functionclass",4],["==","const_st",1]]},{id:"96d63cf0b0de4131acf8dff988a11448",maxzoom:17.5,source:"Merge_1",layout:{"line-join":"round",visibility:"visible","line-cap":"round"},"source-layer":"Road",paint:{"line-color":"#021f3c","line-width":{stops:[[5,1],[18,24]],base:1.5}},minzoom:8,type:"line",filter:["all",["==","kind",4],["==","functionclass",3],["==","const_st",1]]},{id:"5fa12ee5329c40438c8ace0b3a0817fc",maxzoom:17.5,source:"Merge_1",layout:{"line-join":"round",visibility:"visible","line-cap":"round"},paint:{"line-color":"#021f3c","line-width":{stops:[[5,1],[18,24]],base:1.5}},"source-layer":"Road",minzoom:5,type:"line",filter:["all",["==","kind",4],["==","functionclass",2],["==","const_st",1]]},{id:"a34726f3acc24578908a487a4f8db8c8",maxzoom:17.5,source:"Merge_1",layout:{"line-join":"round",visibility:"visible","line-cap":"round"},"source-layer":"Road",paint:{"line-color":"#021f3c","line-width":{stops:[[5,1],[18,24]],base:1.5}},minzoom:5,type:"line",filter:["all",["==","kind",4],["==","functionclass",1],["==","const_st",1]]},{id:"4fe78bceb5a04dda8c6c9c4352a7f228",maxzoom:17.5,source:"Merge_1",layout:{"line-join":"round",visibility:"visible","line-cap":"butt"},paint:{"line-gap-width":{stops:[[5,1],[18,32]],base:1.5},"line-color":"#346778","line-width":{stops:[[5,.1],[18,1]],base:1.2}},"source-layer":"Road",minzoom:12,type:"line",filter:["all",["==","kind",3],["==","functionclass",5],["==","const_st",1]]},{id:"4aed5b5774634e7f8c7d21afead3b6b4",maxzoom:17.5,source:"Merge_1",layout:{"line-join":"round",visibility:"visible","line-cap":"round"},"source-layer":"Road",paint:{"line-gap-width":{stops:[[5,1],[18,32]],base:1.5},"line-color":"#040d17","line-width":{stops:[[5,.1],[18,1]],base:1.2}},minzoom:12,type:"line",filter:["all",["==","kind",3],["==","functionclass",5],["==","const_st",1]]},{id:"45359a4c5da1445a9190f526e2055180",maxzoom:17.5,source:"Merge_1",layout:{"line-join":"round",visibility:"visible","line-cap":"butt"},paint:{"line-gap-width":{stops:[[5,1],[18,32]],base:1.5},"line-color":"#346778","line-width":{stops:[[5,.1],[18,1]],base:1.2}},"source-layer":"Road",minzoom:9,type:"line",filter:["all",["==","kind",3],["==","functionclass",4],["==","const_st",1]]},{id:"60a35de7a11f4da49833a2dc0e437872",maxzoom:17.5,source:"Merge_1",layout:{"line-join":"round",visibility:"visible","line-cap":"round"},paint:{"line-gap-width":{stops:[[5,1],[18,32]],base:1.5},"line-color":"#040d17","line-width":{stops:[[5,.1],[18,1]],base:1.2}},"source-layer":"Road",minzoom:9,type:"line",filter:["all",["==","kind",3],["==","functionclass",4],["==","const_st",1]]},{id:"218cd36200ae47299a39e263cc372335",maxzoom:17.5,source:"Merge_1",layout:{"line-join":"round",visibility:"visible","line-cap":"round"},paint:{"line-gap-width":{stops:[[5,1],[18,32]],base:1.5},"line-color":"#040d17","line-width":{stops:[[5,.1],[18,1]],base:1.2}},"source-layer":"Road",minzoom:8,type:"line",filter:["all",["==","kind",3],["==","functionclass",3],["==","const_st",1]]},{id:"b5833e405ffc424b999b06c65d4f6a91",maxzoom:17.5,source:"Merge_1",layout:{"line-join":"round",visibility:"visible","line-cap":"butt"},paint:{"line-gap-width":{stops:[[5,1],[18,32]],base:1.5},"line-color":"#346778","line-width":{stops:[[5,.1],[18,1]],base:1.2}},"source-layer":"Road",minzoom:8,type:"line",filter:["all",["==","kind",3],["==","functionclass",3],["==","const_st",1]]},{id:"d8d1f912cbb34d17922405c878607850",maxzoom:17.5,source:"Merge_1",layout:{"line-join":"round",visibility:"visible","line-cap":"butt"},paint:{"line-gap-width":{stops:[[5,1],[18,32]],base:1.5},"line-color":"#346778","line-width":{stops:[[5,.1],[18,1]],base:1.2}},"source-layer":"Road",minzoom:7,type:"line",filter:["all",["==","kind",3],["==","functionclass",2],["==","const_st",1]]},{id:"5e0b1148b8604002961985cf77133984",maxzoom:17.5,source:"Merge_1",layout:{"line-join":"round",visibility:"visible","line-cap":"round"},paint:{"line-gap-width":{stops:[[5,1],[18,32]],base:1.5},"line-color":"#040d17","line-width":{stops:[[5,.1],[18,1]],base:1.2}},"source-layer":"Road",minzoom:7,type:"line",filter:["all",["==","kind",3],["==","functionclass",2],["==","const_st",1]]},{id:"cc4a06b1850b450fa8745d8e7b3268a4",maxzoom:17.5,source:"Merge_1",layout:{"line-join":"round",visibility:"visible","line-cap":"butt"},paint:{"line-gap-width":{stops:[[5,1],[18,32]],base:1.5},"line-color":"#346778","line-width":{stops:[[5,.1],[18,1]],base:1.2}},"source-layer":"Road",minzoom:7,type:"line",filter:["all",["==","kind",3],["==","functionclass",1],["==","const_st",1]]},{id:"2d7114fab4ea4ac2909bf33b60d947b1",maxzoom:17.5,source:"Merge_1",layout:{"line-join":"round",visibility:"visible","line-cap":"round"},"source-layer":"Road",paint:{"line-gap-width":{stops:[[5,1],[18,32]],base:1.5},"line-color":"#040d17","line-width":{stops:[[5,.1],[18,1]],base:1.2}},minzoom:7,type:"line",filter:["all",["==","kind",3],["==","functionclass",1],["==","const_st",1]]},{id:"e1a9affc748441ea868425c857c5461b",maxzoom:17.5,source:"Merge_1",layout:{"line-join":"round",visibility:"visible","line-cap":"round"},"source-layer":"Road",paint:{"line-color":"#040d17","line-width":{stops:[[5,1],[18,32]],base:1.5}},minzoom:12,type:"line",filter:["all",["==","kind",3],["==","functionclass",5],["==","const_st",1]]},{id:"105c84b3277a44d6a06847b4c69968b1",maxzoom:17.5,source:"Merge_1",layout:{"line-join":"round",visibility:"visible","line-cap":"round"},paint:{"line-color":"#040d17","line-width":{stops:[[5,1],[18,32]],base:1.5}},"source-layer":"Road",minzoom:9,type:"line",filter:["all",["==","kind",3],["==","functionclass",4],["==","const_st",1]]},{id:"ca25311d010842c18704b6d5d23ae9f7",maxzoom:17.5,source:"Merge_1",layout:{"line-join":"round",visibility:"visible","line-cap":"round"},"source-layer":"Road",paint:{"line-color":"#040d17","line-width":{stops:[[5,1],[18,32]],base:1.5}},minzoom:8,type:"line",filter:["all",["==","kind",3],["==","functionclass",3],["==","const_st",1]]},{id:"38ef965e1c544630802763cb545bfb1c",maxzoom:17.5,source:"Merge_1",layout:{"line-join":"round",visibility:"visible","line-cap":"butt"},paint:{"line-gap-width":{stops:[[5,1],[18,24]],base:1.5},"line-color":"#346778","line-width":{stops:[[5,.5],[17,1]],base:1}},"source-layer":"Road",minzoom:12,type:"line",filter:["all",["==","kind",2],["==","functionclass",5],["==","const_st",1]]},{id:"8c55775474724b919f1eb8c8f32de638",maxzoom:17.5,source:"Merge_1",layout:{"line-join":"round",visibility:"visible","line-cap":"butt"},"source-layer":"Road",paint:{"line-gap-width":{stops:[[5,1],[18,24]],base:1.5},"line-color":"#346778","line-width":{stops:[[5,.1],[18,2]],base:1.2}},minzoom:9,type:"line",filter:["all",["==","kind",2],["==","functionclass",4],["==","const_st",1]]},{id:"de18831fe929416d99d040a252e58f27",maxzoom:17.5,source:"Merge_1",layout:{"line-join":"round",visibility:"visible","line-cap":"round"},"source-layer":"Road",paint:{"line-gap-width":{stops:[[5,1],[18,24]],base:1.5},"line-color":"#040d17","line-width":{stops:[[5,.1],[18,2]],base:1.2}},minzoom:12,type:"line",filter:["all",["==","kind",2],["==","functionclass",5],["==","const_st",1]]},{id:"d8b7149808624235959cf360650eb259",maxzoom:17.5,source:"Merge_1",layout:{"line-join":"round",visibility:"visible","line-cap":"butt"},"source-layer":"Road",paint:{"line-gap-width":{stops:[[5,1],[18,24]],base:1.5},"line-color":"#346778","line-width":{stops:[[5,.1],[18,2]],base:1.2}},minzoom:12,type:"line",filter:["all",["==","kind",2],["==","functionclass",5],["==","const_st",1]]},{id:"82c93011444440deaea5ba79999cc28c",maxzoom:17.5,source:"Merge_1",layout:{"line-join":"round",visibility:"visible","line-cap":"butt"},paint:{"line-gap-width":{stops:[[5,1],[18,24]],base:1.5},"line-color":"#346778","line-width":{stops:[[5,.1],[18,2]],base:1.2}},"source-layer":"Road",minzoom:9,type:"line",filter:["all",["==","kind",2],["==","functionclass",4],["==","const_st",1]]},{id:"2ba37c7bec9446fcb66b2d013a391629",maxzoom:17.5,source:"Merge_1",layout:{"line-join":"round",visibility:"visible","line-cap":"butt"},paint:{"line-gap-width":{stops:[[5,1],[18,24]],base:1.5},"line-color":"#346778","line-width":{stops:[[5,.1],[18,2]],base:1.2}},"source-layer":"Road",minzoom:8,type:"line",filter:["all",["==","kind",2],["==","functionclass",3],["==","const_st",1]]},{id:"3fd74f8716de483297970b025a3451a7",maxzoom:17.5,source:"Merge_1",layout:{"line-join":"round",visibility:"visible","line-cap":"butt"},paint:{"line-gap-width":{stops:[[5,1],[18,24]],base:1.5},"line-color":"#040d17","line-width":{stops:[[5,.1],[18,2]],base:1.2}},"source-layer":"Road",minzoom:9,type:"line",filter:["all",["==","kind",2],["==","functionclass",4],["==","const_st",1]]},{id:"7be90d6e4dc0490985fa37b8137e568e",maxzoom:17.5,source:"Merge_1",layout:{"line-join":"round",visibility:"visible","line-cap":"butt"},"source-layer":"Road",paint:{"line-gap-width":{stops:[[5,1],[18,24]],base:1.5},"line-color":"#346778","line-width":{stops:[[5,.1],[18,2]],base:1.2}},minzoom:8,type:"line",filter:["all",["==","kind",2],["==","functionclass",3],["==","const_st",1]]},{id:"3579c31991a548b29f05dc07666edda2",maxzoom:17.5,source:"Merge_1",layout:{"line-join":"round",visibility:"visible","line-cap":"butt"},paint:{"line-gap-width":{stops:[[5,1],[18,24]],base:1.5},"line-color":"#040d17","line-width":{stops:[[5,.1],[18,2]],base:1.2}},"source-layer":"Road",minzoom:8,type:"line",filter:["all",["==","kind",2],["==","functionclass",3],["==","const_st",1]]},{id:"3fcabfc23ab54c62836901fdd46272aa",maxzoom:17.5,source:"Merge_1",layout:{"line-join":"round",visibility:"visible","line-cap":"butt"},"source-layer":"Road",paint:{"line-gap-width":{stops:[[5,1],[18,24]],base:1.5},"line-color":"#346778","line-width":{stops:[[5,.1],[18,1]],base:1}},minzoom:7,type:"line",filter:["all",["==","kind",2],["==","functionclass",2],["==","const_st",1]]},{id:"ca46344028634d7f85d7211e9d9a81d2",maxzoom:17.5,source:"Merge_1",layout:{"line-join":"round",visibility:"visible","line-cap":"butt"},paint:{"line-gap-width":{stops:[[5,1],[18,24]],base:1.5},"line-color":"#346778","line-width":{stops:[[5,.1],[18,1]],base:1}},"source-layer":"Road",minzoom:7,type:"line",filter:["all",["==","kind",2],["==","functionclass",2],["==","const_st",1]]},{id:"a780bb3d63284e0995bed433ca7be033",maxzoom:17.5,source:"Merge_1",layout:{"line-join":"round",visibility:"visible","line-cap":"butt"},"source-layer":"Road",paint:{"line-gap-width":{stops:[[5,1],[18,24]],base:1.5},"line-color":"#040d17","line-width":{stops:[[5,.1],[18,2]],base:1.2}},minzoom:7,type:"line",filter:["all",["==","kind",2],["==","functionclass",2],["==","const_st",1]]},{id:"40f40bda020e44f5ad0657b0e9c1935c",maxzoom:17.5,source:"Merge_1",layout:{"line-join":"round",visibility:"visible","line-cap":"butt"},"source-layer":"Road",paint:{"line-gap-width":{stops:[[5,1],[18,24]],base:1.5},"line-color":"#346778","line-width":{stops:[[5,.1],[18,2]],base:1.2}},minzoom:7,type:"line",filter:["all",["==","kind",2],["==","functionclass",1],["==","const_st",1]]},{id:"7c651965e2f942dd9e25514d6d8d3567",maxzoom:17.5,source:"Merge_1",layout:{"line-join":"round",visibility:"visible","line-cap":"butt"},"source-layer":"Road",paint:{"line-gap-width":{stops:[[5,1],[18,24]],base:1.5},"line-color":"#346778","line-width":{stops:[[5,.1],[18,2]],base:1.2}},minzoom:7,type:"line",filter:["all",["==","kind",2],["==","functionclass",1],["==","const_st",1]]},{id:"7f4be0754c4a410cbffaa75b070598d9",maxzoom:17.5,source:"Merge_1",layout:{"line-join":"round",visibility:"visible","line-cap":"butt"},paint:{"line-gap-width":{stops:[[5,1],[18,24]],base:1.5},"line-color":"#040d17","line-width":{stops:[[5,.1],[18,2]],base:1.2}},"source-layer":"Road",minzoom:7,type:"line",filter:["all",["==","kind",2],["==","functionclass",1],["==","const_st",1]]},{id:"c9495555f2c04f0fa30d671018e4c7db",maxzoom:17.5,source:"Merge_1",layout:{"line-join":"round",visibility:"visible","line-cap":"round"},paint:{"line-color":"#040d17","line-width":{stops:[[5,.6],[6,1],[18,24]],base:1.5}},"source-layer":"Road",minzoom:12,type:"line",filter:["all",["==","kind",2],["==","functionclass",5],["==","const_st",1]]},{id:"520148a21ac64873924e69be3dae501d",maxzoom:17.5,source:"Merge_1",layout:{"line-join":"round",visibility:"visible","line-cap":"round"},"source-layer":"Road",paint:{"line-color":"#040d17","line-width":{stops:[[5,.6],[6,1],[18,24]],base:1.5}},minzoom:9,type:"line",filter:["all",["==","kind",2],["==","functionclass",4],["==","const_st",1]]},{id:"b2ddab28a6eb46f6b6ead362936f6507",maxzoom:17.5,source:"Merge_1",layout:{"line-join":"round",visibility:"visible","line-cap":"round"},paint:{"line-color":"#040d17","line-width":{stops:[[5,.6],[6,1],[18,24]],base:1.5}},"source-layer":"Road",minzoom:8,type:"line",filter:["all",["==","kind",2],["==","functionclass",3],["==","const_st",1]]},{id:"b8746e5f630a4f21ab7bdc3a7f33e661",maxzoom:17.5,source:"Merge_1",layout:{"line-join":"round",visibility:"visible","line-cap":"round"},"source-layer":"Road",paint:{"line-color":"#040d17","line-width":{stops:[[5,.6],[6,1],[18,24]],base:1.5}},minzoom:12,type:"line",filter:["all",["==","kind",2],["==","functionclass",5],["==","const_st",1]]},{id:"ef58ff3b5880402f86b94028c1f114b7",maxzoom:17.5,source:"Merge_1",layout:{"line-join":"round",visibility:"visible","line-cap":"round"},paint:{"line-color":"#040d17","line-width":{stops:[[5,.6],[6,1],[18,24]],base:1.5}},"source-layer":"Road",minzoom:9,type:"line",filter:["all",["==","kind",2],["==","functionclass",4],["==","const_st",1]]},{id:"d3cd962c4efb4a1f9df29e28d0dc54e4",maxzoom:17.5,source:"Merge_1",layout:{"line-join":"round",visibility:"visible","line-cap":"round"},"source-layer":"Road",paint:{"line-color":"#040d17","line-width":{stops:[[5,.6],[6,1],[18,24]],base:1.5}},minzoom:8,type:"line",filter:["all",["==","kind",2],["==","functionclass",3],["==","const_st",1]]},{id:"bef028000c8a4da88555982977f5aa7f",maxzoom:17.5,source:"Merge_1",layout:{"line-join":"round",visibility:"visible","line-cap":"butt"},"source-layer":"Road",paint:{"line-gap-width":{stops:[[5,1],[18,24]],base:1.5},"line-color":"#346778","line-width":{stops:[[5,.1],[18,2]],base:1.2}},minzoom:12,type:"line",filter:["all",["==","kind",1],["==","functionclass",5],["==","const_st",1]]},{id:"56de02b681ee45328f2ad30f09af5153",maxzoom:17.5,source:"Merge_1",layout:{"line-join":"round",visibility:"visible","line-cap":"butt"},"source-layer":"Road",paint:{"line-gap-width":{stops:[[5,1],[18,24]],base:1.5},"line-color":"#040d17","line-width":{stops:[[5,.1],[18,2]],base:1.2}},minzoom:12,type:"line",filter:["all",["==","kind",1],["==","functionclass",5],["==","const_st",1]]},{id:"1736a3c4d4d347c5a5ea393b8a9e6c7a",maxzoom:17.5,source:"Merge_1",layout:{"line-join":"round",visibility:"visible","line-cap":"butt"},paint:{"line-gap-width":{stops:[[5,1],[18,24]],base:1.5},"line-color":"#346778","line-width":{stops:[[5,.1],[18,2]],base:1.2}},"source-layer":"Road",minzoom:9,type:"line",filter:["all",["==","kind",1],["==","functionclass",4],["==","const_st",1]]},{id:"f046e1fe924947e7a158089e3203a277",maxzoom:17.5,source:"Merge_1",layout:{"line-join":"round",visibility:"visible","line-cap":"butt"},"source-layer":"Road",paint:{"line-gap-width":{stops:[[5,1],[18,24]],base:1.5},"line-color":"#040d17","line-width":{stops:[[5,.1],[18,2]],base:1.2}},minzoom:9,type:"line",filter:["all",["==","kind",1],["==","functionclass",4],["==","const_st",1]]},{id:"241fa6ca73ab4dcfbdfd87a8014ce4d1",maxzoom:17.5,source:"Merge_1",layout:{"line-join":"round",visibility:"visible","line-cap":"butt"},paint:{"line-gap-width":{stops:[[5,1],[18,24]],base:1.5},"line-color":"#346778","line-width":{stops:[[5,.1],[18,2]],base:1.2}},"source-layer":"Road",minzoom:8,type:"line",filter:["all",["==","kind",1],["==","functionclass",3],["==","const_st",1]]},{id:"aa314ee6dbe543dcb2de0fd4d0486480",maxzoom:17.5,source:"Merge_1",layout:{"line-join":"round",visibility:"visible","line-cap":"butt"},paint:{"line-gap-width":{stops:[[5,1],[18,24]],base:1.5},"line-color":"#040d17","line-width":{stops:[[5,.1],[18,2]],base:1.2}},"source-layer":"Road",minzoom:8,type:"line",filter:["all",["==","kind",1],["==","functionclass",3],["==","const_st",1]]},{id:"a2ea583bcc204bbd8c06b5772434cf09",maxzoom:17.5,source:"Merge_1",layout:{"line-join":"round",visibility:"visible","line-cap":"butt"},paint:{"line-gap-width":{stops:[[5,1],[18,24]],base:1.5},"line-color":"#346778","line-width":{stops:[[5,.1],[18,2]],base:1.2}},"source-layer":"Road",minzoom:7,type:"line",filter:["all",["==","kind",1],["==","functionclass",2],["==","const_st",1]]},{id:"9b9ff265354d46c19e0f81af338fdc14",maxzoom:17.5,source:"Merge_1",layout:{"line-join":"round",visibility:"visible","line-cap":"butt"},"source-layer":"Road",paint:{"line-gap-width":{stops:[[5,1],[18,24]],base:1.5},"line-color":"#040d17","line-width":{stops:[[5,.1],[18,2]],base:1.2}},minzoom:7,type:"line",filter:["all",["==","kind",1],["==","functionclass",2],["==","const_st",1]]},{id:"005b114f8f744f31934343246ce275a2",maxzoom:17.5,source:"Merge_1",layout:{"line-join":"round",visibility:"visible","line-cap":"butt"},"source-layer":"Road",paint:{"line-gap-width":{stops:[[5,1],[18,24]],base:1.5},"line-color":"#346778","line-width":{stops:[[5,.1],[18,2]],base:1.2}},minzoom:7,type:"line",filter:["all",["==","kind",1],["==","functionclass",1],["==","const_st",1]]},{id:"1c5fbdcceb7b477e853a3c750d2b0f84",maxzoom:17.5,source:"Merge_1",layout:{"line-join":"round",visibility:"visible","line-cap":"round"},paint:{"line-gap-width":{stops:[[5,1],[18,24]],base:1.5},"line-color":"#040d17","line-width":{stops:[[5,.1],[18,2]],base:1.2}},"source-layer":"Road",minzoom:7,type:"line",filter:["all",["==","kind",1],["==","functionclass",1],["==","const_st",1]]},{id:"9b38f75f2b3d44c498c99007db0ed4d3",maxzoom:17.5,source:"Merge_1",layout:{"line-join":"round",visibility:"visible","line-cap":"round"},paint:{"line-color":"#040d17","line-width":{stops:[[5,1],[18,24]],base:1.5}},"source-layer":"Road",minzoom:12,type:"line",filter:["all",["==","kind",1],["==","functionclass",5],["==","const_st",1]]},{id:"a2e15bb3a38f47a695927f3a42522b43",maxzoom:17.5,source:"Merge_1",layout:{"line-join":"round",visibility:"visible","line-cap":"round"},"source-layer":"Road",paint:{"line-color":"#040d17","line-width":{stops:[[5,1],[18,24]],base:1.5}},minzoom:9,type:"line",filter:["all",["==","kind",1],["==","functionclass",4],["==","const_st",1]]},{id:"4a965aa5b9c2410b8a5c5c6e37f11b0a",maxzoom:17.5,source:"Merge_1",layout:{"line-join":"round",visibility:"visible","line-cap":"round"},paint:{"line-color":"#040d17","line-width":{stops:[[5,1],[18,24]],base:1.5}},"source-layer":"Road",minzoom:8,type:"line",filter:["all",["==","kind",1],["==","functionclass",3],["==","const_st",1]]},{id:"2e36962c92504c6e951e206695d60863",maxzoom:17.5,source:"Merge_1",layout:{"line-join":"round",visibility:"visible","line-cap":"butt"},"source-layer":"Road",paint:{"line-gap-width":{stops:[[5,1],[18,24]],base:1.5},"line-color":"#346778","line-width":{stops:[[5,.5],[18,1]],base:1}},minzoom:12,type:"line",filter:["all",["==","kind",1],["==","functionclass",5]]},{id:"92fd7e2512714680870a5faf344a34bf",maxzoom:17.5,source:"Merge_1",layout:{"line-join":"round",visibility:"visible","line-cap":"butt"},paint:{"line-gap-width":{stops:[[5,1],[18,24]],base:1.5},"line-color":"#346778","line-width":{stops:[[5,.5],[18,1]],base:1}},"source-layer":"Road",minzoom:9,type:"line",filter:["all",["==","kind",1],["==","functionclass",4]]},{id:"839c40829b5e4fa699228c4a2c324ea3",maxzoom:17.5,source:"Merge_1",layout:{"line-join":"round",visibility:"visible","line-cap":"butt"},"source-layer":"Road",paint:{"line-gap-width":{stops:[[5,1],[18,24]],base:1.5},"line-color":"#346778","line-width":{stops:[[5,.5],[18,1]],base:1}},minzoom:8,type:"line",filter:["all",["==","kind",1],["==","functionclass",3]]},{id:"3ac32a16db7d44ee99b24e753d0c54e0",maxzoom:17.5,source:"Merge_1",layout:{"line-join":"round",visibility:"visible","line-cap":"butt"},paint:{"line-gap-width":{stops:[[5,1],[18,24]],base:1.5},"line-color":"#346778","line-width":{stops:[[5,.5],[18,1]],base:1}},"source-layer":"Road",minzoom:7,type:"line",filter:["all",["==","kind",1],["==","functionclass",2]]},{id:"0bb05237742642909c43e9f076592983",maxzoom:17.5,source:"Merge_1",layout:{"line-join":"round",visibility:"visible","line-cap":"butt"},"source-layer":"Road",paint:{"line-gap-width":{stops:[[5,1],[18,24]],base:1.5},"line-color":"#346778","line-width":{stops:[[5,.5],[18,1]],base:1}},minzoom:7,type:"line",filter:["all",["==","kind",1],["==","functionclass",1]]},{id:"aaad28066e5c4a28994a81919eb987ef",maxzoom:17.5,source:"Merge_1",layout:{"line-join":"round",visibility:"visible","line-cap":"round"},paint:{"line-color":"#040d17","line-width":{stops:[[5,1],[18,24]],base:1.5}},"source-layer":"Road",minzoom:12,type:"line",filter:["all",["==","kind",1],["==","functionclass",5]]},{id:"73154fdc688d4bafafdf019516e1a79c",maxzoom:17.5,source:"Merge_1",layout:{"line-join":"round",visibility:"visible","line-cap":"round"},paint:{"line-color":"#040d17","line-width":{stops:[[5,.8],[6,1],[18,24]],base:1.5}},"source-layer":"Road",minzoom:9,type:"line",filter:["all",["==","kind",1],["==","functionclass",4]]},{id:"11d753cb199f4c43afbb015533d218cc",maxzoom:17.5,source:"Merge_1",layout:{"line-join":"round",visibility:"visible","line-cap":"round"},paint:{"line-color":"#040d17","line-width":{stops:[[5,.8],[6,1],[18,24]],base:1.5}},"source-layer":"Road",minzoom:8,type:"line",filter:["all",["==","kind",1],["==","functionclass",3]]},{id:"179015cbcef84bbe8e9a9f842c993e0f",maxzoom:17.5,source:"Zlevel",layout:{"line-join":"round",visibility:"visible","line-cap":"round"},paint:{"line-color":"#346778","line-width":{stops:[[5,1],[18,4]],base:1.2}},"source-layer":"Zlevel",minzoom:14,type:"line",filter:["all",["==","kind",8],[">=","zvalue",1]]},{id:"0e6bdcf44e194f31a8cb318e36ded8ea",maxzoom:17.5,source:"Zlevel",layout:{"line-join":"round",visibility:"visible","line-cap":"round"},"source-layer":"Zlevel",paint:{"line-color":"#040d17","line-width":{stops:[[5,1],[18,4]],base:1.2}},minzoom:14,type:"line",filter:["all",["==","kind",8],[">=","zvalue",1]]},{id:"839f408c5bc442c4a8ce31874e03c31f",maxzoom:17.5,source:"Zlevel",layout:{"line-join":"round",visibility:"visible","line-cap":"butt"},paint:{"line-gap-width":{stops:[[5,1],[12,1],[13,4],[18,12]],base:1.2},"line-color":"#346778","line-width":{stops:[[5,.5],[14,1.2]],base:1}},"source-layer":"Zlevel",minzoom:14,type:"line",filter:["all",["==","kind",7],[">=","zvalue",1]]},{id:"21a80142562f44f7b77e8f661bce177d",maxzoom:17.5,source:"Zlevel",layout:{"line-join":"round",visibility:"visible","line-cap":"round"},paint:{"line-color":"#040d17","line-width":{stops:[[5,1],[12,1],[13,4],[18,12]],base:1.2}},"source-layer":"Zlevel",minzoom:14,type:"line",filter:["all",["==","kind",7],[">=","zvalue",1]]},{id:"66a960ecbeb448efafc0d8ee2613a981",maxzoom:17.5,source:"Zlevel",layout:{"line-join":"round",visibility:"visible","line-cap":"butt"},"source-layer":"Zlevel",paint:{"line-gap-width":{stops:[[12,1],[13,4],[18,12]],base:1.2},"line-color":"#346778","line-width":{stops:[[5,.5],[14,1.2]],base:1}},minzoom:13,type:"line",filter:["all",["==","kind",6],[">=","zvalue",1],["==","functionclass",5]]},{id:"86b3a8789f4e4f689c5fa4c9fa872ae6",maxzoom:17.5,source:"Zlevel",layout:{"line-join":"round",visibility:"visible","line-cap":"butt"},"source-layer":"Zlevel",paint:{"line-gap-width":{stops:[[12,1],[13,4],[18,12]],base:1.2},"line-color":"#346778","line-width":{stops:[[5,.5],[14,1.2]],base:1}},minzoom:13,type:"line",filter:["all",["==","kind",6],[">=","zvalue",1],["==","functionclass",4]]},{id:"e59068e4918142fbb69e634ea923e3a0",maxzoom:17.5,source:"Zlevel",layout:{"line-join":"round",visibility:"visible","line-cap":"butt"},paint:{"line-gap-width":{stops:[[12,1],[13,4],[18,12]],base:1.2},"line-color":"#346778","line-width":{stops:[[5,.5],[14,1.2]],base:1}},"source-layer":"Zlevel",minzoom:13,type:"line",filter:["all",["==","kind",6],[">=","zvalue",1],["==","functionclass",3]]},{id:"d450fe505e4b43bfb0d9da815047dc77",maxzoom:17.5,source:"Zlevel",layout:{"line-join":"round",visibility:"visible","line-cap":"butt"},"source-layer":"Zlevel",paint:{"line-gap-width":{stops:[[12,1],[13,4],[18,12]],base:1.2},"line-color":"#346778","line-width":{stops:[[5,.1],[18,.5]],base:1.2}},minzoom:13,type:"line",filter:["all",["==","kind",6],[">=","zvalue",1],["==","functionclass",2]]},{id:"e1ff466ad81843ee9908d021989534b3",maxzoom:17.5,source:"Zlevel",layout:{"line-join":"round",visibility:"visible","line-cap":"butt"},"source-layer":"Zlevel",paint:{"line-gap-width":{stops:[[12,1],[13,4],[18,12]],base:1.2},"line-color":"#346778","line-width":{stops:[[5,.1],[18,.5]],base:1.2}},minzoom:13,type:"line",filter:["all",["==","kind",6],[">=","zvalue",1],["==","functionclass",1]]},{id:"41c02e1c6f9e4627ba3fe8392c92d79e",maxzoom:17.5,source:"Zlevel",layout:{"line-join":"round",visibility:"visible","line-cap":"round"},paint:{"line-color":"#040d17","line-width":{stops:[[12,1],[13,4],[18,12]],base:1.2}},"source-layer":"Zlevel",minzoom:13,type:"line",filter:["all",["==","kind",6],[">=","zvalue",1],["==","functionclass",5]]},{id:"3e7fbc36ba7b46a9b66c27dec9ee9957",maxzoom:17.5,source:"Zlevel",layout:{"line-join":"round",visibility:"visible","line-cap":"round"},paint:{"line-color":"#040d17","line-width":{stops:[[12,1],[13,4],[18,12]],base:1.2}},"source-layer":"Zlevel",minzoom:13,type:"line",filter:["all",["==","kind",6],[">=","zvalue",1],["==","functionclass",4]]},{id:"90cc7ae7b5714398ab5c9ba33c964d0b",maxzoom:17.5,source:"Zlevel",layout:{"line-join":"round",visibility:"visible","line-cap":"round"},paint:{"line-color":"#040d17","line-width":{stops:[[12,1],[13,4],[18,12]],base:1.2}},"source-layer":"Zlevel",minzoom:13,type:"line",filter:["all",["==","kind",6],[">=","zvalue",1],["==","functionclass",3]]},{id:"55ddae873b82458ea8f74d9459c1cfaf",maxzoom:17.5,source:"Zlevel",layout:{"line-join":"round",visibility:"visible","line-cap":"round"},paint:{"line-color":"#040d17","line-width":{stops:[[5,1],[18,24]],base:1.5}},"source-layer":"Zlevel",minzoom:13,type:"line",filter:["all",["==","kind",6],[">=","zvalue",1],["==","functionclass",2]]},{id:"24f761b3f8ea45429141c86f851c18af",maxzoom:17.5,source:"Zlevel",layout:{"line-join":"round",visibility:"visible","line-cap":"round"},"source-layer":"Zlevel",paint:{"line-color":"#040d17","line-width":{stops:[[5,1],[18,24]],base:1.5}},minzoom:13,type:"line",filter:["all",["==","kind",6],[">=","zvalue",1],["==","functionclass",1]]},{id:"b182776d2b1d449780e616b856cb0d55",maxzoom:17.5,source:"Zlevel",layout:{"line-join":"round",visibility:"visible","line-cap":"butt"},"source-layer":"Zlevel",paint:{"line-gap-width":{stops:[[5,1],[18,24]],base:1.5},"line-color":"#346778","line-width":{stops:[[5,.5],[14,1]],base:1.2}},minzoom:13,type:"line",filter:["all",["==","kind",4],[">=","zvalue",1],["==","functionclass",5]]},{id:"76a273238fde4158986c1ea46a9996a9",maxzoom:17.5,source:"Zlevel",layout:{"line-join":"round",visibility:"visible","line-cap":"butt"},"source-layer":"Zlevel",paint:{"line-gap-width":{stops:[[5,1],[18,24]],base:1.5},"line-color":"#346778","line-width":{stops:[[5,.5],[14,1]],base:1.2}},minzoom:13,type:"line",filter:["all",["==","kind",4],[">=","zvalue",1],["==","functionclass",4]]},{id:"993b75e03f514fe89efb2631b9118c93",maxzoom:17.5,source:"Zlevel",layout:{"line-join":"round",visibility:"visible","line-cap":"butt"},"source-layer":"Zlevel",paint:{"line-gap-width":{stops:[[5,1],[18,24]],base:1.5},"line-color":"#346778","line-width":{stops:[[5,.1],[14,1]],base:1.2}},minzoom:13,type:"line",filter:["all",["==","kind",4],[">=","zvalue",1],["==","functionclass",3]]},{id:"82fef27953c946ad9412506df3c06c18",maxzoom:17.5,source:"Zlevel",layout:{"line-join":"round",visibility:"visible","line-cap":"butt"},"source-layer":"Zlevel",paint:{"line-gap-width":{stops:[[5,1],[18,24]],base:1.5},"line-color":"#346778","line-width":{stops:[[5,.1],[18,1]],base:1.2}},minzoom:13,type:"line",filter:["all",["==","kind",4],[">=","zvalue",1],["==","functionclass",2]]},{id:"c33196a6b33b4f17bfab82b8e01afa69",maxzoom:17.5,source:"Zlevel",layout:{"line-join":"round",visibility:"visible","line-cap":"butt"},paint:{"line-gap-width":{stops:[[5,1],[18,24]],base:1.5},"line-color":"#346778","line-width":{stops:[[5,.1],[18,1]],base:1.2}},"source-layer":"Zlevel",minzoom:13,type:"line",filter:["all",["==","kind",4],[">=","zvalue",1],["==","functionclass",1]]},{id:"8600ec8d13af44388cfe0385d90464b0",maxzoom:17.5,source:"Zlevel",layout:{"line-join":"round",visibility:"visible","line-cap":"round"},"source-layer":"Zlevel",paint:{"line-color":"#040d17","line-width":{stops:[[5,1],[18,24]],base:1.5}},minzoom:13,type:"line",filter:["all",["==","kind",4],[">=","zvalue",1],["==","functionclass",5]]},{id:"b2fac686f14342338e9e636da0abea9c",maxzoom:17.5,source:"Zlevel",layout:{"line-join":"round",visibility:"visible","line-cap":"round"},"source-layer":"Zlevel",paint:{"line-color":"#040d17","line-width":{stops:[[5,1],[18,24]],base:1.5}},minzoom:13,type:"line",filter:["all",["==","kind",4],[">=","zvalue",1],["==","functionclass",4]]},{id:"3f985978a70d4c9595b74ae02134e0f1",maxzoom:17.5,source:"Zlevel",layout:{"line-join":"round",visibility:"visible","line-cap":"round"},"source-layer":"Zlevel",paint:{"line-color":"#040d17","line-width":{stops:[[5,1],[18,24]],base:1.5}},minzoom:13,type:"line",filter:["all",["==","kind",4],[">=","zvalue",1],["==","functionclass",3]]},{id:"e0b458aa0a8940dda164e1e757517e83",maxzoom:17.5,source:"Zlevel",layout:{"line-join":"round",visibility:"visible","line-cap":"round"},"source-layer":"Zlevel",paint:{"line-color":"#040d17","line-width":{stops:[[5,1],[18,24]],base:1.5}},minzoom:13,type:"line",filter:["all",["==","kind",4],[">=","zvalue",1],["==","functionclass",2]]},{id:"a826dcb422c945c5adfc761a17d49c47",maxzoom:17.5,source:"Zlevel",layout:{"line-join":"round",visibility:"visible","line-cap":"round"},"source-layer":"Zlevel",paint:{"line-color":"#040d17","line-width":{stops:[[5,1],[18,24]],base:1.5}},minzoom:13,type:"line",filter:["all",["==","kind",4],[">=","zvalue",1],["==","functionclass",1]]},{id:"a994e2676fae46dd9da603952a4dd9e3",maxzoom:17.5,source:"Zlevel",layout:{"line-join":"round",visibility:"visible","line-cap":"butt"},paint:{"line-gap-width":{stops:[[5,1],[18,32]],base:1.5},"line-color":"#346778","line-width":{stops:[[5,.1],[18,.5]],base:1.2}},"source-layer":"Zlevel",minzoom:13,type:"line",filter:["all",["==","kind",3],[">=","zvalue",1],["==","functionclass",5]]},{id:"a189077d3ecc44b9815c30c80eaac163",maxzoom:17.5,source:"Zlevel",layout:{"line-join":"round",visibility:"visible","line-cap":"butt"},"source-layer":"Zlevel",paint:{"line-gap-width":{stops:[[5,1],[18,32]],base:1.5},"line-color":"#346778","line-width":{stops:[[5,.1],[18,.5]],base:1.2}},minzoom:13,type:"line",filter:["all",["==","kind",3],[">=","zvalue",1],["==","functionclass",4]]},{id:"f0cd52d32a354ebfb263311a332ddf26",maxzoom:17.5,source:"Zlevel",layout:{"line-join":"round",visibility:"visible","line-cap":"butt"},"source-layer":"Zlevel",paint:{"line-gap-width":{stops:[[5,1],[18,32]],base:1.5},"line-color":"#346778","line-width":{stops:[[5,.1],[18,.5]],base:1.2}},minzoom:13,type:"line",filter:["all",["==","kind",3],[">=","zvalue",1],["==","functionclass",3]]},{id:"de59844be49947cdb6213cb6d7ed0f2f",maxzoom:17.5,source:"Zlevel",layout:{"line-join":"round",visibility:"visible","line-cap":"butt"},"source-layer":"Zlevel",paint:{"line-gap-width":{stops:[[5,1],[18,32]],base:1.5},"line-color":"#346778","line-width":{stops:[[5,.1],[18,.5]],base:1.2}},minzoom:13,type:"line",filter:["all",["==","kind",3],[">=","zvalue",1],["==","functionclass",2]]},{id:"e7f708d7801641599e4541e113a4d26d",maxzoom:17.5,source:"Zlevel",layout:{"line-join":"round",visibility:"visible","line-cap":"butt"},paint:{"line-gap-width":{stops:[[5,1],[18,32]],base:1.5},"line-color":"#346778","line-width":{stops:[[5,.1],[18,.5]],base:1.2}},"source-layer":"Zlevel",minzoom:13,type:"line",filter:["all",["==","kind",3],[">=","zvalue",1],["==","functionclass",1]]},{id:"1e469eeb4b064f2b8db25468ab37a934",maxzoom:17.5,source:"Zlevel",layout:{"line-join":"round",visibility:"visible","line-cap":"round"},"source-layer":"Zlevel",paint:{"line-color":"#040d17","line-width":{stops:[[5,1],[18,32]],base:1.5}},minzoom:13,type:"line",filter:["all",["==","kind",3],[">=","zvalue",1],["==","functionclass",5]]},{id:"ebbd0a2b5bb74e11aa2f57373b153810",maxzoom:17.5,source:"Zlevel",layout:{"line-join":"round",visibility:"visible","line-cap":"round"},paint:{"line-color":"#040d17","line-width":{stops:[[5,1],[18,32]],base:1.5}},"source-layer":"Zlevel",minzoom:13,type:"line",filter:["all",["==","kind",3],[">=","zvalue",1],["==","functionclass",4]]},{id:"51a3213618154b668d108466dd31d046",maxzoom:17.5,source:"Zlevel",layout:{"line-join":"round",visibility:"visible","line-cap":"round"},paint:{"line-color":"#040d17","line-width":{stops:[[5,1],[18,32]],base:1.5}},"source-layer":"Zlevel",minzoom:13,type:"line",filter:["all",["==","kind",3],[">=","zvalue",1],["==","functionclass",3]]},{id:"805324a24eaf435fa97fc0dc740bb35f",maxzoom:17.5,source:"Zlevel",layout:{"line-join":"round",visibility:"visible","line-cap":"round"},paint:{"line-color":"#040d17","line-width":{stops:[[5,1],[18,32]],base:1.5}},"source-layer":"Zlevel",minzoom:13,type:"line",filter:["all",["==","kind",3],[">=","zvalue",1],["==","functionclass",2]]},{id:"948cfce670114f789c2f6be48d86d129",maxzoom:17.5,source:"Zlevel",layout:{"line-join":"round",visibility:"visible","line-cap":"round"},paint:{"line-color":"#040d17","line-width":{stops:[[5,1],[18,32]],base:1.5}},"source-layer":"Zlevel",minzoom:13,type:"line",filter:["all",["==","kind",3],[">=","zvalue",1],["==","functionclass",1]]},{id:"0175be44739146e7a6ed54fb13ddfce4",maxzoom:17.5,source:"Zlevel",layout:{"line-join":"round",visibility:"visible","line-cap":"butt"},"source-layer":"Zlevel",paint:{"line-gap-width":{stops:[[5,1],[18,24]],base:1.5},"line-color":"#346778","line-width":{stops:[[5,.1],[18,1]],base:1.2}},minzoom:13,type:"line",filter:["all",["==","kind",2],[">=","zvalue",1],["==","functionclass",5]]},{id:"289c4f4c473842279879cdaee0e8baf2",maxzoom:17.5,source:"Zlevel",layout:{"line-join":"round",visibility:"visible","line-cap":"butt"},"source-layer":"Zlevel",paint:{"line-gap-width":{stops:[[5,1],[18,24]],base:1.5},"line-color":"#346778","line-width":{stops:[[5,.1],[18,1]],base:1.2}},minzoom:13,type:"line",filter:["all",["==","kind",2],[">=","zvalue",1],["==","functionclass",4]]},{id:"bf9dcd66d0ec49bab6a90340720a8904",maxzoom:17.5,source:"Zlevel",layout:{"line-join":"round",visibility:"visible","line-cap":"butt"},paint:{"line-gap-width":{stops:[[5,1],[18,24]],base:1.5},"line-color":"#346778","line-width":{stops:[[5,.1],[18,1]],base:1.2}},"source-layer":"Zlevel",minzoom:13,type:"line",filter:["all",["==","kind",2],[">=","zvalue",1],["==","functionclass",3]]},{id:"b51f05530a7842f0b1d9d5c32fe90b3d",maxzoom:17.5,source:"Zlevel",layout:{"line-join":"round",visibility:"visible","line-cap":"butt"},"source-layer":"Zlevel",paint:{"line-gap-width":{stops:[[5,1],[18,24]],base:1.5},"line-color":"#346778","line-width":{stops:[[5,.1],[18,1]],base:1.2}},minzoom:13,type:"line",filter:["all",["==","kind",2],[">=","zvalue",1],["==","functionclass",2]]},{id:"31d8f037839a40b0bf8de49216f56285",maxzoom:17.5,source:"Zlevel",layout:{"line-join":"round",visibility:"visible","line-cap":"butt"},"source-layer":"Zlevel",paint:{"line-gap-width":{stops:[[5,1],[18,24]],base:1.5},"line-color":"#346778","line-width":{stops:[[5,.1],[18,1]],base:1.2}},minzoom:13,type:"line",filter:["all",["==","kind",2],[">=","zvalue",1],["==","functionclass",1]]},{id:"2df71c84d2b640e0ab862f428f1e74e1",maxzoom:17.5,source:"Zlevel",layout:{"line-join":"round",visibility:"visible","line-cap":"butt"},paint:{"line-gap-width":{stops:[[5,1],[18,24]],base:1.5},"line-color":"#346778","line-width":{stops:[[5,.1],[18,1]],base:1.2}},"source-layer":"Zlevel",minzoom:13,type:"line",filter:["all",["==","kind",2],[">=","zvalue",1]]},{id:"9c4da0148c6b497fab07d5955c7cb537",maxzoom:17.5,source:"Zlevel",layout:{"line-join":"round",visibility:"visible","line-cap":"round"},paint:{"line-color":"#040d17","line-width":{stops:[[5,1],[18,24]],base:1.5}},"source-layer":"Zlevel",minzoom:13,type:"line",filter:["all",["==","kind",2],[">=","zvalue",1],["==","functionclass",5]]},{id:"3292571d1feb4d47be1bfc63455d6d12",maxzoom:17.5,source:"Zlevel",layout:{"line-join":"round",visibility:"visible","line-cap":"round"},"source-layer":"Zlevel",paint:{"line-color":"#040d17","line-width":{stops:[[5,1],[18,24]],base:1.5}},minzoom:13,type:"line",filter:["all",["==","kind",2],[">=","zvalue",1],["==","functionclass",4]]},{id:"56c01472ef6f45e7bdd8c6154067a0fe",maxzoom:17.5,source:"Zlevel",layout:{"line-join":"round",visibility:"visible","line-cap":"round"},"source-layer":"Zlevel",paint:{"line-color":"#040d17","line-width":{stops:[[5,1],[18,24]],base:1.5}},minzoom:13,type:"line",filter:["all",["==","kind",2],[">=","zvalue",1],["==","functionclass",3]]},{id:"7423c83432a5495294d58bf0a6e976b2",maxzoom:17.5,source:"Zlevel",layout:{"line-join":"round",visibility:"visible","line-cap":"round"},"source-layer":"Zlevel",paint:{"line-color":"#040d17","line-width":{stops:[[5,1],[18,24]],base:1.5}},minzoom:13,type:"line",filter:["all",["==","kind",2],[">=","zvalue",1],["==","functionclass",2]]},{id:"8110443b105542069bb441935125038e",maxzoom:17.5,source:"Zlevel",layout:{"line-join":"round",visibility:"visible","line-cap":"round"},"source-layer":"Zlevel",paint:{"line-color":"#040d17","line-width":{stops:[[5,1],[18,24]],base:1.5}},minzoom:13,type:"line",filter:["all",["==","kind",2],[">=","zvalue",1],["==","functionclass",1]]},{id:"ea0ea76889484882a1422e6bf2f32560",maxzoom:17.5,source:"Zlevel",layout:{"line-join":"round",visibility:"visible","line-cap":"round"},"source-layer":"Zlevel",paint:{"line-color":"#040d17","line-width":{stops:[[5,1],[18,24]],base:1.5}},minzoom:13,type:"line",filter:["all",["==","kind",2],[">=","zvalue",1]]},{id:"24ee6e618a0540af8480a4503c52495d",maxzoom:17.5,source:"Zlevel",layout:{"line-join":"round",visibility:"visible","line-cap":"butt"},paint:{"line-gap-width":{stops:[[5,1],[18,24]],base:1.5},"line-color":"#346778","line-width":{stops:[[5,.1],[18,1]],base:1.2}},"source-layer":"Zlevel",minzoom:13,type:"line",filter:["all",["==","kind",1],[">=","zvalue",1],["==","functionclass",5]]},{id:"53e3ea2edb2841dca567d00936cdf486",maxzoom:17.5,source:"Zlevel",layout:{"line-join":"round",visibility:"visible","line-cap":"butt"},"source-layer":"Zlevel",paint:{"line-gap-width":{stops:[[5,1],[18,24]],base:1.5},"line-color":"#346778","line-width":{stops:[[5,.1],[18,1]],base:1.2}},minzoom:13,type:"line",filter:["all",["==","kind",1],[">=","zvalue",1],["==","functionclass",4]]},{id:"c181098b14284b15b537e3d14bb46803",maxzoom:17.5,source:"Zlevel",layout:{"line-join":"round",visibility:"visible","line-cap":"butt"},paint:{"line-gap-width":{stops:[[5,1],[18,24]],base:1.5},"line-color":"#346778","line-width":{stops:[[5,.1],[18,1]],base:1.2}},"source-layer":"Zlevel",minzoom:13,type:"line",filter:["all",["==","kind",1],[">=","zvalue",1],["==","functionclass",3]]},{id:"5ab1a3656bc04957ab2a5eda89a9eed1",maxzoom:17.5,source:"Zlevel",layout:{"line-join":"round",visibility:"visible","line-cap":"butt"},paint:{"line-gap-width":{stops:[[5,1],[18,24]],base:1.5},"line-color":"#346778","line-width":{stops:[[5,.5],[18,1]],base:1}},"source-layer":"Zlevel",minzoom:13,type:"line",filter:["all",["==","kind",1],[">=","zvalue",1]]},{id:"a234511f83464c0591df2862072f8d3a",maxzoom:17.5,source:"Zlevel",layout:{"line-join":"round",visibility:"visible","line-cap":"round"},"source-layer":"Zlevel",paint:{"line-color":"#040d17","line-width":{stops:[[5,1],[18,24]],base:1.5}},minzoom:13,type:"line",filter:["all",["==","kind",1],[">=","zvalue",1],["==","functionclass",5]]},{id:"8afb8c2421d9491796be3bff4733277f",maxzoom:17.5,source:"Zlevel",layout:{"line-join":"round",visibility:"visible","line-cap":"round"},"source-layer":"Zlevel",paint:{"line-color":"#040d17","line-width":{stops:[[5,1],[18,24]],base:1.5}},minzoom:13,type:"line",filter:["all",["==","kind",1],[">=","zvalue",1],["==","functionclass",4]]},{id:"6448ef04be114382a44024fd563cbef4",maxzoom:17.5,source:"Zlevel",layout:{"line-join":"round",visibility:"visible","line-cap":"round"},paint:{"line-color":"#040d17","line-width":{stops:[[5,1],[18,24]],base:1.5}},"source-layer":"Zlevel",minzoom:13,type:"line",filter:["all",["==","kind",1],[">=","zvalue",1],["==","functionclass",3]]},{id:"eeb81fdbe5a042a6833b458a1be529a0",maxzoom:17.5,source:"Zlevel",layout:{"line-join":"round",visibility:"visible","line-cap":"round"},"source-layer":"Zlevel",paint:{"line-color":"#040d17","line-width":{stops:[[5,1],[18,24]],base:1.5}},minzoom:13,type:"line",filter:["all",["==","kind",1],[">=","zvalue",1],["==","functionclass",2]]},{id:"5becc429dbcf4dd5bd32052db6677170",maxzoom:17.5,source:"Zlevel",layout:{"line-join":"round",visibility:"visible","line-cap":"round"},"source-layer":"Zlevel",paint:{"line-color":"#040d17","line-width":{stops:[[5,1],[18,24]],base:1.5}},minzoom:13,type:"line",filter:["all",["==","kind",1],[">=","zvalue",1],["==","functionclass",1]]},{id:"2d5a988186db4a4a9788bf243a760535",maxzoom:17.5,source:"Zlevel",layout:{"line-join":"round",visibility:"visible","line-cap":"round"},"source-layer":"Zlevel",paint:{"line-color":"#040d17","line-width":{stops:[[5,1],[18,24]],base:1.5}},minzoom:13,type:"line",filter:["all",["==","kind",1],[">=","zvalue",1]]},{id:"448712e8119d4ac8ac605bceddc8d981",maxzoom:16,source:"Buildingmore",layout:{visibility:"visible"},paint:{"fill-color":"#0c3755","fill-opacity":1},"source-layer":"Buildingmore",minzoom:14,type:"fill"},{id:"c1af11fdf28944509f0ff27d77a43ca3",maxzoom:17.5,source:"Buildingmore",layout:{visibility:"visible"},paint:{"fill-extrusion-color":"#274a73","fill-extrusion-translate-anchor":"map","fill-extrusion-base":0,"fill-extrusion-opacity":.3,"fill-extrusion-translate":[0,0],"fill-extrusion-height":{property:"levels",type:"identity"}},"source-layer":"Buildingmore",minzoom:16,type:"fill-extrusion"},{id:"99584a40b32941668796a49589c84323",maxzoom:17.5,source:"Merge_1",layout:{"text-size":11,visibility:"visible","symbol-avoid-edges":!0,"text-field":"{name_zh}","text-font":["REGULAR"],"symbol-placement":"line"},"source-layer":"Road",paint:{"text-halo-color":"#ffffff","text-halo-width":1,"text-color":"#888888","icon-color":"#ff0000"},minzoom:10,type:"symbol",filter:["all",["==","kind",13]]},{id:"c19c6126ee1f412ab449c1424c50c43d",maxzoom:17.5,source:"Merge_1",layout:{"text-size":11,"symbol-avoid-edges":!0,visibility:"visible","text-field":"{name_zh}","text-font":["REGULAR"],"symbol-placement":"line"},paint:{"text-halo-color":"#01070f","text-halo-width":1,"text-color":"#888888","icon-color":"#ff0000"},"source-layer":"Road",minzoom:15,type:"symbol",filter:["all",["==","kind",10]]},{id:"2af52dd1a94d4416a87e1c6341825e3a",maxzoom:17.5,source:"Merge_1",layout:{"text-size":11,"symbol-avoid-edges":!0,visibility:"visible","text-field":"{name_zh}","text-font":["REGULAR"],"symbol-placement":"line"},"source-layer":"Road",paint:{"text-halo-color":"#01070f","text-color":"#888888","text-halo-width":1,"icon-color":"#ff0000"},minzoom:15,type:"symbol",filter:["all",["==","kind",9]]},{id:"2d268a751c99448c818ca295b40ca559",maxzoom:17.5,source:"Merge_1",layout:{"text-size":{stops:[[10,10],[18,14]],base:1},"symbol-avoid-edges":!0,visibility:"visible","text-field":"{name_zh}","text-font":["REGULAR"],"symbol-placement":"line"},"source-layer":"Road",paint:{"text-halo-color":"#01070f","text-color":"#888888","text-halo-width":1,"icon-color":"#ff0000"},minzoom:11,type:"symbol",filter:["all",["==","kind",4],["==","const_st",1]]},{id:"26f7d9efe28c418f9367caadd1dc006f",maxzoom:17.5,source:"Merge_1",layout:{"text-size":{stops:[[10,10],[18,14]],base:1},"symbol-avoid-edges":!0,visibility:"visible","text-field":"{name_zh}","text-font":["REGULAR"],"symbol-placement":"line"},"source-layer":"Road",paint:{"text-halo-color":"#01070f","text-color":"#888888","text-halo-width":1,"icon-color":"#ff0000"},minzoom:11,type:"symbol",filter:["all",["==","kind",3],["==","const_st",1]]},{id:"490427bbe40245ff9d4da7c6fcedc3c2",maxzoom:17.5,source:"Merge_1",layout:{"text-size":{stops:[[10,10],[18,14]],base:1},visibility:"visible","symbol-avoid-edges":!0,"text-field":"{name_zh}","text-ignore-placement":!1,"text-allow-overlap":!1,"text-font":["BOLD"],"symbol-placement":"line"},paint:{"text-halo-color":"#01070f","text-color":"#888888","text-halo-width":1,"icon-color":"#ff0000"},"source-layer":"Road",minzoom:10,type:"symbol",filter:["all",["==","kind",2],["==","const_st",1]]},{id:"39645c6113b0423394d987545ba7ab95",maxzoom:10,source:"Merge_1",layout:{"text-size":12,"icon-image":"circle-red-11","text-pitch-alignment":"viewport","symbol-avoid-edges":!1,visibility:"visible","text-field":"{name_zh}","text-rotation-alignment":"viewport","text-ignore-placement":!1,"text-allow-overlap":!1,"text-anchor":"bottom","text-font":["REGULAR"],"icon-size":.8,"text-offset":[0,-.3]},paint:{"text-halo-color":"#000202","text-halo-width":.5,"text-color":"#8f8f8f","icon-color":"#ff0000"},"source-layer":"Adminflag",minzoom:2,type:"symbol",filter:["all",["in","capital",1,2],["!in","name_zh","香港","澳門","天津"]]},{id:"1ea68acfcc084795b6f122342c4f16a6",maxzoom:10,source:"Merge_1",layout:{"text-size":12,"icon-image":"circle-red-11","text-pitch-alignment":"viewport",visibility:"visible","symbol-avoid-edges":!1,"text-field":"{name_zh}","text-ignore-placement":!1,"text-rotation-alignment":"viewport","text-allow-overlap":!1,"text-anchor":"left","text-font":["REGULAR"],"icon-size":.8,"text-offset":[-2.5,0]},"source-layer":"Adminflag",paint:{"text-halo-color":"#000202","text-color":"#8f8f8f","text-halo-width":.5,"icon-color":"#ff0000"},minzoom:2,type:"symbol",filter:["all",["in","capital",1,2],["==","name_zh","天津"]]},{id:"25d8342c55274710a06c7ac464c9f0b7",maxzoom:6,source:"Merge_1",layout:{"text-size":12,"icon-image":"star-11","text-pitch-alignment":"viewport","symbol-avoid-edges":!1,visibility:"visible","text-field":"{name_zh}","text-rotation-alignment":"viewport","text-anchor":"bottom","text-font":["REGULAR"],"icon-size":1.2,"text-offset":[0,-.3]},"source-layer":"Adminflag",paint:{"icon-halo-color":"#d0021b","text-halo-color":"#000202","text-halo-width":1,"text-color":"#808080","icon-halo-width":10,"icon-color":"#ff0000"},minzoom:2,type:"symbol",filter:["all",["in","capital",1]]},{id:"40cea26b72f245ff9ccc1180c2824fc0",maxzoom:8.5,source:"Merge_1",layout:{"text-size":12,"text-pitch-alignment":"viewport",visibility:"visible","symbol-avoid-edges":!1,"text-field":"{name_zh}","text-rotation-alignment":"viewport","text-font":["REGULAR"]},"source-layer":"Worldannotation",paint:{"text-halo-color":"#000202","text-halo-width":1,"text-color":"#808080","icon-color":"#ff0000"},minzoom:2,type:"symbol",filter:["all",["==","kind","405002"]]},{id:"092b6ab59c5b410a9045c6baacedff37",maxzoom:8.5,source:"Merge_1",layout:{"text-size":20,"text-pitch-alignment":"viewport",visibility:"visible","symbol-avoid-edges":!1,"text-field":"{name_zh}","text-rotation-alignment":"viewport","text-font":["REGULAR"]},"source-layer":"Worldannotation",paint:{"text-halo-color":"#000202","text-halo-width":1,"text-color":"#808080","icon-color":"#ff0000"},minzoom:2,type:"symbol",filter:["all",["==","kind","405003"]]}]}}},isE6:function(e,t){},isgN:function(e,t){},mXrg:function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{attrs:{id:"app"}},[i("router-view")],1)},o=[],r={render:n,staticRenderFns:o};t.a=r},msf5:function(e,t,i){"use strict";function n(e){i("Rge8")}var o=i("BvG+"),r=i("MctG"),a=i("VU/8"),s=n,l=a(o.a,r.a,!1,s,"data-v-e647647c",null);t.a=l.exports},pM75:function(e,t){},pNE5:function(e,t,i){"use strict";function n(e){i("6zZ1")}var o=i("H5L0"),r=i("QfIk"),a=i("VU/8"),s=n,l=a(o.a,r.a,!1,s,"data-v-671f332a",null);t.a=l.exports},qunJ:function(e,t){},sPtR:function(e,t){},xJD8:function(e,t,i){"use strict";t.a={name:"app"}},xyVL:function(e,t,i){"use strict";function n(e){i("sPtR")}var o=i("Jd8T"),r=i("SMzI"),a=i("VU/8"),s=n,l=a(o.a,r.a,!1,s,"data-v-672276d9",null);t.a=l.exports},ylrw:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.4b9b782b9994e8fded03.js.map